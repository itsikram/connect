/*! For license information please see main.c015ef81.js.LICENSE.txt */
(()=>{var e={97:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(9713),o=n(888),a=n(8726);function i(e){if((0,a.A)(1,arguments),!(0,r.default)(e)&&"number"!==typeof e)return!1;var t=(0,o.default)(e);return!isNaN(Number(t))}},147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},216:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(888),o=n(618),a=n(8726);function i(e){return(0,a.A)(1,arguments),(0,o.default)(e,{weekStartsOn:1})}function s(e){(0,a.A)(1,arguments);var t=function(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=t.getFullYear(),o=new Date(0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);var s=i(o),u=new Date(0);u.setFullYear(n,0,4),u.setHours(0,0,0,0);var l=i(u);return t.getTime()>=s.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),i(n)}var u=6048e5;function l(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=i(t).getTime()-s(t).getTime();return Math.round(n/u)+1}},219:(e,t,n)=>{"use strict";var r=n(3763),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?i:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=i;var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var o=h(n);o&&o!==p&&e(t,o,r)}var i=c(n);d&&(i=i.concat(d(n)));for(var s=u(t),m=u(n),v=0;v<i.length;++v){var g=i[v];if(!a[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=f(n,g);try{l(t,g,y)}catch(b){}}}}return t}},227:(e,t,n)=>{"use strict";var r=n(6545).F.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,n,a){if("function"===typeof n)return e(t,null,n);n||(n={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.apply(this,r)}}}(a||o);var i=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||c()},l=t._writableState&&t._writableState.finished,c=function(){s=!1,l=!0,i||a.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){i=!1,d=!0,s||a.call(t)},h=function(e){a.call(t,e)},p=function(){var e;return i&&!d?(t._readableState&&t._readableState.ended||(e=new r),a.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new r),a.call(t,e)):void 0},m=function(){t.req.on("finish",c)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",c),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",f),t.on("finish",c),!1!==n.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",p)}}},364:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const o=function(e,t,n){var o,a=r[e];return o="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function a(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var i={date:a({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:a({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:a({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var s={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function u(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):o;r=e.formattingValues[a]||e.formattingValues[o]}else{var i=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[i]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function l(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;var i,s=a[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(u)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(u,(function(e){return e.test(s)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(u,(function(e){return e.test(s)}));return i=e.valueCallback?e.valueCallback(l):l,{value:i=n.valueCallback?n.valueCallback(i):i,rest:t.slice(s.length)}}}var c;const d={code:"en-US",formatDistance:o,formatLong:i,formatRelative:function(e,t,n,r){return s[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:u({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:u({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:u({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:u({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:u({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(c={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(c.matchPattern);if(!n)return null;var r=n[0],o=e.match(c.parsePattern);if(!o)return null;var a=c.valueCallback?c.valueCallback(o[0]):o[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(r.length)}}),era:l({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:l({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},486:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5027),o=n(8726),a=n(6191);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.A)(t);return(0,r.default)(e,-n)}},537:(e,t,n)=>{"use strict";var r;var o=n(6545).F,a=o.ERR_MISSING_ARGS,i=o.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var c,d=function(e){return e.length?"function"!==typeof e[e.length-1]?s:e.pop():s}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var f=t.map((function(e,o){var a=o<t.length-1;return function(e,t,o,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(a);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n(227)),r(e,{readable:t,writable:o},(function(e){if(e)return a(e);s=!0,a()}));var u=!1;return function(t){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void a(t||new i("pipe"))}}(e,a,o>0,(function(e){c||(c=e),e&&f.forEach(u),a||(f.forEach(u),d(c))}))}));return t.reduce(l)}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},618:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(888),o=n(6191),a=n(8726),i=n(8171);function s(e,t){var n,s,u,l,c,d,f,h;(0,a.A)(1,arguments);var p=(0,i.q)(),m=(0,o.A)(null!==(n=null!==(s=null!==(u=null!==(l=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==l?l:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==u?u:p.weekStartsOn)&&void 0!==s?s:null===(f=p.locale)||void 0===f||null===(h=f.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,r.default)(e),g=v.getDay(),y=(g<m?7:0)+g-m;return v.setDate(v.getDate()-y),v.setHours(0,0,0,0),v}},743:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){return(0,o.A)(1,arguments),(0,r.default)(e).getDay()}},745:()=>{},776:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(888),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e),i=(0,r.A)(t);return n.setSeconds(i),n}},802:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}},816:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(2284);function o(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},888:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2284),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,r.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},917:(e,t,n)=>{"use strict";var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.ZX=function(e){document.body.classList.add("react-confirm-alert-body-element"),function(){if(document.getElementById("react-confirm-alert-firm-svg"))return;var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"feGaussianBlur");t.setAttribute("stdDeviation","0.3");var n=document.createElementNS(e,"filter");n.setAttribute("id","gaussian-blur"),n.appendChild(t);var r=document.createElementNS(e,"svg");r.setAttribute("id","react-confirm-alert-firm-svg"),r.setAttribute("class","react-confirm-alert-svg"),r.appendChild(n),document.body.appendChild(r)}(),function(e){var t=document.getElementById(e.targetId||m);e.targetId&&!t&&console.error("React Confirm Alert:","Can not get element id (#"+e.targetId+")");t||(document.body.children[0].classList.add("react-confirm-alert-blur"),(t=document.createElement("div")).id=m,document.body.appendChild(t)),(p=(0,c.createRoot)(t)).render(u.default.createElement(h,e))}(e)};var s=n(5043),u=d(s),l=d(n(5173)),c=n(4391);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=(o=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleClickButton=function(e){e.onClick&&e.onClick(),r.close()},r.handleClickOverlay=function(e){var t=r.props,n=t.closeOnClickOutside,o=t.onClickOutside,a=e.target===r.overlay;n&&a&&(o(),r.close()),e.stopPropagation()},r.close=function(){var e=r.props.afterClose;document.body.classList.remove("react-confirm-alert-body-element"),function(e){var t=document.getElementById(e.targetId||m);t&&p.unmount(t)}(r.props),function(e){var t=document.getElementById("react-confirm-alert-firm-svg");t&&t.parentNode.removeChild(t);document.body.children[0].classList.remove("react-confirm-alert-blur"),e()}(e)},r.keyboard=function(e){var t=r.props,n=t.closeOnEscape,o=t.onKeypressEscape,a=t.onkeyPress,i=t.keyCodeForClose,s=e.keyCode,u=27===s;i.includes(s)&&r.close(),n&&u&&(o(e),r.close()),a&&a()},r.componentDidMount=function(){document.addEventListener("keydown",r.keyboard,!1)},r.componentWillUnmount=function(){document.removeEventListener("keydown",r.keyboard,!1),r.props.willUnmount()},r.renderCustomUI=function(){var e=r.props,t=e.title,n=e.message,o=e.buttons;return(0,e.customUI)({title:t,message:n,buttons:o,onClose:r.close})},f(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.message,o=t.buttons,i=t.childrenElement,s=t.customUI,l=t.overlayClassName;return u.default.createElement("div",{className:"react-confirm-alert-overlay "+l,ref:function(t){return e.overlay=t},onClick:this.handleClickOverlay},u.default.createElement("div",{className:"react-confirm-alert"},s?this.renderCustomUI():u.default.createElement("div",{className:"react-confirm-alert-body"},n&&u.default.createElement("h1",null,n),r,i(),u.default.createElement("div",{className:"react-confirm-alert-button-group"},o.map((function(t,n){return u.default.createElement("button",a({key:n,className:t.className},t,{onClick:function(n){return e.handleClickButton(t)}}),t.label)}))))))}}]),t}(s.Component),r.propTypes={title:l.default.string,message:l.default.string,buttons:l.default.array.isRequired,childrenElement:l.default.func,customUI:l.default.func,closeOnClickOutside:l.default.bool,closeOnEscape:l.default.bool,keyCodeForClose:l.default.arrayOf(l.default.number),willUnmount:l.default.func,afterClose:l.default.func,onClickOutside:l.default.func,onKeypressEscape:l.default.func,onkeyPress:l.default.func,overlayClassName:l.default.string},r.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},o);var p=null,m="react-confirm-alert"},1153:(e,t,n)=>{"use strict";var r=n(5043),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},1185:(e,t,n)=>{e.exports=n(9392)},1209:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(888),o=n(7451),a=n(2637),i=n(8726),s=n(6191),u=n(8171);var l=6048e5;function c(e,t){(0,i.A)(1,arguments);var n=(0,r.default)(e),c=(0,o.A)(n,t).getTime()-function(e,t){var n,r,l,c,d,f,h,p;(0,i.A)(1,arguments);var m=(0,u.q)(),v=(0,s.A)(null!==(n=null!==(r=null!==(l=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(d=t.locale)||void 0===d||null===(f=d.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==l?l:m.firstWeekContainsDate)&&void 0!==r?r:null===(h=m.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==n?n:1),g=(0,a.A)(e,t),y=new Date(0);return y.setUTCFullYear(g,0,v),y.setUTCHours(0,0,0,0),(0,o.A)(y,t)}(n,t).getTime();return Math.round(c/l)+1}},1218:e=>{var t,n,r,o,a,i,s,u,l,c,d,f,h,p,m,v=!1;function g(){if(!v){v=!0;var e=navigator.userAgent,g=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),y=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(f=/\b(iPhone|iP[ao]d)/.exec(e),h=/\b(iP[ao]d)/.exec(e),c=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),d=!!/Win64/.exec(e),g){(t=g[1]?parseFloat(g[1]):g[5]?parseFloat(g[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(e);i=b?parseFloat(b[1])+4:t,n=g[2]?parseFloat(g[2]):NaN,r=g[3]?parseFloat(g[3]):NaN,(o=g[4]?parseFloat(g[4]):NaN)?(g=/(?:Chrome\/(\d+\.\d+))/.exec(e),a=g&&g[1]?parseFloat(g[1]):NaN):a=NaN}else t=n=r=a=o=NaN;if(y){if(y[1]){var x=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);s=!x||parseFloat(x[1].replace("_","."))}else s=!1;u=!!y[2],l=!!y[3]}else s=u=l=!1}}var y={ie:function(){return g()||t},ieCompatibilityMode:function(){return g()||i>t},ie64:function(){return y.ie()&&d},firefox:function(){return g()||n},opera:function(){return g()||r},webkit:function(){return g()||o},safari:function(){return y.webkit()},chrome:function(){return g()||a},windows:function(){return g()||u},osx:function(){return g()||s},linux:function(){return g()||l},iphone:function(){return g()||f},mobile:function(){return g()||f||h||c||m},nativeApp:function(){return g()||p},android:function(){return g()||c},ipad:function(){return g()||h}};e.exports=y},1251:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e);return t.setHours(23,59,59,999),t}},1315:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2312),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()===a.getTime()}},1439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5043),s=v(n(5173)),u=m(n(1774)),l=v(n(2206)),c=m(n(6619)),d=m(n(4841)),f=n(8821),h=v(f),p=v(n(2959));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}n(6062);var g={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=0,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,o=e.htmlOpenClassName,a=e.bodyOpenClassName,i=e.parentSelector,s=i&&i().ownerDocument||document;a&&d.remove(s.body,a),o&&d.remove(s.getElementsByTagName("html")[0],o),r&&y>0&&0===(y-=1)&&c.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(u.returnFocus(n.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),p.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(u.setupScopedFocus(n.node),u.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,l.default)(n.content,e),n.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===("undefined"===typeof t?"undefined":o(t))?t:{base:g[e],afterOpen:g[e]+"--after-open",beforeClose:g[e]+"--before-close"},a=r.base;return n.state.afterOpen&&(a=a+" "+r.afterOpen),n.state.beforeClose&&(a=a+" "+r.beforeClose),"string"===typeof t&&t?a+" "+t:a},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,r){return n[e+"-"+r]=t[r],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,o=e.bodyOpenClassName,a=e.parentSelector,i=a&&a().ownerDocument||document;o&&d.add(i.body,o),r&&d.add(i.getElementsByTagName("html")[0],r),n&&(y+=1,c.hide(t)),p.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,o=e.overlayClassName,a=e.defaultStyles,i=e.children,s=n?{}:a.content,u=o?{}:a.overlay;if(this.shouldBeClosed())return null;var l={ref:this.setOverlayRef,className:this.buildClassName("overlay",o),style:r({},u,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},c=r({id:t,ref:this.setContentRef,style:r({},s,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),d=this.props.contentElement(c,i);return this.props.overlayElement(l,d)}}]),t}(i.Component);b.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},b.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(h.default),s.default.instanceOf(f.SafeHTMLCollection),s.default.instanceOf(f.SafeNodeList),s.default.arrayOf(s.default.instanceOf(h.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=b,e.exports=t.default},1497:(e,t,n)=>{"use strict";var r=n(3218);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},1551:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){return(0,o.A)(1,arguments),(0,r.default)(e).getMonth()}},1747:function(e,t,n){var r,o;e.exports=(r=n(6178),o=n(5043),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){e.exports=n(3)()},function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t,n){"use strict";var r=n(4);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r,o,a,i,s;i=this,s=function(e){var t=!1,n=!1,r=!1,o=!1,a="escape years months weeks days hours minutes seconds milliseconds general".split(" "),i=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function s(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function u(e){for(var t="";e;)t+="0",e-=1;return t}function l(e,t){var n=e+"+"+y(_(t).sort(),(function(e){return e+":"+t[e]})).join(",");return l.cache[n]||(l.cache[n]=Intl.NumberFormat(e,t)),l.cache[n]}function c(e,t,a){var i,s,d,f=t.useToLocaleString,h=t.useGrouping,p=h&&t.grouping.slice(),m=t.maximumSignificantDigits,v=t.minimumIntegerDigits||1,g=t.fractionDigits||0,y=t.groupingSeparator,b=t.decimalSeparator;if(f&&a){var x,w={minimumIntegerDigits:v,useGrouping:h};return g&&(w.maximumFractionDigits=g,w.minimumFractionDigits=g),m&&e>0&&(w.maximumSignificantDigits=m),r?(o||((x=E({},t)).useGrouping=!1,x.decimalSeparator=".",e=parseFloat(c(e,x),10)),l(a,w).format(e)):(n||((x=E({},t)).useGrouping=!1,x.decimalSeparator=".",e=parseFloat(c(e,x),10)),e.toLocaleString(a,w))}var C=(m?e.toPrecision(m+1):e.toFixed(g+1)).split("e");d=C[1]||"",s=(C=C[0].split("."))[1]||"";var k=(i=C[0]||"").length,S=s.length,_=k+S,N=i+s;(m&&_===m+1||!m&&S===g+1)&&((N=function(e){for(var t=e.split("").reverse(),n=0,r=!0;r&&n<t.length;)n?"9"===t[n]?t[n]="0":(t[n]=(parseInt(t[n],10)+1).toString(),r=!1):(parseInt(t[n],10)<5&&(r=!1),t[n]="0"),n+=1;return r&&t.push("1"),t.reverse().join("")}(N)).length===_+1&&(k+=1),S&&(N=N.slice(0,-1)),i=N.slice(0,k),s=N.slice(k)),m&&(s=s.replace(/0*$/,""));var T=parseInt(d,10);T>0?s.length<=T?(i+=s+=u(T-s.length),s=""):(i+=s.slice(0,T),s=s.slice(T)):T<0&&(s=u(Math.abs(T)-i.length)+i+s,i="0"),m||((s=s.slice(0,g)).length<g&&(s+=u(g-s.length)),i.length<v&&(i=u(v-i.length)+i));var R,D="";if(h)for(C=i;C.length;)p.length&&(R=p.shift()),D&&(D=y+D),D=C.slice(-R)+D,C=C.slice(0,-R);else D=i;return s&&(D=D+b+s),D}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function f(e,t){var n=[];return g(_(t),(function(r){if("_durationLabels"===r.slice(0,15)){var o=r.slice(15).toLowerCase();g(_(t[r]),(function(a){a.slice(0,1)===e&&n.push({type:o,key:a,label:t[r][a]})}))}})),n}l.cache={};var h={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,n){return 1===t&&null===n?e:e+e}};function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e,t){var n,r=0,o=e&&e.length||0;for("function"!=typeof t&&(n=t,t=function(e){return e===n});r<o;){if(t(e[r]))return e[r];r+=1}}function g(e,t){var n=0,r=e.length;if(e&&r)for(;n<r;){if(!1===t(e[n],n))return;n+=1}}function y(e,t){var n=0,r=e.length,o=[];if(!e||!r)return o;for(;n<r;)o[n]=t(e[n],n),n+=1;return o}function b(e,t){return y(e,(function(e){return e[t]}))}function x(e){var t=[];return g(e,(function(e){e&&t.push(e)})),t}function w(e){var t=[];return g(e,(function(e){v(t,e)||t.push(e)})),t}function C(e,t){var n=[];return g(e,(function(e){g(t,(function(t){e===t&&n.push(e)}))})),w(n)}function k(e,t){var n=[];return g(e,(function(r,o){if(!t(r))return n=e.slice(o),!1})),n}function S(e,t){return k(e.slice().reverse(),t).reverse()}function E(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function _(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function N(e,t){var n=0,r=e.length;if(!e||!r)return!1;for(;n<r;){if(!0===t(e[n],n))return!0;n+=1}return!1}function T(e){var t=[];return g(e,(function(e){t=t.concat(e)})),t}function R(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function D(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function I(){var e,t=[].slice.call(arguments),n={};if(g(t,(function(t,r){if(!r){if(!p(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?m(t)&&E(n,t):n.precision=t:n.template=t})),!e||!e.length)return[];n.returnMomentTypes=!0;var r=y(e,(function(e){return e.format(n)})),o=C(a,w(b(T(r),"type"))),i=n.largest;return i&&(o=o.slice(0,i)),n.returnMomentTypes=!1,n.outputTypes=o,y(e,(function(e){return e.format(n)}))}function A(){var n=[].slice.call(arguments),o=E({},this.format.defaults),u=this.asMilliseconds(),l=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(u=0,l=0);var T=u<0,R=e.duration(Math.abs(u),"milliseconds"),D=e.duration(Math.abs(l),"months");g(n,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?m(e)&&E(o,e):o.precision=e:o.template=e}));var I={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},A={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};o.types=a;var O=function(e){return v(a,(function(t){return A[t].test(e)}))},M=new RegExp(y(a,(function(e){return A[e].source})).join("|"),"g");o.duration=this;var P="function"==typeof o.template?o.template.apply(o):o.template,j=o.outputTypes,F=o.returnMomentTypes,L=o.largest,B=[];j||(p(o.stopTrim)&&(o.stopTrim=o.stopTrim.join("")),o.stopTrim&&g(o.stopTrim.match(M),(function(e){var t=O(e);"escape"!==t&&"general"!==t&&B.push(t)})));var W=e.localeData();W||(W={}),g(_(h),(function(e){"function"!=typeof h[e]?W["_"+e]||(W["_"+e]=h[e]):W[e]||(W[e]=h[e])})),g(_(W._durationTimeTemplates),(function(e){P=P.replace("_"+e+"_",W._durationTimeTemplates[e])}));var U=o.userLocale||e.locale(),z=o.useLeftUnits,H=o.usePlural,V=o.precision,q=o.forceLength,G=o.useGrouping,Y=o.trunc,K=o.useSignificantDigits&&V>0,$=K?o.precision:0,X=$,Q=o.minValue,J=!1,Z=o.maxValue,ee=!1,te=o.useToLocaleString,ne=o.groupingSeparator,re=o.decimalSeparator,oe=o.grouping;te=te&&(t||r);var ae=o.trim;p(ae)&&(ae=ae.join(" ")),null===ae&&(L||Z||K)&&(ae="all"),null!==ae&&!0!==ae&&"left"!==ae&&"right"!==ae||(ae="large"),!1===ae&&(ae="");var ie=function(e){return e.test(ae)},se=/small/,ue=/both/,le=/mid/,ce=/^all|[^sm]all/,de=/final/,fe=L>0||N([/large/,ue,ce],ie),he=N([se,ue,ce],ie),pe=N([le,ce],ie),me=N([de,ce],ie),ve=y(P.match(M),(function(e,t){var n=O(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==n&&"general"!==n&&B.push(n)),{index:t,length:e.length,text:"",token:"escape"===n?e.replace(A.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}})),ge={index:0,length:0,token:"",text:"",type:null},ye=[];z&&ve.reverse(),g(ve,(function(e){if(e.type)return(ge.type||ge.text)&&ye.push(ge),void(ge=e);z?ge.text=e.token+ge.text:ge.text+=e.token})),(ge.type||ge.text)&&ye.push(ge),z&&ye.reverse();var be=C(a,w(x(b(ye,"type"))));if(!be.length)return b(ye,"text").join("");be=y(be,(function(e,t){var n,r=t+1===be.length,a=!t;n="years"===e||"months"===e?D.as(e):R.as(e);var i=Math.floor(n),s=n-i,u=v(ye,(function(t){return e===t.type}));return a&&Z&&n>Z&&(ee=!0),r&&Q&&Math.abs(o.duration.as(e))<Q&&(J=!0),a&&null===q&&u.length>1&&(q=!0),R.subtract(i,e),D.subtract(i,e),{rawValue:n,wholeValue:i,decimalValue:r?s:0,isSmallest:r,isLargest:a,type:e,tokenLength:u.length}}));var xe=Y?Math.floor:Math.round,we=function(e,t){var n=Math.pow(10,t);return xe(e*n)/n},Ce=!1,ke=!1,Se=function(e,t){var n={useGrouping:G,groupingSeparator:ne,decimalSeparator:re,grouping:oe,useToLocaleString:te};return K&&($<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(n.maximumSignificantDigits=$,e.significantDigits=$)),ee&&!ke&&(e.isLargest?(e.wholeValue=Z,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),J&&!ke&&(e.isSmallest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?V<0?e.value=we(e.wholeValue,V):0===V?e.value=xe(e.wholeValue+e.decimalValue):K?(e.value=Y?we(e.rawValue,$-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&($-=e.wholeValue.toString().length)):(n.fractionDigits=V,e.value=Y?e.wholeValue+we(e.decimalValue,V):e.wholeValue+e.decimalValue):K&&e.wholeValue?(e.value=Math.round(we(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),$-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(q||Ce)&&(n.minimumIntegerDigits=e.tokenLength,ke&&n.maximumSignificantDigits<e.tokenLength&&delete n.maximumSignificantDigits),!Ce&&(e.value>0||""===ae||v(B,e.type)||v(j,e.type))&&(Ce=!0),e.formattedValue=c(e.value,n,U),n.useGrouping=!1,n.decimalSeparator=".",e.formattedValueEn=c(e.value,n,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=c(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((be=x(be=y(be,Se))).length>1){var Ee=function(e){return v(be,(function(t){return t.type===e}))},_e=function(e){var t=Ee(e.type);t&&g(e.targets,(function(e){var n=Ee(e.type);n&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,n.rawValue+=1,n.wholeValue+=1,n.decimalValue=0,n.formattedValueEn=n.wholeValue.toString(),ke=!0)}))};g(i,_e)}return ke&&(Ce=!1,$=X,be=x(be=y(be,Se))),!j||ee&&!o.trim?(fe&&(be=k(be,(function(e){return!e.isSmallest&&!e.wholeValue&&!v(B,e.type)}))),L&&be.length&&(be=be.slice(0,L)),he&&be.length>1&&(be=S(be,(function(e){return!e.wholeValue&&!v(B,e.type)&&!e.isLargest}))),pe&&(be=x(be=y(be,(function(e,t){return t>0&&t<be.length-1&&!e.wholeValue?null:e})))),!me||1!==be.length||be[0].wholeValue||!Y&&be[0].isSmallest&&be[0].rawValue<Q||(be=[])):be=x(be=y(be,(function(e){return v(j,(function(t){return e.type===t}))?e:null}))),F?be:(g(ye,(function(e){var t=I[e.type],n=v(be,(function(t){return t.type===e.type}));if(t&&n){var r=n.formattedValueEn.split(".");r[0]=parseInt(r[0],10),r[1]?r[1]=parseFloat("0."+r[1],10):r[1]=null;var o=W.durationPluralKey(t,r[0],r[1]),a=f(t,W),i=!1,u={};g(W._durationLabelTypes,(function(t){var n=v(a,(function(e){return e.type===t.type&&e.key===o}));n&&(u[n.type]=n.label,s(e.text,t.string)&&(e.text=e.text.replace(t.string,n.label),i=!0))})),H&&!i&&(a.sort(d),g(a,(function(t){return u[t.type]===t.label?!s(e.text,t.label)&&void 0:s(e.text,t.label)?(e.text=e.text.replace(t.label,u[t.type]),!1):void 0})))}})),(ye=y(ye,(function(e){if(!e.type)return e.text;var t=v(be,(function(t){return t.type===e.type}));if(!t)return"";var n="";return z&&(n+=e.text),(T&&ee||!T&&J)&&(n+="< ",ee=!1,J=!1),(T&&J||!T&&ee)&&(n+="> ",ee=!1,J=!1),T&&(t.value>0||""===ae||v(B,t.type)||v(j,t.type))&&(n+="-",T=!1),"milliseconds"===e.type&&t.formattedValueMS?n+=t.formattedValueMS:n+=t.formattedValue,z||(n+=e.text),n}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function O(){var e=this.duration,t=function(t){return e._data[t]},n=v(this.types,t),r=function(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}(this.types,t);switch(n){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(n===r)return"d __";case"weeks":return n===r?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(n===r)return"M __";case"years":return n===r?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function M(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=I,e.duration.fn.format=A,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:O,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",h)}var P=function(e,t,n){return e.toLocaleString(t,n)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&D(P),n=t&&R(P);var j=function(e,t,n){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,n).format(e)};return r=D(j),o=r&&R(j),M(e),M},o=[n(1)],void 0===(a="function"==typeof(r=s)?r.apply(t,o):r)||(e.exports=a),i&&(i.momentDurationFormatSetup=i.moment?s(i.moment):s)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var r=n(2),o=n.n(r),a=n(0),i=n.n(a),s=n(1),u=n.n(s);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(5);var x=[i.a.string,i.a.number,i.a.array,i.a.object],w=[i.a.string,i.a.array],C=[i.a.object,i.a.bool],k=[i.a.string,i.a.bool],S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,e);var t=m(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),b(g(r=t.call(this,e)),"setTimer",(function(){var e=r.props.interval;r.clearTimer(),n.pooledTimer||0===e||(r.timer=setInterval((function(){r.update(r.props)}),e))})),b(g(r),"getTitle",(function(){var e=r.props.titleFormat,t=n.getDatetime(r.props),o=e||n.globalFormat;return t.format(o)})),b(g(r),"clearTimer",(function(){!n.pooledTimer&&r.timer&&(clearInterval(r.timer),r.timer=null),n.pooledTimer&&!r.timer&&n.removePooledElement(g(r))})),n.globalMoment||(n.globalMoment=u.a),r.state={content:""},r.timer=null,r}return h(n,null,[{key:"startPooledTimer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;n.clearPooledTimer(),n.pooledTimer=setInterval((function(){n.pooledElements.forEach((function(e){0!==e.props.interval&&e.update()}))}),e)}},{key:"clearPooledTimer",value:function(){n.pooledTimer&&(clearInterval(n.pooledTimer),n.pooledTimer=null,n.pooledElements=[])}},{key:"pushPooledElement",value:function(e){e instanceof n?-1===n.pooledElements.indexOf(e)&&n.pooledElements.push(e):console.error("Element not an instance of Moment.")}},{key:"removePooledElement",value:function(e){var t=n.pooledElements.indexOf(e);-1!==t&&n.pooledElements.splice(t,1)}},{key:"getDatetime",value:function(e){var t=e.utc,r=e.unix,o=e.date,a=e.locale,i=e.parse,s=e.tz,u=e.local;o=o||e.children,i=i||n.globalParse,u=u||n.globalLocal,s=s||n.globalTimezone,a=n.globalLocale?n.globalLocale:a||n.globalMoment.locale();var l=null;return l=t?n.globalMoment.utc(o,i,a):r?n.globalMoment(1e3*o,i,a):n.globalMoment(o,i,a),s?l=l.tz(s):u&&(l=l.local()),l}},{key:"getContent",value:function(e){var t=e.fromNow,r=e.fromNowDuring,o=e.from,a=e.add,i=e.subtract,s=e.toNow,l=e.to,c=e.ago,d=e.calendar,f=e.diff,h=e.duration,p=e.durationFromNow,m=e.unit,v=e.decimal,g=e.trim,y=e.format;y=y||n.globalFormat;var b=n.getDatetime(e);a&&b.add(a),i&&b.subtract(i);var x=Boolean(r)&&-b.diff(u()())<r,w="";return w=!y||x||p||h?o?b.from(o,c):t||x?b.fromNow(c):l?b.to(l,c):s?b.toNow(c):d?b.calendar(null,d):f?b.diff(f,m,v):h?b.diff(h):p?u()().diff(b):b.toString():b.format(y),(h||p)&&(w=(w=u.a.duration(w)).format(y,{trim:g})),(n.globalFilter||e.filter)(w)}}]),h(n,[{key:"componentDidMount",value:function(){this.setTimer(),n.pooledTimer&&n.pushPooledElement(this)}},{key:"componentDidUpdate",value:function(e){var t=this.props.interval;e.interval!==t&&this.setTimer()}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"update",value:function(e){var t=e||this.props,r=t.onChange,o=n.getContent(t);this.setState({content:o},(function(){r(o)}))}},{key:"render",value:function(){var e,t,r,a,i=this.props,s=i.withTitle,u=i.element,l=d(i,["withTitle","element"]),f=this.state.content,h=(e=l,t=n.propTypes,r=Object.keys(t),a=Object.assign({},e),Object.keys(a).filter((function(e){return-1!==r.indexOf(e)})).forEach((function(e){return delete a[e]})),a);return s&&(h.title=this.getTitle()),o.a.createElement(u||n.globalElement,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dateTime:n.getDatetime(this.props)},h),f)}}],[{key:"getDerivedStateFromProps",value:function(e){return{content:n.getContent(e)}}}]),n}(o.a.Component);b(S,"propTypes",{element:i.a.any,date:i.a.oneOfType(x),parse:i.a.oneOfType(w),format:i.a.string,add:i.a.object,subtract:i.a.object,ago:i.a.bool,fromNow:i.a.bool,fromNowDuring:i.a.number,from:i.a.oneOfType(x),toNow:i.a.bool,to:i.a.oneOfType(x),calendar:i.a.oneOfType(C),unix:i.a.bool,utc:i.a.bool,local:i.a.bool,tz:i.a.string,withTitle:i.a.bool,titleFormat:i.a.string,locale:i.a.string,interval:i.a.number,diff:i.a.oneOfType(x),duration:i.a.oneOfType(x),durationFromNow:i.a.bool,trim:i.a.oneOfType(k),unit:i.a.string,decimal:i.a.bool,filter:i.a.func,onChange:i.a.func}),b(S,"defaultProps",{element:null,fromNow:!1,toNow:!1,calendar:!1,ago:!1,unix:!1,utc:!1,local:!1,unit:null,withTitle:!1,trim:!1,decimal:!1,titleFormat:"",interval:6e4,filter:function(e){return e},onChange:function(){}}),b(S,"globalMoment",null),b(S,"globalLocale",null),b(S,"globalLocal",null),b(S,"globalFormat",null),b(S,"globalParse",null),b(S,"globalFilter",null),b(S,"globalElement","time"),b(S,"globalTimezone",null),b(S,"pooledElements",[]),b(S,"pooledTimer",null)}]))},1774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){i=[]},t.log=function(){0},t.handleBlur=l,t.handleFocus=c,t.markForFocusLater=function(){i.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==i.length&&(t=i.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){i.length>0&&i.pop()},t.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",l,!1),document.addEventListener("focus",c,!0)):(window.attachEvent("onBlur",l),document.attachEvent("onFocus",c))},t.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",l),document.removeEventListener("focus",c)):(window.detachEvent("onBlur",l),document.detachEvent("onFocus",c))};var r,o=n(4682),a=(r=o)&&r.__esModule?r:{default:r};var i=[],s=null,u=!1;function l(){u=!0}function c(){if(u){if(u=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,a.default)(s)[0]||s).focus()}),0)}}},1794:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rt});var r=n(2284);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}var i=n(364),s=n(4375),u=n(888);function l(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var c=n(8435),d=n(8539),f=n(2058),h=n(6191),p=n(8726);function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function x(e){var t=b();return function(){var n,o=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"==(0,r.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var C=n(816);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,C.A)(r.key),r)}}function S(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var E=n(4467),_=function(){function e(){w(this,e),(0,E.A)(this,"priority",void 0),(0,E.A)(this,"subPriority",0)}return S(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),N=function(e){g(n,e);var t=x(n);function n(e,r,o,a,i){var s;return w(this,n),(s=t.call(this)).value=e,s.validateValue=r,s.setValue=o,s.priority=a,i&&(s.subPriority=i),s}return S(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(_),T=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",10),(0,E.A)(m(e),"subPriority",-1),e}return S(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(_),R=function(){function e(){w(this,e),(0,E.A)(this,"incompatibleTokens",void 0),(0,E.A)(this,"priority",void 0),(0,E.A)(this,"subPriority",void 0)}return S(e,[{key:"run",value:function(e,t,n,r){var o=this.parse(e,t,n,r);return o?{setter:new N(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),D=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",140),(0,E.A)(m(e),"incompatibleTokens",["R","u","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(R),I=n(5126),A=/^(1[0-2]|0?\d)/,O=/^(3[0-1]|[0-2]?\d)/,M=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,P=/^(5[0-3]|[0-4]?\d)/,j=/^(2[0-3]|[0-1]?\d)/,F=/^(2[0-4]|[0-1]?\d)/,L=/^(1[0-1]|0?\d)/,B=/^(1[0-2]|0?\d)/,W=/^[0-5]?\d/,U=/^[0-5]?\d/,z=/^\d/,H=/^\d{1,2}/,V=/^\d{1,3}/,q=/^\d{1,4}/,G=/^-?\d+/,Y=/^-?\d/,K=/^-?\d{1,2}/,$=/^-?\d{1,3}/,X=/^-?\d{1,4}/,Q=/^([+-])(\d{2})(\d{2})?|Z/,J=/^([+-])(\d{2})(\d{2})|Z/,Z=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ee=/^([+-])(\d{2}):(\d{2})|Z/,te=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function ne(e,t){return e?{value:t(e.value),rest:e.rest}:e}function re(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function oe(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,o=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:r*(o*I.s0+a*I.Cg+i*I._m),rest:t.slice(n[0].length)}}function ae(e){return re(G,e)}function ie(e,t){switch(e){case 1:return re(z,t);case 2:return re(H,t);case 3:return re(V,t);case 4:return re(q,t);default:return re(new RegExp("^\\d{1,"+e+"}"),t)}}function se(e,t){switch(e){case 1:return re(Y,t);case 2:return re(K,t);case 3:return re($,t);case 4:return re(X,t);default:return re(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ue(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function le(e,t){var n,r=t>0,o=r?t:1-t;if(o<=50)n=e||100;else{var a=o+50;n=e+100*Math.floor(a/100)-(e>=a%100?100:0)}return r?n:1-n}function ce(e){return e%400===0||e%4===0&&e%100!==0}var de=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",130),(0,E.A)(m(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return ne(ie(4,e),r);case"yo":return ne(n.ordinalNumber(e,{unit:"year"}),r);default:return ne(ie(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var o=le(n.year,r);return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(R),fe=n(2637),he=n(7451),pe=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",130),(0,E.A)(m(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return ne(ie(4,e),r);case"Yo":return ne(n.ordinalNumber(e,{unit:"year"}),r);default:return ne(ie(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var o=(0,fe.A)(e,r);if(n.isTwoDigitYear){var a=le(n.year,o);return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,he.A)(e,r)}var i="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(i,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,he.A)(e,r)}}]),n}(R),me=n(4960),ve=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",130),(0,E.A)(m(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t){return se("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),(0,me.A)(r)}}]),n}(R),ge=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",130),(0,E.A)(m(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t){return se("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(R),ye=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",120),(0,E.A)(m(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return ie(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(R),be=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",120),(0,E.A)(m(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return ie(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(R),xe=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,E.A)(m(e),"priority",110),e}return S(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return ne(re(A,e),r);case"MM":return ne(ie(2,e),r);case"Mo":return ne(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(R),we=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",110),(0,E.A)(m(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return ne(re(A,e),r);case"LL":return ne(ie(2,e),r);case"Lo":return ne(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(R),Ce=n(1209);var ke=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",100),(0,E.A)(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return re(P,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return(0,he.A)(function(e,t,n){(0,p.A)(2,arguments);var r=(0,u.default)(e),o=(0,h.A)(t),a=(0,Ce.A)(r,n)-o;return r.setUTCDate(r.getUTCDate()-7*a),r}(e,n,r),r)}}]),n}(R),Se=n(7532);var Ee=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",100),(0,E.A)(m(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return re(P,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return(0,me.A)(function(e,t){(0,p.A)(2,arguments);var n=(0,u.default)(e),r=(0,h.A)(t),o=(0,Se.A)(n)-r;return n.setUTCDate(n.getUTCDate()-7*o),n}(e,n))}}]),n}(R),_e=[31,28,31,30,31,30,31,31,30,31,30,31],Ne=[31,29,31,30,31,30,31,31,30,31,30,31],Te=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",90),(0,E.A)(m(e),"subPriority",1),(0,E.A)(m(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return re(O,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){var n=ce(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Ne[r]:t>=1&&t<=_e[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(R),Re=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",90),(0,E.A)(m(e),"subpriority",1),(0,E.A)(m(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return re(M,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return ce(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(R),De=n(8171);function Ie(e,t,n){var r,o,a,i,s,l,c,d;(0,p.A)(2,arguments);var f=(0,De.q)(),m=(0,h.A)(null!==(r=null!==(o=null!==(a=null!==(i=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==i?i:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:f.weekStartsOn)&&void 0!==o?o:null===(c=f.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==r?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,u.default)(e),g=(0,h.A)(t),y=((g%7+7)%7<m?7:0)+g-v.getUTCDay();return v.setUTCDate(v.getUTCDate()+y),v}var Ae=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",90),(0,E.A)(m(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Ie(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(R),Oe=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",90),(0,E.A)(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n,r){var o=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return ne(ie(t.length,e),o);case"eo":return ne(n.ordinalNumber(e,{unit:"day"}),o);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Ie(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(R),Me=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",90),(0,E.A)(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n,r){var o=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return ne(ie(t.length,e),o);case"co":return ne(n.ordinalNumber(e,{unit:"day"}),o);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=Ie(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(R);var Pe=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",90),(0,E.A)(m(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return ie(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return ne(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return ne(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return ne(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return ne(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){(0,p.A)(2,arguments);var n=(0,h.A)(t);n%7===0&&(n-=7);var r=(0,u.default)(e),o=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+o),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(R),je=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",80),(0,E.A)(m(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(ue(n),0,0,0),e}}]),n}(R),Fe=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",80),(0,E.A)(m(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(ue(n),0,0,0),e}}]),n}(R),Le=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",80),(0,E.A)(m(e),"incompatibleTokens",["a","b","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(ue(n),0,0,0),e}}]),n}(R),Be=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",70),(0,E.A)(m(e),"incompatibleTokens",["H","K","k","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return re(B,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(R),We=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",70),(0,E.A)(m(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return re(j,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(R),Ue=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",70),(0,E.A)(m(e),"incompatibleTokens",["h","H","k","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return re(L,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(R),ze=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",70),(0,E.A)(m(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return re(F,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(R),He=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",60),(0,E.A)(m(e),"incompatibleTokens",["t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return re(W,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(R),Ve=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",50),(0,E.A)(m(e),"incompatibleTokens",["t","T"]),e}return S(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return re(U,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(R),qe=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",30),(0,E.A)(m(e),"incompatibleTokens",["t","T"]),e}return S(n,[{key:"parse",value:function(e,t){return ne(ie(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(R),Ge=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",10),(0,E.A)(m(e),"incompatibleTokens",["t","T","x"]),e}return S(n,[{key:"parse",value:function(e,t){switch(t){case"X":return oe(Q,e);case"XX":return oe(J,e);case"XXXX":return oe(Z,e);case"XXXXX":return oe(te,e);default:return oe(ee,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(R),Ye=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",10),(0,E.A)(m(e),"incompatibleTokens",["t","T","X"]),e}return S(n,[{key:"parse",value:function(e,t){switch(t){case"x":return oe(Q,e);case"xx":return oe(J,e);case"xxxx":return oe(Z,e);case"xxxxx":return oe(te,e);default:return oe(ee,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(R),Ke=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",40),(0,E.A)(m(e),"incompatibleTokens","*"),e}return S(n,[{key:"parse",value:function(e){return ae(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(R),$e=function(e){g(n,e);var t=x(n);function n(){var e;w(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,E.A)(m(e),"priority",20),(0,E.A)(m(e),"incompatibleTokens","*"),e}return S(n,[{key:"parse",value:function(e){return ae(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(R),Xe={G:new D,y:new de,Y:new pe,R:new ve,u:new ge,Q:new ye,q:new be,M:new xe,L:new we,w:new ke,I:new Ee,d:new Te,D:new Re,E:new Ae,e:new Oe,c:new Me,i:new Pe,a:new je,b:new Fe,B:new Le,h:new Be,H:new We,K:new Ue,k:new ze,m:new He,s:new Ve,S:new qe,X:new Ge,x:new Ye,t:new Ke,T:new $e},Qe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Je=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ze=/^'([^]*?)'?$/,et=/''/g,tt=/\S/,nt=/[a-zA-Z]/;function rt(e,t,n,o){var m,v,g,y,b,x,w,C,k,S,E,_,N,R,D,I,A,O;(0,p.A)(3,arguments);var M=String(e),P=String(t),j=(0,De.q)(),F=null!==(m=null!==(v=null===o||void 0===o?void 0:o.locale)&&void 0!==v?v:j.locale)&&void 0!==m?m:i.A;if(!F.match)throw new RangeError("locale must contain match property");var L=(0,h.A)(null!==(g=null!==(y=null!==(b=null!==(x=null===o||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==x?x:null===o||void 0===o||null===(w=o.locale)||void 0===w||null===(C=w.options)||void 0===C?void 0:C.firstWeekContainsDate)&&void 0!==b?b:j.firstWeekContainsDate)&&void 0!==y?y:null===(k=j.locale)||void 0===k||null===(S=k.options)||void 0===S?void 0:S.firstWeekContainsDate)&&void 0!==g?g:1);if(!(L>=1&&L<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var B=(0,h.A)(null!==(E=null!==(_=null!==(N=null!==(R=null===o||void 0===o?void 0:o.weekStartsOn)&&void 0!==R?R:null===o||void 0===o||null===(D=o.locale)||void 0===D||null===(I=D.options)||void 0===I?void 0:I.weekStartsOn)&&void 0!==N?N:j.weekStartsOn)&&void 0!==_?_:null===(A=j.locale)||void 0===A||null===(O=A.options)||void 0===O?void 0:O.weekStartsOn)&&void 0!==E?E:0);if(!(B>=0&&B<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===P)return""===M?(0,u.default)(n):new Date(NaN);var W,U={firstWeekContainsDate:L,weekStartsOn:B,locale:F},z=[new T],H=P.match(Je).map((function(e){var t=e[0];return t in c.A?(0,c.A[t])(e,F.formatLong):e})).join("").match(Qe),V=[],q=a(H);try{var G=function(){var t=W.value;null!==o&&void 0!==o&&o.useAdditionalWeekYearTokens||!(0,f.xM)(t)||(0,f.lJ)(t,P,e),null!==o&&void 0!==o&&o.useAdditionalDayOfYearTokens||!(0,f.ef)(t)||(0,f.lJ)(t,P,e);var n=t[0],r=Xe[n];if(r){var a=r.incompatibleTokens;if(Array.isArray(a)){var i=V.find((function(e){return a.includes(e.token)||e.token===n}));if(i)throw new RangeError("The format string mustn't contain `".concat(i.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&V.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));V.push({token:n,fullToken:t});var s=r.run(M,t,F.match,U);if(!s)return{v:new Date(NaN)};z.push(s.setter),M=s.rest}else{if(n.match(nt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(Ze)[1].replace(et,"'")),0!==M.indexOf(t))return{v:new Date(NaN)};M=M.slice(t.length)}};for(q.s();!(W=q.n()).done;){var Y=G();if("object"===(0,r.A)(Y))return Y.v}}catch(ne){q.e(ne)}finally{q.f()}if(M.length>0&&tt.test(M))return new Date(NaN);var K=z.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return z.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),$=(0,u.default)(n);if(isNaN($.getTime()))return new Date(NaN);var X,Q=(0,s.A)($,(0,d.A)($)),J={},Z=a(K);try{for(Z.s();!(X=Z.n()).done;){var ee=X.value;if(!ee.validate(Q,U))return new Date(NaN);var te=ee.set(Q,J,U);Array.isArray(te)?(Q=te[0],l(J,te[1])):Q=te}}catch(ne){Z.e(ne)}finally{Z.f()}return Q}},1806:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(6265),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,o.default)(e,-n)}},1845:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e);return Math.floor(t.getMonth()/3)+1}},1899:function(e,t,n){!function(e,t,n,r,o,a,i,s,u,l,c,d,f,h,p,m,v,g,y,b,x,w,C,k,S,E,_,N,T,R,D,I,A,O,M,P,j,F,L,B,W,U,z,H,V,q,G,Y,K,$,X,Q,J,Z,ee,te,ne,re,oe,ae,ie,se,ue,le){"use strict";function ce(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var de=ce(t),fe=ce(r),he=ce(o),pe=ce(a),me=ce(i),ve=ce(s),ge=ce(u),ye=ce(l),be=ce(c),xe=ce(d),we=ce(f),Ce=ce(h),ke=ce(p),Se=ce(m),Ee=ce(v),_e=ce(g),Ne=ce(y),Te=ce(b),Re=ce(x),De=ce(w),Ie=ce(C),Ae=ce(k),Oe=ce(S),Me=ce(E),Pe=ce(_),je=ce(N),Fe=ce(T),Le=ce(R),Be=ce(D),We=ce(I),Ue=ce(A),ze=ce(O),He=ce(M),Ve=ce(P),qe=ce(j),Ge=ce(F),Ye=ce(L),Ke=ce(B),$e=ce(W),Xe=ce(U),Qe=ce(z),Je=ce(H),Ze=ce(V),et=ce(q),tt=ce(Y),nt=ce(K),rt=ce($),ot=ce(X),at=ce(Q),it=ce(J),st=ce(Z),ut=ce(ee),lt=ce(te),ct=ce(ne),dt=ce(re),ft=ce(oe),ht=ce(ae),pt=ce(ie),mt=ce(se),vt=ce(le);function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,At(r.key),r)}}function Ct(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kt(e,t,n){return(t=At(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},St.apply(this,arguments)}function Et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nt(e,t)}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}function Nt(e,t){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nt(e,t)}function Tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t(e);if(t){var o=_t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tt(e)}(this,n)}}function Dt(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function At(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var Ot=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Mt=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Pt={p:Mt,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],o=r[1],a=r[2];if(!a)return Ot(e,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Ot(o,t)).replace("{{time}}",Mt(a,t))}},jt=12,Ft=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Lt(e){var t=e?"string"==typeof e||e instanceof String?ht.default(e):dt.default(e):new Date;return Bt(t)?t:null}function Bt(e,t){return t=t||new Date("1/1/1000"),pe.default(e)&&!lt.default(e,t)}function Wt(e,t,n){if("en"===n)return me.default(e,t,{awareOfUnicodeTokens:!0});var r=tn(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&en()&&tn(en())&&(r=tn(en())),me.default(e,t,{locale:r||null,awareOfUnicodeTokens:!0})}function Ut(e,t){var n=t.dateFormat,r=t.locale;return e&&Wt(e,Array.isArray(n)?n[0]:n,r)||""}function zt(e,t){var n=t.hour,r=void 0===n?0:n,o=t.minute,a=void 0===o?0:o,i=t.second,s=void 0===i?0:i;return We.default(Be.default(Le.default(e,s),a),r)}function Ht(e,t,n){var r=tn(t||en());return Xe.default(e,{locale:r,weekStartsOn:n})}function Vt(e){return Qe.default(e)}function qt(e){return Ze.default(e)}function Gt(e){return Je.default(e)}function Yt(){return $e.default(Lt())}function Kt(e,t){return e&&t?it.default(e,t):!e&&!t}function $t(e,t){return e&&t?at.default(e,t):!e&&!t}function Xt(e,t){return e&&t?st.default(e,t):!e&&!t}function Qt(e,t){return e&&t?ot.default(e,t):!e&&!t}function Jt(e,t){return e&&t?rt.default(e,t):!e&&!t}function Zt(e,t,n){var r,o=$e.default(t),a=et.default(n);try{r=ct.default(e,{start:o,end:a})}catch(e){r=!1}return r}function en(){return("undefined"!=typeof window?window:globalThis).__localeId__}function tn(e){if("string"==typeof e){var t="undefined"!=typeof window?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}return e}function nn(e,t){return Wt(Ue.default(Lt(),e),"LLLL",t)}function rn(e,t){return Wt(Ue.default(Lt(),e),"LLL",t)}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,o=t.excludeDates,a=t.excludeDateIntervals,i=t.includeDates,s=t.includeDateIntervals,u=t.filterDate;return hn(e,{minDate:n,maxDate:r})||o&&o.some((function(t){return Qt(e,t)}))||a&&a.some((function(t){var n=t.start,r=t.end;return ct.default(e,{start:n,end:r})}))||i&&!i.some((function(t){return Qt(e,t)}))||s&&!s.some((function(t){var n=t.start,r=t.end;return ct.default(e,{start:n,end:r})}))||u&&!u(Lt(e))||!1}function an(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some((function(t){var n=t.start,r=t.end;return ct.default(e,{start:n,end:r})})):n&&n.some((function(t){return Qt(e,t)}))||!1}function sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,o=t.excludeDates,a=t.includeDates,i=t.filterDate;return hn(e,{minDate:Qe.default(n),maxDate:tt.default(r)})||o&&o.some((function(t){return $t(e,t)}))||a&&!a.some((function(t){return $t(e,t)}))||i&&!i(Lt(e))||!1}function un(e,t,n,r){var o=je.default(e),a=Me.default(e),i=je.default(t),s=Me.default(t),u=je.default(r);return o===i&&o===u?a<=n&&n<=s:o<i?u===o&&a<=n||u===i&&s>=n||u<i&&u>o:void 0}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,o=t.excludeDates,a=t.includeDates,i=t.filterDate;return hn(e,{minDate:n,maxDate:r})||o&&o.some((function(t){return Xt(e,t)}))||a&&!a.some((function(t){return Xt(e,t)}))||i&&!i(Lt(e))||!1}function cn(e,t,n){if(!pe.default(t)||!pe.default(n))return!1;var r=je.default(t),o=je.default(n);return r<=e&&o>=e}function dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,o=t.excludeDates,a=t.includeDates,i=t.filterDate,s=new Date(e,0,1);return hn(s,{minDate:Ze.default(n),maxDate:nt.default(r)})||o&&o.some((function(e){return Kt(s,e)}))||a&&!a.some((function(e){return Kt(s,e)}))||i&&!i(Lt(s))||!1}function fn(e,t,n,r){var o=je.default(e),a=Pe.default(e),i=je.default(t),s=Pe.default(t),u=je.default(r);return o===i&&o===u?a<=n&&n<=s:o<i?u===o&&a<=n||u===i&&s>=n||u<i&&u>o:void 0}function hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate;return n&&Ge.default(e,n)<0||r&&Ge.default(e,r)>0}function pn(e,t){return t.some((function(t){return De.default(t)===De.default(e)&&Re.default(t)===Re.default(e)}))}function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeTimes,r=t.includeTimes,o=t.filterTime;return n&&pn(e,n)||r&&!pn(e,r)||o&&!o(e)||!1}function vn(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var o,a=Lt(),i=We.default(Be.default(a,Re.default(e)),De.default(e)),s=We.default(Be.default(a,Re.default(n)),De.default(n)),u=We.default(Be.default(a,Re.default(r)),De.default(r));try{o=!ct.default(i,{start:s,end:u})}catch(e){o=!1}return o}function gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,o=Ee.default(e,1);return n&&Ye.default(n,o)>0||r&&r.every((function(e){return Ye.default(e,o)>0}))||!1}function yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,o=xe.default(e,1);return n&&Ye.default(o,n)>0||r&&r.every((function(e){return Ye.default(o,e)>0}))||!1}function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,o=Ne.default(e,1);return n&&Ke.default(n,o)>0||r&&r.every((function(e){return Ke.default(e,o)>0}))||!1}function xn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,o=Ce.default(e,1);return n&&Ke.default(o,n)>0||r&&r.every((function(e){return Ke.default(o,e)>0}))||!1}function wn(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return Ge.default(e,t)>=0}));return Ve.default(r)}return n?Ve.default(n):t}function Cn(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return Ge.default(e,t)<=0}));return qe.default(r)}return n?qe.default(n):t}function kn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,o=e.length;r<o;r++){var a=e[r];if(he.default(a)){var i=Wt(a,"MM.dd.yyyy"),s=n.get(i)||[];s.includes(t)||(s.push(t),n.set(i,s))}else if("object"===bt(a)){var u=Object.keys(a),l=u[0],c=a[u[0]];if("string"==typeof l&&c.constructor===Array)for(var d=0,f=c.length;d<f;d++){var h=Wt(c[d],"MM.dd.yyyy"),p=n.get(h)||[];p.includes(l)||(p.push(l),n.set(h,p))}}}return n}function Sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--holidays",n=new Map;return e.forEach((function(e){var r=e.date,o=e.holidayName;if(he.default(r)){var a=Wt(r,"MM.dd.yyyy"),i=n.get(a)||{};if(!("className"in i)||i.className!==t||(s=i.holidayNames,u=[o],s.length!==u.length||!s.every((function(e,t){return e===u[t]})))){var s,u;i.className=t;var l=i.holidayNames;i.holidayNames=l?[].concat(Dt(l),[o]):[o],n.set(a,i)}}})),n}function En(e,t,n,r,o){for(var a=o.length,i=[],s=0;s<a;s++){var u=ve.default(ge.default(e,De.default(o[s])),Re.default(o[s])),l=ve.default(e,(n+1)*r);ut.default(u,t)&&lt.default(u,l)&&i.push(o[s])}return i}function _n(e){return e<10?"0".concat(e):"".concat(e)}function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt,n=Math.ceil(je.default(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function Tn(e){var t=e.getSeconds(),n=e.getMilliseconds();return dt.default(e.getTime()-1e3*t-n)}function Rn(e,t,n,r){for(var o=[],a=0;a<2*t+1;a++){var i=e+t-a,s=!0;n&&(s=je.default(n)<=i),r&&s&&(s=je.default(r)>=i),s&&o.push(i)}return o}var Dn=function(e){Et(r,e);var n=Rt(r);function r(e){var o;xt(this,r),kt(Tt(o=n.call(this,e)),"renderOptions",(function(){var e=o.props.year,t=o.state.yearsList.map((function(t){return de.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:o.onChange.bind(Tt(o),t),"aria-selected":e===t?"true":void 0},e===t?de.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)})),n=o.props.minDate?je.default(o.props.minDate):null,r=o.props.maxDate?je.default(o.props.maxDate):null;return r&&o.state.yearsList.find((function(e){return e===r}))||t.unshift(de.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:o.incrementYears},de.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&o.state.yearsList.find((function(e){return e===n}))||t.push(de.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:o.decrementYears},de.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t})),kt(Tt(o),"onChange",(function(e){o.props.onChange(e)})),kt(Tt(o),"handleClickOutside",(function(){o.props.onCancel()})),kt(Tt(o),"shiftYears",(function(e){var t=o.state.yearsList.map((function(t){return t+e}));o.setState({yearsList:t})})),kt(Tt(o),"incrementYears",(function(){return o.shiftYears(1)})),kt(Tt(o),"decrementYears",(function(){return o.shiftYears(-1)}));var a=e.yearDropdownItemNumber,i=e.scrollableYearDropdown,s=a||(i?10:5);return o.state={yearsList:Rn(o.props.year,s,o.props.minDate,o.props.maxDate)},o.dropdownRef=t.createRef(),o}return Ct(r,[{key:"componentDidMount",value:function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=n?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}}},{key:"render",value:function(){var e=fe.default({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return de.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())}}]),r}(de.default.Component),In=pt.default(Dn),An=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"state",{dropdownVisible:!1}),kt(Tt(e),"renderSelectOptions",(function(){for(var t=e.props.minDate?je.default(e.props.minDate):1900,n=e.props.maxDate?je.default(e.props.maxDate):2100,r=[],o=t;o<=n;o++)r.push(de.default.createElement("option",{key:o,value:o},o));return r})),kt(Tt(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),kt(Tt(e),"renderSelectMode",(function(){return de.default.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),kt(Tt(e),"renderReadView",(function(t){return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(t){return e.toggleDropdown(t)}},de.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))})),kt(Tt(e),"renderDropdown",(function(){return de.default.createElement(In,{key:"dropdown",year:e.props.year,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableYearDropdown:e.props.scrollableYearDropdown,yearDropdownItemNumber:e.props.yearDropdownItemNumber})})),kt(Tt(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),kt(Tt(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.year&&e.props.onChange(t)})),kt(Tt(e),"toggleDropdown",(function(t){e.setState({dropdownVisible:!e.state.dropdownVisible},(function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,t)}))})),kt(Tt(e),"handleYearChange",(function(t,n){e.onSelect(t,n),e.setOpen()})),kt(Tt(e),"onSelect",(function(t,n){e.props.onSelect&&e.props.onSelect(t,n)})),kt(Tt(e),"setOpen",(function(){e.props.setOpen&&e.props.setOpen(!0)})),e}return Ct(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return de.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(de.default.Component),On=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"isSelectedMonth",(function(t){return e.props.month===t})),kt(Tt(e),"renderOptions",(function(){return e.props.monthNames.map((function(t,n){return de.default.createElement("div",{className:e.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:t,onClick:e.onChange.bind(Tt(e),n),"aria-selected":e.isSelectedMonth(n)?"true":void 0},e.isSelectedMonth(n)?de.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",t)}))})),kt(Tt(e),"onChange",(function(t){return e.props.onChange(t)})),kt(Tt(e),"handleClickOutside",(function(){return e.props.onCancel()})),e}return Ct(n,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}(de.default.Component),Mn=pt.default(On),Pn=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"state",{dropdownVisible:!1}),kt(Tt(e),"renderSelectOptions",(function(e){return e.map((function(e,t){return de.default.createElement("option",{key:t,value:t},e)}))})),kt(Tt(e),"renderSelectMode",(function(t){return de.default.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(t){return e.onChange(t.target.value)}},e.renderSelectOptions(t))})),kt(Tt(e),"renderReadView",(function(t,n){return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},de.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[e.props.month]))})),kt(Tt(e),"renderDropdown",(function(t){return de.default.createElement(Mn,{key:"dropdown",month:e.props.month,monthNames:t,onChange:e.onChange,onCancel:e.toggleDropdown})})),kt(Tt(e),"renderScrollMode",(function(t){var n=e.state.dropdownVisible,r=[e.renderReadView(!n,t)];return n&&r.unshift(e.renderDropdown(t)),r})),kt(Tt(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.month&&e.props.onChange(t)})),kt(Tt(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return Ct(n,[{key:"render",value:function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return rn(e,t.props.locale)}:function(e){return nn(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return de.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(de.default.Component);function jn(e,t){for(var n=[],r=Vt(e),o=Vt(t);!ut.default(r,o);)n.push(Lt(r)),r=xe.default(r,1);return n}var Fn=function(e){Et(n,e);var t=Rt(n);function n(e){var r;return xt(this,n),kt(Tt(r=t.call(this,e)),"renderOptions",(function(){return r.state.monthYearsList.map((function(e){var t=Fe.default(e),n=Kt(r.props.date,e)&&$t(r.props.date,e);return de.default.createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:r.onChange.bind(Tt(r),t),"aria-selected":n?"true":void 0},n?de.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",Wt(e,r.props.dateFormat,r.props.locale))}))})),kt(Tt(r),"onChange",(function(e){return r.props.onChange(e)})),kt(Tt(r),"handleClickOutside",(function(){r.props.onCancel()})),r.state={monthYearsList:jn(r.props.minDate,r.props.maxDate)},r}return Ct(n,[{key:"render",value:function(){var e=fe.default({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return de.default.createElement("div",{className:e},this.renderOptions())}}]),n}(de.default.Component),Ln=pt.default(Fn),Bn=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"state",{dropdownVisible:!1}),kt(Tt(e),"renderSelectOptions",(function(){for(var t=Vt(e.props.minDate),n=Vt(e.props.maxDate),r=[];!ut.default(t,n);){var o=Fe.default(t);r.push(de.default.createElement("option",{key:o,value:o},Wt(t,e.props.dateFormat,e.props.locale))),t=xe.default(t,1)}return r})),kt(Tt(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),kt(Tt(e),"renderSelectMode",(function(){return de.default.createElement("select",{value:Fe.default(Vt(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),kt(Tt(e),"renderReadView",(function(t){var n=Wt(e.props.date,e.props.dateFormat,e.props.locale);return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(t){return e.toggleDropdown(t)}},de.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))})),kt(Tt(e),"renderDropdown",(function(){return de.default.createElement(Ln,{key:"dropdown",date:e.props.date,dateFormat:e.props.dateFormat,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableMonthYearDropdown:e.props.scrollableMonthYearDropdown,locale:e.props.locale})})),kt(Tt(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),kt(Tt(e),"onChange",(function(t){e.toggleDropdown();var n=Lt(parseInt(t));Kt(e.props.date,n)&&$t(e.props.date,n)||e.props.onChange(n)})),kt(Tt(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return Ct(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return de.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(de.default.Component),Wn=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"dayEl",de.default.createRef()),kt(Tt(e),"handleClick",(function(t){!e.isDisabled()&&e.props.onClick&&e.props.onClick(t)})),kt(Tt(e),"handleMouseEnter",(function(t){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(t)})),kt(Tt(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),kt(Tt(e),"isSameDay",(function(t){return Qt(e.props.day,t)})),kt(Tt(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!(e.isSameDay(e.props.selected)||e.isSameWeek(e.props.selected))&&(e.isSameDay(e.props.preSelection)||e.isSameWeek(e.props.preSelection))})),kt(Tt(e),"isDisabled",(function(){return on(e.props.day,e.props)})),kt(Tt(e),"isExcluded",(function(){return an(e.props.day,e.props)})),kt(Tt(e),"isStartOfWeek",(function(){return Qt(e.props.day,Ht(e.props.day,e.props.locale,e.props.calendarStartDay))})),kt(Tt(e),"isSameWeek",(function(t){return e.props.showWeekPicker&&Qt(t,Ht(e.props.day,e.props.locale,e.props.calendarStartDay))})),kt(Tt(e),"getHighLightedClass",(function(){var t=e.props,n=t.day,r=t.highlightDates;if(!r)return!1;var o=Wt(n,"MM.dd.yyyy");return r.get(o)})),kt(Tt(e),"getHolidaysClass",(function(){var t=e.props,n=t.day,r=t.holidays;if(!r)return!1;var o=Wt(n,"MM.dd.yyyy");return r.has(o)?[r.get(o).className]:void 0})),kt(Tt(e),"isInRange",(function(){var t=e.props,n=t.day,r=t.startDate,o=t.endDate;return!(!r||!o)&&Zt(n,r,o)})),kt(Tt(e),"isInSelectingRange",(function(){var t,n=e.props,r=n.day,o=n.selectsStart,a=n.selectsEnd,i=n.selectsRange,s=n.selectsDisabledDaysInRange,u=n.startDate,l=n.endDate,c=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return!(!(o||a||i)||!c||!s&&e.isDisabled())&&(o&&l&&(lt.default(c,l)||Jt(c,l))?Zt(r,c,l):(a&&u&&(ut.default(c,u)||Jt(c,u))||!(!i||!u||l||!ut.default(c,u)&&!Jt(c,u)))&&Zt(r,u,c))})),kt(Tt(e),"isSelectingRangeStart",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,o=n.startDate,a=n.selectsStart,i=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Qt(r,a?i:o)})),kt(Tt(e),"isSelectingRangeEnd",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,o=n.endDate,a=n.selectsEnd,i=n.selectsRange,s=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Qt(r,a||i?s:o)})),kt(Tt(e),"isRangeStart",(function(){var t=e.props,n=t.day,r=t.startDate,o=t.endDate;return!(!r||!o)&&Qt(r,n)})),kt(Tt(e),"isRangeEnd",(function(){var t=e.props,n=t.day,r=t.startDate,o=t.endDate;return!(!r||!o)&&Qt(o,n)})),kt(Tt(e),"isWeekend",(function(){var t=Ie.default(e.props.day);return 0===t||6===t})),kt(Tt(e),"isAfterMonth",(function(){return void 0!==e.props.month&&(e.props.month+1)%12===Me.default(e.props.day)})),kt(Tt(e),"isBeforeMonth",(function(){return void 0!==e.props.month&&(Me.default(e.props.day)+1)%12===e.props.month})),kt(Tt(e),"isCurrentDay",(function(){return e.isSameDay(Lt())})),kt(Tt(e),"isSelected",(function(){return e.isSameDay(e.props.selected)||e.isSameWeek(e.props.selected)})),kt(Tt(e),"getClassNames",(function(t){var n,r=e.props.dayClassName?e.props.dayClassName(t):void 0;return fe.default("react-datepicker__day",r,"react-datepicker__day--"+Wt(e.props.day,"ddd",n),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass("react-datepicker__day--highlighted"),e.getHolidaysClass())})),kt(Tt(e),"getAriaLabel",(function(){var t=e.props,n=t.day,r=t.ariaLabelPrefixWhenEnabled,o=void 0===r?"Choose":r,a=t.ariaLabelPrefixWhenDisabled,i=void 0===a?"Not available":a,s=e.isDisabled()||e.isExcluded()?i:o;return"".concat(s," ").concat(Wt(n,"PPPP",e.props.locale))})),kt(Tt(e),"getTitle",(function(){var t=e.props,n=t.day,r=t.holidays,o=void 0===r?new Map:r,a=Wt(n,"MM.dd.yyyy");return o.has(a)&&o.get(a).holidayNames.length>0?o.get(a).holidayNames.join(", "):""})),kt(Tt(e),"getTabIndex",(function(t,n){var r=t||e.props.selected,o=n||e.props.preSelection;return(!e.props.showWeekPicker||!e.props.showWeekNumber&&e.isStartOfWeek())&&(e.isKeyboardSelected()||e.isSameDay(r)&&Qt(o,r))?0:-1})),kt(Tt(e),"handleFocusDay",(function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!1;0===e.getTabIndex()&&!n.isInputFocused&&e.isSameDay(e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(r=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(r=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(r=!0),e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()&&(r=!1),e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()&&(r=!1)),r&&(null===(t=e.dayEl.current)||void 0===t||t.focus({preventScroll:!0}))})),kt(Tt(e),"renderDayContents",(function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(Ae.default(e.props.day),e.props.day):Ae.default(e.props.day)})),kt(Tt(e),"render",(function(){return de.default.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.handleMouseEnter,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),""!==e.getTitle()&&de.default.createElement("span",{className:"holiday-overlay"},e.getTitle()))})),e}return Ct(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(e){this.handleFocusDay(e)}}]),n}(de.default.Component),Un=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"weekNumberEl",de.default.createRef()),kt(Tt(e),"handleClick",(function(t){e.props.onClick&&e.props.onClick(t)})),kt(Tt(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),kt(Tt(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Qt(e.props.date,e.props.selected)&&Qt(e.props.date,e.props.preSelection)})),kt(Tt(e),"getTabIndex",(function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||Qt(e.props.date,e.props.selected)&&Qt(e.props.preSelection,e.props.selected))?0:-1})),kt(Tt(e),"handleFocusWeekNumber",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===e.getTabIndex()&&!t.isInputFocused&&Qt(e.props.date,e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(n=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})})),e}return Ct(n,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(e){this.handleFocusWeekNumber(e)}},{key:"render",value:function(){var e=this.props,t=e.weekNumber,n=e.ariaLabelPrefix,r=void 0===n?"week ":n,o={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!e.onClick,"react-datepicker__week-number--selected":Qt(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return de.default.createElement("div",{ref:this.weekNumberEl,className:fe.default(o),"aria-label":"".concat(r," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},t)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),n}(de.default.Component),zn=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n)})),kt(Tt(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),kt(Tt(e),"handleWeekClick",(function(t,n,r){if("function"==typeof e.props.onWeekSelect&&e.props.onWeekSelect(t,n,r),e.props.showWeekPicker){var o=Ht(t,e.props.locale,e.props.calendarStartDay);e.handleDayClick(o,r)}e.props.shouldCloseOnSelect&&e.props.setOpen(!1)})),kt(Tt(e),"formatWeekNumber",(function(t){return e.props.formatWeekNumber?e.props.formatWeekNumber(t):function(e,t){var n=t&&tn(t)||en()&&tn(en());return Oe.default(e,n?{locale:n}:null)}(t)})),kt(Tt(e),"renderDays",(function(){var t=Ht(e.props.day,e.props.locale,e.props.calendarStartDay),n=[],r=e.formatWeekNumber(t);if(e.props.showWeekNumber){var o=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(Tt(e),t,r):void 0;n.push(de.default.createElement(Un,{key:"W",weekNumber:r,date:t,onClick:o,selected:e.props.selected,preSelection:e.props.preSelection,ariaLabelPrefix:e.props.ariaLabelPrefix,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef}))}return n.concat([0,1,2,3,4,5,6].map((function(n){var r=ye.default(t,n);return de.default.createElement(Wn,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:r.valueOf(),day:r,month:e.props.month,onClick:e.handleDayClick.bind(Tt(e),r),onMouseEnter:e.handleDayMouseEnter.bind(Tt(e),r),minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,renderDayContents:e.props.renderDayContents,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart,locale:e.props.locale})})))})),kt(Tt(e),"startOfWeek",(function(){return Ht(e.props.day,e.props.locale,e.props.calendarStartDay)})),kt(Tt(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Qt(e.startOfWeek(),e.props.selected)&&Qt(e.startOfWeek(),e.props.preSelection)})),e}return Ct(n,[{key:"render",value:function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Qt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return de.default.createElement("div",{className:fe.default(e)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(de.default.Component),Hn="two_columns",Vn="three_columns",qn="four_columns",Gn=kt(kt(kt({},Hn,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),Vn,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),qn,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function Yn(e,t){return e?qn:t?Hn:Vn}var Kn=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"MONTH_REFS",Dt(Array(12)).map((function(){return de.default.createRef()}))),kt(Tt(e),"QUARTER_REFS",Dt(Array(4)).map((function(){return de.default.createRef()}))),kt(Tt(e),"isDisabled",(function(t){return on(t,e.props)})),kt(Tt(e),"isExcluded",(function(t){return an(t,e.props)})),kt(Tt(e),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n,e.props.orderInDisplay)})),kt(Tt(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),kt(Tt(e),"handleMouseLeave",(function(){e.props.onMouseLeave&&e.props.onMouseLeave()})),kt(Tt(e),"isRangeStartMonth",(function(t){var n=e.props,r=n.day,o=n.startDate,a=n.endDate;return!(!o||!a)&&$t(Ue.default(r,t),o)})),kt(Tt(e),"isRangeStartQuarter",(function(t){var n=e.props,r=n.day,o=n.startDate,a=n.endDate;return!(!o||!a)&&Xt(ze.default(r,t),o)})),kt(Tt(e),"isRangeEndMonth",(function(t){var n=e.props,r=n.day,o=n.startDate,a=n.endDate;return!(!o||!a)&&$t(Ue.default(r,t),a)})),kt(Tt(e),"isRangeEndQuarter",(function(t){var n=e.props,r=n.day,o=n.startDate,a=n.endDate;return!(!o||!a)&&Xt(ze.default(r,t),a)})),kt(Tt(e),"isInSelectingRangeMonth",(function(t){var n,r=e.props,o=r.day,a=r.selectsStart,i=r.selectsEnd,s=r.selectsRange,u=r.startDate,l=r.endDate,c=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return!(!(a||i||s)||!c)&&(a&&l?un(c,l,t,o):(i&&u||!(!s||!u||l))&&un(u,c,t,o))})),kt(Tt(e),"isSelectingMonthRangeStart",(function(t){var n;if(!e.isInSelectingRangeMonth(t))return!1;var r=e.props,o=r.day,a=r.startDate,i=r.selectsStart,s=Ue.default(o,t),u=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return $t(s,i?u:a)})),kt(Tt(e),"isSelectingMonthRangeEnd",(function(t){var n;if(!e.isInSelectingRangeMonth(t))return!1;var r=e.props,o=r.day,a=r.endDate,i=r.selectsEnd,s=r.selectsRange,u=Ue.default(o,t),l=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return $t(u,i||s?l:a)})),kt(Tt(e),"isInSelectingRangeQuarter",(function(t){var n,r=e.props,o=r.day,a=r.selectsStart,i=r.selectsEnd,s=r.selectsRange,u=r.startDate,l=r.endDate,c=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return!(!(a||i||s)||!c)&&(a&&l?fn(c,l,t,o):(i&&u||!(!s||!u||l))&&fn(u,c,t,o))})),kt(Tt(e),"isWeekInMonth",(function(t){var n=e.props.day,r=ye.default(t,6);return $t(t,n)||$t(r,n)})),kt(Tt(e),"isCurrentMonth",(function(e,t){return je.default(e)===je.default(Lt())&&t===Me.default(Lt())})),kt(Tt(e),"isCurrentQuarter",(function(e,t){return je.default(e)===je.default(Lt())&&t===Pe.default(Lt())})),kt(Tt(e),"isSelectedMonth",(function(e,t,n){return Me.default(n)===t&&je.default(e)===je.default(n)})),kt(Tt(e),"isSelectedQuarter",(function(e,t,n){return Pe.default(e)===t&&je.default(e)===je.default(n)})),kt(Tt(e),"renderWeeks",(function(){for(var t=[],n=e.props.fixedHeight,r=0,o=!1,a=Ht(Vt(e.props.day),e.props.locale,e.props.calendarStartDay);t.push(de.default.createElement(zn,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:e.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:e.props.disabledDayAriaLabelPrefix,key:r,day:a,month:Me.default(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,onWeekSelect:e.props.onWeekSelect,formatWeekNumber:e.props.formatWeekNumber,locale:e.props.locale,minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,showWeekNumber:e.props.showWeekNumbers,showWeekPicker:e.props.showWeekPicker,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,setOpen:e.props.setOpen,shouldCloseOnSelect:e.props.shouldCloseOnSelect,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,renderDayContents:e.props.renderDayContents,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,calendarStartDay:e.props.calendarStartDay,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart})),!o;){r++,a=be.default(a,1);var i=n&&r>=6,s=!n&&!e.isWeekInMonth(a);if(i||s){if(!e.props.peekNextMonth)break;o=!0}}return t})),kt(Tt(e),"onMonthClick",(function(t,n){e.handleDayClick(Vt(Ue.default(e.props.day,n)),t)})),kt(Tt(e),"onMonthMouseEnter",(function(t){e.handleDayMouseEnter(Vt(Ue.default(e.props.day,t)))})),kt(Tt(e),"handleMonthNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.MONTH_REFS[t].current&&e.MONTH_REFS[t].current.focus())})),kt(Tt(e),"onMonthKeyDown",(function(t,n){var r=e.props,o=r.selected,a=r.preSelection,i=r.disabledKeyboardNavigation,s=r.showTwoColumnMonthYearPicker,u=r.showFourColumnMonthYearPicker,l=r.setPreSelection,c=t.key;if("Tab"!==c&&t.preventDefault(),!i){var d=Yn(u,s),f=Gn[d].verticalNavigationOffset,h=Gn[d].grid;switch(c){case"Enter":e.onMonthClick(t,n),l(o);break;case"ArrowRight":e.handleMonthNavigation(11===n?0:n+1,xe.default(a,1));break;case"ArrowLeft":e.handleMonthNavigation(0===n?11:n-1,Ee.default(a,1));break;case"ArrowUp":e.handleMonthNavigation(h[0].includes(n)?n+12-f:n-f,Ee.default(a,f));break;case"ArrowDown":e.handleMonthNavigation(h[h.length-1].includes(n)?n-12+f:n+f,xe.default(a,f))}}})),kt(Tt(e),"onQuarterClick",(function(t,n){e.handleDayClick(Gt(ze.default(e.props.day,n)),t)})),kt(Tt(e),"onQuarterMouseEnter",(function(t){e.handleDayMouseEnter(Gt(ze.default(e.props.day,t)))})),kt(Tt(e),"handleQuarterNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.QUARTER_REFS[t-1].current&&e.QUARTER_REFS[t-1].current.focus())})),kt(Tt(e),"onQuarterKeyDown",(function(t,n){var r=t.key;if(!e.props.disabledKeyboardNavigation)switch(r){case"Enter":e.onQuarterClick(t,n),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleQuarterNavigation(4===n?1:n+1,we.default(e.props.preSelection,1));break;case"ArrowLeft":e.handleQuarterNavigation(1===n?4:n-1,_e.default(e.props.preSelection,1))}})),kt(Tt(e),"getMonthClassNames",(function(t){var n=e.props,r=n.day,o=n.startDate,a=n.endDate,i=n.selected,s=n.minDate,u=n.maxDate,l=n.preSelection,c=n.monthClassName,d=n.excludeDates,f=n.includeDates,h=c?c(Ue.default(r,t)):void 0,p=Ue.default(r,t);return fe.default("react-datepicker__month-text","react-datepicker__month-".concat(t),h,{"react-datepicker__month-text--disabled":(s||u||d||f)&&sn(p,e.props),"react-datepicker__month-text--selected":e.isSelectedMonth(r,t,i),"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&Me.default(l)===t,"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(t),"react-datepicker__month-text--in-range":un(o,a,t,r),"react-datepicker__month-text--range-start":e.isRangeStartMonth(t),"react-datepicker__month-text--range-end":e.isRangeEndMonth(t),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(t),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(t),"react-datepicker__month-text--today":e.isCurrentMonth(r,t)})})),kt(Tt(e),"getTabIndex",(function(t){var n=Me.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),kt(Tt(e),"getQuarterTabIndex",(function(t){var n=Pe.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),kt(Tt(e),"getAriaLabel",(function(t){var n=e.props,r=n.chooseDayAriaLabelPrefix,o=void 0===r?"Choose":r,a=n.disabledDayAriaLabelPrefix,i=void 0===a?"Not available":a,s=n.day,u=Ue.default(s,t),l=e.isDisabled(u)||e.isExcluded(u)?i:o;return"".concat(l," ").concat(Wt(u,"MMMM yyyy"))})),kt(Tt(e),"getQuarterClassNames",(function(t){var n=e.props,r=n.day,o=n.startDate,a=n.endDate,i=n.selected,s=n.minDate,u=n.maxDate,l=n.preSelection,c=n.disabledKeyboardNavigation;return fe.default("react-datepicker__quarter-text","react-datepicker__quarter-".concat(t),{"react-datepicker__quarter-text--disabled":(s||u)&&ln(ze.default(r,t),e.props),"react-datepicker__quarter-text--selected":e.isSelectedQuarter(r,t,i),"react-datepicker__quarter-text--keyboard-selected":!c&&Pe.default(l)===t,"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(t),"react-datepicker__quarter-text--in-range":fn(o,a,t,r),"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(t),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(t)})})),kt(Tt(e),"getMonthContent",(function(t){var n=e.props,r=n.showFullMonthYearPicker,o=n.renderMonthContent,a=n.locale,i=n.day,s=rn(t,a),u=nn(t,a);return o?o(t,s,u,i):r?u:s})),kt(Tt(e),"getQuarterContent",(function(t){var n=e.props,r=n.renderQuarterContent,o=function(e,t){return Wt(ze.default(Lt(),e),"QQQ",t)}(t,n.locale);return r?r(t,o):o})),kt(Tt(e),"renderMonths",(function(){var t=e.props,n=t.showTwoColumnMonthYearPicker,r=t.showFourColumnMonthYearPicker,o=t.day,a=t.selected;return Gn[Yn(r,n)].grid.map((function(t,n){return de.default.createElement("div",{className:"react-datepicker__month-wrapper",key:n},t.map((function(t,n){return de.default.createElement("div",{ref:e.MONTH_REFS[t],key:n,onClick:function(n){e.onMonthClick(n,t)},onKeyDown:function(n){e.onMonthKeyDown(n,t)},onMouseEnter:function(){return e.onMonthMouseEnter(t)},tabIndex:e.getTabIndex(t),className:e.getMonthClassNames(t),role:"option","aria-label":e.getAriaLabel(t),"aria-current":e.isCurrentMonth(o,t)?"date":void 0,"aria-selected":e.isSelectedMonth(o,t,a)},e.getMonthContent(t))})))}))})),kt(Tt(e),"renderQuarters",(function(){var t=e.props,n=t.day,r=t.selected;return de.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(t,o){return de.default.createElement("div",{key:o,ref:e.QUARTER_REFS[o],role:"option",onClick:function(n){e.onQuarterClick(n,t)},onKeyDown:function(n){e.onQuarterKeyDown(n,t)},onMouseEnter:function(){return e.onQuarterMouseEnter(t)},className:e.getQuarterClassNames(t),"aria-selected":e.isSelectedQuarter(n,t,r),tabIndex:e.getQuarterTabIndex(t),"aria-current":e.isCurrentQuarter(n,t)?"date":void 0},e.getQuarterContent(t))})))})),kt(Tt(e),"getClassNames",(function(){var t=e.props,n=t.selectingDate,r=t.selectsStart,o=t.selectsEnd,a=t.showMonthYearPicker,i=t.showQuarterYearPicker,s=t.showWeekPicker;return fe.default("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||o)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":i},{"react-datepicker__weekPicker":s})})),e}return Ct(n,[{key:"render",value:function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,r=e.day,o=e.ariaLabelPrefix,a=void 0===o?"month ":o;return de.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(a," ").concat(Wt(r,"yyyy-MM")),role:"listbox"},t?this.renderMonths():n?this.renderQuarters():this.renderWeeks())}}]),n}(de.default.Component),$n=function(e){Et(n,e);var t=Rt(n);function n(){var e;xt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return kt(Tt(e=t.call.apply(t,[this].concat(o))),"state",{height:null}),kt(Tt(e),"scrollToTheSelectedTime",(function(){requestAnimationFrame((function(){e.list&&(e.list.scrollTop=e.centerLi&&n.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-e.header.clientHeight:e.list.clientHeight,e.centerLi))}))})),kt(Tt(e),"handleClick",(function(t){(e.props.minTime||e.props.maxTime)&&vn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&mn(t,e.props)||e.props.onChange(t)})),kt(Tt(e),"isSelectedTime",(function(t){return e.props.selected&&(n=t,Tn(e.props.selected).getTime()===Tn(n).getTime());var n})),kt(Tt(e),"isDisabledTime",(function(t){return(e.props.minTime||e.props.maxTime)&&vn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&mn(t,e.props)})),kt(Tt(e),"liClasses",(function(t){var n=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(t):void 0];return e.isSelectedTime(t)&&n.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(t)&&n.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(60*De.default(t)+Re.default(t))%e.props.intervals!=0&&n.push("react-datepicker__time-list-item--injected"),n.join(" ")})),kt(Tt(e),"handleOnKeyDown",(function(t,n){" "===t.key&&(t.preventDefault(),t.key="Enter"),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||!t.target.previousSibling||(t.preventDefault(),t.target.previousSibling.focus()),"ArrowDown"!==t.key&&"ArrowRight"!==t.key||!t.target.nextSibling||(t.preventDefault(),t.target.nextSibling.focus()),"Enter"===t.key&&e.handleClick(n),e.props.handleOnKeyDown(t)})),kt(Tt(e),"renderTimes",(function(){for(var t,n=[],r=e.props.format?e.props.format:"p",o=e.props.intervals,a=e.props.selected||e.props.openToDate||Lt(),i=(t=a,$e.default(t)),s=e.props.injectTimes&&e.props.injectTimes.sort((function(e,t){return e-t})),u=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}(a),l=u/o,c=0;c<l;c++){var d=ve.default(i,c*o);if(n.push(d),s){var f=En(i,d,c,o,s);n=n.concat(f)}}var h=n.reduce((function(e,t){return t.getTime()<=a.getTime()?t:e}),n[0]);return n.map((function(t,n){return de.default.createElement("li",{key:n,onClick:e.handleClick.bind(Tt(e),t),className:e.liClasses(t),ref:function(n){t===h&&(e.centerLi=n)},onKeyDown:function(n){e.handleOnKeyDown(n,t)},tabIndex:t===h?0:-1,role:"option","aria-selected":e.isSelectedTime(t)?"true":void 0,"aria-disabled":e.isDisabledTime(t)?"true":void 0},Wt(t,r,e.props.locale))}))})),e}return Ct(n,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state.height;return de.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},de.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(t){e.header=t}},de.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),de.default.createElement("div",{className:"react-datepicker__time"},de.default.createElement("div",{className:"react-datepicker__time-box"},de.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}(de.default.Component);kt($n,"calcCenterPosition",(function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)}));var Xn=function(e){Et(n,e);var t=Rt(n);function n(e){var r;return xt(this,n),kt(Tt(r=t.call(this,e)),"YEAR_REFS",Dt(Array(r.props.yearItemNumber)).map((function(){return de.default.createRef()}))),kt(Tt(r),"isDisabled",(function(e){return on(e,r.props)})),kt(Tt(r),"isExcluded",(function(e){return an(e,r.props)})),kt(Tt(r),"selectingDate",(function(){var e;return null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection})),kt(Tt(r),"updateFocusOnPaginate",(function(e){var t=function(){this.YEAR_REFS[e].current.focus()}.bind(Tt(r));window.requestAnimationFrame(t)})),kt(Tt(r),"handleYearClick",(function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)})),kt(Tt(r),"handleYearNavigation",(function(e,t){var n=r.props,o=n.date,a=n.yearItemNumber,i=Nn(o,a).startPeriod;r.isDisabled(t)||r.isExcluded(t)||(r.props.setPreSelection(t),e-i==-1?r.updateFocusOnPaginate(a-1):e-i===a?r.updateFocusOnPaginate(0):r.YEAR_REFS[e-i].current.focus())})),kt(Tt(r),"isSameDay",(function(e,t){return Qt(e,t)})),kt(Tt(r),"isCurrentYear",(function(e){return e===je.default(Lt())})),kt(Tt(r),"isRangeStart",(function(e){return r.props.startDate&&r.props.endDate&&Kt(He.default(Lt(),e),r.props.startDate)})),kt(Tt(r),"isRangeEnd",(function(e){return r.props.startDate&&r.props.endDate&&Kt(He.default(Lt(),e),r.props.endDate)})),kt(Tt(r),"isInRange",(function(e){return cn(e,r.props.startDate,r.props.endDate)})),kt(Tt(r),"isInSelectingRange",(function(e){var t=r.props,n=t.selectsStart,o=t.selectsEnd,a=t.selectsRange,i=t.startDate,s=t.endDate;return!(!(n||o||a)||!r.selectingDate())&&(n&&s?cn(e,r.selectingDate(),s):(o&&i||!(!a||!i||s))&&cn(e,i,r.selectingDate()))})),kt(Tt(r),"isSelectingRangeStart",(function(e){if(!r.isInSelectingRange(e))return!1;var t=r.props,n=t.startDate,o=t.selectsStart;return Kt(He.default(Lt(),e),o?r.selectingDate():n)})),kt(Tt(r),"isSelectingRangeEnd",(function(e){if(!r.isInSelectingRange(e))return!1;var t=r.props,n=t.endDate,o=t.selectsEnd,a=t.selectsRange;return Kt(He.default(Lt(),e),o||a?r.selectingDate():n)})),kt(Tt(r),"isKeyboardSelected",(function(e){var t=qt(He.default(r.props.date,e));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Qt(t,qt(r.props.selected))&&Qt(t,qt(r.props.preSelection))})),kt(Tt(r),"onYearClick",(function(e,t){var n=r.props.date;r.handleYearClick(qt(He.default(n,t)),e)})),kt(Tt(r),"onYearKeyDown",(function(e,t){var n=e.key;if(!r.props.disabledKeyboardNavigation)switch(n){case"Enter":r.onYearClick(e,t),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(t+1,Ce.default(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(t-1,Ne.default(r.props.preSelection,1))}})),kt(Tt(r),"getYearClassNames",(function(e){var t=r.props,n=t.minDate,o=t.maxDate,a=t.selected,i=t.excludeDates,s=t.includeDates,u=t.filterDate;return fe.default("react-datepicker__year-text",{"react-datepicker__year-text--selected":e===je.default(a),"react-datepicker__year-text--disabled":(n||o||i||s||u)&&dn(e,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(e),"react-datepicker__year-text--range-start":r.isRangeStart(e),"react-datepicker__year-text--range-end":r.isRangeEnd(e),"react-datepicker__year-text--in-range":r.isInRange(e),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(e),"react-datepicker__year-text--today":r.isCurrentYear(e)})})),kt(Tt(r),"getYearTabIndex",(function(e){return r.props.disabledKeyboardNavigation?"-1":e===je.default(r.props.preSelection)?"0":"-1"})),kt(Tt(r),"getYearContainerClassNames",(function(){var e=r.props,t=e.selectingDate,n=e.selectsStart,o=e.selectsEnd,a=e.selectsRange;return fe.default("react-datepicker__year",{"react-datepicker__year--selecting-range":t&&(n||o||a)})})),kt(Tt(r),"getYearContent",(function(e){return r.props.renderYearContent?r.props.renderYearContent(e):e})),r}return Ct(n,[{key:"render",value:function(){for(var e=this,t=[],n=this.props,r=n.date,o=n.yearItemNumber,a=n.onYearMouseEnter,i=n.onYearMouseLeave,s=Nn(r,o),u=s.startPeriod,l=s.endPeriod,c=function(n){t.push(de.default.createElement("div",{ref:e.YEAR_REFS[n-u],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){e.onYearKeyDown(t,n)},tabIndex:e.getYearTabIndex(n),className:e.getYearClassNames(n),onMouseEnter:function(e){return a(e,n)},onMouseLeave:function(e){return i(e,n)},key:n,"aria-current":e.isCurrentYear(n)?"date":void 0},e.getYearContent(n)))},d=u;d<=l;d++)c(d);return de.default.createElement("div",{className:this.getYearContainerClassNames()},de.default.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},t))}}]),n}(de.default.Component),Qn=function(e){Et(n,e);var t=Rt(n);function n(e){var r;return xt(this,n),kt(Tt(r=t.call(this,e)),"onTimeChange",(function(e){r.setState({time:e});var t=r.props.date,n=t instanceof Date&&!isNaN(t)?t:new Date;n.setHours(e.split(":")[0]),n.setMinutes(e.split(":")[1]),r.props.onChange(n)})),kt(Tt(r),"renderTimeInput",(function(){var e=r.state.time,t=r.props,n=t.date,o=t.timeString,a=t.customTimeInput;return a?de.default.cloneElement(a,{date:n,value:e,onChange:r.onTimeChange}):de.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){r.onTimeChange(e.target.value||o)}})})),r.state={time:r.props.timeString},r}return Ct(n,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__input-time-container"},de.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),de.default.createElement("div",{className:"react-datepicker-time__input-container"},de.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.timeString!==t.time?{time:e.timeString}:null}}]),n}(de.default.Component);function Jn(e){var t=e.className,n=e.children,r=e.showPopperArrow,o=e.arrowProps,a=void 0===o?{}:o;return de.default.createElement("div",{className:t},r&&de.default.createElement("div",St({className:"react-datepicker__triangle"},a)),n)}var Zn=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],er=function(e){Et(n,e);var t=Rt(n);function n(e){var r;return xt(this,n),kt(Tt(r=t.call(this,e)),"handleClickOutside",(function(e){r.props.onClickOutside(e)})),kt(Tt(r),"setClickOutsideRef",(function(){return r.containerRef.current})),kt(Tt(r),"handleDropdownFocus",(function(e){(function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return Zn.some((function(t){return e.indexOf(t)>=0}))})(e.target)&&r.props.onDropdownFocus()})),kt(Tt(r),"getDateInView",(function(){var e=r.props,t=e.preSelection,n=e.selected,o=e.openToDate,a=wn(r.props),i=Cn(r.props),s=Lt();return o||n||t||(a&&lt.default(s,a)?a:i&&ut.default(s,i)?i:s)})),kt(Tt(r),"increaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:xe.default(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),kt(Tt(r),"decreaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:Ee.default(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),kt(Tt(r),"handleDayClick",(function(e,t,n){r.props.onSelect(e,t,n),r.props.setPreSelection&&r.props.setPreSelection(e)})),kt(Tt(r),"handleDayMouseEnter",(function(e){r.setState({selectingDate:e}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)})),kt(Tt(r),"handleMonthMouseLeave",(function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()})),kt(Tt(r),"handleYearMouseEnter",(function(e,t){r.setState({selectingDate:He.default(Lt(),t)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(e,t)})),kt(Tt(r),"handleYearMouseLeave",(function(e,t){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(e,t)})),kt(Tt(r),"handleYearChange",(function(e){r.props.onYearChange&&(r.props.onYearChange(e),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),kt(Tt(r),"handleMonthChange",(function(e){r.handleCustomMonthChange(e),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),kt(Tt(r),"handleCustomMonthChange",(function(e){r.props.onMonthChange&&(r.props.onMonthChange(e),r.setState({isRenderAriaLiveMessage:!0}))})),kt(Tt(r),"handleMonthYearChange",(function(e){r.handleYearChange(e),r.handleMonthChange(e)})),kt(Tt(r),"changeYear",(function(e){r.setState((function(t){var n=t.date;return{date:He.default(n,e)}}),(function(){return r.handleYearChange(r.state.date)}))})),kt(Tt(r),"changeMonth",(function(e){r.setState((function(t){var n=t.date;return{date:Ue.default(n,e)}}),(function(){return r.handleMonthChange(r.state.date)}))})),kt(Tt(r),"changeMonthYear",(function(e){r.setState((function(t){var n=t.date;return{date:He.default(Ue.default(n,Me.default(e)),je.default(e))}}),(function(){return r.handleMonthYearChange(r.state.date)}))})),kt(Tt(r),"header",(function(){var e=Ht(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,r.props.locale,r.props.calendarStartDay),t=[];return r.props.showWeekNumbers&&t.push(de.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),t.concat([0,1,2,3,4,5,6].map((function(t){var n=ye.default(e,t),o=r.formatWeekday(n,r.props.locale),a=r.props.weekDayClassName?r.props.weekDayClassName(n):void 0;return de.default.createElement("div",{key:t,className:fe.default("react-datepicker__day-name",a)},o)})))})),kt(Tt(r),"formatWeekday",(function(e,t){return r.props.formatWeekDay?function(e,t,n){return t(Wt(e,"EEEE",n))}(e,r.props.formatWeekDay,t):r.props.useWeekdaysShort?function(e,t){return Wt(e,"EEE",t)}(e,t):function(e,t){return Wt(e,"EEEEEE",t)}(e,t)})),kt(Tt(r),"decreaseYear",(function(){r.setState((function(e){var t=e.date;return{date:Ne.default(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),kt(Tt(r),"clearSelectingDate",(function(){r.setState({selectingDate:null})})),kt(Tt(r),"renderPreviousButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=bn(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.yearItemNumber,o=void 0===r?jt:r,a=Nn(qt(Ne.default(e,o)),o).endPeriod,i=n&&je.default(n);return i&&i>a||!1}(r.state.date,r.props);break;default:e=gn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],n=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.decreaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),n=null);var o=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,a=r.props,i=a.previousMonthButtonLabel,s=a.previousYearButtonLabel,u=r.props,l=u.previousMonthAriaLabel,c=void 0===l?"string"==typeof i?i:"Previous Month":l,d=u.previousYearAriaLabel,f=void 0===d?"string"==typeof s?s:"Previous Year":d;return de.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":o?f:c},de.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},o?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}})),kt(Tt(r),"increaseYear",(function(){r.setState((function(e){var t=e.date;return{date:Ce.default(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),kt(Tt(r),"renderNextButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=xn(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.yearItemNumber,o=void 0===r?jt:r,a=Nn(Ce.default(e,o),o).startPeriod,i=n&&je.default(n);return i&&i<a||!1}(r.state.date,r.props);break;default:e=yn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var n=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.increaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),n=null);var o=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,a=r.props,i=a.nextMonthButtonLabel,s=a.nextYearButtonLabel,u=r.props,l=u.nextMonthAriaLabel,c=void 0===l?"string"==typeof i?i:"Next Month":l,d=u.nextYearAriaLabel,f=void 0===d?"string"==typeof s?s:"Next Year":d;return de.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":o?f:c},de.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},o?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}})),kt(Tt(r),"renderCurrentMonth",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,t=["react-datepicker__current-month"];return r.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),de.default.createElement("div",{className:t.join(" ")},Wt(e,r.props.dateFormat,r.props.locale))})),kt(Tt(r),"renderYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showYearDropdown&&!e)return de.default.createElement(An,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:je.default(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})})),kt(Tt(r),"renderMonthDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthDropdown&&!e)return de.default.createElement(Pn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:Me.default(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})})),kt(Tt(r),"renderMonthYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthYearDropdown&&!e)return de.default.createElement(Bn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})})),kt(Tt(r),"handleTodayButtonClick",(function(e){r.props.onSelect(Yt(),e),r.props.setPreSelection&&r.props.setPreSelection(Yt())})),kt(Tt(r),"renderTodayButton",(function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return de.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return r.handleTodayButtonClick(e)}},r.props.todayButton)})),kt(Tt(r),"renderDefaultHeader",(function(e){var t=e.monthDate,n=e.i;return de.default.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(t),de.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)),de.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),kt(Tt(r),"renderCustomHeader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.monthDate,n=e.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var o=gn(r.state.date,r.props),a=yn(r.state.date,r.props),i=bn(r.state.date,r.props),s=xn(r.state.date,r.props),u=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return de.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(yt(yt({},r.state),{},{customHeaderCount:n,monthDate:t,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:o,nextMonthButtonDisabled:a,prevYearButtonDisabled:i,nextYearButtonDisabled:s})),u&&de.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),kt(Tt(r),"renderYearHeader",(function(){var e=r.state.date,t=r.props,n=t.showYearPicker,o=Nn(e,t.yearItemNumber),a=o.startPeriod,i=o.endPeriod;return de.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},n?"".concat(a," - ").concat(i):je.default(e))})),kt(Tt(r),"renderHeader",(function(e){switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(e);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(e);default:return r.renderDefaultHeader(e)}})),kt(Tt(r),"renderMonths",(function(){var e;if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var t=[],n=r.props.showPreviousMonths?r.props.monthsShown-1:0,o=Ee.default(r.state.date,n),a=null!==(e=r.props.monthSelectedIn)&&void 0!==e?e:n,i=0;i<r.props.monthsShown;++i){var s=i-a+n,u=xe.default(o,s),l="month-".concat(i),c=i<r.props.monthsShown-1,d=i>0;t.push(de.default.createElement("div",{key:l,ref:function(e){r.monthContainer=e},className:"react-datepicker__month-container"},r.renderHeader({monthDate:u,i:i}),de.default.createElement(Kn,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:u,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:i,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:c,monthShowsDuplicateDaysStart:d})))}return t}})),kt(Tt(r),"renderYears",(function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?de.default.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader(),de.default.createElement(Xn,St({onDayClick:r.handleDayClick,selectingDate:r.state.selectingDate,clearSelectingDate:r.clearSelectingDate,date:r.state.date},r.props,{onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave}))):void 0})),kt(Tt(r),"renderTimeSection",(function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return de.default.createElement($n,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})})),kt(Tt(r),"renderInputTimeSection",(function(){var e=new Date(r.props.selected),t=Bt(e)&&Boolean(r.props.selected)?"".concat(_n(e.getHours()),":").concat(_n(e.getMinutes())):"";if(r.props.showTimeInput)return de.default.createElement(Qn,{date:e,timeString:t,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})})),kt(Tt(r),"renderAriaLiveRegion",(function(){var e,t=Nn(r.state.date,r.props.yearItemNumber),n=t.startPeriod,o=t.endPeriod;return e=r.props.showYearPicker?"".concat(n," - ").concat(o):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?je.default(r.state.date):"".concat(nn(Me.default(r.state.date),r.props.locale)," ").concat(je.default(r.state.date)),de.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&e)})),kt(Tt(r),"renderChildren",(function(){if(r.props.children)return de.default.createElement("div",{className:"react-datepicker__children-container"},r.props.children)})),r.containerRef=de.default.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return Ct(n,[{key:"componentDidMount",value:function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.preSelection||Qt(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Qt(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var n=!$t(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return n&&t.handleCustomMonthChange(t.state.date)}))}}},{key:"render",value:function(){var e=this.props.container||Jn;return de.default.createElement("div",{style:{display:"contents"},ref:this.containerRef},de.default.createElement(e,{className:fe.default("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:jt}}}]),n}(de.default.Component),tr=function(e){var t=e.icon,n=e.className,r=void 0===n?"":n,o=e.onClick,a="react-datepicker__calendar-icon";return de.default.isValidElement(t)?de.default.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(a," ").concat(r),onClick:function(e){"function"==typeof t.props.onClick&&t.props.onClick(e),"function"==typeof o&&o(e)}}):"string"==typeof t?de.default.createElement("i",{className:"".concat(a," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:o}):de.default.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:o},de.default.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},nr=function(e){Et(n,e);var t=Rt(n);function n(e){var r;return xt(this,n),(r=t.call(this,e)).el=document.createElement("div"),r}return Ct(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return mt.default.createPortal(this.props.children,this.el)}}]),n}(de.default.Component),rr=function(e){return!e.disabled&&-1!==e.tabIndex},or=function(e){Et(n,e);var t=Rt(n);function n(e){var r;return xt(this,n),kt(Tt(r=t.call(this,e)),"getTabChildren",(function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(rr)})),kt(Tt(r),"handleFocusStart",(function(){var e=r.getTabChildren();e&&e.length>1&&e[e.length-1].focus()})),kt(Tt(r),"handleFocusEnd",(function(){var e=r.getTabChildren();e&&e.length>1&&e[0].focus()})),r.tabLoopRef=de.default.createRef(),r}return Ct(n,[{key:"render",value:function(){return this.props.enableTabLoop?de.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},de.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,de.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(de.default.Component),ar=function(e){Et(n,e);var t=Rt(n);function n(){return xt(this,n),t.apply(this,arguments)}return Ct(n,[{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.wrapperClassName,o=t.hidePopper,a=t.popperComponent,i=t.popperModifiers,s=t.popperPlacement,u=t.popperProps,l=t.targetComponent,c=t.enableTabLoop,d=t.popperOnKeyDown,f=t.portalId,h=t.portalHost;if(!o){var p=fe.default("react-datepicker-popper",n);e=de.default.createElement(ue.Popper,St({modifiers:i,placement:s},u),(function(e){var t=e.ref,n=e.style,r=e.placement,o=e.arrowProps;return de.default.createElement(or,{enableTabLoop:c},de.default.createElement("div",{ref:t,style:n,className:p,"data-placement":r,onKeyDown:d},de.default.cloneElement(a,{arrowProps:o})))}))}this.props.popperContainer&&(e=de.default.createElement(this.props.popperContainer,{},e)),f&&!o&&(e=de.default.createElement(nr,{portalId:f,portalHost:h},e));var m=fe.default("react-datepicker-wrapper",r);return de.default.createElement(ue.Manager,{className:"react-datepicker-manager"},de.default.createElement(ue.Reference,null,(function(e){var t=e.ref;return de.default.createElement("div",{ref:t,className:m},l)})),e)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(de.default.Component),ir="react-datepicker-ignore-onclickoutside",sr=pt.default(er),ur="Date input not valid.",lr=function(e){Et(n,e);var t=Rt(n);function n(e){var r;return xt(this,n),kt(Tt(r=t.call(this,e)),"getPreSelection",(function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Lt()})),kt(Tt(r),"modifyHolidays",(function(){var e;return null===(e=r.props.holidays)||void 0===e?void 0:e.reduce((function(e,t){var n=new Date(t.date);return pe.default(n)?[].concat(Dt(e),[yt(yt({},t),{},{date:n})]):e}),[])})),kt(Tt(r),"calcInitialState",(function(){var e,t=r.getPreSelection(),n=wn(r.props),o=Cn(r.props),a=n&&lt.default(t,$e.default(n))?n:o&&ut.default(t,et.default(o))?o:t;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:null!==(e=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==e?e:a,highlightDates:kn(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),kt(Tt(r),"clearPreventFocusTimeout",(function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)})),kt(Tt(r),"setFocus",(function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})})),kt(Tt(r),"setBlur",(function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()})),kt(Tt(r),"setOpen",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.setState({open:e,preSelection:e&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:dr},(function(){e||r.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&r.setBlur(),r.setState({inputValue:null})}))}))})),kt(Tt(r),"inputOk",(function(){return he.default(r.state.preSelection)})),kt(Tt(r),"isCalendarOpen",(function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open})),kt(Tt(r),"handleFocus",(function(e){r.state.preventFocus||(r.props.onFocus(e),r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})})),kt(Tt(r),"sendFocusBackToInput",(function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},(function(){r.preventFocusTimeout=setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))}))})),kt(Tt(r),"cancelFocusInput",(function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null})),kt(Tt(r),"deferFocusInput",(function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout((function(){return r.setFocus()}),1)})),kt(Tt(r),"handleDropdownFocus",(function(){r.cancelFocusInput()})),kt(Tt(r),"handleBlur",(function(e){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(e),r.setState({focused:!1})})),kt(Tt(r),"handleCalendarClickOutside",(function(e){r.props.inline||r.setOpen(!1),r.props.onClickOutside(e),r.props.withPortal&&e.preventDefault()})),kt(Tt(r),"handleChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(Tt(r),t),"function"==typeof o.isDefaultPrevented&&!o.isDefaultPrevented())){r.setState({inputValue:o.target.value,lastPreSelectChange:cr});var a,i,s,u,l,c,d,f,h=(a=o.target.value,i=r.props.dateFormat,s=r.props.locale,u=r.props.strictParsing,l=r.props.minDate,c=null,d=tn(s)||tn(en()),f=!0,Array.isArray(i)?(i.forEach((function(e){var t=ft.default(a,e,new Date,{locale:d});u&&(f=Bt(t,l)&&a===Wt(t,e,s)),Bt(t,l)&&f&&(c=t)})),c):(c=ft.default(a,i,new Date,{locale:d}),u?f=Bt(c)&&a===Wt(c,i,s):Bt(c)||(i=i.match(Ft).map((function(e){var t=e[0];return"p"===t||"P"===t?d?(0,Pt[t])(e,d.formatLong):t:e})).join(""),a.length>0&&(c=ft.default(a,i.slice(0,a.length),new Date)),Bt(c)||(c=new Date(a))),Bt(c)&&f?c:null));r.props.showTimeSelectOnly&&r.props.selected&&h&&!Qt(h,r.props.selected)&&(h=vt.default(r.props.selected,{hours:De.default(h),minutes:Re.default(h),seconds:Te.default(h)})),!h&&o.target.value||(r.props.showWeekPicker&&(h=Ht(h,r.props.locale,r.props.calendarStartDay)),r.setSelected(h,o,!0))}})),kt(Tt(r),"handleSelect",(function(e,t,n){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(t),r.props.showWeekPicker&&(e=Ht(e,r.props.locale,r.props.calendarStartDay)),r.setSelected(e,t,!1,n),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(e);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var o=r.props,a=o.startDate,i=o.endDate;!a||i||lt.default(e,a)||r.setOpen(!1)}})),kt(Tt(r),"setSelected",(function(e,t,n,o){var a=e;if(r.props.showYearPicker){if(null!==a&&dn(je.default(a),r.props))return}else if(r.props.showMonthYearPicker){if(null!==a&&sn(a,r.props))return}else if(null!==a&&on(a,r.props))return;var i=r.props,s=i.onChange,u=i.selectsRange,l=i.startDate,c=i.endDate;if(!Jt(r.props.selected,a)||r.props.allowSameDay||u)if(null!==a&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(a=zt(a,{hour:De.default(r.props.selected),minute:Re.default(r.props.selected),second:Te.default(r.props.selected)})),r.props.inline||r.setState({preSelection:a}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:o})),u){var d=l&&c;l||c?l&&!c&&(lt.default(a,l)?s([a,null],t):s([l,a],t)):s([a,null],t),d&&s([a,null],t)}else s(a,t);n||(r.props.onSelect(a,t),r.setState({inputValue:null}))})),kt(Tt(r),"setPreSelection",(function(e){var t=void 0!==r.props.minDate,n=void 0!==r.props.maxDate,o=!0;if(e){r.props.showWeekPicker&&(e=Ht(e,r.props.locale,r.props.calendarStartDay));var a=$e.default(e);if(t&&n)o=Zt(e,r.props.minDate,r.props.maxDate);else if(t){var i=$e.default(r.props.minDate);o=ut.default(e,i)||Jt(a,i)}else if(n){var s=et.default(r.props.maxDate);o=lt.default(e,s)||Jt(a,s)}}o&&r.setState({preSelection:e})})),kt(Tt(r),"toggleCalendar",(function(){r.setOpen(!r.state.open)})),kt(Tt(r),"handleTimeChange",(function(e){var t=r.props.selected?r.props.selected:r.getPreSelection(),n=r.props.selected?e:zt(t,{hour:De.default(e),minute:Re.default(e)});r.setState({preSelection:n}),r.props.onChange(n),r.props.shouldCloseOnSelect&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})})),kt(Tt(r),"onInputClick",(function(){r.props.disabled||r.props.readOnly||r.setOpen(!0),r.props.onInputClick()})),kt(Tt(r),"onInputKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var n=r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',o=r.calendar.componentNode&&r.calendar.componentNode.querySelector(n);return void(o&&o.focus({preventScroll:!0}))}var a=Lt(r.state.preSelection);"Enter"===t?(e.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===dr?(r.handleSelect(a,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(a)):r.setOpen(!1)):"Escape"===t?(e.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):"Tab"===t&&r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:ur})}}else"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t||r.onInputClick()})),kt(Tt(r),"onPortalKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.setState({preventFocus:!0},(function(){r.setOpen(!1),setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))})))})),kt(Tt(r),"onDayKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key,n=Lt(r.state.preSelection);if("Enter"===t)e.preventDefault(),r.handleSelect(n,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(n);else if("Escape"===t)e.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:ur});else if(!r.props.disabledKeyboardNavigation){var o;switch(t){case"ArrowLeft":o=r.props.showWeekPicker?Se.default(n,1):ke.default(n,1);break;case"ArrowRight":o=r.props.showWeekPicker?be.default(n,1):ye.default(n,1);break;case"ArrowUp":o=Se.default(n,1);break;case"ArrowDown":o=be.default(n,1);break;case"PageUp":o=Ee.default(n,1);break;case"PageDown":o=xe.default(n,1);break;case"Home":o=Ne.default(n,1);break;case"End":o=Ce.default(n,1);break;default:o=null}if(!o)return void(r.props.onInputError&&r.props.onInputError({code:1,msg:ur}));if(e.preventDefault(),r.setState({lastPreSelectChange:dr}),r.props.adjustDateOnChange&&r.setSelected(o),r.setPreSelection(o),r.props.inline){var a=Me.default(n),i=Me.default(o),s=je.default(n),u=je.default(o);a!==i||s!==u?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}})),kt(Tt(r),"onPopperKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.sendFocusBackToInput())})),kt(Tt(r),"onClearClick",(function(e){e&&e.preventDefault&&e.preventDefault(),r.sendFocusBackToInput(),r.props.selectsRange?r.props.onChange([null,null],e):r.props.onChange(null,e),r.setState({inputValue:null})})),kt(Tt(r),"clear",(function(){r.onClearClick()})),kt(Tt(r),"onScroll",(function(e){"boolean"==typeof r.props.closeOnScroll&&r.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||r.setOpen(!1):"function"==typeof r.props.closeOnScroll&&r.props.closeOnScroll(e)&&r.setOpen(!1)})),kt(Tt(r),"renderCalendar",(function(){return r.props.inline||r.isCalendarOpen()?de.default.createElement(sr,{ref:function(e){r.calendar=e},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,holidays:Sn(r.modifyHolidays()),includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:ir,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showDateSelect:r.props.showDateSelect,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,onYearMouseEnter:r.props.onYearMouseEnter,onYearMouseLeave:r.props.onYearMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,showPopperArrow:r.props.showPopperArrow,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection},r.props.children):null})),kt(Tt(r),"renderAriaLiveRegion",(function(){var e,t=r.props,n=t.dateFormat,o=t.locale,a=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return e=r.props.selectsRange?"Selected start date: ".concat(Ut(r.props.startDate,{dateFormat:a,locale:o}),". ").concat(r.props.endDate?"End date: "+Ut(r.props.endDate,{dateFormat:a,locale:o}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(Ut(r.props.selected,{dateFormat:n,locale:o})):r.props.showYearPicker?"Selected year: ".concat(Ut(r.props.selected,{dateFormat:"yyyy",locale:o})):r.props.showMonthYearPicker?"Selected month: ".concat(Ut(r.props.selected,{dateFormat:"MMMM yyyy",locale:o})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(Ut(r.props.selected,{dateFormat:"yyyy, QQQ",locale:o})):"Selected date: ".concat(Ut(r.props.selected,{dateFormat:a,locale:o})),de.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)})),kt(Tt(r),"renderDateInput",(function(){var e,t=fe.default(r.props.className,kt({},ir,r.state.open)),n=r.props.customInput||de.default.createElement("input",{type:"text"}),o=r.props.customInputRef||"ref",a="string"==typeof r.props.value?r.props.value:"string"==typeof r.state.inputValue?r.state.inputValue:r.props.selectsRange?function(e,t,n){if(!e)return"";var r=Ut(e,n),o=t?Ut(t,n):"";return"".concat(r," - ").concat(o)}(r.props.startDate,r.props.endDate,r.props):Ut(r.props.selected,r.props);return de.default.cloneElement(n,(kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(e={},o,(function(e){r.input=e})),"value",a),"onBlur",r.handleBlur),"onChange",r.handleChange),"onClick",r.onInputClick),"onFocus",r.handleFocus),"onKeyDown",r.onInputKeyDown),"id",r.props.id),"name",r.props.name),"form",r.props.form),kt(kt(kt(kt(kt(kt(kt(kt(kt(kt(e,"autoFocus",r.props.autoFocus),"placeholder",r.props.placeholderText),"disabled",r.props.disabled),"autoComplete",r.props.autoComplete),"className",fe.default(n.props.className,t)),"title",r.props.title),"readOnly",r.props.readOnly),"required",r.props.required),"tabIndex",r.props.tabIndex),"aria-describedby",r.props.ariaDescribedBy),kt(kt(kt(e,"aria-invalid",r.props.ariaInvalid),"aria-labelledby",r.props.ariaLabelledBy),"aria-required",r.props.ariaRequired)))})),kt(Tt(r),"renderClearButton",(function(){var e=r.props,t=e.isClearable,n=e.disabled,o=e.selected,a=e.startDate,i=e.endDate,s=e.clearButtonTitle,u=e.clearButtonClassName,l=void 0===u?"":u,c=e.ariaLabelClose,d=void 0===c?"Close":c;return!t||null==o&&null==a&&null==i?null:de.default.createElement("button",{type:"button",className:fe.default("react-datepicker__close-icon",l,{"react-datepicker__close-icon--disabled":n}),disabled:n,"aria-label":d,onClick:r.onClearClick,title:s,tabIndex:-1})})),r.state=r.calcInitialState(),r.preventFocusTimeout=null,r}return Ct(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e,t){var n,r;e.inline&&(n=e.selected,r=this.props.selected,n&&r?Me.default(n)!==Me.default(r)||je.default(n)!==je.default(r):n!==r)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:kn(this.props.highlightDates)}),t.focused||Jt(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===t.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var e=this.props,t=e.showIcon,n=e.icon,r=e.calendarIconClassname,o=e.toggleCalendarOnIconClick,a=this.state.open;return de.default.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&de.default.createElement(tr,St({icon:n,className:"".concat(r," ").concat(a&&"react-datepicker-ignore-onclickoutside")},o?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?de.default.createElement(or,{enableTabLoop:this.props.enableTabLoop},de.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=de.default.createElement(nr,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),de.default.createElement("div",null,this.renderInputContainer(),t)}return de.default.createElement(ar,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:jt,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),n}(de.default.Component),cr="input",dr="navigate";e.CalendarContainer=Jn,e.default=lr,e.getDefaultLocale=en,e.registerLocale=function(e,t){var n="undefined"!=typeof window?window:globalThis;n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t},e.setDefaultLocale=function(e){("undefined"!=typeof window?window:globalThis).__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(5043),n(5173),n(8139),n(9713),n(97),n(4860),n(9333),n(7487),n(5027),n(6265),n(2215),n(6337),n(8926),n(486),n(1806),n(5622),n(9436),n(8885),n(6340),n(7124),n(3306),n(743),n(9855),n(216),n(1551),n(1845),n(4974),n(8170),n(776),n(9952),n(7566),n(8224),n(8673),n(9730),n(9563),n(4489),n(9352),n(2672),n(7815),n(2312),n(618),n(7660),n(9566),n(3035),n(1251),n(2039),n(147),n(802),n(3515),n(1315),n(8643),n(6194),n(4561),n(9977),n(3274),n(2763),n(888),n(1794),n(4161),n(2547),n(7950),n(7099),n(2431))},2013:(e,t,n)=>{"use strict";e.exports=c;var r=n(6545).F,o=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,i=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(6779);function l(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new a);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);u.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,n){f(e,t,n)}))}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new i;return e.push(null)}n(6329)(c,u),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new o("_transform()"))},c.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},2039:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(8171),o=n(888),a=n(6191),i=n(8726);function s(e,t){var n,s,u,l,c,d,f,h;(0,i.A)(1,arguments);var p=(0,r.q)(),m=(0,a.A)(null!==(n=null!==(s=null!==(u=null!==(l=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==l?l:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==u?u:p.weekStartsOn)&&void 0!==s?s:null===(f=p.locale)||void 0===f||null===(h=f.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,o.default)(e),g=v.getDay(),y=6+(g<m?-7:0)-(g-m);return v.setDate(v.getDate()+y),v.setHours(23,59,59,999),v}},2058:(e,t,n)=>{"use strict";n.d(t,{ef:()=>a,lJ:()=>s,xM:()=>i});var r=["D","DD"],o=["YY","YYYY"];function a(e){return-1!==r.indexOf(e)}function i(e){return-1!==o.indexOf(e)}function s(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}},2206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.default)(e);if(!n.length)return void t.preventDefault();var r=void 0,o=t.shiftKey,s=n[0],u=n[n.length-1],l=i();if(e===l){if(!o)return;r=u}u!==l||o||(r=s);s===l&&o&&(r=u);if(r)return t.preventDefault(),void r.focus();var c=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==c||"Chrome"==c[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var d=n.indexOf(l);d>-1&&(d+=o?-1:1);if("undefined"===typeof(r=n[d]))return t.preventDefault(),void(r=o?u:s).focus();t.preventDefault(),r.focus()};var r,o=n(4682),a=(r=o)&&r.__esModule?r:{default:r};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?i(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},2215:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(888),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e),i=(0,r.A)(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var s=n.getDate(),u=new Date(n.getTime());return u.setMonth(n.getMonth()+i+1,0),s>=u.getDate()?u:(n.setFullYear(u.getFullYear(),u.getMonth(),s),n)}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2285:e=>{var t,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,u=[],l=!1,c=-1;function d(){l&&s&&(l=!1,s.length?u=s.concat(u):c=-1,u.length&&f())}function f(){if(!l){var e=i(d);l=!0;for(var t=u.length;t;){for(s=u,u=[];++c<t;)s&&s[c].run();c=-1,t=u.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||i(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},2312:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e);return t.setHours(0,0,0,0),t}},2330:(e,t,n)=>{"use strict";var r=n(5043);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,i=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,c=r[1];return s((function(){o.value=n,o.getSnapshot=t,l(o)&&c({inst:o})}),[e,n,t]),i((function(){return l(o)&&c({inst:o}),e((function(){l(o)&&c({inst:o})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},2390:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(r){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},2431:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(2284),o=n(888),a=n(8224),i=n(6191),s=n(8726);function u(e,t){if((0,s.A)(2,arguments),"object"!==(0,r.A)(t)||null===t)throw new RangeError("values parameter must be an object");var n=(0,o.default)(e);return isNaN(n.getTime())?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=(0,a.default)(n,t.month)),null!=t.date&&n.setDate((0,i.A)(t.date)),null!=t.hours&&n.setHours((0,i.A)(t.hours)),null!=t.minutes&&n.setMinutes((0,i.A)(t.minutes)),null!=t.seconds&&n.setSeconds((0,i.A)(t.seconds)),null!=t.milliseconds&&n.setMilliseconds((0,i.A)(t.milliseconds)),n)}},2547:(e,t,n)=>{"use strict";n.r(t),n.d(t,{IGNORE_CLASS_NAME:()=>p,default:()=>v});var r=n(5043),o=n(7950);function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var u,l,c=(void 0===u&&(u=0),function(){return++u}),d={},f={},h=["touchstart","touchmove"],p="ignore-react-onclickoutside";function m(e,t){var n={};return-1!==h.indexOf(t)&&l&&(n.passive=!e.props.preventDefault),n}const v=function(e,t){var n,u,h=e.displayName||e.name||"Component";return u=n=function(n){var u,p;function v(e){var r;return(r=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!==typeof r.__clickOutsideHandlerProp){var t=r.getInstance();if("function"!==typeof t.props.handleClickOutside){if("function"!==typeof t.handleClickOutside)throw new Error("WrappedComponent: "+h+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else r.__clickOutsideHandlerProp(e)},r.__getComponentNode=function(){var e=r.getInstance();return t&&"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef():(0,o.findDOMNode)(e)},r.enableOnClickOutside=function(){if("undefined"!==typeof document&&!f[r._uid]){"undefined"===typeof l&&(l=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),f[r._uid]=!0;var e=r.props.eventTypes;e.forEach||(e=[e]),d[r._uid]=function(e){var t;null!==r.componentNode&&(r.initTimeStamp>e.timeStamp||(r.props.preventDefault&&e.preventDefault(),r.props.stopPropagation&&e.stopPropagation(),r.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&s(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,r.componentNode,r.props.outsideClickIgnoreClass)===document&&r.__outsideClickHandler(e)))},e.forEach((function(e){document.addEventListener(e,d[r._uid],m(i(r),e))}))}},r.disableOnClickOutside=function(){delete f[r._uid];var e=d[r._uid];if(e&&"undefined"!==typeof document){var t=r.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,m(i(r),t))})),delete d[r._uid]}},r.getRef=function(e){return r.instanceRef=e},r._uid=c(),r.initTimeStamp=performance.now(),r}p=n,(u=v).prototype=Object.create(p.prototype),u.prototype.constructor=u,a(u,p);var g=v.prototype;return g.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},g.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+h+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},g.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},g.componentWillUnmount=function(){this.disableOnClickOutside()},g.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,(0,r.createElement)(e,n)},v}(r.Component),n.displayName="OnClickOutside("+h+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:p,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},u}},2550:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6191),o=n(888),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e).getTime(),i=(0,r.A)(t);return new Date(n+i)}},2637:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(888),o=n(8726),a=n(7451),i=n(6191),s=n(8171);function u(e,t){var n,u,l,c,d,f,h,p;(0,o.A)(1,arguments);var m=(0,r.default)(e),v=m.getUTCFullYear(),g=(0,s.q)(),y=(0,i.A)(null!==(n=null!==(u=null!==(l=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(d=t.locale)||void 0===d||null===(f=d.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==l?l:g.firstWeekContainsDate)&&void 0!==u?u:null===(h=g.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==n?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(v+1,0,y),b.setUTCHours(0,0,0,0);var x=(0,a.A)(b,t),w=new Date(0);w.setUTCFullYear(v,0,y),w.setUTCHours(0,0,0,0);var C=(0,a.A)(w,t);return m.getTime()>=x.getTime()?v+1:m.getTime()>=C.getTime()?v:v-1}},2672:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}},2706:(e,t,n)=>{"use strict";n(7358)},2730:(e,t,n)=>{"use strict";var r=n(5043),o=n(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=v.hasOwnProperty(t)?v[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),C=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var j,F=Object.assign;function L(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s]){var u="\n"+o[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function U(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case C:return"Portal";case E:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ae(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,ke=null,Se=null;function Ee(e){if(e=xo(e)){if("function"!==typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=Co(t),Ce(e.stateNode,e.type,t))}}function _e(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ne(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Re(){}var De=!1;function Ie(e,t,n){if(De)return e(t,n);De=!0;try{return Te(e,t,n)}finally{De=!1,(null!==ke||null!==Se)&&(Re(),Ne())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=Co(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(c)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ce){Oe=!1}function Pe(e,t,n,r,o,a,i,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var je=!1,Fe=null,Le=!1,Be=null,We={onError:function(e){je=!0,Fe=e}};function Ue(e,t,n,r,o,a,i,s,u){je=!1,Fe=null,Pe.apply(We,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(ze(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Ve(o),e;if(i===r)return Ve(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ye=o.unstable_scheduleCallback,Ke=o.unstable_cancelCallback,$e=o.unstable_shouldYield,Xe=o.unstable_requestPaint,Qe=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~o;0!==s?r=dt(s):0!==(a&=i)&&(r=dt(a))}else 0!==(i=n&~o)?r=dt(i):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Ct,kt,St,Et,_t=!1,Nt=[],Tt=null,Rt=null,Dt=null,It=new Map,At=new Map,Ot=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function jt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=xo(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Ft(e){var t=bo(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xo(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){Lt(e)&&n.delete(t)}function Wt(){_t=!1,null!==Tt&&Lt(Tt)&&(Tt=null),null!==Rt&&Lt(Rt)&&(Rt=null),null!==Dt&&Lt(Dt)&&(Dt=null),It.forEach(Bt),At.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Wt)))}function zt(e){function t(t){return Ut(t,e)}if(0<Nt.length){Ut(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==Rt&&Ut(Rt,e),null!==Dt&&Ut(Dt,e),It.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Ht=x.ReactCurrentBatchConfig,Vt=!0;function qt(e,t,n,r){var o=bt,a=Ht.transition;Ht.transition=null;try{bt=1,Yt(e,t,n,r)}finally{bt=o,Ht.transition=a}}function Gt(e,t,n,r){var o=bt,a=Ht.transition;Ht.transition=null;try{bt=4,Yt(e,t,n,r)}finally{bt=o,Ht.transition=a}}function Yt(e,t,n,r){if(Vt){var o=$t(e,t,n,r);if(null===o)Vr(e,t,r,Kt,n),Pt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Tt=jt(Tt,e,t,n,r,o),!0;case"dragenter":return Rt=jt(Rt,e,t,n,r,o),!0;case"mouseover":return Dt=jt(Dt,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return It.set(a,jt(It.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,At.set(a,jt(At.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==o;){var a=xo(o);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Vr(e,t,r,Kt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Kt=null;function $t(e,t,n,r){if(Kt=null,null!==(e=bo(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),dn=F({},ln,{view:0,detail:0}),fn=on(dn),hn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(hn),mn=on(F({},hn,{dataTransfer:0})),vn=on(F({},dn,{relatedTarget:0})),gn=on(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),xn=on(F({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var _n=F({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=on(_n),Tn=on(F({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=on(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=F({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=on(In),On=[9,13,27,32],Mn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var jn=c&&"TextEvent"in window&&!Pn,Fn=c&&(!Mn||Pn&&8<Pn&&11>=Pn),Ln=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,r){_e(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Yn=null;function Kn(e){Lr(e,0)}function $n(e){if(Y(wo(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Yn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Yn)){var t=[];qn(t,Yn,e,we(e)),Ie(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function ar(e,t){if("click"===e)return $n(t)}function ir(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=cr(n,a);var i=cr(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==K(r)||("selectionStart"in(r=vr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Sr={};function Er(e){if(kr[e])return kr[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var _r=Er("animationend"),Nr=Er("animationiteration"),Tr=Er("animationstart"),Rr=Er("transitionend"),Dr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Dr.set(e,t),u(t,[e])}for(var Or=0;Or<Ir.length;Or++){var Mr=Ir[Or];Ar(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Ar(_r,"onAnimationEnd"),Ar(Nr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Rr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,u,l){if(Ue.apply(this,arguments),je){if(!je)throw Error(a(198));var c=Fe;je=!1,Fe=null,Le||(Le=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&o.isPropagationStopped())break e;Fr(o,s,l),a=u}else for(i=0;i<r.length;i++){if(u=(s=r[i]).instance,l=s.currentTarget,s=s.listener,u!==a&&o.isPropagationStopped())break e;Fr(o,s,l),a=u}}}if(Le)throw e=Be,Le=!1,Be=null,e}function Br(e,t){var n=t[vo];void 0===n&&(n=t[vo]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Wr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Ur]){e[Ur]=!0,i.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Wr(t,!1,e),Wr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Wr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Xt(t)){case 1:var o=qt;break;case 4:o=Gt;break;default:o=Yt}n=o.bind(null,t,n,e),o=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===o||8===u.nodeType&&u.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=bo(s)))return;if(5===(u=i.tag)||6===u){r=a=i;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=a,o=we(n),i=[];e:{var s=Dr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Nn;break;case"focusin":l="focus",u=vn;break;case"focusout":l="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case _r:case Nr:case Tr:u=gn;break;case Rr:u=Dn;break;case"scroll":u=fn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var c=0!==(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==f&&(null!=(m=Ae(p,f))&&c.push(qr(p,m,h)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,o),i.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(l=n.relatedTarget||n.fromElement)||!bo(l)&&!l[mo])&&(u||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?bo(l):null)&&(l!==(d=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,m="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==u?s:wo(u),h=null==l?s:wo(l),(s=new c(m,p+"leave",u,n,o)).target=d,s.relatedTarget=h,m=null,bo(o)===r&&((c=new c(f,p+"enter",l,n,o)).target=h,c.relatedTarget=d,m=c),d=m,u&&l)e:{for(f=l,p=0,h=c=u;h;h=Yr(h))p++;for(h=0,m=f;m;m=Yr(m))h++;for(;0<p-h;)c=Yr(c),p--;for(;0<h-p;)f=Yr(f),h--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Yr(c),f=Yr(f)}c=null}else c=null;null!==u&&Kr(i,s,u,c,!1),null!==l&&null!==d&&Kr(i,d,l,c,!0)}if("select"===(u=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Xn;else if(Vn(s))if(Qn)v=ir;else{v=or;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ar);switch(v&&(v=v(e,r))?qn(i,v,n,o):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?wo(r):window,e){case"focusin":(Vn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(i,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(i,n,o)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):(Jt="value"in(Qt=o)?Qt.value:Qt.textContent,zn=!0)),0<(g=Gr(r,b)).length&&(b=new xn(b,e,null,n,o),i.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Mn&&Wn(e,t)?(e=en(),Zt=Jt=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(o=new xn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=y))}Lr(i,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Ae(e,n))&&r.unshift(qr(e,a,o)),null!=(a=Ae(e,t))&&r.push(qr(e,a,o))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,o?null!=(u=Ae(n,a))&&i.unshift(qr(n,u,s)):o||null!=(u=Ae(n,a))&&i.push(qr(n,u,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,io="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function uo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);zt(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function co(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),ho="__reactFiber$"+fo,po="__reactProps$"+fo,mo="__reactContainer$"+fo,vo="__reactEvents$"+fo,go="__reactListeners$"+fo,yo="__reactHandles$"+fo;function bo(e){var t=e[ho];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[ho]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=co(e);null!==e;){if(n=e[ho])return n;e=co(e)}return t}n=(e=n).parentNode}return null}function xo(e){return!(e=e[ho]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Co(e){return e[po]||null}var ko=[],So=-1;function Eo(e){return{current:e}}function _o(e){0>So||(e.current=ko[So],ko[So]=null,So--)}function No(e,t){So++,ko[So]=e.current,e.current=t}var To={},Ro=Eo(To),Do=Eo(!1),Io=To;function Ao(e,t){var n=e.type.contextTypes;if(!n)return To;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mo(){_o(Do),_o(Ro)}function Po(e,t,n){if(Ro.current!==To)throw Error(a(168));No(Ro,t),No(Do,n)}function jo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,H(e)||"Unknown",o));return F({},n,r)}function Fo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||To,Io=Ro.current,No(Ro,e),No(Do,Do.current),!0}function Lo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=jo(e,t,Io),r.__reactInternalMemoizedMergedChildContext=e,_o(Do),_o(Ro),No(Ro,e)):_o(Do),No(Do,n)}var Bo=null,Wo=!1,Uo=!1;function zo(e){null===Bo?Bo=[e]:Bo.push(e)}function Ho(){if(!Uo&&null!==Bo){Uo=!0;var e=0,t=bt;try{var n=Bo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bo=null,Wo=!1}catch(o){throw null!==Bo&&(Bo=Bo.slice(e+1)),Ye(Ze,Ho),o}finally{bt=t,Uo=!1}}return null}var Vo=[],qo=0,Go=null,Yo=0,Ko=[],$o=0,Xo=null,Qo=1,Jo="";function Zo(e,t){Vo[qo++]=Yo,Vo[qo++]=Go,Go=e,Yo=t}function ea(e,t,n){Ko[$o++]=Qo,Ko[$o++]=Jo,Ko[$o++]=Xo,Xo=e;var r=Qo;e=Jo;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Qo=1<<32-it(t)+o|n<<o|r,Jo=a+e}else Qo=1<<a|n<<o|r,Jo=e}function ta(e){null!==e.return&&(Zo(e,1),ea(e,1,0))}function na(e){for(;e===Go;)Go=Vo[--qo],Vo[qo]=null,Yo=Vo[--qo],Vo[qo]=null;for(;e===Xo;)Xo=Ko[--$o],Ko[$o]=null,Jo=Ko[--$o],Ko[$o]=null,Qo=Ko[--$o],Ko[$o]=null}var ra=null,oa=null,aa=!1,ia=null;function sa(e,t){var n=Il(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xo?{id:Qo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Il(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(aa){var t=oa;if(t){var n=t;if(!ua(e,t)){if(la(e))throw Error(a(418));t=lo(n.nextSibling);var r=ra;t&&ua(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function fa(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(la(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=lo(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=lo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?lo(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=oa;e;)e=lo(e.nextSibling)}function pa(){oa=ra=null,aa=!1}function ma(e){null===ia?ia=[e]:ia.push(e)}var va=x.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&ba(a)===t.type)?((r=o(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Ml(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ll(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ml(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case C:return(t=Ll(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pl(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function h(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?l(e,t,n,r):null;case C:return n.key===o?c(e,t,n,r):null;case A:return h(e,t,(o=n._init)(n._payload),r)}if(te(n)||P(n))return null!==o?null:d(e,t,n,r,null);ya(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case C:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case A:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,o,null);ya(t,r)}return null}function m(o,a,s,u){for(var l=null,c=null,d=a,m=a=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=h(o,d,s[m],u);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(o,d),a=i(g,a,m),null===c?l=g:c.sibling=g,c=g,d=v}if(m===s.length)return n(o,d),aa&&Zo(o,m),l;if(null===d){for(;m<s.length;m++)null!==(d=f(o,s[m],u))&&(a=i(d,a,m),null===c?l=d:c.sibling=d,c=d);return aa&&Zo(o,m),l}for(d=r(o,d);m<s.length;m++)null!==(v=p(d,o,m,s[m],u))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),a=i(v,a,m),null===c?l=v:c.sibling=v,c=v);return e&&d.forEach((function(e){return t(o,e)})),aa&&Zo(o,m),l}function v(o,s,u,l){var c=P(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var d=c=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=h(o,m,y.value,l);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(o,m),s=i(b,s,v),null===d?c=b:d.sibling=b,d=b,m=g}if(y.done)return n(o,m),aa&&Zo(o,v),c;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=f(o,y.value,l))&&(s=i(y,s,v),null===d?c=y:d.sibling=y,d=y);return aa&&Zo(o,v),c}for(m=r(o,m);!y.done;v++,y=u.next())null!==(y=p(m,o,v,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=i(y,s,v),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(o,e)})),aa&&Zo(o,v),c}return function e(r,a,i,u){if("object"===typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var l=i.key,c=a;null!==c;){if(c.key===l){if((l=i.type)===k){if(7===c.tag){n(r,c.sibling),(a=o(c,i.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===A&&ba(l)===c.type){n(r,c.sibling),(a=o(c,i.props)).ref=ga(r,c,i),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}i.type===k?((a=Pl(i.props.children,r.mode,u,i.key)).return=r,r=a):((u=Ml(i.type,i.key,i.props,null,r.mode,u)).ref=ga(r,a,i),u.return=r,r=u)}return s(r);case C:e:{for(c=i.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ll(i,r.mode,u)).return=r,r=a}return s(r);case A:return e(r,a,(c=i._init)(i._payload),u)}if(te(i))return m(r,a,i,u);if(P(i))return v(r,a,i,u);ya(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Fl(i,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var wa=xa(!0),Ca=xa(!1),ka=Eo(null),Sa=null,Ea=null,_a=null;function Na(){_a=Ea=Sa=null}function Ta(e){var t=ka.current;_o(ka),e._currentValue=t}function Ra(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Da(e,t){Sa=e,_a=Ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===Ea){if(null===Sa)throw Error(a(308));Ea=e,Sa.dependencies={lanes:0,firstContext:e}}else Ea=Ea.next=e;return t}var Aa=null;function Oa(e){null===Aa?Aa=[e]:Aa.push(e)}function Ma(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Oa(t)):(n.next=o.next,o.next=n),t.interleaved=n,Pa(e,r)}function Pa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var ja=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ba(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tu)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Pa(e,n)}return null===(o=r.interleaved)?(t.next=t,Oa(r)):(t.next=o.next,o.next=t),r.interleaved=t,Pa(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function za(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ha(e,t,n,r){var o=e.updateQueue;ja=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var u=s,l=u.next;u.next=null,null===i?a=l:i.next=l,i=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var d=o.baseState;for(i=0,c=l=u=null,s=a;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(f=t,h=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=m.payload)?p.call(h,d,f):p)||void 0===f)break e;d=F({},d,f);break e;case 2:ja=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=h,u=d):c=c.next=h,i|=f;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(f=s).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===c&&(u=d),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=c,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);ju|=i,e.lanes=i,e.memoizedState=d}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var qa={},Ga=Eo(qa),Ya=Eo(qa),Ka=Eo(qa);function $a(e){if(e===qa)throw Error(a(174));return e}function Xa(e,t){switch(No(Ka,t),No(Ya,e),No(Ga,qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_o(Ga),No(Ga,t)}function Qa(){_o(Ga),_o(Ya),_o(Ka)}function Ja(e){$a(Ka.current);var t=$a(Ga.current),n=ue(t,e.type);t!==n&&(No(Ya,e),No(Ga,n))}function Za(e){Ya.current===e&&(_o(Ga),_o(Ya))}var ei=Eo(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var oi=x.ReactCurrentDispatcher,ai=x.ReactCurrentBatchConfig,ii=0,si=null,ui=null,li=null,ci=!1,di=!1,fi=0,hi=0;function pi(){throw Error(a(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function vi(e,t,n,r,o,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oi.current=null===e||null===e.memoizedState?Zi:es,e=n(r,o),di){i=0;do{if(di=!1,fi=0,25<=i)throw Error(a(301));i+=1,li=ui=null,t.updateQueue=null,oi.current=ts,e=n(r,o)}while(di)}if(oi.current=Ji,t=null!==ui&&null!==ui.next,ii=0,li=ui=si=null,ci=!1,t)throw Error(a(300));return e}function gi(){var e=0!==fi;return fi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?si.memoizedState=li=e:li=li.next=e,li}function bi(){if(null===ui){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=ui.next;var t=null===li?si.memoizedState:li.next;if(null!==t)li=t,ui=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ui=e).memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},null===li?si.memoizedState=li=e:li=li.next=e}return li}function xi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=bi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ui,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var u=s=null,l=null,c=i;do{var d=c.lane;if((ii&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,si.lanes|=d,ju|=d}c=c.next}while(null!==c&&c!==i);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,si.lanes|=i,ju|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ci(e){var t=bi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);sr(i,t.memoizedState)||(bs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ki(){}function Si(e,t){var n=si,r=bi(),o=t(),i=!sr(r.memoizedState,o);if(i&&(r.memoizedState=o,bs=!0),r=r.queue,ji(Ni.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ii(9,_i.bind(null,n,r,o,t),void 0,null),null===Ru)throw Error(a(349));0!==(30&ii)||Ei(n,t,o)}return o}function Ei(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _i(e,t,n,r){t.value=n,t.getSnapshot=r,Ti(t)&&Ri(e)}function Ni(e,t,n){return n((function(){Ti(t)&&Ri(e)}))}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ri(e){var t=Pa(e,1);null!==t&&nl(t,e,1,-1)}function Di(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,si,e),[t.memoizedState,e]}function Ii(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ai(){return bi().memoizedState}function Oi(e,t,n,r){var o=yi();si.flags|=e,o.memoizedState=Ii(1|t,n,void 0,void 0===r?null:r)}function Mi(e,t,n,r){var o=bi();r=void 0===r?null:r;var a=void 0;if(null!==ui){var i=ui.memoizedState;if(a=i.destroy,null!==r&&mi(r,i.deps))return void(o.memoizedState=Ii(t,n,a,r))}si.flags|=e,o.memoizedState=Ii(1|t,n,a,r)}function Pi(e,t){return Oi(8390656,8,e,t)}function ji(e,t){return Mi(2048,8,e,t)}function Fi(e,t){return Mi(4,2,e,t)}function Li(e,t){return Mi(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mi(4,4,Bi.bind(null,t,e),n)}function Ui(){}function zi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),si.lanes|=n,ju|=n,e.baseState=!0),t)}function qi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=n,ai.transition=r}}function Gi(){return bi().memoizedState}function Yi(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$i(e))Xi(t,n);else if(null!==(n=Ma(e,t,n,r))){nl(n,e,r,el()),Qi(n,t,r)}}function Ki(e,t,n){var r=tl(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($i(e))Xi(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,i)){var u=t.interleaved;return null===u?(o.next=o,Oa(t)):(o.next=u.next,u.next=o),void(t.interleaved=o)}}catch(l){}null!==(n=Ma(e,t,o,r))&&(nl(n,e,r,o=el()),Qi(n,t,r))}}function $i(e){var t=e.alternate;return e===si||null!==t&&t===si}function Xi(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ji={readContext:Ia,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:Ia,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:Pi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oi(4194308,4,Bi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yi.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Di,useDebugValue:Ui,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Di(!1),t=e[0];return e=qi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,o=yi();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ru)throw Error(a(349));0!==(30&ii)||Ei(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Pi(Ni.bind(null,r,i,e),[e]),r.flags|=2048,Ii(9,_i.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Ru.identifierPrefix;if(aa){var n=Jo;t=":"+t+"R"+(n=(Qo&~(1<<32-it(Qo)-1)).toString(32)+n),0<(n=fi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ia,useCallback:zi,useContext:Ia,useEffect:ji,useImperativeHandle:Wi,useInsertionEffect:Fi,useLayoutEffect:Li,useMemo:Hi,useReducer:wi,useRef:Ai,useState:function(){return wi(xi)},useDebugValue:Ui,useDeferredValue:function(e){return Vi(bi(),ui.memoizedState,e)},useTransition:function(){return[wi(xi)[0],bi().memoizedState]},useMutableSource:ki,useSyncExternalStore:Si,useId:Gi,unstable_isNewReconciler:!1},ts={readContext:Ia,useCallback:zi,useContext:Ia,useEffect:ji,useImperativeHandle:Wi,useInsertionEffect:Fi,useLayoutEffect:Li,useMemo:Hi,useReducer:Ci,useRef:Ai,useState:function(){return Ci(xi)},useDebugValue:Ui,useDeferredValue:function(e){var t=bi();return null===ui?t.memoizedState=e:Vi(t,ui.memoizedState,e)},useTransition:function(){return[Ci(xi)[0],bi().memoizedState]},useMutableSource:ki,useSyncExternalStore:Si,useId:Gi,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),a=Ba(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Wa(e,a,o))&&(nl(t,e,o,r),Ua(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),a=Ba(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Wa(e,a,o))&&(nl(t,e,o,r),Ua(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),o=Ba(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Wa(e,o,r))&&(nl(t,e,r,n),Ua(t,e,r))}};function as(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(o,a))}function is(e,t,n){var r=!1,o=To,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(o=Oo(t)?Io:Ro.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ao(e,o):To),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function us(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Fa(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=Ia(a):(a=Oo(t)?Io:Ro.current,o.context=Ao(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Ha(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Ba(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vu||(Vu=!0,qu=r),ds(0,t)},n}function ps(e,t,n){(n=Ba(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=El.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ba(-1,1)).tag=2,Wa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ys=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?Ca(t,null,n,r):wa(t,e.child,n,r)}function ws(e,t,n,r,o){n=n.render;var a=t.ref;return Da(t,o),r=vi(e,t,n,r,a,o),n=gi(),null===e||bs?(aa&&n&&ta(t),t.flags|=1,xs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Vs(e,t,o))}function Cs(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Al(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ml(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ks(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(i,r)&&e.ref===t.ref)return Vs(e,t,o)}return t.flags|=1,(e=Ol(a,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Vs(e,t,o);0!==(131072&e.flags)&&(bs=!0)}}return _s(e,t,n,r,o)}function Ss(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},No(Ou,Au),Au|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,No(Ou,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,No(Ou,Au),Au|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,No(Ou,Au),Au|=r;return xs(e,t,o,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,o){var a=Oo(n)?Io:Ro.current;return a=Ao(t,a),Da(t,o),n=vi(e,t,n,r,a,o),r=gi(),null===e||bs?(aa&&r&&ta(t),t.flags|=1,xs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Vs(e,t,o))}function Ns(e,t,n,r,o){if(Oo(n)){var a=!0;Fo(t)}else a=!1;if(Da(t,o),null===t.stateNode)Hs(e,t),is(t,n,r),us(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ia(l):l=Ao(t,l=Oo(n)?Io:Ro.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||u!==l)&&ss(t,i,r,l),ja=!1;var f=t.memoizedState;i.state=f,Ha(t,r,i,o),u=t.memoizedState,s!==r||f!==u||Do.current||ja?("function"===typeof c&&(rs(t,n,c,r),u=t.memoizedState),(s=ja||as(t,n,s,r,f,u,l))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=l,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,La(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),i.props=l,d=t.pendingProps,f=i.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ia(u):u=Ao(t,u=Oo(n)?Io:Ro.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||f!==u)&&ss(t,i,r,u),ja=!1,f=t.memoizedState,i.state=f,Ha(t,r,i,o);var p=t.memoizedState;s!==d||f!==p||Do.current||ja?("function"===typeof h&&(rs(t,n,h,r),p=t.memoizedState),(l=ja||as(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,u),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=u,r=l):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,a,o)}function Ts(e,t,n,r,o,a){Es(e,t);var i=0!==(128&t.flags);if(!r&&!i)return o&&Lo(t,n,!1),Vs(e,t,a);r=t.stateNode,ys.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,s,a)):xs(e,t,s,a),t.memoizedState=r.state,o&&Lo(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Po(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Po(0,t.context,!1),Xa(e,t.containerInfo)}function Ds(e,t,n,r,o){return pa(),ma(o),t.flags|=256,xs(e,t,n,r),t.child}var Is,As,Os,Ms,Ps={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,o=t.pendingProps,i=ei.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),No(ei,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=o.children,e=o.fallback,s?(o=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=jl(u,o,0,null),e=Pl(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ps,e):Ls(t,u));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=cs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=jl({mode:"visible",children:r.children},o,0,null),(i=Pl(i,o,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wa(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ps,i);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=cs(i=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Ru)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Pa(e,o),nl(r,e,o,-1))}return ml(),Bs(e,t,s,r=cs(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Nl.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=lo(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(Ko[$o++]=Qo,Ko[$o++]=Jo,Ko[$o++]=Xo,Qo=e.id,Jo=e.overflow,Xo=t),t=Ls(t,r.children),t.flags|=4096,t)}(e,t,u,o,r,i,n);if(s){s=o.fallback,u=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:o.children};return 0===(1&u)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=Ol(i,l)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Ol(r,s):(s=Pl(s,u,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,u=null===(u=e.child.memoizedState)?js(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,o}return e=(s=e.child).sibling,o=Ol(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ls(e,t){return(t=jl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&ma(r),wa(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ws(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ra(e.return,t,n)}function Us(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function zs(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ws(e,n,t);else if(19===e.tag)Ws(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(No(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Us(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ti(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Us(t,!0,n,null,a);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ys(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Oo(t.type)&&Mo(),Gs(t),null;case 3:return r=t.stateNode,Qa(),_o(Do),_o(Ro),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ia&&(il(ia),ia=null))),As(e,t),Gs(t),null;case 5:Za(t);var o=$a(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=$a(Ga.current),fa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ho]=t,r[po]=i,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(o=0;o<Pr.length;o++)Br(Pr[o],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,i),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Br("invalid",r);break;case"textarea":oe(r,i),Br("invalid",r)}for(var u in ye(n,i),o=null,i)if(i.hasOwnProperty(u)){var l=i[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,l,e),o=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,l,e),o=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":G(r),Z(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[ho]=t,e[po]=r,Is(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),o=r;break;case"iframe":case"object":case"embed":Br("load",e),o=r;break;case"video":case"audio":for(o=0;o<Pr.length;o++)Br(Pr[o],e);o=r;break;case"source":Br("error",e),o=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),o=r;break;case"details":Br("toggle",e),o=r;break;case"input":X(e,r),o=$(e,r),Br("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=F({},r,{value:void 0}),Br("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Br("invalid",e)}for(i in ye(n,o),l=o)if(l.hasOwnProperty(i)){var c=l[i];"style"===i?ve(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===i?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Br("scroll",e):null!=c&&b(e,i,c,u))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=$a(Ka.current),$a(Ga.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[ho]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ho]=t,t.stateNode=r}return Gs(t),null;case 13:if(_o(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,i=!1;else if(i=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ho]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),i=!1}else null!==ia&&(il(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Mu&&(Mu=3):ml())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Qa(),As(e,t),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return Ta(t.type._context),Gs(t),null;case 19:if(_o(ei),null===(i=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=i.rendering))if(r)qs(i,!1);else{if(0!==Mu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ti(e))){for(t.flags|=128,qs(i,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(u=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,e=u.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return No(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>zu&&(t.flags|=128,r=!0,qs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!aa)return Gs(t),null}else 2*Qe()-i.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,qs(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=i.last)?n.sibling=u:t.child=u,i.last=u)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=ei.current,No(ei,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Au)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ks(e,t){switch(na(t),t.tag){case 1:return Oo(t.type)&&Mo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qa(),_o(Do),_o(Ro),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(_o(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _o(ei),null;case 4:return Qa(),null;case 10:return Ta(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Is=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},As=function(){},Os=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,$a(Ga.current);var a,i=null;switch(n){case"input":o=$(e,o),r=$(e,r),i=[];break;case"select":o=F({},o,{value:void 0}),r=F({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var u=o[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(i=i||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(i=i||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",e),i||u===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Xs=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&eu(t,n,a)}o=o.next}while(o!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ho],delete t[po],delete t[vo],delete t[go],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iu(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||iu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,du=!1;function fu(e,t,n){for(n=n.child;null!==n;)hu(e,t,n),n=n.sibling}function hu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Xs||Zs(n,t);case 6:var r=cu,o=du;cu=null,fu(e,t,n),du=o,null!==(cu=r)&&(du?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(du?(e=cu,n=n.stateNode,8===e.nodeType?uo(e.parentNode,n):1===e.nodeType&&uo(e,n),zt(e)):uo(cu,n.stateNode));break;case 4:r=cu,o=du,cu=n.stateNode.containerInfo,du=!0,fu(e,t,n),cu=r,du=o;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&eu(n,t,i),o=o.next}while(o!==r)}fu(e,t,n);break;case 1:if(!Xs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sl(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fu(e,t,n),Xs=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Tl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,du=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===cu)throw Error(a(160));hu(i,s,o),cu=null,du=!1;var l=o.alternate;null!==l&&(l.return=null),o.return=null}catch(c){Sl(o,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vu(t,e),t=t.sibling}function vu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(v){Sl(e,e.return,v)}try{nu(5,e,e.return)}catch(v){Sl(e,e.return,v)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(v){Sl(e,e.return,v)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===i.type&&null!=i.name&&Q(o,i),be(u,s);var c=be(u,i);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];"style"===d?ve(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):b(o,d,f,c)}switch(u){case"input":J(o,i);break;case"textarea":ae(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(o,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[po]=i}catch(v){Sl(e,e.return,v)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(v){Sl(e,e.return,v)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(v){Sl(e,e.return,v)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Uu=Qe())),4&r&&pu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(c=Xs)||d,mu(t,e),Xs=c):mu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(f=Js=d;null!==Js;){switch(p=(h=Js).child,h.tag){case 0:case 11:case 14:case 15:nu(4,h,h.return);break;case 1:Zs(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Sl(r,n,v)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){wu(f);continue}}null!==p?(p.return=h,Js=p):wu(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,c?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=me("display",s))}catch(v){Sl(e,e.return,v)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Sl(e,e.return,v)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(iu(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(fe(o,""),r.flags&=-33),lu(e,su(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;uu(e,su(e),i);break;default:throw Error(a(161))}}catch(s){Sl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Js=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var o=Js,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||$s;if(!i){var s=o.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=$s;var l=Xs;if($s=i,(Xs=u)&&!l)for(Js=o;null!==Js;)u=(i=Js).child,22===i.tag&&null!==i.memoizedState?Cu(o):null!==u?(u.return=i,Js=u):Cu(o);for(;null!==a;)Js=a,bu(a,t,n),a=a.sibling;Js=o,$s=s,Xs=l}xu(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Js=a):xu(e)}}function xu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Va(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&ou(t)}catch(h){Sl(t,t.return,h)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Cu(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(u){Sl(t,o,u)}}var a=t.return;try{ou(t)}catch(u){Sl(t,a,u)}break;case 5:var i=t.return;try{ou(t)}catch(u){Sl(t,i,u)}}}catch(u){Sl(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var ku,Su=Math.ceil,Eu=x.ReactCurrentDispatcher,_u=x.ReactCurrentOwner,Nu=x.ReactCurrentBatchConfig,Tu=0,Ru=null,Du=null,Iu=0,Au=0,Ou=Eo(0),Mu=0,Pu=null,ju=0,Fu=0,Lu=0,Bu=null,Wu=null,Uu=0,zu=1/0,Hu=null,Vu=!1,qu=null,Gu=null,Yu=!1,Ku=null,$u=0,Xu=0,Qu=null,Ju=-1,Zu=0;function el(){return 0!==(6&Tu)?Qe():-1!==Ju?Ju:Ju=Qe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Tu)&&0!==Iu?Iu&-Iu:null!==va.transition?(0===Zu&&(Zu=mt()),Zu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nl(e,t,n,r){if(50<Xu)throw Xu=0,Qu=null,Error(a(185));gt(e,n,r),0!==(2&Tu)&&e===Ru||(e===Ru&&(0===(2&Tu)&&(Fu|=n),4===Mu&&sl(e,Iu)),rl(e,r),1===n&&0===Tu&&0===(1&t.mode)&&(zu=Qe()+500,Wo&&Ho()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),s=1<<i,u=o[i];-1===u?0!==(s&n)&&0===(s&r)||(o[i]=ht(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Ru?Iu:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Wo=!0,zo(e)}(ul.bind(null,e)):zo(ul.bind(null,e)),io((function(){0===(6&Tu)&&Ho()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rl(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Ju=-1,Zu=0,0!==(6&Tu))throw Error(a(327));var n=e.callbackNode;if(Cl()&&e.callbackNode!==n)return null;var r=ft(e,e===Ru?Iu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var o=Tu;Tu|=2;var i=pl();for(Ru===e&&Iu===t||(Hu=null,zu=Qe()+500,fl(e,t));;)try{yl();break}catch(u){hl(e,u)}Na(),Eu.current=i,Tu=o,null!==Du?t=0:(Ru=null,Iu=0,t=Mu)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t)throw n=Pu,fl(e,0),sl(e,r),rl(e,Qe()),n;if(6===t)sl(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sr(a(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=vl(e,r))&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t))throw n=Pu,fl(e,0),sl(e,r),rl(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wl(e,Wu,Hu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Uu+500-Qe())){if(0!==ft(e,0))break;if(((o=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wl.bind(null,e,Wu,Hu),t);break}wl(e,Wu,Hu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>o&&(o=s),r&=~i}if(r=o,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ro(wl.bind(null,e,Wu,Hu),r);break}wl(e,Wu,Hu);break;default:throw Error(a(329))}}}return rl(e,Qe()),e.callbackNode===n?ol.bind(null,e):null}function al(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=Wu,Wu=n,null!==t&&il(t)),e}function il(e){null===Wu?Wu=e:Wu.push.apply(Wu,e)}function sl(e,t){for(t&=~Lu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Tu))throw Error(a(327));Cl();var t=ft(e,0);if(0===(1&t))return rl(e,Qe()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Pu,fl(e,0),sl(e,t),rl(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Wu,Hu),rl(e,Qe()),null}function ll(e,t){var n=Tu;Tu|=1;try{return e(t)}finally{0===(Tu=n)&&(zu=Qe()+500,Wo&&Ho())}}function cl(e){null!==Ku&&0===Ku.tag&&0===(6&Tu)&&Cl();var t=Tu;Tu|=1;var n=Nu.transition,r=bt;try{if(Nu.transition=null,bt=1,e)return e()}finally{bt=r,Nu.transition=n,0===(6&(Tu=t))&&Ho()}}function dl(){Au=Ou.current,_o(Ou)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mo();break;case 3:Qa(),_o(Do),_o(Ro),ri();break;case 5:Za(r);break;case 4:Qa();break;case 13:case 19:_o(ei);break;case 10:Ta(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Ru=e,Du=e=Ol(e.current,null),Iu=Au=t,Mu=0,Pu=null,Lu=Fu=ju=0,Wu=Bu=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(r=(n=Aa[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Aa=null}return e}function hl(e,t){for(;;){var n=Du;try{if(Na(),oi.current=Ji,ci){for(var r=si.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ci=!1}if(ii=0,li=ui=si=null,di=!1,fi=0,_u.current=null,null===n||null===n.return){Mu=1,Pu=t,Du=null;break}e:{var i=e,s=n.return,u=n,l=t;if(t=Iu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(i,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}if(0===(1&t)){ms(i,c,t),ml();break e}l=Error(a(426))}else if(aa&&1&u.mode){var g=vs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),gs(g,s,u,0,t),ma(ls(l,u));break e}}i=l=ls(l,u),4!==Mu&&(Mu=2),null===Bu?Bu=[i]:Bu.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,za(i,hs(0,l,t));break e;case 1:u=l;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gu||!Gu.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,za(i,ps(i,u,t));break e}}i=i.return}while(null!==i)}xl(n)}catch(x){t=x,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function pl(){var e=Eu.current;return Eu.current=Ji,null===e?Ji:e}function ml(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Ru||0===(268435455&ju)&&0===(268435455&Fu)||sl(Ru,Iu)}function vl(e,t){var n=Tu;Tu|=2;var r=pl();for(Ru===e&&Iu===t||(Hu=null,fl(e,t));;)try{gl();break}catch(o){hl(e,o)}if(Na(),Tu=n,Eu.current=r,null!==Du)throw Error(a(261));return Ru=null,Iu=0,Mu}function gl(){for(;null!==Du;)bl(Du)}function yl(){for(;null!==Du&&!$e();)bl(Du)}function bl(e){var t=ku(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?xl(e):Du=t,_u.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ys(n,t,Au)))return void(Du=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Du=n);if(null===e)return Mu=6,void(Du=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Mu&&(Mu=5)}function wl(e,t,n){var r=bt,o=Nu.transition;try{Nu.transition=null,bt=1,function(e,t,n,r){do{Cl()}while(null!==Ku);if(0!==(6&Tu))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Ru&&(Du=Ru=null,Iu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yu||(Yu=!0,Rl(tt,(function(){return Cl(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Nu.transition,Nu.transition=null;var s=bt;bt=1;var u=Tu;Tu|=4,_u.current=null,function(e,t){if(eo=Vt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==o&&3!==f.nodeType||(u=s+o),f!==i||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++c===o&&(u=s),h===i&&++d===r&&(l=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Vt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:ns(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){Sl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tu,tu=!1}(e,n),vu(n,e),pr(to),Vt=!!eo,to=eo=null,e.current=n,yu(n,e,o),Xe(),Tu=u,bt=s,Nu.transition=i}else e.current=n;if(Yu&&(Yu=!1,Ku=e,$u=o),i=e.pendingLanes,0===i&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Vu)throw Vu=!1,e=qu,qu=null,e;0!==(1&$u)&&0!==e.tag&&Cl(),i=e.pendingLanes,0!==(1&i)?e===Qu?Xu++:(Xu=0,Qu=e):Xu=0,Ho()}(e,t,n,r)}finally{Nu.transition=o,bt=r}return null}function Cl(){if(null!==Ku){var e=xt($u),t=Nu.transition,n=bt;try{if(Nu.transition=null,bt=16>e?16:e,null===Ku)var r=!1;else{if(e=Ku,Ku=null,$u=0,0!==(6&Tu))throw Error(a(331));var o=Tu;for(Tu|=4,Js=e.current;null!==Js;){var i=Js,s=i.child;if(0!==(16&Js.flags)){var u=i.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Js=c;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nu(8,d,i)}var f=d.child;if(null!==f)f.return=d,Js=f;else for(;null!==Js;){var h=(d=Js).sibling,p=d.return;if(au(d),d===c){Js=null;break}if(null!==h){h.return=p,Js=h;break}Js=p}}}var m=i.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Js=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Js=s;else e:for(;null!==Js;){if(0!==(2048&(i=Js).flags))switch(i.tag){case 0:case 11:case 15:nu(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Js=y;break e}Js=i.return}}var b=e.current;for(Js=b;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else e:for(s=b;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(C){Sl(u,u.return,C)}if(u===s){Js=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Js=w;break e}Js=u.return}}if(Tu=o,Ho(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(C){}r=!0}return r}finally{bt=n,Nu.transition=t}}return!1}function kl(e,t,n){e=Wa(e,t=hs(0,t=ls(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function Sl(e,t,n){if(3===e.tag)kl(e,e,n);else for(;null!==t;){if(3===t.tag){kl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Wa(t,e=ps(t,e=ls(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function El(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Iu&n)===n&&(4===Mu||3===Mu&&(130023424&Iu)===Iu&&500>Qe()-Uu?fl(e,0):Lu|=n),rl(e,t)}function _l(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Pa(e,t))&&(gt(e,t,n),rl(e,n))}function Nl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_l(e,n)}function Tl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),_l(e,n)}function Rl(e,t){return Ye(e,t)}function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Il(e,t,n,r){return new Dl(e,t,n,r)}function Al(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Il(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ml(e,t,n,r,o,i){var s=2;if(r=e,"function"===typeof e)Al(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Pl(n.children,o,i,t);case S:s=8,o|=8;break;case E:return(e=Il(12,n,t,2|o)).elementType=E,e.lanes=i,e;case R:return(e=Il(13,n,t,o)).elementType=R,e.lanes=i,e;case D:return(e=Il(19,n,t,o)).elementType=D,e.lanes=i,e;case O:return jl(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case N:s=9;break e;case T:s=11;break e;case I:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Il(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Pl(e,t,n,r){return(e=Il(7,e,r,t)).lanes=n,e}function jl(e,t,n,r){return(e=Il(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=Il(6,e,null,t)).lanes=n,e}function Ll(e,t,n){return(t=Il(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Wl(e,t,n,r,o,a,i,s,u){return e=new Bl(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Il(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fa(a),e}function Ul(e){if(!e)return To;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oo(n))return jo(e,n,t)}return t}function zl(e,t,n,r,o,a,i,s,u){return(e=Wl(n,r,!0,e,0,a,0,s,u)).context=Ul(null),n=e.current,(a=Ba(r=el(),o=tl(n))).callback=void 0!==t&&null!==t?t:null,Wa(n,a,o),e.current.lanes=o,gt(e,o,r),rl(e,r),e}function Hl(e,t,n,r){var o=t.current,a=el(),i=tl(o);return n=Ul(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ba(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Wa(o,t,i))&&(nl(e,o,i,a),Ua(e,o,i)),i}function Vl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}ku=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Do.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),pa();break;case 5:Ja(t);break;case 1:Oo(t.type)&&Fo(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;No(ka,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(No(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(No(ei,1&ei.current),null!==(e=Vs(e,t,n))?e.sibling:null);No(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),No(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Vs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,aa&&0!==(1048576&t.flags)&&ea(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var o=Ao(t,Ro.current);Da(t,n),o=vi(null,t,r,e,o,n);var i=gi();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oo(r)?(i=!0,Fo(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Fa(t),o.updater=os,t.stateNode=o,o._reactInternals=t,us(t,r,e,n),t=Ts(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),xs(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Al(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===I)return 14}return 2}(r),e=ns(r,e),o){case 0:t=_s(null,t,r,e,n);break e;case 1:t=Ns(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Cs(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,_s(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ns(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,La(e,t),Ha(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ds(e,t,r,n,o=ls(Error(a(423)),t));break e}if(r!==o){t=Ds(e,t,r,n,o=ls(Error(a(424)),t));break e}for(oa=lo(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=Ca(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===o){t=Vs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==i&&no(r,i)&&(t.flags|=32),Es(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ws(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,No(ka,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===o.children&&!Do.current){t=Vs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var u=i.dependencies;if(null!==u){s=i.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=Ba(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ra(i.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ra(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}xs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Da(t,n),r=r(o=Ia(o)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),Cs(e,t,r,o=ns(r.type,o),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),Hs(e,t),t.tag=1,Oo(r)?(e=!0,Fo(t)):e=!1,Da(t,n),is(t,r,o),us(t,r,o,n),Ts(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function Kl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function Zl(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof o){var s=o;o=function(){var e=Vl(i);s.call(e)}}Hl(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=Vl(i);a.call(e)}}var i=zl(t,r,e,0,null,!1,0,"",Jl);return e._reactRootContainer=i,e[mo]=i.current,zr(8===e.nodeType?e.parentNode:e),cl(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Vl(u);s.call(e)}}var u=Wl(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=u,e[mo]=u.current,zr(8===e.nodeType?e.parentNode:e),cl((function(){Hl(t,u,n,r)})),u}(n,t,e,o,r);return Vl(i)}$l.prototype.render=Kl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hl(e,t,null,null)},$l.prototype.unmount=Kl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Hl(null,e,null,null)})),t[mo]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Qe()),0===(6&Tu)&&(zu=Qe()+500,Ho()))}break;case 13:cl((function(){var t=Pa(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Gl(e,1)}},Ct=function(e){if(13===e.tag){var t=Pa(e,134217728);if(null!==t)nl(t,e,134217728,el());Gl(e,134217728)}},kt=function(e){if(13===e.tag){var t=tl(e),n=Pa(e,t);if(null!==n)nl(n,e,t,el());Gl(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ce=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Co(r);if(!o)throw Error(a(90));Y(r),J(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=ll,Re=cl;var ec={usingClientEntryPoint:!1,Events:[xo,wo,Co,_e,Ne,ll]},tc={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ot=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(a(299));var n=!1,r="",o=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Wl(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,zr(8===e.nodeType?e.parentNode:e),new Kl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Ql(t))throw Error(a(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",s=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zl(t,null,e,1,null!=n?n:null,o,0,i,s),e[mo]=t.current,zr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new $l(t)},t.render=function(e,t,n){if(!Ql(t))throw Error(a(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ql(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ql(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2763:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e).getTime(),a=(0,r.default)(t.start).getTime(),i=(0,r.default)(t.end).getTime();if(!(a<=i))throw new RangeError("Invalid interval");return n>=a&&n<=i}},2902:(e,t,n)=>{e.exports=n(7284).EventEmitter},2959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(r.openInstances.length),r.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},t.resetState=function(){r=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},r=new n;t.default=r},2963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5765),a=(r=o)&&r.__esModule?r:{default:r};t.default=a.default,e.exports=t.default},3035:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3274:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()<a.getTime()}},3306:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){return(0,o.A)(1,arguments),(0,r.default)(e).getHours()}},3350:(e,t,n)=>{(t=e.exports=n(6153)).Stream=t,t.Readable=t,t.Writable=n(9001),t.Duplex=n(6779),t.Transform=n(2013),t.PassThrough=n(5559),t.finished=n(227),t.pipeline=n(537)},3367:()=>{},3515:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()===a.getTime()}},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},4161:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5126),o=n(8726),a=n(6191);function i(e,t){var n;(0,o.A)(1,arguments);var i=(0,a.A)(null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var m,v=function(e){var t,n={},r=e.split(s.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],s.timeZoneDelimiter.test(n.date)&&(n.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var o=s.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}(e);if(v.date){var g=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(v.date,i);m=function(e,t){if(null===t)return new Date(NaN);var n=e.match(u);if(!n)return new Date(NaN);var r=!!n[4],o=d(n[1]),a=d(n[2])-1,i=d(n[3]),s=d(n[4]),l=d(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var o=r.getUTCDay()||7,a=7*(t-1)+n+1-o;return r.setUTCDate(r.getUTCDate()+a),r}(t,s,l):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(h[t]||(p(e)?29:28))}(t,a,i)&&function(e,t){return t>=1&&t<=(p(e)?366:365)}(t,o)?(c.setUTCFullYear(t,a,Math.max(o,i)),c):new Date(NaN)}(g.restDateString,g.year)}if(!m||isNaN(m.getTime()))return new Date(NaN);var y,b=m.getTime(),x=0;if(v.time&&(x=function(e){var t=e.match(l);if(!t)return NaN;var n=f(t[1]),o=f(t[2]),a=f(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,o,a))return NaN;return n*r.s0+o*r.Cg+1e3*a}(v.time),isNaN(x)))return new Date(NaN);if(!v.timezone){var w=new Date(b+x),C=new Date(0);return C.setFullYear(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate()),C.setHours(w.getUTCHours(),w.getUTCMinutes(),w.getUTCSeconds(),w.getUTCMilliseconds()),C}return y=function(e){if("Z"===e)return 0;var t=e.match(c);if(!t)return 0;var n="+"===t[1]?-1:1,o=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,a))return NaN;return n*(o*r.s0+a*r.Cg)}(v.timezone),isNaN(y)?new Date(NaN):new Date(b+x+y)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},u=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d(e){return e?parseInt(e):1}function f(e){return e&&parseFloat(e.replace(",","."))||0}var h=[31,null,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400===0||e%4===0&&e%100!==0}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,m(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,C=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)C.call(t,o)&&!S.hasOwnProperty(o)&&(a[o]=t[o]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(o in u=e.defaultProps)void 0===a[o]&&(a[o]=u[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:k.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return i=i(u=e),e=""===a?"."+T(u,0):a,w(i)?(o="",null!=e&&(o=e.replace(N,"$&/")+"/"),R(i,t,o,"",(function(e){return e}))):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(N,"$&/")+"/")+e)),t.push(i)),1;if(u=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+T(s=e[l],l);u+=R(s,t,o,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=R(s=s.value,t,o,c=a+T(s,l++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function D(e,t,n){if(null==e)return e;var r=[],o=0;return R(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},M={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=o,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)C.call(t,l)&&!S.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},4275:(e,t,n)=>{let r;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},4375:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2550),o=n(8726),a=n(6191);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.A)(t);return(0,r.A)(e,-n)}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4445:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=s(e),i=a[0],u=a[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,i,u)),c=0,d=u>0?i-4:i;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,a=[],i=16383,s=0,l=r-o;s<l;s+=i)a.push(u(e,s,s+i>l?l:s+i));1===o?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=a[i],r[a.charCodeAt(i)]=i;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,r){for(var o,a,i=[],s=t;s<r;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(a=o)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},4467:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(816);function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4489:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2284),o=n(888),a=n(8726);function i(e){var t,n;if((0,a.A)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==(0,r.A)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,o.default)(e);(void 0===n||n<t||isNaN(Number(t)))&&(n=t)})),n||new Date(NaN)}},4561:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(9566),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()===a.getTime()}},4682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce((function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])}),[]);return n.filter(s)};var n="none",r="contents",o=/^(input|select|textarea|button|object|iframe)$/;function a(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var o=window.getComputedStyle(e),a=o.getPropertyValue("display");return t?a!==r&&function(e,t){return"visible"!==t.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,o):a===n}catch(i){return console.warn("Failed to inspect element style"),!1}}function i(e,t){var n=e.nodeName.toLowerCase();return(o.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),a(t))return!1;t=t.parentNode}return!0}(e)}function s(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&i(e,!n)}e.exports=t.default},4823:e=>{"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,r){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return t(e,r)}catch(o){r.message=e.message,r.stack=e.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(e));return t(new n,r)}}},4841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)o(e,n[t]);var a=document.body;for(var i in r)o(a,r[i]);n={},r={}},t.log=function(){0};var n={},r={};function o(e,t){e.classList.remove(t)}t.add=function(e,t){return o=e.classList,a="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(a,e),o.add(e)}));var o,a},t.remove=function(e,t){return o=e.classList,a="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(a,e),0===a[e]&&o.remove(e)}));var o,a}},4860:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var r=n(97),o=n(4375),a=n(888),i=n(8726);var s=n(7532),u=n(7780),l=n(1209),c=n(2637);function d(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const f={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return d("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):d(n+1,2)},d:function(e,t){return d(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return d(e.getUTCHours()%12||12,t.length)},H:function(e,t){return d(e.getUTCHours(),t.length)},m:function(e,t){return d(e.getUTCMinutes(),t.length)},s:function(e,t){return d(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return d(Math.floor(r*Math.pow(10,n-3)),t.length)}};var h="midnight",p="noon",m="morning",v="afternoon",g="evening",y="night";function b(e,t){var n=e>0?"-":"+",r=Math.abs(e),o=Math.floor(r/60),a=r%60;if(0===a)return n+String(o);var i=t||"";return n+String(o)+i+d(a,2)}function x(e,t){return e%60===0?(e>0?"-":"+")+d(Math.abs(e)/60,2):w(e,t)}function w(e,t){var n=t||"",r=e>0?"-":"+",o=Math.abs(e);return r+d(Math.floor(o/60),2)+n+d(o%60,2)}const C={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return f.y(e,t)},Y:function(e,t,n,r){var o=(0,c.A)(e,r),a=o>0?o:1-o;return"YY"===t?d(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):d(a,t.length)},R:function(e,t){return d((0,u.A)(e),t.length)},u:function(e,t){return d(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return d(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return d(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return f.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return d(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var o=(0,l.A)(e,r);return"wo"===t?n.ordinalNumber(o,{unit:"week"}):d(o,t.length)},I:function(e,t,n){var r=(0,s.A)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):d(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):f.d(e,t)},D:function(e,t,n){var r=function(e){(0,i.A)(1,arguments);var t=(0,a.default)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):d(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return d(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return d(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),o=0===r?7:r;switch(t){case"i":return String(o);case"ii":return d(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,o=e.getUTCHours();switch(r=12===o?p:0===o?h:o/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,o=e.getUTCHours();switch(r=o>=17?g:o>=12?v:o>=4?m:y,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return f.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):f.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):d(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):d(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):f.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):f.s(e,t)},S:function(e,t){return f.S(e,t)},X:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();if(0===o)return"Z";switch(t){case"X":return x(o);case"XXXX":case"XX":return w(o);default:return w(o,":")}},x:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return x(o);case"xxxx":case"xx":return w(o);default:return w(o,":")}},O:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+b(o,":");default:return"GMT"+w(o,":")}},z:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+b(o,":");default:return"GMT"+w(o,":")}},t:function(e,t,n,r){var o=r._originalDate||e;return d(Math.floor(o.getTime()/1e3),t.length)},T:function(e,t,n,r){return d((r._originalDate||e).getTime(),t.length)}};var k=n(8435),S=n(8539),E=n(2058),_=n(6191),N=n(8171),T=n(364),R=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I=/^'([^]*?)'?$/,A=/''/g,O=/[a-zA-Z]/;function M(e,t,n){var s,u,l,c,d,f,h,p,m,v,g,y,b,x,w,M,P,j;(0,i.A)(2,arguments);var F=String(t),L=(0,N.q)(),B=null!==(s=null!==(u=null===n||void 0===n?void 0:n.locale)&&void 0!==u?u:L.locale)&&void 0!==s?s:T.A,W=(0,_.A)(null!==(l=null!==(c=null!==(d=null!==(f=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==f?f:null===n||void 0===n||null===(h=n.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==d?d:L.firstWeekContainsDate)&&void 0!==c?c:null===(m=L.locale)||void 0===m||null===(v=m.options)||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==l?l:1);if(!(W>=1&&W<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=(0,_.A)(null!==(g=null!==(y=null!==(b=null!==(x=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==x?x:null===n||void 0===n||null===(w=n.locale)||void 0===w||null===(M=w.options)||void 0===M?void 0:M.weekStartsOn)&&void 0!==b?b:L.weekStartsOn)&&void 0!==y?y:null===(P=L.locale)||void 0===P||null===(j=P.options)||void 0===j?void 0:j.weekStartsOn)&&void 0!==g?g:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!B.localize)throw new RangeError("locale must contain localize property");if(!B.formatLong)throw new RangeError("locale must contain formatLong property");var z=(0,a.default)(e);if(!(0,r.default)(z))throw new RangeError("Invalid time value");var H=(0,S.A)(z),V=(0,o.A)(z,H),q={firstWeekContainsDate:W,weekStartsOn:U,locale:B,_originalDate:z};return F.match(D).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,k.A[t])(e,B.formatLong):e})).join("").match(R).map((function(r){if("''"===r)return"'";var o=r[0];if("'"===o)return function(e){var t=e.match(I);if(!t)return e;return t[1].replace(A,"'")}(r);var a=C[o];if(a)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,E.xM)(r)||(0,E.lJ)(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,E.ef)(r)||(0,E.lJ)(r,t,String(e)),a(V,r,B.localize,q);if(o.match(O))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return r})).join("")}},4872:function(e,t,n){e.exports=function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),o=n(t);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r,o=c(t);return!(r=n?(e=c(this).constructor,Reflect.construct(o,arguments,e)):o.apply(this,arguments))||"object"!=typeof r&&"function"!=typeof r?h(this):r}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return new Promise((function(n,r){var o,a=new Image;a.onload=function(){return n(a)},a.onerror=r,0==(null!==(o=e)&&!!o.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&t&&(a.crossOrigin=t),a.src=e}))}var b,x=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),w="undefined"!=typeof File,C={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},k=x?C.touch:C.desktop,S="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,E={x:.5,y:.5},_=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,o.default.Component);var e,t,n,r=p(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i(h(t=r.call(this,e)),"state",{drag:!1,my:null,mx:null,image:E}),i(h(t),"handleImageReady",(function(e){var n=t.getInitialSize(e.width,e.height);n.resource=e,n.x=.5,n.y=.5,n.backgroundColor=t.props.backgroundColor,t.setState({drag:!1,image:n},t.props.onImageReady),t.props.onLoadSuccess(n)})),i(h(t),"clearImage",(function(){t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.setState({image:E})})),i(h(t),"handleMouseDown",(function(e){(e=e||window.event).preventDefault(),t.setState({drag:!0,mx:null,my:null})})),i(h(t),"handleMouseUp",(function(){t.state.drag&&(t.setState({drag:!1}),t.props.onMouseUp())})),i(h(t),"handleMouseMove",(function(e){var n,r,o,a,i,s,u,c,d,f,h,p,m,v,g,y;e=e||window.event,!1!==t.state.drag&&(e.preventDefault(),o={mx:n=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:r=e.targetTouches?e.targetTouches[0].pageY:e.clientY},y=t.props.rotate,y=(y%=360)<0?y+360:y,t.state.mx&&t.state.my&&(a=t.state.mx-n,i=t.state.my-r,s=t.state.image.width*t.props.scale,u=t.state.image.height*t.props.scale,d=(c=t.getCroppingRect()).x,f=c.y,d*=s,f*=u,h=function(e){return e*(Math.PI/180)},p=Math.cos(h(y)),v=f+-a*(m=Math.sin(h(y)))+i*p,g={x:(d+a*p+i*m)/s+1/t.props.scale*t.getXScale()/2,y:v/u+1/t.props.scale*t.getYScale()/2},t.props.onPositionChange(g),o.image=l(l({},t.state.image),g)),t.setState(o),t.props.onMouseMove(e))})),i(h(t),"setCanvas",(function(e){t.canvas=e})),t.canvas=null,t}return e=u,(t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(S=1);var e,t,n=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(n),document&&(e=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},t=k.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),x&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===E||this.clearImage();var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(n),this.paintImage(n,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=k.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),x&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,r=e.rotate,o=e.border,a={},i=m(this.getBorders(o),2),s=i[0],u=i[1],l=t,c=n;return this.isVertical()?(a.width=c,a.height=l):(a.width=l,a.height=c),a.width+=2*s,a.height+=2*u,{canvas:a,rotate:r,width:t,height:n,border:o}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),t.backgroundColor&&(r.fillStyle=t.backgroundColor,r.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),r.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=t):(r.width=t,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:e.x-t/2,y:e.y-n/2,width:t,height:n},o=0,a=1-r.width,i=0,s=1-r.height;return(this.props.disableBoundaryChecks||1<t||1<n)&&(o=-r.width,i=-r.height,s=a=1),l(l({},r),{},{x:Math.max(o,Math.min(r.x,a)),y:Math.max(i,Math.min(r.y,s))})}},{key:"loadImage",value:function(e){var t;w&&e instanceof File?this.loadingImage=(t=e,new Promise((function(e,n){var r=new FileReader;r.onload=function(t){try{var r=y(t.target.result);e(r)}catch(t){n(t)}},r.readAsDataURL(t)})).then(this.handleImageReady).catch(this.props.onLoadFailure)):"string"==typeof e&&(this.loadingImage=y(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var n,r,o=this.getDimensions();return t/e<o.height/o.width?r=e*((n=this.getDimensions().height)/t):n=t*((r=this.getDimensions().width)/e),{height:n,width:r}}},{key:"paintImage",value:function(e,t,n,r){var o,a=3<arguments.length&&void 0!==r?r:S;t.resource&&(o=this.calculatePosition(t,n),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(a,a),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,o.x,o.y,o.width,o.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(o.x,o.y,o.width,o.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=m(this.getBorders(t),2),r=n[0],o=n[1],a=this.getCroppingRect(),i=e.width*this.props.scale,s=e.height*this.props.scale,u=-a.x*i,l=-a.y*s;return this.isVertical()?(u+=o,l+=r):(u+=r,l+=o),{x:u,y:l,height:s,width:i}}},{key:"paint",value:function(e){e.save(),e.scale(S,S),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,n,r,o,a,i,s,u,l=this.props.borderRadius,c=this.getDimensions(),d=m(this.getBorders(c.border),2),f=d[0],h=d[1],p=c.canvas.height,v=c.canvas.width;l=Math.max(l,0),l=Math.min(l,v/2-f,p/2-h),e.beginPath(),t=e,o=v-2*(n=f),a=p-2*(r=h),0===(i=l)?t.rect(n,r,o,a):(s=o-i,u=a-i,t.translate(n,r),t.arc(i,i,i,Math.PI,1.5*Math.PI),t.lineTo(s,0),t.arc(s,i,i,1.5*Math.PI,2*Math.PI),t.lineTo(o,u),t.arc(s,u,i,2*Math.PI,.5*Math.PI),t.lineTo(i,a),t.arc(i,u,i,.5*Math.PI,Math.PI),t.translate(-n,-r)),e.rect(v,0,-v,p),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),n=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,f(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),r=this.getDimensions(),a={width:r.canvas.width,height:r.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},i={width:r.canvas.width*S,height:r.canvas.height*S,style:l(l({},a),t)};return i[k.react.down]=this.handleMouseDown,x&&(i[k.react.mouseDown]=this.handleMouseDown),o.default.createElement("canvas",s({ref:this.setCanvas},i,n))}}])&&a(e.prototype,t),n&&a(e,n),u}();return i(_,"propTypes",{scale:r.default.number,rotate:r.default.number,image:r.default.oneOfType([r.default.string].concat(function(e){if(Array.isArray(e))return g(e)}(b=w?[r.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(b)||v(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:r.default.oneOfType([r.default.number,r.default.arrayOf(r.default.number)]),borderRadius:r.default.number,width:r.default.number,height:r.default.number,position:r.default.shape({x:r.default.number,y:r.default.number}),color:r.default.arrayOf(r.default.number),backgroundColor:r.default.string,crossOrigin:r.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:r.default.func,onLoadSuccess:r.default.func,onImageReady:r.default.func,onImageChange:r.default.func,onMouseUp:r.default.func,onMouseMove:r.default.func,onPositionChange:r.default.func,disableBoundaryChecks:r.default.bool,disableHiDPIScaling:r.default.bool,disableCanvasRotation:r.default.bool}),i(_,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),_}(n(5173),n(5043))},4960:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay(),a=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-a),t.setUTCHours(0,0,0,0),t}},4974:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){return(0,o.A)(1,arguments),(0,r.default)(e).getFullYear()}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case a:case s:case i:case h:return e;default:switch(e=e&&e.$$typeof){case l:case f:case v:case m:case u:return e;default:return t}}case o:return t}}}function C(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=o,t.Profiler=s,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return C(e)||w(e)===c},t.isConcurrentMode=C,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===i},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===s||e===i||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},5027:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(888),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e),i=(0,r.A)(t);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5126:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>r,_m:()=>a,s0:()=>o});Math.pow(10,8);var r=6e4,o=36e5,a=1e3},5173:(e,t,n)=>{e.exports=n(1497)()},5237:(e,t,n)=>{e.exports=function(e){function t(e){let n,o,a,i=null;function s(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!s.enabled)return;const a=s,i=Number(new Date),u=i-(n||i);a.diff=u,a.prev=n,a.curr=i,n=i,r[0]=t.coerce(r[0]),"string"!==typeof r[0]&&r.unshift("%O");let l=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";l++;const o=t.formatters[n];if("function"===typeof o){const t=r[l];e=o.call(a,t),r.splice(l,1),l--}return e})),t.formatArgs.call(a,r);(a.log||t.log).apply(a,r)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(o!==t.namespaces&&(o=t.namespaces,a=t.enabled(e)),a),set:e=>{i=e}}),"function"===typeof t.init&&t.init(s),s}function r(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function o(e,t){let n=0,r=0,o=-1,a=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(o=r,a=n,r++):(n++,r++);else{if(-1===o)return!1;r=o+1,a++,n=a}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"===typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const r of n)"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(const n of t.skips)if(o(e,n))return!1;for(const n of t.names)if(o(e,n))return!0;return!1},t.humanize=n(7340),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},5340:()=>{},5484:(e,t,n)=>{"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function o(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function a(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function i(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,i=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?i="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==i||null!==s){var u=e.displayName||e.name,l="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=o),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=a;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:()=>i}),r.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0},5559:(e,t,n)=>{"use strict";e.exports=o;var r=n(2013);function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}n(6329)(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},5622:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(2215),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,o.default)(e,-n)}},5765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5043),i=p(a),s=p(n(7950)),u=p(n(5173)),l=p(n(1439)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6619)),d=n(8821),f=p(d),h=n(5484);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var v=t.portalClassName="ReactModalPortal",g=t.bodyOpenClassName="ReactModal__Body--open",y=d.canUseDOM&&void 0!==s.default.createPortal,b=function(e){return document.createElement(e)},x=function(){return y?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function w(e){return e()}var C=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.removePortal=function(){!y&&s.default.unmountComponentAtNode(o.node);var e=w(o.props.parentSelector);e&&e.contains(o.node)?e.removeChild(o.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},o.portalRef=function(e){o.portal=e},o.renderPortal=function(e){var n=x()(o,i.default.createElement(l.default,r({defaultStyles:t.defaultStyles},e)),o.node);o.portalRef(n)},m(o,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){d.canUseDOM&&(y||(this.node=b("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!y&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:w(e.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(d.canUseDOM){var r=this.props,o=r.isOpen,a=r.portalClassName;e.portalClassName!==a&&(this.node.className=a);var i=n.prevParent,s=n.nextParent;s!==i&&(i.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||o)&&!y&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(d.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return d.canUseDOM&&y?(!this.node&&y&&(this.node=b("div")),x()(i.default.createElement(l.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){c.setElement(e)}}]),t}(a.Component);C.propTypes={isOpen:u.default.bool.isRequired,style:u.default.shape({content:u.default.object,overlay:u.default.object}),portalClassName:u.default.string,bodyOpenClassName:u.default.string,htmlOpenClassName:u.default.string,className:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),overlayClassName:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),appElement:u.default.oneOfType([u.default.instanceOf(f.default),u.default.instanceOf(d.SafeHTMLCollection),u.default.instanceOf(d.SafeNodeList),u.default.arrayOf(u.default.instanceOf(f.default))]),onAfterOpen:u.default.func,onRequestClose:u.default.func,closeTimeoutMS:u.default.number,ariaHideApp:u.default.bool,shouldFocusAfterRender:u.default.bool,shouldCloseOnOverlayClick:u.default.bool,shouldReturnFocusAfterClose:u.default.bool,preventScroll:u.default.bool,parentSelector:u.default.func,aria:u.default.object,data:u.default.object,role:u.default.string,contentLabel:u.default.string,shouldCloseOnEsc:u.default.bool,overlayRef:u.default.func,contentRef:u.default.func,id:u.default.string,overlayElement:u.default.func,contentElement:u.default.func},C.defaultProps={isOpen:!1,portalClassName:v,bodyOpenClassName:g,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return i.default.createElement("div",e,t)},contentElement:function(e,t){return i.default.createElement("div",e,t)}},C.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,h.polyfill)(C),t.default=C},5838:(e,t,n)=>{"use strict";var r=65536,o=4294967295;var a=n(9966).Buffer,i=n.g.crypto||n.g.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>o)throw new RangeError("requested too many random bytes");var n=a.allocUnsafe(e);if(e>0)if(e>r)for(var s=0;s<e;s+=r)i.getRandomValues(n.slice(s,s+r));else i.getRandomValues(n);if("function"===typeof t)return process.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},6062:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[i,s],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}i=s=null,u=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(u.length);for(var e=[i,s],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var r,o=n(2959),a=(r=o)&&r.__esModule?r:{default:r};var i=void 0,s=void 0,u=[];function l(){0!==u.length&&u[u.length-1].focusContent()}a.default.subscribe((function(e,t){i||s||((i=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),i.style.position="absolute",i.style.opacity="0",i.setAttribute("tabindex","0"),i.addEventListener("focus",l),(s=i.cloneNode()).addEventListener("focus",l)),(u=t).length>0?(document.body.firstChild!==i&&document.body.insertBefore(i,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(i.parentElement&&i.parentElement.removeChild(i),s.parentElement&&s.parentElement.removeChild(s))}))},6153:(e,t,n)=>{"use strict";var r;e.exports=S,S.ReadableState=k;n(7284).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=n(2902),i=n(6382).Buffer,s=("undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};var u,l=n(9838);u=l&&l.debuglog?l.debuglog("stream"):function(){};var c,d,f,h=n(7044),p=n(6725),m=n(8550).getHighWaterMark,v=n(6545).F,g=v.ERR_INVALID_ARG_TYPE,y=v.ERR_STREAM_PUSH_AFTER_EOF,b=v.ERR_METHOD_NOT_IMPLEMENTED,x=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(6329)(S,a);var w=p.errorOrDestroy,C=["error","close","destroy","pause","resume"];function k(e,t,o){r=r||n(6779),e=e||{},"boolean"!==typeof o&&(o=t instanceof r),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",o),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=n(8694).I),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function S(e){if(r=r||n(6779),!(this instanceof S))return new S(e);var t=this instanceof r;this._readableState=new k(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function E(e,t,n,r,o){u("readableAddChunk",t);var a,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,D(e)))}(e,l);else if(o||(a=function(e,t){var n;r=t,i.isBuffer(r)||r instanceof s||"string"===typeof t||void 0===t||e.objectMode||(n=new g("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(l,t)),a)w(e,a);else if(l.objectMode||t&&t.length>0)if("string"===typeof t||l.objectMode||Object.getPrototypeOf(t)===i.prototype||(t=function(e){return i.from(e)}(t)),r)l.endEmitted?w(e,new x):_(e,l,t,!0);else if(l.ended)w(e,new y);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!n?(t=l.decoder.write(t),l.objectMode||0!==t.length?_(e,l,t,!1):I(e,l)):_(e,l,t,!1)}else r||(l.reading=!1,I(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function _(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&R(e)),I(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=i.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},S.prototype.unshift=function(e){return E(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){c||(c=n(8694).I);var t=new c(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,o="";null!==r;)o+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var N=1073741824;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=N?e=N:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(D,e))}function D(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,j(e)}function I(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(A,e,t))}function A(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){u("readable nexttick read 0"),e.read(0)}function P(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(B,t,e))}function B(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function W(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):R(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,o=t.needReadable;return u("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",o=!0),t.ended||t.reading?u("reading or ended",o=!1):o&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){w(this,new b("_read()"))},S.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,u("pipe count=%d opts=%j",r.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?s:m;function i(t,o){u("onunpipe"),t===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,u("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",i),n.removeListener("end",s),n.removeListener("end",m),n.removeListener("data",d),c=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function s(){u("onend"),e.end()}r.endEmitted?process.nextTick(a):n.once("end",a),e.on("unpipe",i);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,j(e))}}(n);e.on("drain",l);var c=!1;function d(t){u("ondata");var o=e.write(t);u("dest.write",o),!1===o&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==W(r.pipes,e))&&!c&&(u("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function f(t){u("onerror",t),m(),e.removeListener("error",f),0===o(e,"error")&&w(e,t)}function h(){e.removeListener("finish",p),m()}function p(){u("onfinish"),e.removeListener("close",h),m()}function m(){u("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",h),e.once("finish",p),e.emit("pipe",n),r.flowing||(u("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<o;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var i=W(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,u("on readable",r.length,r.reading),r.length?R(this):r.reading||process.nextTick(M,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(O,this),n},S.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(O,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(P,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var o in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(u("wrapped data"),n.decoder&&(o=n.decoder.write(o)),!n.objectMode||null!==o&&void 0!==o)&&((n.objectMode||o&&o.length)&&(t.push(o)||(r=!0,e.pause())))})),e)void 0===this[o]&&"function"===typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var a=0;a<C.length;a++)e.on(C[a],this.emit.bind(this,C[a]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"===typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=n(7312)),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=F,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(S.from=function(e,t){return void 0===f&&(f=n(7462)),f(S,e,t)})},6178:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function o(e){t=e}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function l(e){return void 0===e}function c(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,r=[],o=e.length;for(n=0;n<o;++n)r.push(t(e[n],n));return r}function h(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Kn(e,t,n,r,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=m()),e._pf}function g(e){var t=null,r=!1,o=e._d&&!isNaN(e._d.getTime());return o&&(t=v(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),o=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(o=o&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?o:(e._isValid=o,e._isValid)}function y(e){var t=p(NaN);return null!=e?h(v(t),e):v(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=r.momentProperties=[],x=!1;function w(e,t){var n,r,o,a=b.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=v(t)),l(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)l(o=t[r=b[n]])||(e[r]=o);return e}function C(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===x&&(x=!0,r.updateOffset(this),x=!1)}function k(e){return e instanceof C||null!=e&&null!=e._isAMomentObject}function S(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function E(e,t){var n=!0;return h((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var o,a,i,u=[],l=arguments.length;for(a=0;a<l;a++){if(o="","object"===typeof arguments[a]){for(i in o+="\n["+a+"] ",arguments[0])s(arguments[0],i)&&(o+=i+": "+arguments[0][i]+", ");o=o.slice(0,-2)}else o=arguments[a];u.push(o)}S(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var _,N={};function T(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),N[e]||(S(t),N[e]=!0)}function R(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e){var t,n;for(n in e)s(e,n)&&(R(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function I(e,t){var n,r=h({},e);for(n in t)s(t,n)&&(i(e[n])&&i(t[n])?(r[n]={},h(r[n],e[n]),h(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&i(e[n])&&(r[n]=h({},r[n]));return r}function A(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,_=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var O={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function M(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return R(r)?r.call(t,n):r}function P(e,t,n){var r=""+Math.abs(e),o=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+r}var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,L={},B={};function W(e,t,n,r){var o=r;"string"===typeof r&&(o=function(){return this[r]()}),e&&(B[e]=o),t&&(B[t[0]]=function(){return P(o.apply(this,arguments),t[1],t[2])}),n&&(B[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,n,r=e.match(j);for(t=0,n=r.length;t<n;t++)B[r[t]]?r[t]=B[r[t]]:r[t]=U(r[t]);return function(t){var o,a="";for(o=0;o<n;o++)a+=R(r[o])?r[o].call(t,e):r[o];return a}}function H(e,t){return e.isValid()?(t=V(t,e.localeData()),L[t]=L[t]||z(t),L[t](e)):e.localeData().invalidDate()}function V(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(F.lastIndex=0;n>=0&&F.test(e);)e=e.replace(F,r),F.lastIndex=0,n-=1;return e}var q={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function G(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(j).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var Y="Invalid date";function K(){return this._invalidDate}var $="%d",X=/\d{1,2}/;function Q(e){return this._ordinal.replace("%d",e)}var J={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Z(e,t,n,r){var o=this._relativeTime[n];return R(o)?o(e,t,n,r):o.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return R(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function re(e){var t,n,r={};for(n in e)s(e,n)&&(t=ne(n))&&(r[t]=e[n]);return r}var oe={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function ae(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:oe[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var ie,se=/\d/,ue=/\d\d/,le=/\d{3}/,ce=/\d{4}/,de=/[+-]?\d{6}/,fe=/\d\d?/,he=/\d\d\d\d?/,pe=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ve=/\d{1,4}/,ge=/[+-]?\d{1,6}/,ye=/\d+/,be=/[+-]?\d+/,xe=/Z|[+-]\d\d:?\d\d/gi,we=/Z|[+-]\d\d(?::?\d\d)?/gi,Ce=/[+-]?\d+(\.\d{1,3})?/,ke=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Se=/^[1-9]\d?/,Ee=/^([1-9]\d|\d)/;function _e(e,t,n){ie[e]=R(t)?t:function(e,r){return e&&n?n:t}}function Ne(e,t){return s(ie,e)?ie[e](t._strict,t._locale):new RegExp(Te(e))}function Te(e){return Re(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,o){return t||n||r||o})))}function Re(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function De(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ie(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=De(t)),n}ie={};var Ae={};function Oe(e,t){var n,r,o=t;for("string"===typeof e&&(e=[e]),c(t)&&(o=function(e,n){n[t]=Ie(e)}),r=e.length,n=0;n<r;n++)Ae[e[n]]=o}function Me(e,t){Oe(e,(function(e,n,r,o){r._w=r._w||{},t(e,r._w,r,o)}))}function Pe(e,t,n){null!=t&&s(Ae,e)&&Ae[e](t,n._a,n,e)}function je(e){return e%4===0&&e%100!==0||e%400===0}var Fe=0,Le=1,Be=2,We=3,Ue=4,ze=5,He=6,Ve=7,qe=8;function Ge(e){return je(e)?366:365}W("Y",0,0,(function(){var e=this.year();return e<=9999?P(e,4):"+"+e})),W(0,["YY",2],0,(function(){return this.year()%100})),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),_e("Y",be),_e("YY",fe,ue),_e("YYYY",ve,ce),_e("YYYYY",ge,de),_e("YYYYYY",ge,de),Oe(["YYYYY","YYYYYY"],Fe),Oe("YYYY",(function(e,t){t[Fe]=2===e.length?r.parseTwoDigitYear(e):Ie(e)})),Oe("YY",(function(e,t){t[Fe]=r.parseTwoDigitYear(e)})),Oe("Y",(function(e,t){t[Fe]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return Ie(e)+(Ie(e)>68?1900:2e3)};var Ye,Ke=Xe("FullYear",!0);function $e(){return je(this.year())}function Xe(e,t){return function(n){return null!=n?(Je(this,e,n),r.updateOffset(this,t),this):Qe(this,e)}}function Qe(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Je(e,t,n){var r,o,a,i,s;if(e.isValid()&&!isNaN(n)){switch(r=e._d,o=e._isUTC,t){case"Milliseconds":return void(o?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(o?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(o?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(o?r.setUTCHours(n):r.setHours(n));case"Date":return void(o?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}a=n,i=e.month(),s=29!==(s=e.date())||1!==i||je(a)?s:28,o?r.setUTCFullYear(a,i,s):r.setFullYear(a,i,s)}}function Ze(e){return R(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"===typeof e){var n,r=ae(e=re(e)),o=r.length;for(n=0;n<o;n++)this[r[n].unit](e[r[n].unit])}else if(R(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?je(e)?29:28:31-n%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},W("M",["MM",2],"Mo",(function(){return this.month()+1})),W("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),W("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),_e("M",fe,Se),_e("MM",fe,ue),_e("MMM",(function(e,t){return t.monthsShortRegex(e)})),_e("MMMM",(function(e,t){return t.monthsRegex(e)})),Oe(["M","MM"],(function(e,t){t[Le]=Ie(e)-1})),Oe(["MMM","MMMM"],(function(e,t,n,r){var o=n._locale.monthsParse(e,r,n._strict);null!=o?t[Le]=o:v(n).invalidMonth=e}));var rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),at=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,it=ke,st=ke;function ut(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||at).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone}function lt(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[at.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(e,t,n){var r,o,a,i=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(o=Ye.call(this._shortMonthsParse,i))?o:null:-1!==(o=Ye.call(this._longMonthsParse,i))?o:null:"MMM"===t?-1!==(o=Ye.call(this._shortMonthsParse,i))||-1!==(o=Ye.call(this._longMonthsParse,i))?o:null:-1!==(o=Ye.call(this._longMonthsParse,i))||-1!==(o=Ye.call(this._shortMonthsParse,i))?o:null}function dt(e,t,n){var r,o,a;if(this._monthsParseExact)return ct.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(o=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ft(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=Ie(t);else if(!c(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function ht(e){return null!=e?(ft(this,e),r.updateOffset(this,!0),this):Qe(this,"Month")}function pt(){return nt(this.year(),this.month())}function mt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||gt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=it),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function vt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||gt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=st),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function gt(){function e(e,t){return t.length-e.length}var t,n,r,o,a=[],i=[],s=[];for(t=0;t<12;t++)n=p([2e3,t]),r=Re(this.monthsShort(n,"")),o=Re(this.months(n,"")),a.push(r),i.push(o),s.push(o),s.push(r);a.sort(e),i.sort(e),s.sort(e),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function yt(e,t,n,r,o,a,i){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,o,a,i),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,o,a,i),s}function bt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function xt(e,t,n){var r=7+t-n;return-(7+bt(e,0,r).getUTCDay()-t)%7+r-1}function wt(e,t,n,r,o){var a,i,s=1+7*(t-1)+(7+n-r)%7+xt(e,r,o);return s<=0?i=Ge(a=e-1)+s:s>Ge(e)?(a=e+1,i=s-Ge(e)):(a=e,i=s),{year:a,dayOfYear:i}}function Ct(e,t,n){var r,o,a=xt(e.year(),t,n),i=Math.floor((e.dayOfYear()-a-1)/7)+1;return i<1?r=i+kt(o=e.year()-1,t,n):i>kt(e.year(),t,n)?(r=i-kt(e.year(),t,n),o=e.year()+1):(o=e.year(),r=i),{week:r,year:o}}function kt(e,t,n){var r=xt(e,t,n),o=xt(e+1,t,n);return(Ge(e)-r+o)/7}function St(e){return Ct(e,this._week.dow,this._week.doy).week}W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),_e("w",fe,Se),_e("ww",fe,ue),_e("W",fe,Se),_e("WW",fe,ue),Me(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=Ie(e)}));var Et={dow:0,doy:6};function _t(){return this._week.dow}function Nt(){return this._week.doy}function Tt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Rt(e){var t=Ct(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Dt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function It(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function At(e,t){return e.slice(t,7).concat(e.slice(0,t))}W("d",0,"do","day"),W("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),W("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),W("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),_e("d",fe),_e("e",fe),_e("E",fe),_e("dd",(function(e,t){return t.weekdaysMinRegex(e)})),_e("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),_e("dddd",(function(e,t){return t.weekdaysRegex(e)})),Me(["dd","ddd","dddd"],(function(e,t,n,r){var o=n._locale.weekdaysParse(e,r,n._strict);null!=o?t.d=o:v(n).invalidWeekday=e})),Me(["d","e","E"],(function(e,t,n,r){t[r]=Ie(e)}));var Ot="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),jt=ke,Ft=ke,Lt=ke;function Bt(e,t){var n=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?At(n,this._week.dow):e?n[e.day()]:n}function Wt(e){return!0===e?At(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ut(e){return!0===e?At(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function zt(e,t,n){var r,o,a,i=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(o=Ye.call(this._weekdaysParse,i))?o:null:"ddd"===t?-1!==(o=Ye.call(this._shortWeekdaysParse,i))?o:null:-1!==(o=Ye.call(this._minWeekdaysParse,i))?o:null:"dddd"===t?-1!==(o=Ye.call(this._weekdaysParse,i))||-1!==(o=Ye.call(this._shortWeekdaysParse,i))||-1!==(o=Ye.call(this._minWeekdaysParse,i))?o:null:"ddd"===t?-1!==(o=Ye.call(this._shortWeekdaysParse,i))||-1!==(o=Ye.call(this._weekdaysParse,i))||-1!==(o=Ye.call(this._minWeekdaysParse,i))?o:null:-1!==(o=Ye.call(this._minWeekdaysParse,i))||-1!==(o=Ye.call(this._weekdaysParse,i))||-1!==(o=Ye.call(this._shortWeekdaysParse,i))?o:null}function Ht(e,t,n){var r,o,a;if(this._weekdaysParseExact)return zt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(o=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Vt(e){if(!this.isValid())return null!=e?this:NaN;var t=Qe(this,"Day");return null!=e?(e=Dt(e,this.localeData()),this.add(e-t,"d")):t}function qt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Gt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=It(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Yt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=jt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Kt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ft),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $t(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Lt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xt(){function e(e,t){return t.length-e.length}var t,n,r,o,a,i=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Re(this.weekdaysMin(n,"")),o=Re(this.weekdaysShort(n,"")),a=Re(this.weekdays(n,"")),i.push(r),s.push(o),u.push(a),l.push(r),l.push(o),l.push(a);i.sort(e),s.sort(e),u.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Qt(){return this.hours()%12||12}function Jt(){return this.hours()||24}function Zt(e,t){W(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}W("H",["HH",2],0,"hour"),W("h",["hh",2],0,Qt),W("k",["kk",2],0,Jt),W("hmm",0,0,(function(){return""+Qt.apply(this)+P(this.minutes(),2)})),W("hmmss",0,0,(function(){return""+Qt.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)})),W("Hmm",0,0,(function(){return""+this.hours()+P(this.minutes(),2)})),W("Hmmss",0,0,(function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)})),Zt("a",!0),Zt("A",!1),_e("a",en),_e("A",en),_e("H",fe,Ee),_e("h",fe,Se),_e("k",fe,Se),_e("HH",fe,ue),_e("hh",fe,ue),_e("kk",fe,ue),_e("hmm",he),_e("hmmss",pe),_e("Hmm",he),_e("Hmmss",pe),Oe(["H","HH"],We),Oe(["k","kk"],(function(e,t,n){var r=Ie(e);t[We]=24===r?0:r})),Oe(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Oe(["h","hh"],(function(e,t,n){t[We]=Ie(e),v(n).bigHour=!0})),Oe("hmm",(function(e,t,n){var r=e.length-2;t[We]=Ie(e.substr(0,r)),t[Ue]=Ie(e.substr(r)),v(n).bigHour=!0})),Oe("hmmss",(function(e,t,n){var r=e.length-4,o=e.length-2;t[We]=Ie(e.substr(0,r)),t[Ue]=Ie(e.substr(r,2)),t[ze]=Ie(e.substr(o)),v(n).bigHour=!0})),Oe("Hmm",(function(e,t,n){var r=e.length-2;t[We]=Ie(e.substr(0,r)),t[Ue]=Ie(e.substr(r))})),Oe("Hmmss",(function(e,t,n){var r=e.length-4,o=e.length-2;t[We]=Ie(e.substr(0,r)),t[Ue]=Ie(e.substr(r,2)),t[ze]=Ie(e.substr(o))}));var nn=/[ap]\.?m?\.?/i,rn=Xe("Hours",!0);function on(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,sn={calendar:O,longDateFormat:q,invalidDate:Y,ordinal:$,dayOfMonthOrdinalParse:X,relativeTime:J,months:rt,monthsShort:ot,week:Et,weekdays:Ot,weekdaysMin:Pt,weekdaysShort:Mt,meridiemParse:nn},un={},ln={};function cn(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function dn(e){return e?e.toLowerCase().replace("_","-"):e}function fn(e){for(var t,n,r,o,a=0;a<e.length;){for(t=(o=dn(e[a]).split("-")).length,n=(n=dn(e[a+1]))?n.split("-"):null;t>0;){if(r=pn(o.slice(0,t).join("-")))return r;if(n&&n.length>=t&&cn(o,n)>=t-1)break;t--}a++}return an}function hn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function pn(t){var n=null;if(void 0===un[t]&&e&&e.exports&&hn(t))try{n=an._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mn(n)}catch(r){un[t]=null}return un[t]}function mn(e,t){var n;return e&&((n=l(t)?yn(e):vn(e,t))?an=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function vn(e,t){if(null!==t){var n,r=sn;if(t.abbr=e,null!=un[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return ln[t.parentLocale]||(ln[t.parentLocale]=[]),ln[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new A(I(r,t)),ln[e]&&ln[e].forEach((function(e){vn(e.name,e.config)})),mn(e),un[e]}return delete un[e],null}function gn(e,t){if(null!=t){var n,r,o=sn;null!=un[e]&&null!=un[e].parentLocale?un[e].set(I(un[e]._config,t)):(null!=(r=pn(e))&&(o=r._config),t=I(o,t),null==r&&(t.abbr=e),(n=new A(t)).parentLocale=un[e],un[e]=n),mn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===mn()&&mn(e)):null!=un[e]&&delete un[e]);return un[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!a(e)){if(t=pn(e))return t;e=[e]}return fn(e)}function bn(){return _(un)}function xn(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[Le]<0||n[Le]>11?Le:n[Be]<1||n[Be]>nt(n[Fe],n[Le])?Be:n[We]<0||n[We]>24||24===n[We]&&(0!==n[Ue]||0!==n[ze]||0!==n[He])?We:n[Ue]<0||n[Ue]>59?Ue:n[ze]<0||n[ze]>59?ze:n[He]<0||n[He]>999?He:-1,v(e)._overflowDayOfYear&&(t<Fe||t>Be)&&(t=Be),v(e)._overflowWeeks&&-1===t&&(t=Ve),v(e)._overflowWeekday&&-1===t&&(t=qe),v(e).overflow=t),e}var wn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kn=/Z|[+-]\d\d(?::?\d\d)?/,Sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],En=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_n=/^\/?Date\((-?\d+)/i,Nn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Rn(e){var t,n,r,o,a,i,s=e._i,u=wn.exec(s)||Cn.exec(s),l=Sn.length,c=En.length;if(u){for(v(e).iso=!0,t=0,n=l;t<n;t++)if(Sn[t][1].exec(u[1])){o=Sn[t][0],r=!1!==Sn[t][2];break}if(null==o)return void(e._isValid=!1);if(u[3]){for(t=0,n=c;t<n;t++)if(En[t][1].exec(u[3])){a=(u[2]||" ")+En[t][0];break}if(null==a)return void(e._isValid=!1)}if(!r&&null!=a)return void(e._isValid=!1);if(u[4]){if(!kn.exec(u[4]))return void(e._isValid=!1);i="Z"}e._f=o+(a||"")+(i||""),Un(e)}else e._isValid=!1}function Dn(e,t,n,r,o,a){var i=[In(e),ot.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(o,10)];return a&&i.push(parseInt(a,10)),i}function In(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function An(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function On(e,t,n){return!e||Mt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Mn(e,t,n){if(e)return Tn[e];if(t)return 0;var r=parseInt(n,10),o=r%100;return(r-o)/100*60+o}function Pn(e){var t,n=Nn.exec(An(e._i));if(n){if(t=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!On(n[1],t,e))return;e._a=t,e._tzm=Mn(n[8],n[9],n[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function jn(e){var t=_n.exec(e._i);null===t?(Rn(e),!1===e._isValid&&(delete e._isValid,Pn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Fn(e,t,n){return null!=e?e:null!=t?t:n}function Ln(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Bn(e){var t,n,r,o,a,i=[];if(!e._d){for(r=Ln(e),e._w&&null==e._a[Be]&&null==e._a[Le]&&Wn(e),null!=e._dayOfYear&&(a=Fn(e._a[Fe],r[Fe]),(e._dayOfYear>Ge(a)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=bt(a,0,e._dayOfYear),e._a[Le]=n.getUTCMonth(),e._a[Be]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[We]&&0===e._a[Ue]&&0===e._a[ze]&&0===e._a[He]&&(e._nextDay=!0,e._a[We]=0),e._d=(e._useUTC?bt:yt).apply(null,i),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[We]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==o&&(v(e).weekdayMismatch=!0)}}function Wn(e){var t,n,r,o,a,i,s,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,i=4,n=Fn(t.GG,e._a[Fe],Ct($n(),1,4).year),r=Fn(t.W,1),((o=Fn(t.E,1))<1||o>7)&&(u=!0)):(a=e._locale._week.dow,i=e._locale._week.doy,l=Ct($n(),a,i),n=Fn(t.gg,e._a[Fe],l.year),r=Fn(t.w,l.week),null!=t.d?((o=t.d)<0||o>6)&&(u=!0):null!=t.e?(o=t.e+a,(t.e<0||t.e>6)&&(u=!0)):o=a),r<1||r>kt(n,a,i)?v(e)._overflowWeeks=!0:null!=u?v(e)._overflowWeekday=!0:(s=wt(n,r,o,a,i),e._a[Fe]=s.year,e._dayOfYear=s.dayOfYear)}function Un(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],v(e).empty=!0;var t,n,o,a,i,s,u,l=""+e._i,c=l.length,d=0;for(u=(o=V(e._f,e._locale).match(j)||[]).length,t=0;t<u;t++)a=o[t],(n=(l.match(Ne(a,e))||[])[0])&&((i=l.substr(0,l.indexOf(n))).length>0&&v(e).unusedInput.push(i),l=l.slice(l.indexOf(n)+n.length),d+=n.length),B[a]?(n?v(e).empty=!1:v(e).unusedTokens.push(a),Pe(a,n,e)):e._strict&&!n&&v(e).unusedTokens.push(a);v(e).charsLeftOver=c-d,l.length>0&&v(e).unusedInput.push(l),e._a[We]<=12&&!0===v(e).bigHour&&e._a[We]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[We]=zn(e._locale,e._a[We],e._meridiem),null!==(s=v(e).era)&&(e._a[Fe]=e._locale.erasConvertYear(s,e._a[Fe])),Bn(e),xn(e)}else Pn(e);else Rn(e)}function zn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Hn(e){var t,n,r,o,a,i,s=!1,u=e._f.length;if(0===u)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<u;o++)a=0,i=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],Un(t),g(t)&&(i=!0),a+=v(t).charsLeftOver,a+=10*v(t).unusedTokens.length,v(t).score=a,s?a<r&&(r=a,n=t):(null==r||a<r||i)&&(r=a,n=t,i&&(s=!0));h(e,n||t)}function Vn(e){if(!e._d){var t=re(e._i),n=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Bn(e)}}function qn(e){var t=new C(xn(Gn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Gn(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new C(xn(t)):(d(t)?e._d=t:a(n)?Hn(e):n?Un(e):Yn(e),g(e)||(e._d=null),e))}function Yn(e){var t=e._i;l(t)?e._d=new Date(r.now()):d(t)?e._d=new Date(t.valueOf()):"string"===typeof t?jn(e):a(t)?(e._a=f(t.slice(0),(function(e){return parseInt(e,10)})),Bn(e)):i(t)?Vn(e):c(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Kn(e,t,n,r,o){var s={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(i(e)&&u(e)||a(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=o,s._l=n,s._i=e,s._f=t,s._strict=r,qn(s)}function $n(e,t,n,r){return Kn(e,t,n,r,!1)}r.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Xn=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=$n.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Qn=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=$n.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Jn(e,t){var n,r;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return $n();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Zn(){return Jn("isBefore",[].slice.call(arguments,0))}function er(){return Jn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,o=nr.length;for(t in e)if(s(e,t)&&(-1===Ye.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<o;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==Ie(e[nr[n]])&&(r=!0)}return!0}function or(){return this._isValid}function ar(){return Tr(NaN)}function ir(e){var t=re(e),n=t.year||0,r=t.quarter||0,o=t.month||0,a=t.week||t.isoWeek||0,i=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+i+7*a,this._months=+o+3*r+12*n,this._data={},this._locale=yn(),this._bubble()}function sr(e){return e instanceof ir}function ur(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function lr(e,t,n){var r,o=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0;for(r=0;r<o;r++)(n&&e[r]!==t[r]||!n&&Ie(e[r])!==Ie(t[r]))&&i++;return i+a}function cr(e,t){W(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+P(~~(e/60),2)+t+P(~~e%60,2)}))}cr("Z",":"),cr("ZZ",""),_e("Z",we),_e("ZZ",we),Oe(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=fr(we,e)}));var dr=/([\+\-]|\d\d)/gi;function fr(e,t){var n,r,o=(t||"").match(e);return null===o?null:0===(r=60*(n=((o[o.length-1]||[])+"").match(dr)||["-",0,0])[1]+Ie(n[2]))?0:"+"===n[0]?r:-r}function hr(e,t){var n,o;return t._isUTC?(n=t.clone(),o=(k(e)||d(e)?e.valueOf():$n(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),r.updateOffset(n,!1),n):$n(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function mr(e,t,n){var o,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=fr(we,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(o=pr(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),a!==e&&(!t||this._changeInProgress?Or(this,Tr(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:pr(this)}function vr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function gr(e){return this.utcOffset(0,e)}function yr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=fr(xe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function xr(e){return!!this.isValid()&&(e=e?$n(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function wr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Cr(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return w(t,this),(t=Gn(t))._a?(e=t._isUTC?p(t._a):$n(t._a),this._isDSTShifted=this.isValid()&&lr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kr(){return!!this.isValid()&&!this._isUTC}function Sr(){return!!this.isValid()&&this._isUTC}function Er(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var _r=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Nr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Tr(e,t){var n,r,o,a=e,i=null;return sr(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(i=_r.exec(e))?(n="-"===i[1]?-1:1,a={y:0,d:Ie(i[Be])*n,h:Ie(i[We])*n,m:Ie(i[Ue])*n,s:Ie(i[ze])*n,ms:Ie(ur(1e3*i[He]))*n}):(i=Nr.exec(e))?(n="-"===i[1]?-1:1,a={y:Rr(i[2],n),M:Rr(i[3],n),w:Rr(i[4],n),d:Rr(i[5],n),h:Rr(i[6],n),m:Rr(i[7],n),s:Rr(i[8],n)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(o=Ir($n(a.from),$n(a.to)),(a={}).ms=o.milliseconds,a.M=o.months),r=new ir(a),sr(e)&&s(e,"_locale")&&(r._locale=e._locale),sr(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Rr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Dr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ir(e,t){var n;return e.isValid()&&t.isValid()?(t=hr(t,e),e.isBefore(t)?n=Dr(e,t):((n=Dr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ar(e,t){return function(n,r){var o;return null===r||isNaN(+r)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),Or(this,Tr(n,r),e),this}}function Or(e,t,n,o){var a=t._milliseconds,i=ur(t._days),s=ur(t._months);e.isValid()&&(o=null==o||o,s&&ft(e,Qe(e,"Month")+s*n),i&&Je(e,"Date",Qe(e,"Date")+i*n),a&&e._d.setTime(e._d.valueOf()+a*n),o&&r.updateOffset(e,i||s))}Tr.fn=ir.prototype,Tr.invalid=ar;var Mr=Ar(1,"add"),Pr=Ar(-1,"subtract");function jr(e){return"string"===typeof e||e instanceof String}function Fr(e){return k(e)||d(e)||jr(e)||c(e)||Br(e)||Lr(e)||null===e||void 0===e}function Lr(e){var t,n,r=i(e)&&!u(e),o=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l=a.length;for(t=0;t<l;t+=1)n=a[t],o=o||s(e,n);return r&&o}function Br(e){var t=a(e),n=!1;return t&&(n=0===e.filter((function(t){return!c(t)&&jr(e)})).length),t&&n}function Wr(e){var t,n,r=i(e)&&!u(e),o=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=a[t],o=o||s(e,n);return r&&o}function Ur(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function zr(e,t){1===arguments.length&&(arguments[0]?Fr(arguments[0])?(e=arguments[0],t=void 0):Wr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||$n(),o=hr(n,this).startOf("day"),a=r.calendarFormat(this,o)||"sameElse",i=t&&(R(t[a])?t[a].call(this,n):t[a]);return this.format(i||this.localeData().calendar(a,this,$n(n)))}function Hr(){return new C(this)}function Vr(e,t){var n=k(e)?e:$n(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function qr(e,t){var n=k(e)?e:$n(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Gr(e,t,n,r){var o=k(e)?e:$n(e),a=k(t)?t:$n(t);return!!(this.isValid()&&o.isValid()&&a.isValid())&&("("===(r=r||"()")[0]?this.isAfter(o,n):!this.isBefore(o,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n))}function Yr(e,t){var n,r=k(e)?e:$n(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Kr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function $r(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Xr(e,t,n){var r,o,a;if(!this.isValid())return NaN;if(!(r=hr(e,this)).isValid())return NaN;switch(o=6e4*(r.utcOffset()-this.utcOffset()),t=ne(t)){case"year":a=Qr(this,r)/12;break;case"month":a=Qr(this,r);break;case"quarter":a=Qr(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-o)/864e5;break;case"week":a=(this-r-o)/6048e5;break;default:a=this-r}return n?a:De(a)}function Qr(e,t){if(e.date()<t.date())return-Qr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Jr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):R(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function eo(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,o="moment",a="";return this.isLocal()||(o=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+o+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=a+'[")]',this.format(e+t+n+r)}function to(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)}function no(e,t){return this.isValid()&&(k(e)&&e.isValid()||$n(e).isValid())?Tr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ro(e){return this.from($n(),e)}function oo(e,t){return this.isValid()&&(k(e)&&e.isValid()||$n(e).isValid())?Tr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ao(e){return this.to($n(),e)}function io(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var so=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function uo(){return this._locale}var lo=1e3,co=60*lo,fo=60*co,ho=3506328*fo;function po(e,t){return(e%t+t)%t}function mo(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-ho:new Date(e,t,n).valueOf()}function vo(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-ho:Date.UTC(e,t,n)}function go(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vo:mo,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=po(t+(this._isUTC?0:this.utcOffset()*co),fo);break;case"minute":t=this._d.valueOf(),t-=po(t,co);break;case"second":t=this._d.valueOf(),t-=po(t,lo)}return this._d.setTime(t),r.updateOffset(this,!0),this}function yo(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vo:mo,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=fo-po(t+(this._isUTC?0:this.utcOffset()*co),fo)-1;break;case"minute":t=this._d.valueOf(),t+=co-po(t,co)-1;break;case"second":t=this._d.valueOf(),t+=lo-po(t,lo)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function bo(){return this._d.valueOf()-6e4*(this._offset||0)}function xo(){return Math.floor(this.valueOf()/1e3)}function wo(){return new Date(this.valueOf())}function Co(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ko(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function So(){return this.isValid()?this.toISOString():null}function Eo(){return g(this)}function _o(){return h({},v(this))}function No(){return v(this).overflow}function To(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ro(e,t){var n,o,a,i=this._eras||yn("en")._eras;for(n=0,o=i.length;n<o;++n)switch("string"===typeof i[n].since&&(a=r(i[n].since).startOf("day"),i[n].since=a.valueOf()),typeof i[n].until){case"undefined":i[n].until=1/0;break;case"string":a=r(i[n].until).startOf("day").valueOf(),i[n].until=a.valueOf()}return i}function Do(e,t,n){var r,o,a,i,s,u=this.eras();for(e=e.toUpperCase(),r=0,o=u.length;r<o;++r)if(a=u[r].name.toUpperCase(),i=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(i===e)return u[r];break;case"NNNN":if(a===e)return u[r];break;case"NNNNN":if(s===e)return u[r]}else if([a,i,s].indexOf(e)>=0)return u[r]}function Io(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Ao(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Oo(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Mo(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Po(){var e,t,n,o,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,o=this.clone().startOf("day").valueOf(),a[e].since<=o&&o<=a[e].until||a[e].until<=o&&o<=a[e].since)return(this.year()-r(a[e].since).year())*n+a[e].offset;return this.year()}function jo(e){return s(this,"_erasNameRegex")||Ho.call(this),e?this._erasNameRegex:this._erasRegex}function Fo(e){return s(this,"_erasAbbrRegex")||Ho.call(this),e?this._erasAbbrRegex:this._erasRegex}function Lo(e){return s(this,"_erasNarrowRegex")||Ho.call(this),e?this._erasNarrowRegex:this._erasRegex}function Bo(e,t){return t.erasAbbrRegex(e)}function Wo(e,t){return t.erasNameRegex(e)}function Uo(e,t){return t.erasNarrowRegex(e)}function zo(e,t){return t._eraYearOrdinalRegex||ye}function Ho(){var e,t,n,r,o,a=[],i=[],s=[],u=[],l=this.eras();for(e=0,t=l.length;e<t;++e)n=Re(l[e].name),r=Re(l[e].abbr),o=Re(l[e].narrow),i.push(n),a.push(r),s.push(o),u.push(n),u.push(r),u.push(o);this._erasRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}function Vo(e,t){W(0,[e,e.length],0,t)}function qo(e){return Qo.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Go(e){return Qo.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Yo(){return kt(this.year(),1,4)}function Ko(){return kt(this.isoWeekYear(),1,4)}function $o(){var e=this.localeData()._week;return kt(this.year(),e.dow,e.doy)}function Xo(){var e=this.localeData()._week;return kt(this.weekYear(),e.dow,e.doy)}function Qo(e,t,n,r,o){var a;return null==e?Ct(this,r,o).year:(t>(a=kt(e,r,o))&&(t=a),Jo.call(this,e,t,n,r,o))}function Jo(e,t,n,r,o){var a=wt(e,t,n,r,o),i=bt(a.year,0,a.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}function Zo(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}W("N",0,0,"eraAbbr"),W("NN",0,0,"eraAbbr"),W("NNN",0,0,"eraAbbr"),W("NNNN",0,0,"eraName"),W("NNNNN",0,0,"eraNarrow"),W("y",["y",1],"yo","eraYear"),W("y",["yy",2],0,"eraYear"),W("y",["yyy",3],0,"eraYear"),W("y",["yyyy",4],0,"eraYear"),_e("N",Bo),_e("NN",Bo),_e("NNN",Bo),_e("NNNN",Wo),_e("NNNNN",Uo),Oe(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var o=n._locale.erasParse(e,r,n._strict);o?v(n).era=o:v(n).invalidEra=e})),_e("y",ye),_e("yy",ye),_e("yyy",ye),_e("yyyy",ye),_e("yo",zo),Oe(["y","yy","yyy","yyyy"],Fe),Oe(["yo"],(function(e,t,n,r){var o;n._locale._eraYearOrdinalRegex&&(o=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Fe]=n._locale.eraYearOrdinalParse(e,o):t[Fe]=parseInt(e,10)})),W(0,["gg",2],0,(function(){return this.weekYear()%100})),W(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Vo("gggg","weekYear"),Vo("ggggg","weekYear"),Vo("GGGG","isoWeekYear"),Vo("GGGGG","isoWeekYear"),_e("G",be),_e("g",be),_e("GG",fe,ue),_e("gg",fe,ue),_e("GGGG",ve,ce),_e("gggg",ve,ce),_e("GGGGG",ge,de),_e("ggggg",ge,de),Me(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=Ie(e)})),Me(["gg","GG"],(function(e,t,n,o){t[o]=r.parseTwoDigitYear(e)})),W("Q",0,"Qo","quarter"),_e("Q",se),Oe("Q",(function(e,t){t[Le]=3*(Ie(e)-1)})),W("D",["DD",2],"Do","date"),_e("D",fe,Se),_e("DD",fe,ue),_e("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Oe(["D","DD"],Be),Oe("Do",(function(e,t){t[Be]=Ie(e.match(fe)[0])}));var ea=Xe("Date",!0);function ta(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}W("DDD",["DDDD",3],"DDDo","dayOfYear"),_e("DDD",me),_e("DDDD",le),Oe(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=Ie(e)})),W("m",["mm",2],0,"minute"),_e("m",fe,Ee),_e("mm",fe,ue),Oe(["m","mm"],Ue);var na=Xe("Minutes",!1);W("s",["ss",2],0,"second"),_e("s",fe,Ee),_e("ss",fe,ue),Oe(["s","ss"],ze);var ra,oa,aa=Xe("Seconds",!1);for(W("S",0,0,(function(){return~~(this.millisecond()/100)})),W(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),W(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),W(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),W(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),W(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),W(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),_e("S",me,se),_e("SS",me,ue),_e("SSS",me,le),ra="SSSS";ra.length<=9;ra+="S")_e(ra,ye);function ia(e,t){t[He]=Ie(1e3*("0."+e))}for(ra="S";ra.length<=9;ra+="S")Oe(ra,ia);function sa(){return this._isUTC?"UTC":""}function ua(){return this._isUTC?"Coordinated Universal Time":""}oa=Xe("Milliseconds",!1),W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var la=C.prototype;function ca(e){return $n(1e3*e)}function da(){return $n.apply(null,arguments).parseZone()}function fa(e){return e}la.add=Mr,la.calendar=zr,la.clone=Hr,la.diff=Xr,la.endOf=yo,la.format=to,la.from=no,la.fromNow=ro,la.to=oo,la.toNow=ao,la.get=Ze,la.invalidAt=No,la.isAfter=Vr,la.isBefore=qr,la.isBetween=Gr,la.isSame=Yr,la.isSameOrAfter=Kr,la.isSameOrBefore=$r,la.isValid=Eo,la.lang=so,la.locale=io,la.localeData=uo,la.max=Qn,la.min=Xn,la.parsingFlags=_o,la.set=et,la.startOf=go,la.subtract=Pr,la.toArray=Co,la.toObject=ko,la.toDate=wo,la.toISOString=Zr,la.inspect=eo,"undefined"!==typeof Symbol&&null!=Symbol.for&&(la[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),la.toJSON=So,la.toString=Jr,la.unix=xo,la.valueOf=bo,la.creationData=To,la.eraName=Ao,la.eraNarrow=Oo,la.eraAbbr=Mo,la.eraYear=Po,la.year=Ke,la.isLeapYear=$e,la.weekYear=qo,la.isoWeekYear=Go,la.quarter=la.quarters=Zo,la.month=ht,la.daysInMonth=pt,la.week=la.weeks=Tt,la.isoWeek=la.isoWeeks=Rt,la.weeksInYear=$o,la.weeksInWeekYear=Xo,la.isoWeeksInYear=Yo,la.isoWeeksInISOWeekYear=Ko,la.date=ea,la.day=la.days=Vt,la.weekday=qt,la.isoWeekday=Gt,la.dayOfYear=ta,la.hour=la.hours=rn,la.minute=la.minutes=na,la.second=la.seconds=aa,la.millisecond=la.milliseconds=oa,la.utcOffset=mr,la.utc=gr,la.local=yr,la.parseZone=br,la.hasAlignedHourOffset=xr,la.isDST=wr,la.isLocal=kr,la.isUtcOffset=Sr,la.isUtc=Er,la.isUTC=Er,la.zoneAbbr=sa,la.zoneName=ua,la.dates=E("dates accessor is deprecated. Use date instead.",ea),la.months=E("months accessor is deprecated. Use month instead",ht),la.years=E("years accessor is deprecated. Use year instead",Ke),la.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vr),la.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Cr);var ha=A.prototype;function pa(e,t,n,r){var o=yn(),a=p().set(r,t);return o[n](a,e)}function ma(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return pa(e,t,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=pa(e,r,n,"month");return o}function va(e,t,n,r){"boolean"===typeof e?(c(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,c(t)&&(n=t,t=void 0),t=t||"");var o,a=yn(),i=e?a._week.dow:0,s=[];if(null!=n)return pa(t,(n+i)%7,r,"day");for(o=0;o<7;o++)s[o]=pa(t,(o+i)%7,r,"day");return s}function ga(e,t){return ma(e,t,"months")}function ya(e,t){return ma(e,t,"monthsShort")}function ba(e,t,n){return va(e,t,n,"weekdays")}function xa(e,t,n){return va(e,t,n,"weekdaysShort")}function wa(e,t,n){return va(e,t,n,"weekdaysMin")}ha.calendar=M,ha.longDateFormat=G,ha.invalidDate=K,ha.ordinal=Q,ha.preparse=fa,ha.postformat=fa,ha.relativeTime=Z,ha.pastFuture=ee,ha.set=D,ha.eras=Ro,ha.erasParse=Do,ha.erasConvertYear=Io,ha.erasAbbrRegex=Fo,ha.erasNameRegex=jo,ha.erasNarrowRegex=Lo,ha.months=ut,ha.monthsShort=lt,ha.monthsParse=dt,ha.monthsRegex=vt,ha.monthsShortRegex=mt,ha.week=St,ha.firstDayOfYear=Nt,ha.firstDayOfWeek=_t,ha.weekdays=Bt,ha.weekdaysMin=Ut,ha.weekdaysShort=Wt,ha.weekdaysParse=Ht,ha.weekdaysRegex=Yt,ha.weekdaysShortRegex=Kt,ha.weekdaysMinRegex=$t,ha.isPM=tn,ha.meridiem=on,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Ie(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=E("moment.lang is deprecated. Use moment.locale instead.",mn),r.langData=E("moment.langData is deprecated. Use moment.localeData instead.",yn);var Ca=Math.abs;function ka(){var e=this._data;return this._milliseconds=Ca(this._milliseconds),this._days=Ca(this._days),this._months=Ca(this._months),e.milliseconds=Ca(e.milliseconds),e.seconds=Ca(e.seconds),e.minutes=Ca(e.minutes),e.hours=Ca(e.hours),e.months=Ca(e.months),e.years=Ca(e.years),this}function Sa(e,t,n,r){var o=Tr(t,n);return e._milliseconds+=r*o._milliseconds,e._days+=r*o._days,e._months+=r*o._months,e._bubble()}function Ea(e,t){return Sa(this,e,t,1)}function _a(e,t){return Sa(this,e,t,-1)}function Na(e){return e<0?Math.floor(e):Math.ceil(e)}function Ta(){var e,t,n,r,o,a=this._milliseconds,i=this._days,s=this._months,u=this._data;return a>=0&&i>=0&&s>=0||a<=0&&i<=0&&s<=0||(a+=864e5*Na(Da(s)+i),i=0,s=0),u.milliseconds=a%1e3,e=De(a/1e3),u.seconds=e%60,t=De(e/60),u.minutes=t%60,n=De(t/60),u.hours=n%24,i+=De(n/24),s+=o=De(Ra(i)),i-=Na(Da(o)),r=De(s/12),s%=12,u.days=i,u.months=s,u.years=r,this}function Ra(e){return 4800*e/146097}function Da(e){return 146097*e/4800}function Ia(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Ra(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Da(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Aa(e){return function(){return this.as(e)}}var Oa=Aa("ms"),Ma=Aa("s"),Pa=Aa("m"),ja=Aa("h"),Fa=Aa("d"),La=Aa("w"),Ba=Aa("M"),Wa=Aa("Q"),Ua=Aa("y"),za=Oa;function Ha(){return Tr(this)}function Va(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function qa(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ga=qa("milliseconds"),Ya=qa("seconds"),Ka=qa("minutes"),$a=qa("hours"),Xa=qa("days"),Qa=qa("months"),Ja=qa("years");function Za(){return De(this.days()/7)}var ei=Math.round,ti={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ni(e,t,n,r,o){return o.relativeTime(t||1,!!n,e,r)}function ri(e,t,n,r){var o=Tr(e).abs(),a=ei(o.as("s")),i=ei(o.as("m")),s=ei(o.as("h")),u=ei(o.as("d")),l=ei(o.as("M")),c=ei(o.as("w")),d=ei(o.as("y")),f=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||i<=1&&["m"]||i<n.m&&["mm",i]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(f=f||c<=1&&["w"]||c<n.w&&["ww",c]),(f=f||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,f[3]=+e>0,f[4]=r,ni.apply(null,f)}function oi(e){return void 0===e?ei:"function"===typeof e&&(ei=e,!0)}function ai(e,t){return void 0!==ti[e]&&(void 0===t?ti[e]:(ti[e]=t,"s"===e&&(ti.ss=t-1),!0))}function ii(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,o=!1,a=ti;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(o=e),"object"===typeof t&&(a=Object.assign({},ti,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),r=ri(this,!o,a,n=this.localeData()),o&&(r=n.pastFuture(+this,r)),n.postformat(r)}var si=Math.abs;function ui(e){return(e>0)-(e<0)||+e}function li(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,o,a,i,s,u=si(this._milliseconds)/1e3,l=si(this._days),c=si(this._months),d=this.asSeconds();return d?(e=De(u/60),t=De(e/60),u%=60,e%=60,n=De(c/12),c%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",o=d<0?"-":"",a=ui(this._months)!==ui(d)?"-":"",i=ui(this._days)!==ui(d)?"-":"",s=ui(this._milliseconds)!==ui(d)?"-":"",o+"P"+(n?a+n+"Y":"")+(c?a+c+"M":"")+(l?i+l+"D":"")+(t||e||u?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(u?s+r+"S":"")):"P0D"}var ci=ir.prototype;return ci.isValid=or,ci.abs=ka,ci.add=Ea,ci.subtract=_a,ci.as=Ia,ci.asMilliseconds=Oa,ci.asSeconds=Ma,ci.asMinutes=Pa,ci.asHours=ja,ci.asDays=Fa,ci.asWeeks=La,ci.asMonths=Ba,ci.asQuarters=Wa,ci.asYears=Ua,ci.valueOf=za,ci._bubble=Ta,ci.clone=Ha,ci.get=Va,ci.milliseconds=Ga,ci.seconds=Ya,ci.minutes=Ka,ci.hours=$a,ci.days=Xa,ci.weeks=Za,ci.months=Qa,ci.years=Ja,ci.humanize=ii,ci.toISOString=li,ci.toString=li,ci.toJSON=li,ci.locale=io,ci.localeData=uo,ci.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",li),ci.lang=so,W("X",0,0,"unix"),W("x",0,0,"valueOf"),_e("x",be),_e("X",Ce),Oe("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Oe("x",(function(e,t,n){n._d=new Date(Ie(e))})),r.version="2.30.1",o($n),r.fn=la,r.min=Zn,r.max=er,r.now=tr,r.utc=p,r.unix=ca,r.months=ga,r.isDate=d,r.locale=mn,r.invalid=y,r.duration=Tr,r.isMoment=k,r.weekdays=ba,r.parseZone=da,r.localeData=yn,r.isDuration=sr,r.monthsShort=ya,r.weekdaysMin=wa,r.defineLocale=vn,r.updateLocale=gn,r.locales=bn,r.weekdaysShort=xa,r.normalizeUnits=ne,r.relativeTimeRounding=oi,r.relativeTimeThreshold=ai,r.calendarFormat=Ur,r.prototype=la,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},6191:(e,t,n)=>{"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{A:()=>r})},6194:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getFullYear()===a.getFullYear()}},6265:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(5027),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=7*(0,r.A)(t);return(0,o.default)(e,n)}},6329:e=>{"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},6337:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(2215),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=3*(0,r.A)(t);return(0,o.default)(e,n)}},6340:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){return(0,o.A)(1,arguments),(0,r.default)(e).getSeconds()}},6366:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,o="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var s,u,l,c;if(Array.isArray(e)){if((s=e.length)!=i.length)return!1;for(u=s;0!==u--;)if(!a(e[u],i[u]))return!1;return!0}if(n&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(c=e.entries();!(u=c.next()).done;)if(!i.has(u.value[0]))return!1;for(c=e.entries();!(u=c.next()).done;)if(!a(u.value[1],i.get(u.value[0])))return!1;return!0}if(r&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(c=e.entries();!(u=c.next()).done;)if(!i.has(u.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((s=e.length)!=i.length)return!1;for(u=s;0!==u--;)if(e[u]!==i[u])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof i.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof i.toString)return e.toString()===i.toString();if((s=(l=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(u=s;0!==u--;)if(!Object.prototype.hasOwnProperty.call(i,l[u]))return!1;if(t&&e instanceof Element)return!1;for(u=s;0!==u--;)if(("_owner"!==l[u]&&"__v"!==l[u]&&"__o"!==l[u]||!e.$$typeof)&&!a(e[l[u]],i[l[u]]))return!1;return!0}return e!==e&&i!==i}e.exports=function(e,t){try{return a(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},6382:(e,t,n)=>{"use strict";const r=n(4445),o=n(6900),a="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=s(n);const o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if($(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&($(e,SharedArrayBuffer)||e&&$(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return u.from(r,t,n);const o=function(e){if(u.isBuffer(e)){const t=0|p(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||X(e.length)?s(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(o)return o;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),s(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,u.prototype),r}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(o)return r?-1:G(e).length;t=(""+t).toLowerCase(),o=!0}}function v(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,o);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,o){let a,i=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,u/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){let r=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===u)return r*i}else-1!==r&&(a-=a-r),r=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){let n=!0;for(let r=0;r<u;r++)if(l(e,a+r)!==l(t,r)){n=!1;break}if(n)return a}return-1}function x(e,t,n,r){n=Number(n)||0;const o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;const a=t.length;let i;for(r>a/2&&(r=a/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(X(r))return i;e[n+i]=r}return i}function w(e,t,n,r){return K(G(t,e.length-n),e,n,r)}function C(e,t,n,r){return K(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return K(Y(t),e,n,r)}function S(e,t,n,r){return K(function(e,t){let n,r,o;const a=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,o=n%256,a.push(o),a.push(r);return a}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);const r=[];let o=t;for(;o<n;){const t=e[o];let a=null,i=t>239?4:t>223?3:t>191?2:1;if(o+i<=n){let n,r,s,u;switch(i){case 1:t<128&&(a=t);break;case 2:n=e[o+1],128===(192&n)&&(u=(31&t)<<6|63&n,u>127&&(a=u));break;case 3:n=e[o+1],r=e[o+2],128===(192&n)&&128===(192&r)&&(u=(15&t)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(a=u));break;case 4:n=e[o+1],r=e[o+2],s=e[o+3],128===(192&n)&&128===(192&r)&&128===(192&s)&&(u=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,u>65535&&u<1114112&&(a=u))}}null===a?(a=65533,i=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=i}return function(e){const t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=N));return n}(r)}t.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?s(e):void 0!==t?"string"===typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if($(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=u.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if($(t,Uint8Array))o+t.length>r.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(e,t,n,r,o){if($(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0);const s=Math.min(a,i),l=this.slice(r,o),c=e.slice(t,n);for(let u=0;u<s;++u)if(l[u]!==c[u]){a=l[u],i=c[u];break}return a<i?-1:i<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return C(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const N=4096;function T(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function R(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function D(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let a=t;a<n;++a)o+=Q[e[a]];return o}function I(e,t,n){const r=e.slice(t,n);let o="";for(let a=0;a<r.length-1;a+=2)o+=String.fromCharCode(r[a]+256*r[a+1]);return o}function A(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,o,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,o){z(t,r,o,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function P(e,t,n,r,o){z(t,r,o,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function j(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return t=+t,n>>>=0,a||j(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,a){return t=+t,n>>>=0,a||j(e,0,n,8),o.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let r=this[e],o=1,a=0;for(;++a<t&&(o*=256);)r+=this[e+a]*o;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let r=this[e],o=1,a=0;for(;++a<t&&(o*=256);)r+=this[e+a]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let r=t,o=1,a=this[e+--r];for(;r>0&&(o*=256);)a+=this[e+--r]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=J((function(e){return M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=J((function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let o=0,a=1,i=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===i&&0!==this[t+o-1]&&(i=1),this[t+o]=(e/a|0)-i&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let o=n-1,a=1,i=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===i&&0!==this[t+o+1]&&(i=1),this[t+o]=(e/a|0)-i&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=J((function(e){return M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=J((function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{const a=u.isBuffer(e)?e:u.from(e,r),i=a.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%i]}return this};const B={};function W(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function U(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function z(e,t,n,r,o,a){if(e>n||e<t){const r="bigint"===typeof t?"n":"";let o;throw o=a>3?0===t||t===BigInt(0)?">= 0".concat(r," and < 2").concat(r," ** ").concat(8*(a+1)).concat(r):">= -(2".concat(r," ** ").concat(8*(a+1)-1).concat(r,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(r):">= ".concat(t).concat(r," and <= ").concat(n).concat(r),new B.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||V(t,e.length-(n+1))}(r,o,a)}function H(e,t){if("number"!==typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,n){if(Math.floor(e)!==e)throw H(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,n){let r='The value of "'.concat(e,'" is out of range.'),o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=U(String(n)):"bigint"===typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=U(o)),o+="n"),r+=" It must be ".concat(t,". Received ").concat(o),r}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const r=e.length;let o=null;const a=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function K(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function $(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!==e}const Q=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function J(e){return"undefined"===typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},6440:e=>{"use strict";var t=function(){};e.exports=t},6496:(e,t,n)=>{"use strict";var r,o=n(9989);o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,a=n in document;if(!a){var i=document.createElement("div");i.setAttribute(n,"return;"),a="function"===typeof i[n]}return!a&&r&&"wheel"===e&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}},6522:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(n){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BUN_VERSION:"latest",REACT_APP_LIVE_SERVER_ADDR:"https://connectbd.onrender.com",REACT_APP_PORT:"3000",REACT_APP_SERVER_ADDR:"https://connectbd.onrender.com",REACT_APP_URL:"https://programmerikram.com/ics/"}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(5237)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},6545:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var o=function(e){var t,r;function o(t,r,o){return e.call(this,function(e,t,r){return"string"===typeof n?n:n(e,t,r)}(t,r,o))||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o}(r);o.prototype.name=r.name,o.prototype.code=e,t[e]=o}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var o,a,i,s;if("string"===typeof t&&(a="not ",t.substr(!i||i<0?0:+i,a.length)===a)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(o," ").concat(r(t,"type"));else{var u=function(e,t,n){return"number"!==typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(o," ").concat(r(t,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},6593:(e,t,n)=>{const r=n(6522)("simple-peer"),o=n(7919),a=n(5838),i=n(3350),s=n(4275),u=n(4823),{Buffer:l}=n(6382),c=65536;function d(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class f extends i.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=a(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||a(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||f.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},f.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"===typeof e.wrtc?e.wrtc:o(),!this._wrtc)throw"undefined"===typeof window?u(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):u(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(u(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"===typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"===typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((e=>{this.destroy(u(e,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach((e=>{this.addStream(e)})),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"===typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((e=>{this._addIceCandidate(e)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((e=>{this.destroy(u(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(u(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch((e=>{var n;!t.address||t.address.endsWith(".local")?(n="Ignoring unsupported ICE candidate.",console.warn(n)):this.destroy(u(e,"ERR_ADD_ICE_CANDIDATE"))}))}send(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(n){this.destroy(u(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((t=>{this.addTrack(t,e)}))}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let r=n.get(t);if(r)throw r.removed?u(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):u(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),o=r?r.get(n):null;if(!o)throw u(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null!=o.replaceTrack?o.replaceTrack(t):this.destroy(u(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw u(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(o){"NS_ERROR_UNEXPECTED"===o.name?this._sendersAwaitingStable.push(r):this.destroy(u(o,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((t=>{this.removeTrack(t,e)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,s((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,(()=>{}))}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),s((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()})))}_setupData(e){if(!e.channel)return this.destroy(u(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"===typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=c),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error("Datachannel error: ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));this.destroy(u(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1}),5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(u(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(r){return this.destroy(u(r,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>c?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=d(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})};this._pc.setLocalDescription(e).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(u(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(u(e,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=d(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(e).then((()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(u(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(u(e,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(u(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(u(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(u(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((t=>{Object.assign(e,t)})),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((n=>{const r=[];n.forEach((e=>{r.push(t(e))})),e(null,r)}),(t=>e(t))):this._pc.getStats.length>0?this._pc.getStats((n=>{if(this.destroyed)return;const r=[];n.result().forEach((e=>{const n={};e.names().forEach((t=>{n[t]=e.stat(t)})),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))})),e(null,r)}),(t=>e(t))):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats(((t,n)=>{if(this.destroyed)return;t&&(n=[]);const r={},o={},a={};let i=!1;n.forEach((e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(r[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(a[e.id]=e)}));const s=e=>{i=!0;let t=o[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"===typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=Number(n.port)):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=Number(n.portNumber)):"string"===typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=Number(n[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach((e=>{"transport"===e.type&&e.selectedCandidatePairId&&s(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&s(e)})),i||Object.keys(a).length&&!Object.keys(o).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(u(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!==typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)}))};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>c||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=l.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach((t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some((e=>e.id===t.id))||(this._remoteStreams.push(t),s((()=>{this._debug("on stream"),this.emit("stream",t)})))}))}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}f.WEBRTC_SUPPORT=!!o(),f.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},f.channelConfig={},e.exports=f},6619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){s&&(s.removeAttribute?s.removeAttribute("aria-hidden"):null!=s.length?s.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(s).forEach((function(e){return e.removeAttribute("aria-hidden")})));s=null},t.log=function(){0},t.assertNodeList=u,t.setElement=function(e){var t=e;if("string"===typeof t&&i.canUseDOM){var n=document.querySelectorAll(t);u(n,t),t=n}return s=t||s},t.validateElement=l,t.hide=function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=l(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.setAttribute("aria-hidden","true")}}catch(i){n=!0,r=i}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}},t.show=function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=l(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.removeAttribute("aria-hidden")}}catch(i){n=!0,r=i}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}},t.documentNotReadyOrSSRTesting=function(){s=null};var r,o=n(6440),a=(r=o)&&r.__esModule?r:{default:r},i=n(8821);var s=null;function u(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function l(e){var t=e||s;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,a.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},6725:e=>{"use strict";function t(e,t){r(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var a=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,e)):process.nextTick(r,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?a._writableState?a._writableState.errorEmitted?process.nextTick(n,a):(a._writableState.errorEmitted=!0,process.nextTick(t,a,e)):process.nextTick(t,a,e):o?(process.nextTick(n,a),o(e)):process.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},6779:(e,t,n)=>{"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=n(6153),a=n(9001);n(6329)(l,o);for(var i=r(a.prototype),s=0;s<i.length;s++){var u=i[s];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||process.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},6900:(e,t)=>{t.read=function(e,t,n,r,o){var a,i,s=8*o-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?o-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(i=a&(1<<-c)-1,a>>=-c,c+=r;c>0;i=256*i+e[t+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,r),a-=l}return(h?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,n,r,o,a){var i,s,u,l=8*a-o-1,c=(1<<l)-1,d=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),(t+=i+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(i++,u/=2),i+d>=c?(s=0,i=c):i+d>=1?(s=(t*u-1)*Math.pow(2,o),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[n+h]=255&s,h+=p,s/=256,o-=8);for(i=i<<o|s,l+=o;l>0;e[n+h]=255&i,h+=p,i/=256,l-=8);e[n+h-p]|=128*m}},7029:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),o=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),o=e.minScreenshotWidth!==t.minScreenshotWidth,a=e.minScreenshotHeight!==t.minScreenshotHeight;(r||o||a)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,o=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var a=r/o;o=(r=n.minScreenshotWidth||this.video.clientWidth)/a,n.minScreenshotHeight&&o<n.minScreenshotHeight&&(r=(o=n.minScreenshotHeight)*a)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||o,this.ctx=this.canvas.getContext("2d")}var i=this.ctx,s=this.canvas;return i&&s&&(s.width=(null===e||void 0===e?void 0:e.width)||s.width,s.height=(null===e||void 0===e?void 0:e.height)||s.height,n.mirrored&&(i.translate(s.width,0),i.scale(-1,1)),i.imageSmoothingEnabled=n.imageSmoothing,i.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(i.scale(-1,1),i.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,o){var a={video:"undefined"===typeof o||o};n.audio&&(a.audio="undefined"===typeof r||r),e.requestUserMediaId++;var i=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(a).then((function(n){e.unmounted||i!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var o=function(e){return{optional:[{sourceId:e}]}},a=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,i=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(i=e.id)}));var s=a(n.audioConstraints);s&&(t=s);var u=a(n.videoConstraints);u&&(i=u),r(o(t),o(i))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,o=n.audio,s=(n.forceScreenshotSourceSize,n.disablePictureInPicture),u=(n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),l=n.style,c=void 0===l?{}:l,d=n.children,f=i(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),h=u?a(a({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",a({autoPlay:!0,disablePictureInPicture:s,src:t.src,muted:!o,playsInline:!0,ref:function(t){e.video=t},style:h},f)),d&&d(p))},t.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(5043))},7044:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var u=n(6382).Buffer,l=n(5340).inspect,c=l&&l.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t,n,r,o=u.allocUnsafe(e>>>0),a=this.head,i=0;a;)t=a.data,n=o,r=i,u.prototype.copy.call(t,n,r),i+=a.data.length,a=a.next;return o}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var o=t.data,a=e>o.length?o.length:e;if(a===o.length?r+=o:r+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(a));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,a),0===(e-=a)){a===o.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return l(this,o(o({},t),{},{depth:0,customInspect:!1}))}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},7099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Manager:()=>i,Popper:()=>Oe,Reference:()=>je,usePopper:()=>Re});var r=n(5043),o=r.createContext(),a=r.createContext();function i(e){var t=e.children,n=r.useState(null),i=n[0],s=n[1],u=r.useRef(!1);r.useEffect((function(){return function(){u.current=!0}}),[]);var l=r.useCallback((function(e){u.current||s(e)}),[]);return r.createElement(o.Provider,{value:i},r.createElement(a.Provider,{value:l},t))}var s=function(e){return Array.isArray(e)?e[0]:e},u=function(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},l=function(e,t){if("function"===typeof e)return u(e,t);null!=e&&(e.current=t)},c=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},d="undefined"!==typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,f=n(7950);function h(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function p(e){return e instanceof h(e).Element||e instanceof Element}function m(e){return e instanceof h(e).HTMLElement||e instanceof HTMLElement}function v(e){return"undefined"!==typeof ShadowRoot&&(e instanceof h(e).ShadowRoot||e instanceof ShadowRoot)}var g=Math.max,y=Math.min,b=Math.round;function x(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function w(){return!/^((?!chrome|android).)*safari/i.test(x())}function C(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),o=1,a=1;t&&m(e)&&(o=e.offsetWidth>0&&b(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&b(r.height)/e.offsetHeight||1);var i=(p(e)?h(e):window).visualViewport,s=!w()&&n,u=(r.left+(s&&i?i.offsetLeft:0))/o,l=(r.top+(s&&i?i.offsetTop:0))/a,c=r.width/o,d=r.height/a;return{width:c,height:d,top:l,right:u+c,bottom:l+d,left:u,x:u,y:l}}function k(e){var t=h(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function S(e){return e?(e.nodeName||"").toLowerCase():null}function E(e){return((p(e)?e.ownerDocument:e.document)||window.document).documentElement}function _(e){return C(E(e)).left+k(e).scrollLeft}function N(e){return h(e).getComputedStyle(e)}function T(e){var t=N(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function R(e,t,n){void 0===n&&(n=!1);var r=m(t),o=m(t)&&function(e){var t=e.getBoundingClientRect(),n=b(t.width)/e.offsetWidth||1,r=b(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=E(t),i=C(e,o,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==S(t)||T(a))&&(s=function(e){return e!==h(e)&&m(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:k(e);var t}(t)),m(t)?((u=C(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=_(a))),{x:i.left+s.scrollLeft-u.x,y:i.top+s.scrollTop-u.y,width:i.width,height:i.height}}function D(e){var t=C(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function I(e){return"html"===S(e)?e:e.assignedSlot||e.parentNode||(v(e)?e.host:null)||E(e)}function A(e){return["html","body","#document"].indexOf(S(e))>=0?e.ownerDocument.body:m(e)&&T(e)?e:A(I(e))}function O(e,t){var n;void 0===t&&(t=[]);var r=A(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),a=h(r),i=o?[a].concat(a.visualViewport||[],T(r)?r:[]):r,s=t.concat(i);return o?s:s.concat(O(I(i)))}function M(e){return["table","td","th"].indexOf(S(e))>=0}function P(e){return m(e)&&"fixed"!==N(e).position?e.offsetParent:null}function j(e){for(var t=h(e),n=P(e);n&&M(n)&&"static"===N(n).position;)n=P(n);return n&&("html"===S(n)||"body"===S(n)&&"static"===N(n).position)?t:n||function(e){var t=/firefox/i.test(x());if(/Trident/i.test(x())&&m(e)&&"fixed"===N(e).position)return null;var n=I(e);for(v(n)&&(n=n.host);m(n)&&["html","body"].indexOf(S(n))<0;){var r=N(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var F="top",L="bottom",B="right",W="left",U="auto",z=[F,L,B,W],H="start",V="end",q="viewport",G="popper",Y=z.reduce((function(e,t){return e.concat([t+"-"+H,t+"-"+V])}),[]),K=[].concat(z,[U]).reduce((function(e,t){return e.concat([t,t+"-"+H,t+"-"+V])}),[]),$=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function X(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}function Q(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var J={placement:"bottom",modifiers:[],strategy:"absolute"};function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function ee(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,a=void 0===o?J:o;return function(e,t,n){void 0===n&&(n=a);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},J,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},i=[],s=!1,u={state:o,setOptions:function(n){var s="function"===typeof n?n(o.options):n;l(),o.options=Object.assign({},a,o.options,s),o.scrollParents={reference:p(e)?O(e):e.contextElement?O(e.contextElement):[],popper:O(t)};var c=function(e){var t=X(e);return $.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,o.options.modifiers)));return o.orderedModifiers=c.filter((function(e){return e.enabled})),o.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var s=a({state:o,name:t,instance:u,options:r}),l=function(){};i.push(s||l)}})),u.update()},forceUpdate:function(){if(!s){var e=o.elements,t=e.reference,n=e.popper;if(Z(t,n)){o.rects={reference:R(t,j(n),"fixed"===o.options.strategy),popper:D(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<o.orderedModifiers.length;r++)if(!0!==o.reset){var a=o.orderedModifiers[r],i=a.fn,l=a.options,c=void 0===l?{}:l,d=a.name;"function"===typeof i&&(o=i({state:o,options:c,name:d,instance:u})||o)}else o.reset=!1,r=-1}}},update:Q((function(){return new Promise((function(e){u.forceUpdate(),e(o)}))})),destroy:function(){l(),s=!0}};if(!Z(e,t))return u;function l(){i.forEach((function(e){return e()})),i=[]}return u.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var te={passive:!0};function ne(e){return e.split("-")[0]}function re(e){return e.split("-")[1]}function oe(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ae(e){var t,n=e.reference,r=e.element,o=e.placement,a=o?ne(o):null,i=o?re(o):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(a){case F:t={x:s,y:n.y-r.height};break;case L:t={x:s,y:n.y+n.height};break;case B:t={x:n.x+n.width,y:u};break;case W:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var l=a?oe(a):null;if(null!=l){var c="y"===l?"height":"width";switch(i){case H:t[l]=t[l]-(n[c]/2-r[c]/2);break;case V:t[l]=t[l]+(n[c]/2-r[c]/2)}}return t}var ie={top:"auto",right:"auto",bottom:"auto",left:"auto"};function se(e){var t,n=e.popper,r=e.popperRect,o=e.placement,a=e.variation,i=e.offsets,s=e.position,u=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=i.x,p=void 0===f?0:f,m=i.y,v=void 0===m?0:m,g="function"===typeof c?c({x:p,y:v}):{x:p,y:v};p=g.x,v=g.y;var y=i.hasOwnProperty("x"),x=i.hasOwnProperty("y"),w=W,C=F,k=window;if(l){var S=j(n),_="clientHeight",T="clientWidth";if(S===h(n)&&"static"!==N(S=E(n)).position&&"absolute"===s&&(_="scrollHeight",T="scrollWidth"),o===F||(o===W||o===B)&&a===V)C=L,v-=(d&&S===k&&k.visualViewport?k.visualViewport.height:S[_])-r.height,v*=u?1:-1;if(o===W||(o===F||o===L)&&a===V)w=B,p-=(d&&S===k&&k.visualViewport?k.visualViewport.width:S[T])-r.width,p*=u?1:-1}var R,D=Object.assign({position:s},l&&ie),I=!0===c?function(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:b(n*o)/o||0,y:b(r*o)/o||0}}({x:p,y:v},h(n)):{x:p,y:v};return p=I.x,v=I.y,u?Object.assign({},D,((R={})[C]=x?"0":"",R[w]=y?"0":"",R.transform=(k.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",R)):Object.assign({},D,((t={})[C]=x?v+"px":"",t[w]=y?p+"px":"",t.transform="",t))}const ue={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,a=void 0===o?[0,0]:o,i=K.reduce((function(e,n){return e[n]=function(e,t,n){var r=ne(e),o=[W,F].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign({},t,{placement:e})):n,i=a[0],s=a[1];return i=i||0,s=(s||0)*o,[W,B].indexOf(r)>=0?{x:s,y:i}:{x:i,y:s}}(n,t.rects,a),e}),{}),s=i[t.placement],u=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=i}};var le={left:"right",right:"left",bottom:"top",top:"bottom"};function ce(e){return e.replace(/left|right|bottom|top/g,(function(e){return le[e]}))}var de={start:"end",end:"start"};function fe(e){return e.replace(/start|end/g,(function(e){return de[e]}))}function he(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&v(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function pe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function me(e,t,n){return t===q?pe(function(e,t){var n=h(e),r=E(e),o=n.visualViewport,a=r.clientWidth,i=r.clientHeight,s=0,u=0;if(o){a=o.width,i=o.height;var l=w();(l||!l&&"fixed"===t)&&(s=o.offsetLeft,u=o.offsetTop)}return{width:a,height:i,x:s+_(e),y:u}}(e,n)):p(t)?function(e,t){var n=C(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):pe(function(e){var t,n=E(e),r=k(e),o=null==(t=e.ownerDocument)?void 0:t.body,a=g(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=g(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+_(e),u=-r.scrollTop;return"rtl"===N(o||n).direction&&(s+=g(n.clientWidth,o?o.clientWidth:0)-a),{width:a,height:i,x:s,y:u}}(E(e)))}function ve(e,t,n,r){var o="clippingParents"===t?function(e){var t=O(I(e)),n=["absolute","fixed"].indexOf(N(e).position)>=0&&m(e)?j(e):e;return p(n)?t.filter((function(e){return p(e)&&he(e,n)&&"body"!==S(e)})):[]}(e):[].concat(t),a=[].concat(o,[n]),i=a[0],s=a.reduce((function(t,n){var o=me(e,n,r);return t.top=g(o.top,t.top),t.right=y(o.right,t.right),t.bottom=y(o.bottom,t.bottom),t.left=g(o.left,t.left),t}),me(e,i,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ge(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ye(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function be(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,a=n.strategy,i=void 0===a?e.strategy:a,s=n.boundary,u=void 0===s?"clippingParents":s,l=n.rootBoundary,c=void 0===l?q:l,d=n.elementContext,f=void 0===d?G:d,h=n.altBoundary,m=void 0!==h&&h,v=n.padding,g=void 0===v?0:v,y=ge("number"!==typeof g?g:ye(g,z)),b=f===G?"reference":G,x=e.rects.popper,w=e.elements[m?b:f],k=ve(p(w)?w:w.contextElement||E(e.elements.popper),u,c,i),S=C(e.elements.reference),_=ae({reference:S,element:x,strategy:"absolute",placement:o}),N=pe(Object.assign({},x,_)),T=f===G?N:S,R={top:k.top-T.top+y.top,bottom:T.bottom-k.bottom+y.bottom,left:k.left-T.left+y.left,right:T.right-k.right+y.right},D=e.modifiersData.offset;if(f===G&&D){var I=D[o];Object.keys(R).forEach((function(e){var t=[B,L].indexOf(e)>=0?1:-1,n=[F,L].indexOf(e)>=0?"y":"x";R[e]+=I[n]*t}))}return R}function xe(e,t,n){return g(e,y(t,n))}const we={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,a=void 0===o||o,i=n.altAxis,s=void 0!==i&&i,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=void 0===f||f,p=n.tetherOffset,m=void 0===p?0:p,v=be(t,{boundary:u,rootBoundary:l,padding:d,altBoundary:c}),b=ne(t.placement),x=re(t.placement),w=!x,C=oe(b),k="x"===C?"y":"x",S=t.modifiersData.popperOffsets,E=t.rects.reference,_=t.rects.popper,N="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"===typeof N?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(S){if(a){var A,O="y"===C?F:W,M="y"===C?L:B,P="y"===C?"height":"width",U=S[C],z=U+v[O],V=U-v[M],q=h?-_[P]/2:0,G=x===H?E[P]:_[P],Y=x===H?-_[P]:-E[P],K=t.elements.arrow,$=h&&K?D(K):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Q=X[O],J=X[M],Z=xe(0,E[P],$[P]),ee=w?E[P]/2-q-Z-Q-T.mainAxis:G-Z-Q-T.mainAxis,te=w?-E[P]/2+q+Z+J+T.mainAxis:Y+Z+J+T.mainAxis,ae=t.elements.arrow&&j(t.elements.arrow),ie=ae?"y"===C?ae.clientTop||0:ae.clientLeft||0:0,se=null!=(A=null==R?void 0:R[C])?A:0,ue=U+te-se,le=xe(h?y(z,U+ee-se-ie):z,U,h?g(V,ue):V);S[C]=le,I[C]=le-U}if(s){var ce,de="x"===C?F:W,fe="x"===C?L:B,he=S[k],pe="y"===k?"height":"width",me=he+v[de],ve=he-v[fe],ge=-1!==[F,W].indexOf(b),ye=null!=(ce=null==R?void 0:R[k])?ce:0,we=ge?me:he-E[pe]-_[pe]-ye+T.altAxis,Ce=ge?he+E[pe]+_[pe]-ye-T.altAxis:ve,ke=h&&ge?function(e,t,n){var r=xe(e,t,n);return r>n?n:r}(we,he,Ce):xe(h?we:me,he,h?Ce:ve);S[k]=ke,I[k]=ke-he}t.modifiersData[r]=I}},requiresIfExists:["offset"]};const Ce={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=e.options,a=n.elements.arrow,i=n.modifiersData.popperOffsets,s=ne(n.placement),u=oe(s),l=[W,B].indexOf(s)>=0?"height":"width";if(a&&i){var c=function(e,t){return ge("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ye(e,z))}(o.padding,n),d=D(a),f="y"===u?F:W,h="y"===u?L:B,p=n.rects.reference[l]+n.rects.reference[u]-i[u]-n.rects.popper[l],m=i[u]-n.rects.reference[u],v=j(a),g=v?"y"===u?v.clientHeight||0:v.clientWidth||0:0,y=p/2-m/2,b=c[f],x=g-d[l]-c[h],w=g/2-d[l]/2+y,C=xe(b,w,x),k=u;n.modifiersData[r]=((t={})[k]=C,t.centerOffset=C-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&he(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ke(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Se(e){return[F,B,L,W].some((function(t){return e[t]>=0}))}var Ee=ee({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,a=void 0===o||o,i=r.resize,s=void 0===i||i,u=h(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&l.forEach((function(e){e.addEventListener("scroll",n.update,te)})),s&&u.addEventListener("resize",n.update,te),function(){a&&l.forEach((function(e){e.removeEventListener("scroll",n.update,te)})),s&&u.removeEventListener("resize",n.update,te)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ae({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,a=n.adaptive,i=void 0===a||a,s=n.roundOffsets,u=void 0===s||s,l={placement:ne(t.placement),variation:re(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,se(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,se(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];m(o)&&S(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});m(r)&&S(r)&&(Object.assign(r.style,a),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},ue,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,a=void 0===o||o,i=n.altAxis,s=void 0===i||i,u=n.fallbackPlacements,l=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,v=t.options.placement,g=ne(v),y=u||(g===v||!p?[ce(v)]:function(e){if(ne(e)===U)return[];var t=ce(e);return[fe(e),t,fe(t)]}(v)),b=[v].concat(y).reduce((function(e,n){return e.concat(ne(n)===U?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,a=n.rootBoundary,i=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,l=void 0===u?K:u,c=re(r),d=c?s?Y:Y.filter((function(e){return re(e)===c})):z,f=d.filter((function(e){return l.indexOf(e)>=0}));0===f.length&&(f=d);var h=f.reduce((function(t,n){return t[n]=be(e,{placement:n,boundary:o,rootBoundary:a,padding:i})[ne(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:c,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,w=t.rects.popper,C=new Map,k=!0,S=b[0],E=0;E<b.length;E++){var _=b[E],N=ne(_),T=re(_)===H,R=[F,L].indexOf(N)>=0,D=R?"width":"height",I=be(t,{placement:_,boundary:c,rootBoundary:d,altBoundary:f,padding:l}),A=R?T?B:W:T?L:F;x[D]>w[D]&&(A=ce(A));var O=ce(A),M=[];if(a&&M.push(I[N]<=0),s&&M.push(I[A]<=0,I[O]<=0),M.every((function(e){return e}))){S=_,k=!1;break}C.set(_,M)}if(k)for(var P=function(e){var t=b.find((function(t){var n=C.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return S=t,"break"},j=p?3:1;j>0;j--){if("break"===P(j))break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},we,Ce,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,i=be(t,{elementContext:"reference"}),s=be(t,{altBoundary:!0}),u=ke(i,r),l=ke(s,o,a),c=Se(u),d=Se(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}}]}),_e=n(6366),Ne=n.n(_e),Te=[],Re=function(e,t,n){void 0===n&&(n={});var o=r.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Te},i=r.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],u=i[1],l=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);f.flushSync((function(){u({styles:c(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:c(n.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),h=r.useMemo((function(){var e={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[l,{name:"applyStyles",enabled:!1}])};return Ne()(o.current,e)?o.current||e:(o.current=e,e)}),[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,l]),p=r.useRef();return d((function(){p.current&&p.current.setOptions(h)}),[h]),d((function(){if(null!=e&&null!=t){var r=(n.createPopper||Ee)(e,t,h);return p.current=r,function(){r.destroy(),p.current=null}}}),[e,t,n.createPopper]),{state:p.current?p.current.state:null,styles:s.styles,attributes:s.attributes,update:p.current?p.current.update:null,forceUpdate:p.current?p.current.forceUpdate:null}},De=function(){},Ie=function(){return Promise.resolve(null)},Ae=[];function Oe(e){var t=e.placement,n=void 0===t?"bottom":t,a=e.strategy,i=void 0===a?"absolute":a,u=e.modifiers,c=void 0===u?Ae:u,d=e.referenceElement,f=e.onFirstUpdate,h=e.innerRef,p=e.children,m=r.useContext(o),v=r.useState(null),g=v[0],y=v[1],b=r.useState(null),x=b[0],w=b[1];r.useEffect((function(){l(h,g)}),[h,g]);var C=r.useMemo((function(){return{placement:n,strategy:i,onFirstUpdate:f,modifiers:[].concat(c,[{name:"arrow",enabled:null!=x,options:{element:x}}])}}),[n,i,f,c,x]),k=Re(d||m,g,C),S=k.state,E=k.styles,_=k.forceUpdate,N=k.update,T=r.useMemo((function(){return{ref:y,style:E.popper,placement:S?S.placement:n,hasPopperEscaped:S&&S.modifiersData.hide?S.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:S&&S.modifiersData.hide?S.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:E.arrow,ref:w},forceUpdate:_||De,update:N||Ie}}),[y,w,n,S,E,N,_]);return s(p)(T)}var Me=n(6440),Pe=n.n(Me);function je(e){var t=e.children,n=e.innerRef,o=r.useContext(a),i=r.useCallback((function(e){l(n,e),u(o,e)}),[n,o]);return r.useEffect((function(){return function(){return l(n,null)}}),[]),r.useEffect((function(){Pe()(Boolean(o),"`Reference` should not be used outside of a `Manager` component.")}),[o]),s(t)({ref:i})}},7124:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){return(0,o.A)(1,arguments),(0,r.default)(e).getMinutes()}},7184:()=>{},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<o&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<o&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,f=null,h=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(v=!1,x(e),!m)if(null!==r(l))m=!0,O(C);else{var t=r(c);null!==t&&M(w,t.startTime-e)}}function C(e,n){m=!1,v&&(v=!1,y(_),_=-1),p=!0;var a=h;try{for(x(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!R());){var i=f.callback;if("function"===typeof i){f.callback=null,h=f.priorityLevel;var s=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&o(l),x(n)}else o(l);f=r(l)}if(null!==f)var u=!0;else{var d=r(c);null!==d&&M(w,d.startTime-n),u=!1}return u}finally{f=null,h=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,_=-1,N=5,T=-1;function R(){return!(t.unstable_now()-T<N)}function D(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof b)k=function(){b(D)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,A=I.port2;I.port1.onmessage=D,k=function(){A.postMessage(null)}}else k=function(){g(D,0)};function O(e){E=e,S||(S=!0,k())}function M(e,n){_=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>i?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(v?(y(_),_=-1):v=!0,M(w,a-i))):(e.sortIndex=s,n(l,e),m||p||(m=!0,O(C))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},7284:e=>{"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!==e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,a),r(n)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}m(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&m(e,"error",t,n)}(e,o,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,a,i,l;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),i=a[t]),void 0===i)i=a[t]=n,++e._eventsCount;else if("function"===typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(o=u(e))>0&&i.length>o&&!i.warned){i.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=i.length,l=c,console&&console.warn&&console.warn(l)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=c.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"===typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):p(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){r.once&&e.removeEventListener(t,o),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var u=a[e];if(void 0===u)return!1;if("function"===typeof u)r(u,this,t);else{var l=u.length,c=p(u,l);for(n=0;n<l;++n)r(c[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,o,a,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){i=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(o=a[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7312:(e,t,n)=>{"use strict";var r;function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(227),i=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function h(e,t){return{value:e,done:t}}function p(e){var t=e[i];if(null!==t){var n=e[f].read();null!==n&&(e[c]=null,e[i]=null,e[s]=null,t(h(n,!1)))}}function m(e){process.nextTick(p,e)}var v=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((o(r={get stream(){return this[f]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[u]?n(e[u]):t(h(void 0,!0))}))}));var n,r=this[c];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(h(void 0,!0)):t[d](n,r)}),r)}}(r,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(h(o,!1));n=new Promise(this[d])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var e=this;return new Promise((function(t,n){e[f].destroy(null,(function(e){e?n(e):t(h(void 0,!0))}))}))})),r),v);e.exports=function(e){var t,n=Object.create(g,(o(t={},f,{value:e,writable:!0}),o(t,i,{value:null,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,d,{value:function(e,t){var r=n[f].read();r?(n[c]=null,n[i]=null,n[s]=null,e(h(r,!1))):(n[i]=e,n[s]=t)},writable:!0}),t));return n[c]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[s];return null!==t&&(n[c]=null,n[i]=null,n[s]=null,t(e)),void(n[u]=e)}var r=n[i];null!==r&&(n[c]=null,n[i]=null,n[s]=null,r(h(void 0,!0))),n[l]=!0})),e.on("readable",m.bind(null,n)),n}},7318:()=>{},7340:e=>{var t=1e3,n=60*t,r=60*n,o=24*r,a=7*o,i=365.25*o;function s(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,u){u=u||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var u=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"weeks":case"week":case"w":return u*a;case"days":case"day":case"d":return u*o;case"hours":case"hour":case"hrs":case"hr":case"h":return u*r;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===l&&isFinite(e))return u.long?function(e){var a=Math.abs(e);if(a>=o)return s(e,a,o,"day");if(a>=r)return s(e,a,r,"hour");if(a>=n)return s(e,a,n,"minute");if(a>=t)return s(e,a,t,"second");return e+" ms"}(e):function(e){var a=Math.abs(e);if(a>=o)return Math.round(e/o)+"d";if(a>=r)return Math.round(e/r)+"h";if(a>=n)return Math.round(e/n)+"m";if(a>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7358:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case i:case f:case h:return e;default:switch(e=e&&e.$$typeof){case c:case l:case d:case m:case p:case u:return e;default:return t}}case o:return t}}}n=Symbol.for("react.module.reference")},7396:(e,t,n)=>{var r;!function(){"use strict";var o=!("undefined"===typeof window||!window.document||!window.document.createElement),a={canUseDOM:o,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},7451:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(888),o=n(8726),a=n(6191),i=n(8171);function s(e,t){var n,s,u,l,c,d,f,h;(0,o.A)(1,arguments);var p=(0,i.q)(),m=(0,a.A)(null!==(n=null!==(s=null!==(u=null!==(l=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==l?l:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==u?u:p.weekStartsOn)&&void 0!==s?s:null===(f=p.locale)||void 0===f||null===(h=f.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,r.default)(e),g=v.getUTCDay(),y=(g<m?7:0)+g-m;return v.setUTCDate(v.getUTCDate()-y),v.setUTCHours(0,0,0,0),v}},7462:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},7487:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6191),o=n(2550),a=n(8726),i=36e5;function s(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,o.A)(e,n*i)}},7531:()=>{},7532:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(888),o=n(4960),a=n(7780),i=n(8726);var s=6048e5;function u(e){(0,i.A)(1,arguments);var t=(0,r.default)(e),n=(0,o.A)(t).getTime()-function(e){(0,i.A)(1,arguments);var t=(0,a.A)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,o.A)(n)}(t).getTime();return Math.round(n/s)+1}},7566:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(888),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e),i=(0,r.A)(t);return n.setHours(i),n}},7660:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},7780:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(888),o=n(8726),a=n(4960);function i(e){(0,o.A)(1,arguments);var t=(0,r.default)(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var s=(0,a.A)(i),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var l=(0,a.A)(u);return t.getTime()>=s.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}},7815:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getFullYear()-a.getFullYear()}},7919:e=>{e.exports=function(){if("undefined"===typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},8170:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){return(0,o.A)(1,arguments),(0,r.default)(e).getTime()}},8171:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var r={};function o(){return r}},8224:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(888),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e),i=(0,r.A)(t),s=n.getFullYear(),u=n.getDate(),l=new Date(0);l.setFullYear(s,i,15),l.setHours(0,0,0,0);var c=function(e){(0,a.A)(1,arguments);var t=(0,o.default)(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}(l);return n.setMonth(i,Math.min(u,c)),n}},8435:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},o=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const a={p:o,P:function(e,t){var n,a=e.match(/(P+)(p+)?/)||[],i=a[1],s=a[2];if(!s)return r(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",r(i,t)).replace("{{time}}",o(s,t))}}},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8539:(e,t,n)=>{"use strict";function r(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}n.d(t,{A:()=>r})},8550:(e,t,n)=>{"use strict";var r=n(6545).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,o){var a=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,o,n);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new r(o?n:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}},8613:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,o){"use strict";var a=[],i=Object.getPrototypeOf,s=a.slice,u=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},l=a.push,c=a.indexOf,d={},f=d.toString,h=d.hasOwnProperty,p=h.toString,m=p.call(Object),v={},g=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,o,a=(n=n||b).createElement("script");if(a.text=e,t)for(r in x)(o=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,o);n.head.appendChild(a).parentNode.removeChild(a)}function C(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?d[f.call(e)]||"object":typeof e}var k="3.7.1",S=/HTML$/i,E=function(e,t){return new E.fn.init(e,t)};function _(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}E.fn=E.prototype={jquery:k,constructor:E,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},E.extend=E.fn.extend=function(){var e,t,n,r,o,a,i=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"===typeof i&&(l=i,i=arguments[s]||{},s++),"object"===typeof i||g(i)||(i={}),s===u&&(i=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&i!==r&&(l&&r&&(E.isPlainObject(r)||(o=Array.isArray(r)))?(n=i[t],a=o&&!Array.isArray(n)?[]:o||E.isPlainObject(n)?n:{},o=!1,i[t]=E.extend(l,a,r)):void 0!==r&&(i[t]=r));return i},E.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=i(e))||"function"===typeof(n=h.call(t,"constructor")&&t.constructor)&&p.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(_(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,o=e.nodeType;if(!o)for(;t=e[r++];)n+=E.text(t);return 1===o||11===o?e.textContent:9===o?e.documentElement.textContent:3===o||4===o?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?E.merge(n,"string"===typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!S.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,a=e.length,i=!n;o<a;o++)!t(e[o],o)!==i&&r.push(e[o]);return r},map:function(e,t,n){var r,o,a=0,i=[];if(_(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&i.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&i.push(o);return u(i)},guid:1,support:v}),"function"===typeof Symbol&&(E.fn[Symbol.iterator]=a[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var T=a.pop,R=a.sort,D=a.splice,I="[\\x20\\t\\r\\n\\f]",A=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g");E.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function M(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}E.escapeSelector=function(e){return(e+"").replace(O,M)};var P=b,j=l;!function(){var e,t,n,o,i,u,l,d,f,p,m=j,g=E.expando,y=0,b=0,x=ee(),w=ee(),C=ee(),k=ee(),S=function(e,t){return e===t&&(i=!0),0},_="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",O="(?:\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",M="\\["+I+"*("+O+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+I+"*\\]",F=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",L=new RegExp(I+"+","g"),B=new RegExp("^"+I+"*,"+I+"*"),W=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),U=new RegExp(I+"|>"),z=new RegExp(F),H=new RegExp("^"+O+"$"),V={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+_+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,$=new RegExp("\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){ue()},J=fe((function(e){return!0===e.disabled&&N(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(a=s.call(P.childNodes),P.childNodes),a[P.childNodes.length].nodeType}catch(be){m={apply:function(e,t){j.apply(e,s.call(t))},call:function(e){j.apply(e,s.call(arguments,1))}}}function Z(e,t,n,r){var o,a,i,s,l,c,h,p=t&&t.ownerDocument,y=t?t.nodeType:9;if(n=n||[],"string"!==typeof e||!e||1!==y&&9!==y&&11!==y)return n;if(!r&&(ue(t),t=t||u,d)){if(11!==y&&(l=Y.exec(e)))if(o=l[1]){if(9===y){if(!(i=t.getElementById(o)))return n;if(i.id===o)return m.call(n,i),n}else if(p&&(i=p.getElementById(o))&&Z.contains(t,i)&&i.id===o)return m.call(n,i),n}else{if(l[2])return m.apply(n,t.getElementsByTagName(e)),n;if((o=l[3])&&t.getElementsByClassName)return m.apply(n,t.getElementsByClassName(o)),n}if(!k[e+" "]&&(!f||!f.test(e))){if(h=e,p=t,1===y&&(U.test(e)||W.test(e))){for((p=K.test(e)&&se(t.parentNode)||t)==t&&v.scope||((s=t.getAttribute("id"))?s=E.escapeSelector(s):t.setAttribute("id",s=g)),a=(c=ce(e)).length;a--;)c[a]=(s?"#"+s:":scope")+" "+de(c[a]);h=c.join(",")}try{return m.apply(n,p.querySelectorAll(h)),n}catch(b){k(e,!0)}finally{s===g&&t.removeAttribute("id")}}}return ye(e.replace(A,"$1"),t,n,r)}function ee(){var e=[];return function n(r,o){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=o}}function te(e){return e[g]=!0,e}function ne(e){var t=u.createElement("fieldset");try{return!!e(t)}catch(be){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return N(t,"input")&&t.type===e}}function oe(e){return function(t){return(N(t,"input")||N(t,"button"))&&t.type===e}}function ae(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ie(e){return te((function(t){return t=+t,te((function(n,r){for(var o,a=e([],n.length,t),i=a.length;i--;)n[o=a[i]]&&(n[o]=!(r[o]=n[o]))}))}))}function se(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function ue(e){var n,r=e?e.ownerDocument||e:P;return r!=u&&9===r.nodeType&&r.documentElement?(l=(u=r).documentElement,d=!E.isXMLDoc(u),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&P!=u&&(n=u.defaultView)&&n.top!==n&&n.addEventListener("unload",Q),v.getById=ne((function(e){return l.appendChild(e).id=E.expando,!u.getElementsByName||!u.getElementsByName(E.expando).length})),v.disconnectedMatch=ne((function(e){return p.call(e,"*")})),v.scope=ne((function(){return u.querySelectorAll(":scope")})),v.cssHas=ne((function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(be){return!0}})),v.getById?(t.filter.ID=function(e){var t=e.replace($,X);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&d){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace($,X);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&d){var n,r,o,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(o=t.getElementsByName(e),r=0;a=o[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),t.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&d)return t.getElementsByClassName(e)},f=[],ne((function(e){var t;l.appendChild(e).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||f.push("\\["+I+"*(?:value|"+_+")"),e.querySelectorAll("[id~="+g+"-]").length||f.push("~="),e.querySelectorAll("a#"+g+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll(":checked").length||f.push(":checked"),(t=u.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),(t=u.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+I+"*name"+I+"*="+I+"*(?:''|\"\")")})),v.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),S=function(e,t){if(e===t)return i=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!v.sortDetached&&t.compareDocumentPosition(e)===n?e===u||e.ownerDocument==P&&Z.contains(P,e)?-1:t===u||t.ownerDocument==P&&Z.contains(P,t)?1:o?c.call(o,e)-c.call(o,t):0:4&n?-1:1)},u):u}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(ue(e),d&&!k[t+" "]&&(!f||!f.test(t)))try{var n=p.call(e,t);if(n||v.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(be){k(t,!0)}return Z(t,u,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=u&&ue(e),E.contains(e,t)},Z.attr=function(e,n){(e.ownerDocument||e)!=u&&ue(e);var r=t.attrHandle[n.toLowerCase()],o=r&&h.call(t.attrHandle,n.toLowerCase())?r(e,n,!d):void 0;return void 0!==o?o:e.getAttribute(n)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},E.uniqueSort=function(e){var t,n=[],r=0,a=0;if(i=!v.sortStable,o=!v.sortStable&&s.call(e,0),R.call(e,S),i){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)D.call(e,n[r],1)}return o=null,e},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(s.apply(this)))},t=E.expr={cacheLength:50,createPseudo:te,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,X),e[3]=(e[3]||e[4]||e[5]||"").replace($,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=ce(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace($,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return N(e,t)}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&x(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=Z.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(L," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,f,h,p=a!==i?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!u&&!s,x=!1;if(m){if(a){for(;p;){for(d=t;d=d[p];)if(s?N(d,v):1===d.nodeType)return!1;h=p="only"===e&&!h&&"nextSibling"}return!0}if(h=[i?m.firstChild:m.lastChild],i&&b){for(x=(f=(l=(c=m[g]||(m[g]={}))[e]||[])[0]===y&&l[1])&&l[2],d=f&&m.childNodes[f];d=++f&&d&&d[p]||(x=f=0)||h.pop();)if(1===d.nodeType&&++x&&d===t){c[e]=[y,f,x];break}}else if(b&&(x=f=(l=(c=t[g]||(t[g]={}))[e]||[])[0]===y&&l[1]),!1===x)for(;(d=++f&&d&&d[p]||(x=f=0)||h.pop())&&(!(s?N(d,v):1===d.nodeType)||!++x||(b&&((c=d[g]||(d[g]={}))[e]=[y,x]),d!==t)););return(x-=o)===r||x%r===0&&x/r>=0}}},PSEUDO:function(e,n){var r,o=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return o[g]?o(n):o.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,a=o(e,n),i=a.length;i--;)e[r=c.call(e,a[i])]=!(t[r]=a[i])})):function(e){return o(e,0,r)}):o}},pseudos:{not:te((function(e){var t=[],n=[],r=ge(e.replace(A,"$1"));return r[g]?te((function(e,t,n,o){for(var a,i=r(e,null,o,[]),s=e.length;s--;)(a=i[s])&&(e[s]=!(t[s]=a))})):function(e,o,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace($,X),function(t){return(t.textContent||E.text(t)).indexOf(e)>-1}})),lang:te((function(e){return H.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace($,X).toLowerCase(),function(t){var n;do{if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===l},focus:function(e){return e===function(){try{return u.activeElement}catch(e){}}()&&u.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ae(!1),disabled:ae(!0),checked:function(e){return N(e,"input")&&!!e.checked||N(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return q.test(e.nodeName)},button:function(e){return N(e,"input")&&"button"===e.type||N(e,"button")},text:function(e){var t;return N(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ie((function(){return[0]})),last:ie((function(e,t){return[t-1]})),eq:ie((function(e,t,n){return[n<0?n+t:n]})),even:ie((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ie((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ie((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ie((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=oe(e);function le(){}function ce(e,n){var r,o,a,i,s,u,l,c=w[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=t.preFilter;s;){for(i in r&&!(o=B.exec(s))||(o&&(s=s.slice(o[0].length)||s),u.push(a=[])),r=!1,(o=W.exec(s))&&(r=o.shift(),a.push({value:r,type:o[0].replace(A," ")}),s=s.slice(r.length)),t.filter)!(o=V[i].exec(s))||l[i]&&!(o=l[i](o))||(r=o.shift(),a.push({value:r,type:i,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?Z.error(e):w(e,u).slice(0)}function de(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function fe(e,t,n){var r=t.dir,o=t.next,a=o||r,i=n&&"parentNode"===a,s=b++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o);return!1}:function(t,n,u){var l,c,d=[y,s];if(u){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=t[g]||(t[g]={}),o&&N(t,o))t=t[r]||t;else{if((l=c[a])&&l[0]===y&&l[1]===s)return d[2]=l[2];if(c[a]=d,d[2]=e(t,n,u))return!0}return!1}}function he(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,o){for(var a,i=[],s=0,u=e.length,l=null!=t;s<u;s++)(a=e[s])&&(n&&!n(a,r,o)||(i.push(a),l&&t.push(s)));return i}function me(e,t,n,r,o,a){return r&&!r[g]&&(r=me(r)),o&&!o[g]&&(o=me(o,a)),te((function(a,i,s,u){var l,d,f,h,p=[],v=[],g=i.length,y=a||function(e,t,n){for(var r=0,o=t.length;r<o;r++)Z(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),b=!e||!a&&t?y:pe(y,p,e,s,u);if(n?n(b,h=o||(a?e:g||r)?[]:i,s,u):h=b,r)for(l=pe(h,v),r(l,[],s,u),d=l.length;d--;)(f=l[d])&&(h[v[d]]=!(b[v[d]]=f));if(a){if(o||e){if(o){for(l=[],d=h.length;d--;)(f=h[d])&&l.push(b[d]=f);o(null,h=[],l,u)}for(d=h.length;d--;)(f=h[d])&&(l=o?c.call(a,f):p[d])>-1&&(a[l]=!(i[l]=f))}}else h=pe(h===i?h.splice(g,h.length):h),o?o(null,i,h,u):m.apply(i,h)}))}function ve(e){for(var r,o,a,i=e.length,s=t.relative[e[0].type],u=s||t.relative[" "],l=s?1:0,d=fe((function(e){return e===r}),u,!0),f=fe((function(e){return c.call(r,e)>-1}),u,!0),h=[function(e,t,o){var a=!s&&(o||t!=n)||((r=t).nodeType?d(e,t,o):f(e,t,o));return r=null,a}];l<i;l++)if(o=t.relative[e[l].type])h=[fe(he(h),o)];else{if((o=t.filter[e[l].type].apply(null,e[l].matches))[g]){for(a=++l;a<i&&!t.relative[e[a].type];a++);return me(l>1&&he(h),l>1&&de(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(A,"$1"),o,l<a&&ve(e.slice(l,a)),a<i&&ve(e=e.slice(a)),a<i&&de(e))}h.push(o)}return he(h)}function ge(e,r){var o,a=[],i=[],s=C[e+" "];if(!s){for(r||(r=ce(e)),o=r.length;o--;)(s=ve(r[o]))[g]?a.push(s):i.push(s);s=C(e,function(e,r){var o=r.length>0,a=e.length>0,i=function(i,s,l,c,f){var h,p,v,g=0,b="0",x=i&&[],w=[],C=n,k=i||a&&t.find.TAG("*",f),S=y+=null==C?1:Math.random()||.1,_=k.length;for(f&&(n=s==u||s||f);b!==_&&null!=(h=k[b]);b++){if(a&&h){for(p=0,s||h.ownerDocument==u||(ue(h),l=!d);v=e[p++];)if(v(h,s||u,l)){m.call(c,h);break}f&&(y=S)}o&&((h=!v&&h)&&g--,i&&x.push(h))}if(g+=b,o&&b!==g){for(p=0;v=r[p++];)v(x,w,s,l);if(i){if(g>0)for(;b--;)x[b]||w[b]||(w[b]=T.call(c));w=pe(w)}m.apply(c,w),f&&!i&&w.length>0&&g+r.length>1&&E.uniqueSort(c)}return f&&(y=S,n=C),x};return o?te(i):i}(i,a)),s.selector=e}return s}function ye(e,n,r,o){var a,i,s,u,l,c="function"===typeof e&&e,f=!o&&ce(e=c.selector||e);if(r=r||[],1===f.length){if((i=f[0]=f[0].slice(0)).length>2&&"ID"===(s=i[0]).type&&9===n.nodeType&&d&&t.relative[i[1].type]){if(!(n=(t.find.ID(s.matches[0].replace($,X),n)||[])[0]))return r;c&&(n=n.parentNode),e=e.slice(i.shift().value.length)}for(a=V.needsContext.test(e)?0:i.length;a--&&(s=i[a],!t.relative[u=s.type]);)if((l=t.find[u])&&(o=l(s.matches[0].replace($,X),K.test(i[0].type)&&se(n.parentNode)||n))){if(i.splice(a,1),!(e=o.length&&de(i)))return m.apply(r,o),r;break}}return(c||ge(e,f))(o,n,!d,r,!n||K.test(e)&&se(n.parentNode)||n),r}le.prototype=t.filters=t.pseudos,t.setFilters=new le,v.sortStable=g.split("").sort(S).join("")===g,ue(),v.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(u.createElement("fieldset"))})),E.find=Z,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,Z.compile=ge,Z.select=ye,Z.setDocument=ue,Z.tokenize=ce,Z.escape=E.escapeSelector,Z.getText=E.text,Z.isXML=E.isXMLDoc,Z.selectors=E.expr,Z.support=E.support,Z.uniqueSort=E.uniqueSort}();var F=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&E(e).is(n))break;r.push(e)}return r},L=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},B=E.expr.match.needsContext,W=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(e,t,n){return g(t)?E.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?E.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?E.grep(e,(function(e){return c.call(t,e)>-1!==n})):E.filter(t,e,n)}E.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!==typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<r;t++)if(E.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)E.find(e,o[t],n);return r>1?E.uniqueSort(n):n},filter:function(e){return this.pushStack(U(this,e||[],!1))},not:function(e){return this.pushStack(U(this,e||[],!0))},is:function(e){return!!U(this,"string"===typeof e&&B.test(e)?E(e):e||[],!1).length}});var z,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||z,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),W.test(r[1])&&E.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=b.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,z=E(b);var V=/^(?:parents|prev(?:Until|All))/,q={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,o=this.length,a=[],i="string"!==typeof e&&E(e);if(!B.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?E.uniqueSort(a):a)},index:function(e){return e?"string"===typeof e?c.call(E(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return F(e,"parentNode")},parentsUntil:function(e,t,n){return F(e,"parentNode",n)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return F(e,"nextSibling")},prevAll:function(e){return F(e,"previousSibling")},nextUntil:function(e,t,n){return F(e,"nextSibling",n)},prevUntil:function(e,t,n){return F(e,"previousSibling",n)},siblings:function(e){return L((e.parentNode||{}).firstChild,e)},children:function(e){return L(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(N(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(n,r){var o=E.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(o=E.filter(r,o)),this.length>1&&(q[e]||E.uniqueSort(o),V.test(e)&&o.reverse()),this.pushStack(o)}}));var Y=/[^\x20\t\r\n\f]+/g;function K(e){return e}function $(e){throw e}function X(e,t,n,r){var o;try{e&&g(o=e.promise)?o.call(e).done(t).fail(n):e&&g(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return E.each(e.match(Y)||[],(function(e,n){t[n]=!0})),t}(e):E.extend({},e);var t,n,r,o,a=[],i=[],s=-1,u=function(){for(o=o||e.once,r=t=!0;i.length;s=-1)for(n=i.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},l={add:function(){return a&&(n&&!t&&(s=a.length-1,i.push(n)),function t(n){E.each(n,(function(n,r){g(r)?e.unique&&l.has(r)||a.push(r):r&&r.length&&"string"!==C(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return E.each(arguments,(function(e,t){for(var n;(n=E.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--})),this},has:function(e){return e?E.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=i=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=i=[],n||t||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],i.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(n){E.each(t,(function(t,r){var o=g(e[r[4]])&&e[r[4]];a[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,o){var a=0;function i(e,t,n,o){return function(){var s=this,u=arguments,l=function(){var r,l;if(!(e<a)){if((r=n.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"===typeof r||"function"===typeof r)&&r.then,g(l)?o?l.call(r,i(a,t,K,o),i(a,t,$,o)):(a++,l.call(r,i(a,t,K,o),i(a,t,$,o),i(a,t,K,t.notifyWith))):(n!==K&&(s=void 0,u=[r]),(o||t.resolveWith)(s,u))}},c=o?l:function(){try{l()}catch(r){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(r,c.error),e+1>=a&&(n!==$&&(s=void 0,u=[r]),t.rejectWith(s,u))}};e?c():(E.Deferred.getErrorHook?c.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(c.error=E.Deferred.getStackHook()),r.setTimeout(c))}}return E.Deferred((function(r){t[0][3].add(i(0,r,g(o)?o:K,r.notifyWith)),t[1][3].add(i(0,r,g(e)?e:K)),t[2][3].add(i(0,r,g(n)?n:$))})).promise()},promise:function(e){return null!=e?E.extend(e,o):o}},a={};return E.each(t,(function(e,r){var i=r[2],s=r[5];o[r[1]]=i.add,s&&i.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),i.add(r[3].fire),a[r[0]]=function(){return a[r[0]+"With"](this===a?void 0:this,arguments),this},a[r[0]+"With"]=i.fireWith})),o.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),o=s.call(arguments),a=E.Deferred(),i=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?s.call(arguments):n,--t||a.resolveWith(r,o)}};if(t<=1&&(X(e,a.done(i(n)).resolve,a.reject,!t),"pending"===a.state()||g(o[n]&&o[n].then)))return a.then();for(;n--;)X(o[n],i(n),a.reject);return a.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&Q.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){r.setTimeout((function(){throw e}))};var J=E.Deferred();function Z(){b.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),E.ready()}E.fn.ready=function(e){return J.then(e).catch((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||J.resolveWith(b,[E]))}}),E.ready.then=J.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var ee=function(e,t,n,r,o,a,i){var s=0,u=e.length,l=null==n;if("object"===C(n))for(s in o=!0,n)ee(e,t,s,n[s],!0,a,i);else if(void 0!==r&&(o=!0,g(r)||(i=!0),l&&(i?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(E(e),n)})),t))for(;s<u;s++)t(e[s],n,i?r:r.call(e[s],s,t(e[s],n)));return o?e:l?t.call(e):u?t(e[0],n):a},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function oe(e){return e.replace(te,"ms-").replace(ne,re)}var ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ie(){this.expando=E.expando+ie.uid++}ie.uid=1,ie.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"===typeof t)o[oe(t)]=n;else for(r in t)o[oe(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][oe(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(oe):(t=oe(t))in r?[t]:t.match(Y)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||E.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var se=new ie,ue=new ie,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ce=/[A-Z]/g;function de(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ce,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}(n)}catch(o){}ue.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return ue.hasData(e)||se.hasData(e)},data:function(e,t,n){return ue.access(e,t,n)},removeData:function(e,t){ue.remove(e,t)},_data:function(e,t,n){return se.access(e,t,n)},_removeData:function(e,t){se.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,r,o,a=this[0],i=a&&a.attributes;if(void 0===e){if(this.length&&(o=ue.get(a),1===a.nodeType&&!se.get(a,"hasDataAttrs"))){for(n=i.length;n--;)i[n]&&0===(r=i[n].name).indexOf("data-")&&(r=oe(r.slice(5)),de(a,r,o[r]));se.set(a,"hasDataAttrs",!0)}return o}return"object"===typeof e?this.each((function(){ue.set(this,e)})):ee(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=ue.get(a,e))||void 0!==(n=de(a,e))?n:void 0;this.each((function(){ue.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ue.remove(this,e)}))}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=se.get(e,t),n&&(!r||Array.isArray(n)?r=se.access(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),r=n.length,o=n.shift(),a=E._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,(function(){E.dequeue(e,t)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se.get(e,n)||se.access(e,n,{empty:E.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",n])}))})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each((function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=E.Deferred(),a=this,i=this.length,s=function(){--r||o.resolveWith(a,[a])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=se.get(a[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=new RegExp("^(?:([+-])=|)("+fe+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],me=b.documentElement,ve=function(e){return E.contains(e.ownerDocument,e)},ge={composed:!0};me.getRootNode&&(ve=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(ge)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ve(e)&&"none"===E.css(e,"display")};function be(e,t,n,r){var o,a,i=20,s=r?function(){return r.cur()}:function(){return E.css(e,t,"")},u=s(),l=n&&n[3]||(E.cssNumber[t]?"":"px"),c=e.nodeType&&(E.cssNumber[t]||"px"!==l&&+u)&&he.exec(E.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;i--;)E.style(e,t,c+l),(1-a)*(1-(a=s()/u||.5))<=0&&(i=0),c/=a;c*=2,E.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=o)),o}var xe={};function we(e){var t,n=e.ownerDocument,r=e.nodeName,o=xe[r];return o||(t=n.body.appendChild(n.createElement(r)),o=E.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),xe[r]=o,o)}function Ce(e,t){for(var n,r,o=[],a=0,i=e.length;a<i;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(o[a]=se.get(r,"display")||null,o[a]||(r.style.display="")),""===r.style.display&&ye(r)&&(o[a]=we(r))):"none"!==n&&(o[a]="none",se.set(r,"display",n)));for(a=0;a<i;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}E.fn.extend({show:function(){return Ce(this,!0)},hide:function(){return Ce(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ye(this)?E(this).show():E(this).hide()}))}});var ke=/^(?:checkbox|radio)$/i,Se=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ee=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",v.option=!!e.lastChild}();var _e={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ne(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?E.merge([e],n):n}function Te(e,t){for(var n=0,r=e.length;n<r;n++)se.set(e[n],"globalEval",!t||se.get(t[n],"globalEval"))}_e.tbody=_e.tfoot=_e.colgroup=_e.caption=_e.thead,_e.th=_e.td,v.option||(_e.optgroup=_e.option=[1,"<select multiple='multiple'>","</select>"]);var Re=/<|&#?\w+;/;function De(e,t,n,r,o){for(var a,i,s,u,l,c,d=t.createDocumentFragment(),f=[],h=0,p=e.length;h<p;h++)if((a=e[h])||0===a)if("object"===C(a))E.merge(f,a.nodeType?[a]:a);else if(Re.test(a)){for(i=i||d.appendChild(t.createElement("div")),s=(Se.exec(a)||["",""])[1].toLowerCase(),u=_e[s]||_e._default,i.innerHTML=u[1]+E.htmlPrefilter(a)+u[2],c=u[0];c--;)i=i.lastChild;E.merge(f,i.childNodes),(i=d.firstChild).textContent=""}else f.push(t.createTextNode(a));for(d.textContent="",h=0;a=f[h++];)if(r&&E.inArray(a,r)>-1)o&&o.push(a);else if(l=ve(a),i=Ne(d.appendChild(a),"script"),l&&Te(i),n)for(c=0;a=i[c++];)Ee.test(a.type||"")&&n.push(a);return d}var Ie=/^([^.]*)(?:\.(.+)|)/;function Ae(){return!0}function Oe(){return!1}function Me(e,t,n,r,o,a){var i,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Me(e,s,n,r,t[s],a);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"===typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Oe;else if(!o)return e;return 1===a&&(i=o,o=function(e){return E().off(e),i.apply(this,arguments)},o.guid=i.guid||(i.guid=E.guid++)),e.each((function(){E.event.add(this,t,o,r,n)}))}function Pe(e,t,n){n?(se.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var n,r=se.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),se.set(this,t,r),this[t](),n=se.get(this,t),se.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(se.set(this,t,E.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ae)}})):void 0===se.get(e,t)&&E.event.add(e,t,Ae)}E.event={global:{},add:function(e,t,n,r,o){var a,i,s,u,l,c,d,f,h,p,m,v=se.get(e);if(ae(e))for(n.handler&&(n=(a=n).handler,o=a.selector),o&&E.find.matchesSelector(me,o),n.guid||(n.guid=E.guid++),(u=v.events)||(u=v.events=Object.create(null)),(i=v.handle)||(i=v.handle=function(t){return"undefined"!==typeof E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(Y)||[""]).length;l--;)h=m=(s=Ie.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h&&(d=E.event.special[h]||{},h=(o?d.delegateType:d.bindType)||h,d=E.event.special[h]||{},c=E.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&E.expr.match.needsContext.test(o),namespace:p.join(".")},a),(f=u[h])||((f=u[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,p,i)||e.addEventListener&&e.addEventListener(h,i)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?f.splice(f.delegateCount++,0,c):f.push(c),E.event.global[h]=!0)},remove:function(e,t,n,r,o){var a,i,s,u,l,c,d,f,h,p,m,v=se.hasData(e)&&se.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(Y)||[""]).length;l--;)if(h=m=(s=Ie.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h){for(d=E.event.special[h]||{},f=u[h=(r?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=a=f.length;a--;)c=f[a],!o&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(a,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));i&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,p,v.handle)||E.removeEvent(e,h,v.handle),delete u[h])}else for(h in u)E.event.remove(e,h+t[l],n,r,!0);E.isEmptyObject(u)&&se.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,a,i,s=new Array(arguments.length),u=E.event.fix(e),l=(se.get(this,"events")||Object.create(null))[u.type]||[],c=E.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(i=E.event.handlers.call(this,u,l),t=0;(o=i[t++])&&!u.isPropagationStopped();)for(u.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==a.namespace&&!u.rnamespace.test(a.namespace)||(u.handleObj=a,u.data=a.data,void 0!==(r=((E.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,o,a,i,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(a=[],i={},n=0;n<u;n++)void 0===i[o=(r=t[n]).selector+" "]&&(i[o]=r.needsContext?E(o,this).index(l)>-1:E.find(o,this,null,[l]).length),i[o]&&a.push(r);a.length&&s.push({elem:l,handlers:a})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ke.test(t.type)&&t.click&&N(t,"input")&&Pe(t,"click",!0),!1},trigger:function(e){var t=this||e;return ke.test(t.type)&&t.click&&N(t,"input")&&Pe(t,"click"),!0},_default:function(e){var t=e.target;return ke.test(t.type)&&t.click&&N(t,"input")&&se.get(t,"click")||N(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ae:Oe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Oe,isPropagationStopped:Oe,isImmediatePropagationStopped:Oe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ae,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ae,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ae,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(b.documentMode){var n=se.get(this,"handle"),r=E.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else E.event.simulate(t,e.target,E.event.fix(e))}E.event.special[e]={setup:function(){var r;if(Pe(this,e,!0),!b.documentMode)return!1;(r=se.get(this,t))||this.addEventListener(t,n),se.set(this,t,(r||0)+1)},trigger:function(){return Pe(this,e),!0},teardown:function(){var e;if(!b.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,n),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},E.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=b.documentMode?this:r,a=se.get(o,t);a||(b.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),se.set(o,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=b.documentMode?this:r,a=se.get(o,t)-1;a?se.set(o,t,a):(b.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),se.remove(o,t))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||E.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),E.fn.extend({on:function(e,t,n,r){return Me(this,e,t,n,r)},one:function(e,t,n,r){return Me(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,E(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Oe),this.each((function(){E.event.remove(this,e,n,t)}))}});var je=/<script|<style|<link/i,Fe=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Be(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function We(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ze(e,t){var n,r,o,a,i,s;if(1===t.nodeType){if(se.hasData(e)&&(s=se.get(e).events))for(o in se.remove(t,"handle events"),s)for(n=0,r=s[o].length;n<r;n++)E.event.add(t,o,s[o][n]);ue.hasData(e)&&(a=ue.access(e),i=E.extend({},a),ue.set(t,i))}}function He(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ke.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ve(e,t,n,r){t=u(t);var o,a,i,s,l,c,d=0,f=e.length,h=f-1,p=t[0],m=g(p);if(m||f>1&&"string"===typeof p&&!v.checkClone&&Fe.test(p))return e.each((function(o){var a=e.eq(o);m&&(t[0]=p.call(this,o,a.html())),Ve(a,t,n,r)}));if(f&&(a=(o=De(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=a),a||r)){for(s=(i=E.map(Ne(o,"script"),We)).length;d<f;d++)l=o,d!==h&&(l=E.clone(l,!0,!0),s&&E.merge(i,Ne(l,"script"))),n.call(e[d],l,d);if(s)for(c=i[i.length-1].ownerDocument,E.map(i,Ue),d=0;d<s;d++)l=i[d],Ee.test(l.type||"")&&!se.access(l,"globalEval")&&E.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):w(l.textContent.replace(Le,""),l,c))}return e}function qe(e,t,n){for(var r,o=t?E.filter(t,e):e,a=0;null!=(r=o[a]);a++)n||1!==r.nodeType||E.cleanData(Ne(r)),r.parentNode&&(n&&ve(r)&&Te(Ne(r,"script")),r.parentNode.removeChild(r));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,o,a,i,s=e.cloneNode(!0),u=ve(e);if(!v.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!E.isXMLDoc(e))for(i=Ne(s),r=0,o=(a=Ne(e)).length;r<o;r++)He(a[r],i[r]);if(t)if(n)for(a=a||Ne(e),i=i||Ne(s),r=0,o=a.length;r<o;r++)ze(a[r],i[r]);else ze(e,s);return(i=Ne(s,"script")).length>0&&Te(i,!u&&Ne(e,"script")),s},cleanData:function(e){for(var t,n,r,o=E.event.special,a=0;void 0!==(n=e[a]);a++)if(ae(n)){if(t=n[se.expando]){if(t.events)for(r in t.events)o[r]?E.event.remove(n,r):E.removeEvent(n,r,t.handle);n[se.expando]=void 0}n[ue.expando]&&(n[ue.expando]=void 0)}}}),E.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ve(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Be(this,e).appendChild(e)}))},prepend:function(){return Ve(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ve(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ve(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(Ne(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!je.test(e)&&!_e[(Se.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(Ne(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ve(this,arguments,(function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(Ne(this)),n&&n.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var n,r=[],o=E(e),a=o.length-1,i=0;i<=a;i++)n=i===a?this:this.clone(!0),E(o[i])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var Ge=new RegExp("^("+fe+")(?!px)[a-z%]+$","i"),Ye=/^--/,Ke=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},$e=function(e,t,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=n.call(e),t)e.style[o]=a[o];return r},Xe=new RegExp(pe.join("|"),"i");function Qe(e,t,n){var r,o,a,i,s=Ye.test(t),u=e.style;return(n=n||Ke(e))&&(i=n.getPropertyValue(t)||n[t],s&&i&&(i=i.replace(A,"$1")||void 0),""!==i||ve(e)||(i=E.style(e,t)),!v.pixelBoxStyles()&&Ge.test(i)&&Xe.test(t)&&(r=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=i,i=n.width,u.width=r,u.minWidth=o,u.maxWidth=a)),void 0!==i?i+"":i}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(l).appendChild(c);var e=r.getComputedStyle(c);n="1%"!==e.top,u=12===t(e.marginLeft),c.style.right="60%",i=36===t(e.right),o=36===t(e.width),c.style.position="absolute",a=12===t(c.offsetWidth/3),me.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var n,o,a,i,s,u,l=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,E.extend(v,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),i},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,n,o;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",me.appendChild(e).appendChild(t).appendChild(n),o=r.getComputedStyle(t),s=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),s}}))}();var Ze=["Webkit","Moz","ms"],et=b.createElement("div").style,tt={};function nt(e){var t=E.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ze.length;n--;)if((e=Ze[n]+t)in et)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,ot={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function it(e,t,n){var r=he.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function st(e,t,n,r,o,a){var i="width"===t?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;i<4;i+=2)"margin"===n&&(l+=E.css(e,n+pe[i],!0,o)),r?("content"===n&&(u-=E.css(e,"padding"+pe[i],!0,o)),"margin"!==n&&(u-=E.css(e,"border"+pe[i]+"Width",!0,o))):(u+=E.css(e,"padding"+pe[i],!0,o),"padding"!==n?u+=E.css(e,"border"+pe[i]+"Width",!0,o):s+=E.css(e,"border"+pe[i]+"Width",!0,o));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-s-.5))||0),u+l}function ut(e,t,n){var r=Ke(e),o=(!v.boxSizingReliable()||n)&&"border-box"===E.css(e,"boxSizing",!1,r),a=o,i=Qe(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ge.test(i)){if(!n)return i;i="auto"}return(!v.boxSizingReliable()&&o||!v.reliableTrDimensions()&&N(e,"tr")||"auto"===i||!parseFloat(i)&&"inline"===E.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===E.css(e,"boxSizing",!1,r),(a=s in e)&&(i=e[s])),(i=parseFloat(i)||0)+st(e,t,n||(o?"border":"content"),a,r,i)+"px"}function lt(e,t,n,r,o){return new lt.prototype.init(e,t,n,r,o)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,i,s=oe(t),u=Ye.test(t),l=e.style;if(u||(t=nt(s)),i=E.cssHooks[t]||E.cssHooks[s],void 0===n)return i&&"get"in i&&void 0!==(o=i.get(e,!1,r))?o:l[t];"string"===(a=typeof n)&&(o=he.exec(n))&&o[1]&&(n=be(e,t,o),a="number"),null!=n&&n===n&&("number"!==a||u||(n+=o&&o[3]||(E.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),i&&"set"in i&&void 0===(n=i.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var o,a,i,s=oe(t);return Ye.test(t)||(t=nt(s)),(i=E.cssHooks[t]||E.cssHooks[s])&&"get"in i&&(o=i.get(e,!0,n)),void 0===o&&(o=Qe(e,t,r)),"normal"===o&&t in at&&(o=at[t]),""===n||n?(a=parseFloat(o),!0===n||isFinite(a)?a||0:o):o}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,n,r){if(n)return!rt.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):$e(e,ot,(function(){return ut(e,t,r)}))},set:function(e,n,r){var o,a=Ke(e),i=!v.scrollboxSize()&&"absolute"===a.position,s=(i||r)&&"border-box"===E.css(e,"boxSizing",!1,a),u=r?st(e,t,r,s,a):0;return s&&i&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-st(e,t,"border",!1,a)-.5)),u&&(o=he.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),it(0,n,u)}}})),E.cssHooks.marginLeft=Je(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-$e(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(n){for(var r=0,o={},a="string"===typeof n?n.split(" "):[n];r<4;r++)o[e+pe[r]+t]=a[r]||a[r-2]||a[0];return o}},"margin"!==e&&(E.cssHooks[e+t].set=it)})),E.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,o,a={},i=0;if(Array.isArray(t)){for(r=Ke(e),o=t.length;i<o;i++)a[t[i]]=E.css(e,t[i],!1,r);return a}return void 0!==n?E.style(e,t,n):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=lt,lt.prototype={constructor:lt,init:function(e,t,n,r,o,a){this.elem=e,this.prop=n,this.easing=o||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(E.cssNumber[n]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,n=lt.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):lt.propHooks._default.set(this),this}},lt.prototype.init.prototype=lt.prototype,lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},lt.propHooks.scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=lt.prototype.init,E.fx.step={};var ct,dt,ft=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;function pt(){dt&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(pt):r.setTimeout(pt,E.fx.interval),E.fx.tick())}function mt(){return r.setTimeout((function(){ct=void 0})),ct=Date.now()}function vt(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=pe[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function gt(e,t,n){for(var r,o=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),a=0,i=o.length;a<i;a++)if(r=o[a].call(n,t,e))return r}function yt(e,t,n){var r,o,a=0,i=yt.prefilters.length,s=E.Deferred().always((function(){delete u.elem})),u=function(){if(o)return!1;for(var t=ct||mt(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),a=0,i=l.tweens.length;a<i;a++)l.tweens[a].run(r);return s.notifyWith(e,[l,r,n]),r<1&&i?n:(i||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:ct||mt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=E.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(!function(e,t){var n,r,o,a,i;for(n in e)if(o=t[r=oe(n)],a=e[n],Array.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(i=E.cssHooks[r])&&"expand"in i)for(n in a=i.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=o);else t[r]=o}(c,l.opts.specialEasing);a<i;a++)if(r=yt.prefilters[a].call(l,e,c,l.opts))return g(r.stop)&&(E._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return E.map(c,gt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),E.fx.timer(E.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}E.Animation=E.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return be(n.elem,e,he.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(Y);for(var n,r=0,o=e.length;r<o;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,a,i,s,u,l,c,d="width"in t||"height"in t,f=this,h={},p=e.style,m=e.nodeType&&ye(e),v=se.get(e,"fxshow");for(r in n.queue||(null==(i=E._queueHooks(e,"fx")).unqueued&&(i.unqueued=0,s=i.empty.fire,i.empty.fire=function(){i.unqueued||s()}),i.unqueued++,f.always((function(){f.always((function(){i.unqueued--,E.queue(e,"fx").length||i.empty.fire()}))}))),t)if(o=t[r],ft.test(o)){if(delete t[r],a=a||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!v||void 0===v[r])continue;m=!0}h[r]=v&&v[r]||E.style(e,r)}if((u=!E.isEmptyObject(t))||!E.isEmptyObject(h))for(r in d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=v&&v.display)&&(l=se.get(e,"display")),"none"===(c=E.css(e,"display"))&&(l?c=l:(Ce([e],!0),l=e.style.display||l,c=E.css(e,"display"),Ce([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===E.css(e,"float")&&(u||(f.done((function(){p.display=l})),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,h)u||(v?"hidden"in v&&(m=v.hidden):v=se.access(e,"fxshow",{display:l}),a&&(v.hidden=!m),m&&Ce([e],!0),f.done((function(){for(r in m||Ce([e]),se.remove(e,"fxshow"),h)E.style(e,r,h[r])}))),u=gt(m?v[r]:0,r,f),r in v||(v[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),E.speed=function(e,t,n){var r=e&&"object"===typeof e?E.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return E.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=E.isEmptyObject(e),a=E.speed(t,n,r),i=function(){var t=yt(this,E.extend({},e),a);(o||se.get(this,"finish"))&&t.stop(!0)};return i.finish=i,o||!1===a.queue?this.each(i):this.queue(a.queue,i)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",a=E.timers,i=se.get(this);if(o)i[o]&&i[o].stop&&r(i[o]);else for(o in i)i[o]&&i[o].stop&&ht.test(o)&&r(i[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=se.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],a=E.timers,i=r?r.length:0;for(n.finish=!0,E.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<i;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var n=E.fn[t];E.fn[t]=function(e,r,o){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(vt(t,!0),e,r,o)}})),E.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(ct=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),ct=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){dt||(dt=!0,pt())},E.fx.stop=function(){dt=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var o=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(o)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var bt,xt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return ee(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"===typeof e.getAttribute?E.prop(e,t,n):(1===a&&E.isXMLDoc(e)||(o=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=E.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(Y);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),bt={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=xt[t]||E.find.attr;xt[t]=function(e,t,r){var o,a,i=t.toLowerCase();return r||(a=xt[i],xt[i]=o,o=null!=n(e,t,r)?i:null,xt[i]=a),o}}));var wt=/^(?:input|select|textarea|button)$/i,Ct=/^(?:a|area)$/i;function kt(e){return(e.match(Y)||[]).join(" ")}function St(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(Y)||[]}E.fn.extend({prop:function(e,t){return ee(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(e)||(t=E.propFix[t]||t,o=E.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,n,r,o,a,i;return g(e)?this.each((function(t){E(this).addClass(e.call(this,t,St(this)))})):(t=Et(e)).length?this.each((function(){if(r=St(this),n=1===this.nodeType&&" "+kt(r)+" "){for(a=0;a<t.length;a++)o=t[a],n.indexOf(" "+o+" ")<0&&(n+=o+" ");i=kt(n),r!==i&&this.setAttribute("class",i)}})):this},removeClass:function(e){var t,n,r,o,a,i;return g(e)?this.each((function(t){E(this).removeClass(e.call(this,t,St(this)))})):arguments.length?(t=Et(e)).length?this.each((function(){if(r=St(this),n=1===this.nodeType&&" "+kt(r)+" "){for(a=0;a<t.length;a++)for(o=t[a];n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");i=kt(n),r!==i&&this.setAttribute("class",i)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,o,a,i=typeof e,s="string"===i||Array.isArray(e);return g(e)?this.each((function(n){E(this).toggleClass(e.call(this,n,St(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=Et(e),this.each((function(){if(s)for(a=E(this),o=0;o<n.length;o++)r=n[o],a.hasClass(r)?a.removeClass(r):a.addClass(r);else void 0!==e&&"boolean"!==i||((r=St(this))&&se.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+kt(St(n))+" ").indexOf(t)>-1)return!0;return!1}});var _t=/\r/g;E.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=g(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,E(this).val()):e)?o="":"number"===typeof o?o+="":Array.isArray(o)&&(o=E.map(o,(function(e){return null==e?"":e+""}))),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=E.valHooks[o.type]||E.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"===typeof(n=o.value)?n.replace(_t,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:kt(E.text(e))}},select:{get:function(e){var t,n,r,o=e.options,a=e.selectedIndex,i="select-one"===e.type,s=i?null:[],u=i?a+1:o.length;for(r=a<0?u:i?a:0;r<u;r++)if(((n=o[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=E(n).val(),i)return t;s.push(t)}return s},set:function(e,t){for(var n,r,o=e.options,a=E.makeArray(t),i=o.length;i--;)((r=o[i]).selected=E.inArray(E.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},v.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Nt=r.location,Tt={guid:Date.now()},Rt=/\?/;E.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(o){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,It=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,n,o){var a,i,s,u,l,c,d,f,p=[n||b],m=h.call(e,"type")?e.type:e,v=h.call(e,"namespace")?e.namespace.split("."):[];if(i=f=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),l=m.indexOf(":")<0&&"on"+m,(e=e[E.expando]?e:new E.Event(m,"object"===typeof e&&e)).isTrigger=o?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),d=E.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(n,t))){if(!o&&!d.noBubble&&!y(n)){for(u=d.delegateType||m,Dt.test(u+m)||(i=i.parentNode);i;i=i.parentNode)p.push(i),s=i;s===(n.ownerDocument||b)&&p.push(s.defaultView||s.parentWindow||r)}for(a=0;(i=p[a++])&&!e.isPropagationStopped();)f=i,e.type=a>1?u:d.bindType||m,(c=(se.get(i,"events")||Object.create(null))[e.type]&&se.get(i,"handle"))&&c.apply(i,t),(c=l&&i[l])&&c.apply&&ae(i)&&(e.result=c.apply(i,t),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!ae(n)||l&&g(n[m])&&!y(n)&&((s=n[l])&&(n[l]=null),E.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,It),n[m](),e.isPropagationStopped()&&f.removeEventListener(m,It),E.event.triggered=void 0,s&&(n[l]=s)),e.result}},simulate:function(e,t,n){var r=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(r,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}});var At=/\[\]$/,Ot=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var o;if(Array.isArray(t))E.each(t,(function(t,o){n||At.test(e)?r(e,o):jt(e+"["+("object"===typeof o&&null!=o?t:"")+"]",o,n,r)}));else if(n||"object"!==C(t))r(e,t);else for(o in t)jt(e+"["+o+"]",t[o],n,r)}E.param=function(e,t){var n,r=[],o=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){o(this.name,this.value)}));else for(n in e)jt(n,e[n],t,o);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Pt.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!ke.test(e))})).map((function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var Ft=/%20/g,Lt=/#.*$/,Bt=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ut=/^(?:GET|HEAD)$/,zt=/^\/\//,Ht={},Vt={},qt="*/".concat("*"),Gt=b.createElement("a");function Yt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,o=0,a=t.toLowerCase().match(Y)||[];if(g(n))for(;r=a[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Kt(e,t,n,r){var o={},a=e===Vt;function i(s){var u;return o[s]=!0,E.each(e[s]||[],(function(e,s){var l=s(t,n,r);return"string"!==typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)})),u}return i(t.dataTypes[0])||!o["*"]&&i("*")}function $t(e,t){var n,r,o=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&E.extend(!0,e,r),e}Gt.href=Nt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Nt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,E.ajaxSettings),t):$t(E.ajaxSettings,e)},ajaxPrefilter:Yt(Ht),ajaxTransport:Yt(Vt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,o,a,i,s,u,l,c,d,f,h=E.ajaxSetup({},t),p=h.context||h,m=h.context&&(p.nodeType||p.jquery)?E(p):E.event,v=E.Deferred(),g=E.Callbacks("once memory"),y=h.statusCode||{},x={},w={},C="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(l){if(!i)for(i={};t=Wt.exec(a);)i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==l&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)k.always(e[k.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||C;return n&&n.abort(t),S(0,t),this}};if(v.promise(k),h.url=((e||h.url||Nt.href)+"").replace(zt,Nt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Y)||[""],null==h.crossDomain){u=b.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=Gt.protocol+"//"+Gt.host!==u.protocol+"//"+u.host}catch(_){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!==typeof h.data&&(h.data=E.param(h.data,h.traditional)),Kt(Ht,h,t,k),l)return k;for(d in(c=E.event&&h.global)&&0===E.active++&&E.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ut.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Ft,"+")):(f=h.url.slice(o.length),h.data&&(h.processData||"string"===typeof h.data)&&(o+=(Rt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Bt,"$1"),f=(Rt.test(o)?"&":"?")+"_="+Tt.guid+++f),h.url=o+f),h.ifModified&&(E.lastModified[o]&&k.setRequestHeader("If-Modified-Since",E.lastModified[o]),E.etag[o]&&k.setRequestHeader("If-None-Match",E.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+qt+"; q=0.01":""):h.accepts["*"]),h.headers)k.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(p,k,h)||l))return k.abort();if(C="abort",g.add(h.complete),k.done(h.success),k.fail(h.error),n=Kt(Vt,h,t,k)){if(k.readyState=1,c&&m.trigger("ajaxSend",[k,h]),l)return k;h.async&&h.timeout>0&&(s=r.setTimeout((function(){k.abort("timeout")}),h.timeout));try{l=!1,n.send(x,S)}catch(_){if(l)throw _;S(-1,_)}}else S(-1,"No Transport");function S(e,t,i,u){var d,f,b,x,w,C=t;l||(l=!0,s&&r.clearTimeout(s),n=void 0,a=u||"",k.readyState=e>0?4:0,d=e>=200&&e<300||304===e,i&&(x=function(e,t,n){for(var r,o,a,i,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){u.unshift(o);break}if(u[0]in n)a=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){a=o;break}i||(i=o)}a=a||i}if(a)return a!==u[0]&&u.unshift(a),n[a]}(h,k,i)),!d&&E.inArray("script",h.dataTypes)>-1&&E.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),x=function(e,t,n,r){var o,a,i,s,u,l={},c=e.dataTypes.slice();if(c[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(i=l[u+" "+a]||l["* "+a]))for(o in l)if((s=o.split(" "))[1]===a&&(i=l[u+" "+s[0]]||l["* "+s[0]])){!0===i?i=l[o]:!0!==l[o]&&(a=s[0],c.unshift(s[1]));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(_){return{state:"parsererror",error:i?_:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}(h,x,k,d),d?(h.ifModified&&((w=k.getResponseHeader("Last-Modified"))&&(E.lastModified[o]=w),(w=k.getResponseHeader("etag"))&&(E.etag[o]=w)),204===e||"HEAD"===h.type?C="nocontent":304===e?C="notmodified":(C=x.state,f=x.data,d=!(b=x.error))):(b=C,!e&&C||(C="error",e<0&&(e=0))),k.status=e,k.statusText=(t||C)+"",d?v.resolveWith(p,[f,C,k]):v.rejectWith(p,[k,C,b]),k.statusCode(y),y=void 0,c&&m.trigger(d?"ajaxSuccess":"ajaxError",[k,h,d?f:b]),g.fireWith(p,[k,C]),c&&(m.trigger("ajaxComplete",[k,h]),--E.active||E.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,n,r,o){return g(n)&&(o=o||r,r=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:o,data:n,success:r},E.isPlainObject(e)&&e))}})),E.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),E._evalUrl=function(e,t,n){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,n)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){E(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},Qt=E.ajaxSettings.xhr();v.cors=!!Qt&&"withCredentials"in Qt,v.ajax=Qt=!!Qt,E.ajaxTransport((function(e){var t,n;if(v.cors||Qt&&!e.crossDomain)return{send:function(o,a){var i,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];for(i in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(i,o[i]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Xt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,o){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Jt=[],Zt=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||E.expando+"_"+Tt.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(e,t,n){var o,a,i,s=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Zt,"$1"+o):!1!==e.jsonp&&(e.url+=(Rt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return i||E.error(o+" was not called"),i[0]},e.dataTypes[0]="json",a=r[o],r[o]=function(){i=arguments},n.always((function(){void 0===a?E(r).removeProp(o):r[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,Jt.push(o)),i&&g(a)&&a(i[0]),i=a=void 0})),"script"})),v.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),E.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),a=!n&&[],(o=W.exec(e))?[t.createElement(o[1])]:(o=De([e],t,a),a&&a.length&&E(a).remove(),E.merge([],o.childNodes)));var r,o,a},E.fn.load=function(e,t,n){var r,o,a,i=this,s=e.indexOf(" ");return s>-1&&(r=kt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"===typeof t&&(o="POST"),i.length>0&&E.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){a=arguments,i.html(r?E("<div>").append(E.parseHTML(e)).find(r):e)})).always(n&&function(e,t){i.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,n){var r,o,a,i,s,u,l=E.css(e,"position"),c=E(e),d={};"static"===l&&(e.style.position="relative"),s=c.offset(),a=E.css(e,"top"),u=E.css(e,"left"),("absolute"===l||"fixed"===l)&&(a+u).indexOf("auto")>-1?(i=(r=c.position()).top,o=r.left):(i=parseFloat(a)||0,o=parseFloat(u)||0),g(t)&&(t=t.call(e,n,E.extend({},s))),null!=t.top&&(d.top=t.top-s.top+i),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):c.css(d)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===E.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),o.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-E.css(r,"marginTop",!0),left:t.left-o.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||me}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;E.fn[e]=function(r){return ee(this,(function(e,r,o){var a;if(y(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[r]=o}),e,r,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=Je(v.pixelPosition,(function(e,n){if(n)return n=Qe(e,t),Ge.test(n)?E(e).position()[t]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){E.fn[r]=function(o,a){var i=arguments.length&&(n||"boolean"!==typeof o),s=n||(!0===o||!0===a?"margin":"border");return ee(this,(function(t,n,o){var a;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?E.css(t,n,s):E.style(t,n,o,s)}),t,i?o:void 0,i)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var n,r,o;if("string"===typeof t&&(n=e[t],t=e,e=n),g(e))return r=s.call(arguments,2),o=function(){return e.apply(t||this,r.concat(s.call(arguments)))},o.guid=e.guid=e.guid||E.guid++,o},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=N,E.isFunction=g,E.isWindow=y,E.camelCase=oe,E.type=C,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},void 0===(n=function(){return E}.apply(t,[]))||(e.exports=n);var tn=r.jQuery,nn=r.$;return E.noConflict=function(e){return r.$===E&&(r.$=nn),e&&r.jQuery===E&&(r.jQuery=tn),E},"undefined"===typeof o&&(r.jQuery=r.$=E),E}))},8643:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}},8673:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6191),o=n(888),a=n(8224),i=n(8726);function s(e,t){(0,i.A)(2,arguments);var n=(0,o.default)(e),s=(0,r.A)(t)-(Math.floor(n.getMonth()/3)+1);return(0,a.default)(n,n.getMonth()+3*s)}},8694:(e,t,n)=>{"use strict";var r=n(9966).Buffer,o=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(r.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function i(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.I=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=i(t[r]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if(o=i(t[r]),o>=0)return o>0&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if(o=i(t[r]),o>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},8726:(e,t,n)=>{"use strict";function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{A:()=>r})},8821:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var r,o=n(7396);var a=((r=o)&&r.__esModule?r:{default:r}).default,i=a.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=a.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=a.canUseDOM?window.NodeList:{},t.canUseDOM=a.canUseDOM;t.default=i},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8885:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(8926),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,o.default)(e,-n)}},8926:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(2215),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,o.default)(e,12*n)}},9001:(e,t,n)=>{"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=S,S.WritableState=k;var a={deprecate:n(2390)},i=n(2902),s=n(6382).Buffer,u=("undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};var l,c=n(6725),d=n(8550).getHighWaterMark,f=n(6545).F,h=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,g=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,x=f.ERR_UNKNOWN_ENCODING,w=c.errorOrDestroy;function C(){}function k(e,t,a){o=o||n(6779),e=e||{},"boolean"!==typeof a&&(a=t instanceof o),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!==typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(process.nextTick(o,r),process.nextTick(D,e,t),e._writableState.errorEmitted=!0,w(e,r)):(o(r),e._writableState.errorEmitted=!0,w(e,r),D(e,t))}(e,n,r,t,o);else{var a=T(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||N(e,n),r?process.nextTick(_,e,n,a,o):_(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(e){var t=this instanceof(o=o||n(6779));if(!t&&!l.call(S,this))return new S(e);this._writableState=new k(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),i.call(this)}function E(e,t,n,r,o,a,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):n?e._writev(o,t.onwrite):e._write(o,a,t.onwrite),t.sync=!1}function _(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),D(e,t)}function N(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var o=t.bufferedRequestCount,a=new Array(o),i=t.corkedRequestsFree;i.entry=n;for(var s=0,u=!0;n;)a[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;a.allBuffers=u,E(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,d=n.callback;if(E(e,t,!1,t.objectMode?1:l.length,l,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),D(e,t)}))}function D(e,t){var n=T(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(6329)(S,i),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===S&&(e&&e._writableState instanceof k)}})):l=function(e){return e instanceof this},S.prototype.pipe=function(){w(this,new v)},S.prototype.write=function(e,t,n){var r,o=this._writableState,a=!1,i=!o.objectMode&&(r=e,s.isBuffer(r)||r instanceof u);return i&&!s.isBuffer(e)&&(e=function(e){return s.from(e)}(e)),"function"===typeof t&&(n=t,t=null),i?t="buffer":t||(t=o.defaultEncoding),"function"!==typeof n&&(n=C),o.ending?function(e,t){var n=new b;w(e,n),process.nextTick(t,n)}(this,n):(i||function(e,t,n,r){var o;return null===n?o=new y:"string"===typeof n||t.objectMode||(o=new h("chunk",["string","Buffer"],n)),!o||(w(e,o),process.nextTick(r,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,o,a){if(!n){var i=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=s.from(t,n));return t}(t,r,o);r!==i&&(n=!0,o="buffer",r=i)}var u=t.objectMode?1:r.length;t.length+=u;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,u,r,o,a);return l}(this,o,i,e,t,n)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||N(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new x(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var r=this._writableState;return"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,D(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=c.destroy,S.prototype._undestroy=c.undestroy,S.prototype._destroy=function(e,t){t(e)}},9333:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6191),o=n(2550),a=n(8726),i=6e4;function s(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,o.A)(e,n*i)}},9352:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(8539),o=n(2312),a=n(8726),i=864e5;function s(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e),s=(0,o.default)(t),u=n.getTime()-(0,r.A)(n),l=s.getTime()-(0,r.A)(s);return Math.round((u-l)/i)}},9392:(e,t,n)=>{"use strict";var r=n(1218),o=n(6496);function a(e){var t=0,n=0,r=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,o=10*n,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||o)&&e.deltaMode&&(1==e.deltaMode?(r*=40,o*=40):(r*=800,o*=800)),r&&!t&&(t=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:o}}a.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},e.exports=a},9436:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(6337),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,r.A)(t);return(0,o.default)(e,-n)}},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9563:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2284),o=n(888),a=n(8726);function i(e){var t,n;if((0,a.A)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==(0,r.A)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,o.default)(e);(void 0===n||n>t||isNaN(t.getDate()))&&(n=t)})),n||new Date(NaN)}},9566:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){(0,o.A)(1,arguments);var t=(0,r.default)(e),n=t.getMonth(),a=n-n%3;return t.setMonth(a,1),t.setHours(0,0,0,0),t}},9713:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2284),o=n(8726);function a(e){return(0,o.A)(1,arguments),e instanceof Date||"object"===(0,r.A)(e)&&"[object Date]"===Object.prototype.toString.call(e)}},9717:(e,t,n)=>{"use strict";var r=n(5043),o=n(9461);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=o.useSyncExternalStore,s=r.useRef,u=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=l((function(){function e(e){if(!u){if(u=!0,i=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return s=t}return s=e}if(t=s,a(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(i=e,t):(i=e,s=n)}var i,s,u=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,o]);var h=i(e,d[0],d[1]);return u((function(){f.hasValue=!0,f.value=h}),[h]),c(h),h}},9730:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(888),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e),i=(0,r.A)(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(i),n)}},9838:()=>{},9855:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e){return(0,o.A)(1,arguments),(0,r.default)(e).getDate()}},9952:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),o=n(888),a=n(8726);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.default)(e),i=(0,r.A)(t);return n.setMinutes(i),n}},9966:(e,t,n)=>{var r=n(6382),o=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=i),i.prototype=Object.create(o.prototype),a(o,i),i.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},9977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(888),o=n(8726);function a(e,t){(0,o.A)(2,arguments);var n=(0,r.default)(e),a=(0,r.default)(t);return n.getTime()>a.getTime()}},9989:e=>{"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=n}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".2561a46d.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="Connect:";n.l=(r,o,a,i)=>{if(e[r])e[r].push(o);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[o];var f=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=a);var i=n.p+n.u(t),s=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,a,i=r[0],s=r[1],u=r[2],l=0;if(i.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(u)u(n)}for(t&&t(r);l<i.length;l++)a=i[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkConnect=self.webpackChunkConnect||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Pr,hasStandardBrowserEnv:()=>Fr,hasStandardBrowserWebWorkerEnv:()=>Lr,navigator:()=>jr,origin:()=>Br});var t={};n.r(t),n.d(t,{Decoder:()=>Di,Encoder:()=>Ti,PacketType:()=>Ni,protocol:()=>_i});var r={};n.r(r),n.d(r,{AnchorPosition:()=>aM,DrawBox:()=>fM,DrawBoxOptions:()=>dM,DrawTextField:()=>cM,DrawTextFieldOptions:()=>lM});var o={};n.r(o),n.d(o,{DrawFaceLandmarks:()=>bP,DrawFaceLandmarksOptions:()=>yP,drawContour:()=>KM,drawDetections:()=>JM,drawFaceExpressions:()=>hP,drawFaceLandmarks:()=>xP});var a=n(5043),i=n.t(a,2),s=n(4391);function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=n(4467);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=f(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const h=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=f(e))&&(r&&(r+=" "),r+=t);return r},p=["theme","type","isLoading"];!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var m=e=>"number"==typeof e&&!isNaN(e),v=e=>"string"==typeof e,g=e=>"function"==typeof e,y=e=>v(e)||g(e)?e:null,b=(e,t)=>!1===e||m(e)&&e>0?e:t,x=e=>(0,a.isValidElement)(e)||v(e)||g(e)||m(e);function w(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:o=!0,collapseDuration:i=300}=e;return function(e){let{children:s,position:u,preventExitTransition:l,done:c,nodeRef:d,isIn:f,playToast:h}=e,p=r?"".concat(t,"--").concat(u):t,m=r?"".concat(n,"--").concat(u):n,v=(0,a.useRef)(0);return(0,a.useLayoutEffect)((()=>{let e=d.current,t=p.split(" "),n=r=>{r.target===d.current&&(h(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===v.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,a.useEffect)((()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),o?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:o}=e;requestAnimationFrame((()=>{o.minHeight="initial",o.height=r+"px",o.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(t,n)}))}))}(e,c,i):c()};f||(l?t():(v.current=1,e.className+=" ".concat(m),e.addEventListener("animationend",t)))}),[f]),a.createElement(a.Fragment,null,s)}}function C(e,t){return{content:k(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.isValidElement)(e)&&!v(e.type)?(0,a.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):g(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function S(e){let{delay:t,isRunning:n,closeToast:r,type:o="default",hide:i,className:s,controlledProgress:u,progress:l,rtl:c,isIn:f,theme:p}=e,m=i||u&&0===l,v={animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused"};u&&(v.transform="scaleX(".concat(l,")"));let y=h("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(o),{"Toastify__progress-bar--rtl":c}),b=g(s)?s({rtl:c,type:o,defaultClassName:y}):h(y,s),x={[u&&l>=1?"onTransitionEnd":"onAnimationEnd"]:u&&l<1?null:()=>{f&&r()}};return a.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},a.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(p," Toastify__progress-bar--").concat(o)}),a.createElement("div",d({role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:b,style:v},x)))}var E=1,_=()=>"".concat(E++);function N(e,t,n){let r=1,o=0,a=[],i=[],s=t,u=new Map,l=new Set,c=()=>{i=Array.from(u.values()),l.forEach((e=>e()))},f=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)u.forEach(f);else{let t=u.get(e);t&&f(t)}c()},p=e=>{var t,r;let{toastId:o,updateId:a}=e.props,i=null==a;e.staleId&&u.delete(e.staleId),e.isActive=!0,u.set(o,e),c(),n(C(e,i?"added":"updated")),i&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:s,observe:e=>(l.add(e),()=>l.delete(e)),toggle:(e,t)=>{u.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:h,toasts:u,clearQueue:()=>{o-=a.length,a=[]},buildToast:(t,i)=>{if((t=>{let{containerId:n,toastId:r,updateId:o}=t,a=n?n!==e:1!==e,i=u.has(r)&&null==o;return a||i})(i))return;let{toastId:l,updateId:f,data:v,staleId:g,delay:w}=i,k=null==f;k&&o++;let S=d(d(d({},s),{},{style:s.toastStyle,key:r++},Object.fromEntries(Object.entries(i).filter((e=>{let[t,n]=e;return null!=n})))),{},{toastId:l,updateId:f,data:v,isIn:!1,className:y(i.className||s.toastClassName),progressClassName:y(i.progressClassName||s.progressClassName),autoClose:!i.isLoading&&b(i.autoClose,s.autoClose),closeToast(e){u.get(l).removalReason=e,h(l)},deleteToast(){let e=u.get(l);if(null!=e){if(n(C(e,"removed")),u.delete(l),o--,o<0&&(o=0),a.length>0)return void p(a.shift());c()}}});S.closeButton=s.closeButton,!1===i.closeButton||x(i.closeButton)?S.closeButton=i.closeButton:!0===i.closeButton&&(S.closeButton=!x(s.closeButton)||s.closeButton);let E={content:t,props:S,staleId:g};s.limit&&s.limit>0&&o>s.limit&&k?a.push(E):m(w)?setTimeout((()=>{p(E)}),w):p(E)},setProps(e){s=e},setToggle:(e,t)=>{let n=u.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=u.get(e))?void 0:t.isActive},getSnapshot:()=>i}}var T=new Map,R=[],D=new Set,I=e=>D.forEach((t=>t(e))),A=()=>T.size>0;function O(e,t){var n;if(t)return!(null==(n=T.get(t))||!n.isToastActive(e));let r=!1;return T.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function M(e){if(A()){if(null==e||(e=>v(e)||m(e))(e))T.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=T.get(e.containerId);t?t.removeToast(e.id):T.forEach((t=>{t.removeToast(e.id)}))}}else R=R.filter((t=>null!=e&&t.options.toastId!==e))}function P(e,t){x(e)&&(A()||R.push({content:e,options:t}),T.forEach((n=>{n.buildToast(e,t)})))}function j(e,t){T.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function F(e){let t=e.containerId||1;return{subscribe(n){let r=N(t,e,I);T.set(t,r);let o=r.observe(n);return R.forEach((e=>P(e.content,e.options))),R=[],()=>{o(),T.delete(t)}},setProps(e){var n;null==(n=T.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=T.get(t))?void 0:e.getSnapshot()}}}function L(e){return e&&(v(e.toastId)||m(e.toastId))?e.toastId:_()}function B(e,t){return P(e,t),t.toastId}function W(e,t){return d(d({},t),{},{type:t&&t.type||e,toastId:L(t)})}function U(e){return(t,n)=>B(t,W(e,n))}function z(e,t){return B(e,W("default",t))}function H(e){let[t,n]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),i=(0,a.useRef)(null),s=(0,a.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:l,closeToast:c,onClick:d,closeOnClick:f}=e;function h(){n(!0)}function p(){n(!1)}function m(n){let r=i.current;if(s.canDrag&&r){s.didMove=!0,t&&p(),"x"===e.draggableDirection?s.delta=n.clientX-s.start:s.delta=n.clientY-s.start,s.start!==n.clientX&&(s.canCloseOnClick=!1);let o="x"===e.draggableDirection?"".concat(s.delta,"px, var(--y)"):"0, calc(".concat(s.delta,"px + var(--y))");r.style.transform="translate3d(".concat(o,",0)"),r.style.opacity="".concat(1-Math.abs(s.delta/s.removalDistance))}}function v(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",v);let t=i.current;if(s.canDrag&&s.didMove&&t){if(s.canDrag=!1,Math.abs(s.delta)>s.removalDistance)return o(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=T.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,a.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||p(),window.addEventListener("focus",h),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",p)}}),[e.pauseOnFocusLoss]);let g={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){s.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",v);let n=i.current;s.canCloseOnClick=!0,s.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(s.start=t.clientX,s.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(s.start=t.clientY,s.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:o,right:a}=i.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=o&&t.clientX<=a&&t.clientY>=n&&t.clientY<=r?p():h()}};return u&&l&&(g.onMouseEnter=p,e.stacked||(g.onMouseLeave=h)),f&&(g.onClick=e=>{d&&d(e),s.canCloseOnClick&&c(!0)}),{playToast:h,pauseToast:p,isRunning:t,preventExitTransition:r,toastRef:i,eventHandlers:g}}z.loading=(e,t)=>B(e,W("default",d({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),z.promise=function(e,t,n){let r,{pending:o,error:a,success:i}=t;o&&(r=v(o)?z.loading(o,n):z.loading(o.render,d(d({},n),o)));let s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(e,t,o)=>{if(null==t)return void z.dismiss(r);let a=d(d(d({type:e},s),n),{},{data:o}),i=v(t)?{render:t}:t;return r?z.update(r,d(d({},a),i)):z(i.render,d(d({},a),i)),o},l=g(e)?e():e;return l.then((e=>u("success",i,e))).catch((e=>u("error",a,e))),l},z.success=U("success"),z.info=U("info"),z.error=U("error"),z.warning=U("warning"),z.warn=z.warning,z.dark=(e,t)=>B(e,W("default",d({theme:"dark"},t))),z.dismiss=function(e){M(e)},z.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},z.isActive=O,z.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=T.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:o}=n,a=d(d(d({delay:100},r),t),{},{toastId:t.toastId||e,updateId:_()});a.toastId!==e&&(a.staleId=e);let i=a.render||o;delete a.render,B(i,a)}},z.done=e=>{z.update(e,{progress:1})},z.onChange=function(e){return D.add(e),()=>{D.delete(e)}},z.play=e=>j(!0,e),z.pause=e=>j(!1,e);var V="undefined"!=typeof window?a.useLayoutEffect:a.useEffect,q=e=>{let{theme:t,type:n,isLoading:r}=e,o=u(e,p);return a.createElement("svg",d({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")")},o))};var G={info:function(e){return a.createElement(q,d({},e),a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return a.createElement(q,d({},e),a.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return a.createElement(q,d({},e),a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return a.createElement(q,d({},e),a.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return a.createElement("div",{className:"Toastify__spinner"})}};function Y(e){let{theme:t,type:n,isLoading:r,icon:o}=e,i=null,s={theme:t,type:n};return!1===o||(g(o)?i=o(d(d({},s),{},{isLoading:r})):(0,a.isValidElement)(o)?i=(0,a.cloneElement)(o,s):r?i=G.spinner():(e=>e in G)(n)&&(i=G[n](s))),i}var K,$=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:o,playToast:i}=H(e),{closeButton:s,children:u,autoClose:l,onClick:c,type:f,hideProgressBar:p,closeToast:m,transition:v,position:y,className:b,style:x,progressClassName:w,updateId:C,role:E,progress:_,rtl:N,toastId:T,deleteToast:R,isIn:D,isLoading:I,closeOnClick:A,theme:O,ariaLabel:M}=e,P=h("Toastify__toast","Toastify__toast-theme--".concat(O),"Toastify__toast--".concat(f),{"Toastify__toast--rtl":N},{"Toastify__toast--close-on-click":A}),j=g(b)?b({rtl:N,position:y,type:f,defaultClassName:P}):h(P,b),F=Y(e),L=!!_||!l,B={closeToast:m,type:f,theme:O},W=null;return!1===s||(W=g(s)?s(B):(0,a.isValidElement)(s)?(0,a.cloneElement)(s,B):function(e){let{closeToast:t,theme:n,ariaLabel:r="close"}=e;return a.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:e=>{e.stopPropagation(),t(!0)},"aria-label":r},a.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(B)),a.createElement(v,{isIn:D,done:R,position:y,preventExitTransition:n,nodeRef:r,playToast:i},a.createElement("div",d(d({id:T,tabIndex:0,onClick:c,"data-in":D,className:j},o),{},{style:x,ref:r},D&&{role:E,"aria-label":M}),null!=F&&a.createElement("div",{className:h("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},F),k(u,e,!t),W,!e.customProgressBar&&a.createElement(S,d(d({},C&&!L?{key:"p-".concat(C)}:{}),{},{rtl:N,theme:O,delay:l,isRunning:t,isIn:D,closeToast:m,hide:p,type:f,className:w,controlledProgress:L,progress:_||0}))))},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Q=w(X("bounce",!0)),J=(w(X("slide",!0)),w(X("zoom")),w(X("flip")),{position:"top-right",transition:Q,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function Z(e){let t=d(d({},J),e),n=e.stacked,[r,o]=(0,a.useState)(!0),i=(0,a.useRef)(null),{getToastToRender:s,isToastActive:u,count:l}=function(e){var t;let{subscribe:n,getSnapshot:r,setProps:o}=(0,a.useRef)(F(e)).current;o(e);let i=null==(t=(0,a.useSyncExternalStore)(n,r,r))?void 0:t.slice();return{getToastToRender:function(t){if(!i)return[];let n=new Map;return e.newestOnTop&&i.reverse(),i.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:O,count:null==i?void 0:i.length}}(t),{className:c,style:f,rtl:p,containerId:m,hotKeys:v}=t;function b(e){let t=h("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":p});return g(c)?c({position:e,rtl:p,defaultClassName:t}):h(t,y(c))}function x(){n&&(o(!0),z.play())}return V((()=>{var e;if(n){let n=i.current.querySelectorAll('[data-in="true"]'),o=12,a=null==(e=t.position)?void 0:e.includes("top"),s=0,u=0;Array.from(n).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(r)),n.dataset.pos||(n.dataset.pos=a?"top":"bot");let i=s*(r?.2:1)+(r?0:o*t);n.style.setProperty("--y","".concat(a?i:-1*i,"px")),n.style.setProperty("--g","".concat(o)),n.style.setProperty("--s","".concat(1-(r?u:0))),s+=n.offsetHeight,u+=.025}))}}),[r,l,n]),(0,a.useEffect)((()=>{function e(e){var t;let n=i.current;v(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),o(!1),z.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(o(!0),z.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[v]),a.createElement("section",{ref:i,className:"Toastify",id:m,onMouseEnter:()=>{n&&(o(!1),z.pause())},onMouseLeave:x,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},s(((e,t)=>{let r=t.length?d({},f):d(d({},f),{},{pointerEvents:"none"});return a.createElement("div",{tabIndex:-1,className:b(e),"data-stacked":n,style:r,key:"c-".concat(e)},t.map((e=>{let{content:t,props:r}=e;return a.createElement($,d(d({},r),{},{stacked:n,collapseAll:x,isIn:u(r.toastId,r.containerId),key:"t-".concat(r.key)}),t)})))})))}function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(K||(K={}));const te="popstate";function ne(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function re(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(wu){}}}function oe(e,t){return{usr:e.state,key:e.key,idx:t}}function ae(e,t,n,r){return void 0===n&&(n=null),ee({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?se(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ie(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function se(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ue(e,t,n,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s=K.Pop,u=null,l=c();function c(){return(i.state||{idx:null}).idx}function d(){s=K.Pop;let e=c(),t=null==e?null:e-l;l=e,u&&u({action:s,location:h.location,delta:t})}function f(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:ie(e);return n=n.replace(/ $/,"%20"),ne(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==l&&(l=0,i.replaceState(ee({},i.state,{idx:l}),""));let h={get action(){return s},get location(){return e(o,i)},listen(e){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(te,d),u=e,()=>{o.removeEventListener(te,d),u=null}},createHref:e=>t(o,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s=K.Push;let r=ae(h.location,e,t);n&&n(r,e),l=c()+1;let d=oe(r,l),f=h.createHref(r);try{i.pushState(d,"",f)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;o.location.assign(f)}a&&u&&u({action:s,location:h.location,delta:1})},replace:function(e,t){s=K.Replace;let r=ae(h.location,e,t);n&&n(r,e),l=c();let o=oe(r,l),d=h.createHref(r);i.replaceState(o,"",d),a&&u&&u({action:s,location:h.location,delta:0})},go:e=>i.go(e)};return h}var le;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(le||(le={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function ce(e,t,n){return void 0===n&&(n="/"),de(e,t,n,!1)}function de(e,t,n,r){let o=Ee(("string"===typeof t?se(t):t).pathname||"/",n);if(null==o)return null;let a=fe(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let i=null;for(let s=0;null==i&&s<a.length;++s){let e=Se(o);i=Ce(a[s],e,r)}return i}function fe(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(ne(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let s=De([r,i.relativePath]),u=n.concat(i);e.children&&e.children.length>0&&(ne(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),fe(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:we(s,e.index),routesMeta:u})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of he(e.path))o(e,t,r);else o(e,t)})),t}function he(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return o?[a,""]:[a];let i=he(r.join("/")),s=[];return s.push(...i.map((e=>""===e?a:[a,e].join("/")))),o&&s.push(...i),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const pe=/^:[\w-]+$/,me=3,ve=2,ge=1,ye=10,be=-2,xe=e=>"*"===e;function we(e,t){let n=e.split("/"),r=n.length;return n.some(xe)&&(r+=be),t&&(r+=ve),n.filter((e=>!xe(e))).reduce(((e,t)=>e+(pe.test(t)?me:""===t?ge:ye)),r)}function Ce(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let e=r[s],u=s===r.length-1,l="/"===a?t:t.slice(a.length)||"/",c=ke({path:e.relativePath,caseSensitive:e.caseSensitive,end:u},l),d=e.route;if(!c&&u&&n&&!r[r.length-1].route.index&&(c=ke({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!c)return null;Object.assign(o,c.params),i.push({params:o,pathname:De([a,c.pathname]),pathnameBase:Ie(De([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=De([a,c.pathnameBase]))}return i}function ke(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);re("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let a=new RegExp(o,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1),u=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const u=s[n];return e[r]=o&&!u?void 0:(u||"").replace(/%2F/g,"/"),e}),{});return{params:u,pathname:a,pathnameBase:i,pattern:e}}function Se(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return re(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Ee(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function _e(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ne(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Te(e,t){let n=Ne(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function Re(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=se(e):(o=ee({},e),ne(!o.pathname||!o.pathname.includes("?"),_e("?","pathname","search",o)),ne(!o.pathname||!o.pathname.includes("#"),_e("#","pathname","hash",o)),ne(!o.search||!o.search.includes("#"),_e("#","search","hash",o)));let a,i=""===e||""===o.pathname,s=i?"/":o.pathname;if(null==s)a=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}a=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?se(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:Ae(r),hash:Oe(o)}}(o,a),l=s&&"/"!==s&&s.endsWith("/"),c=(i||"."===s)&&n.endsWith("/");return u.pathname.endsWith("/")||!l&&!c||(u.pathname+="/"),u}const De=e=>e.join("/").replace(/\/\/+/g,"/"),Ie=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ae=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Oe=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Me(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Pe=["post","put","patch","delete"],je=(new Set(Pe),["get",...Pe]);new Set(je),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(this,arguments)}const Le=a.createContext(null);const Be=a.createContext(null);const We=a.createContext(null);const Ue=a.createContext(null);const ze=a.createContext({outlet:null,matches:[],isDataRoute:!1});const He=a.createContext(null);function Ve(){return null!=a.useContext(Ue)}function qe(){return Ve()||ne(!1),a.useContext(Ue).location}function Ge(e){a.useContext(We).static||a.useLayoutEffect(e)}function Ye(){let{isDataRoute:e}=a.useContext(ze);return e?function(){let{router:e}=at(rt.UseNavigateStable),t=st(ot.UseNavigateStable),n=a.useRef(!1);Ge((()=>{n.current=!0}));let r=a.useCallback((function(r,o){void 0===o&&(o={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Fe({fromRouteId:t},o)))}),[e,t]);return r}():function(){Ve()||ne(!1);let e=a.useContext(Le),{basename:t,future:n,navigator:r}=a.useContext(We),{matches:o}=a.useContext(ze),{pathname:i}=qe(),s=JSON.stringify(Te(o,n.v7_relativeSplatPath)),u=a.useRef(!1);Ge((()=>{u.current=!0}));let l=a.useCallback((function(n,o){if(void 0===o&&(o={}),!u.current)return;if("number"===typeof n)return void r.go(n);let a=Re(n,JSON.parse(s),i,"path"===o.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:De([t,a.pathname])),(o.replace?r.replace:r.push)(a,o.state,o)}),[t,r,s,i,e]);return l}()}const Ke=a.createContext(null);function $e(){let{matches:e}=a.useContext(ze),t=e[e.length-1];return t?t.params:{}}function Xe(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=a.useContext(We),{matches:o}=a.useContext(ze),{pathname:i}=qe(),s=JSON.stringify(Te(o,r.v7_relativeSplatPath));return a.useMemo((()=>Re(e,JSON.parse(s),i,"path"===n)),[e,s,i,n])}function Qe(e,t,n,r){Ve()||ne(!1);let{navigator:o}=a.useContext(We),{matches:i}=a.useContext(ze),s=i[i.length-1],u=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let c,d=qe();if(t){var f;let e="string"===typeof t?se(t):t;"/"===l||(null==(f=e.pathname)?void 0:f.startsWith(l))||ne(!1),c=e}else c=d;let h=c.pathname||"/",p=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=ce(e,{pathname:p});let v=nt(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:De([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:De([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),i,n,r);return t&&v?a.createElement(Ue.Provider,{value:{location:Fe({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:K.Pop}},v):v}function Je(){let e=function(){var e;let t=a.useContext(He),n=it(ot.UseRouteError),r=st(ot.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=Me(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:o},n):null,null)}const Ze=a.createElement(Je,null);class et extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(ze.Provider,{value:this.props.routeContext},a.createElement(He.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tt(e){let{routeContext:t,match:n,children:r}=e,o=a.useContext(Le);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(ze.Provider,{value:t},r)}function nt(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=r)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,u=null==(o=n)?void 0:o.errors;if(null!=u){let e=s.findIndex((e=>e.route.id&&void 0!==(null==u?void 0:u[e.route.id])));e>=0||ne(!1),s=s.slice(0,Math.min(s.length,e+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let a=0;a<s.length;a++){let e=s[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=a),e.route.id){let{loaderData:t,errors:r}=n,o=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||o){l=!0,s=c>=0?s.slice(0,c+1):[s[0]];break}}}return s.reduceRight(((e,r,o)=>{let i,d=!1,f=null,h=null;var p;n&&(i=u&&r.route.id?u[r.route.id]:void 0,f=r.route.errorElement||Ze,l&&(c<0&&0===o?(p="route-fallback",!1||ut[p]||(ut[p]=!0),d=!0,h=null):c===o&&(d=!0,h=r.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,o+1)),v=()=>{let t;return t=i?f:d?h:r.route.Component?a.createElement(r.route.Component,null):r.route.element?r.route.element:e,a.createElement(tt,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?a.createElement(et,{location:n.location,revalidation:n.revalidation,component:f,error:i,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()}),null)}var rt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rt||{}),ot=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ot||{});function at(e){let t=a.useContext(Le);return t||ne(!1),t}function it(e){let t=a.useContext(Be);return t||ne(!1),t}function st(e){let t=function(){let e=a.useContext(ze);return e||ne(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||ne(!1),n.route.id}const ut={};function lt(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ct(e){return function(e){let t=a.useContext(ze).outlet;return t?a.createElement(Ke.Provider,{value:e},t):t}(e.context)}function dt(e){ne(!1)}function ft(e){let{basename:t="/",children:n=null,location:r,navigationType:o=K.Pop,navigator:i,static:s=!1,future:u}=e;Ve()&&ne(!1);let l=t.replace(/^\/*/,"/"),c=a.useMemo((()=>({basename:l,navigator:i,static:s,future:Fe({v7_relativeSplatPath:!1},u)})),[l,u,i,s]);"string"===typeof r&&(r=se(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:m="default"}=r,v=a.useMemo((()=>{let e=Ee(d,l);return null==e?null:{location:{pathname:e,search:f,hash:h,state:p,key:m},navigationType:o}}),[l,d,f,h,p,m,o]);return null==v?null:a.createElement(We.Provider,{value:c},a.createElement(Ue.Provider,{children:n,value:v}))}function ht(e){let{children:t,location:n}=e;return Qe(pt(t),n)}new Promise((()=>{}));a.Component;function pt(e,t){void 0===t&&(t=[]);let n=[];return a.Children.forEach(e,((e,r)=>{if(!a.isValidElement(e))return;let o=[...t,r];if(e.type===a.Fragment)return void n.push.apply(n,pt(e.props.children,o));e.type!==dt&&ne(!1),e.props.index&&e.props.children&&ne(!1);let i={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=pt(e.props.children,o)),n.push(i)})),n}var mt=n(7950),vt=n.t(mt,2);function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}function yt(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const bt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xt=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(wu){}const wt=a.createContext({isTransitioning:!1});new Map;const Ct=i.startTransition;vt.flushSync,i.useId;function kt(e){let{basename:t,children:n,future:r,window:o}=e,i=a.useRef();var s;null==i.current&&(i.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),ue((function(e,t){let{pathname:n,search:r,hash:o}=e.location;return ae("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ie(t)}),null,s)));let u=i.current,[l,c]=a.useState({action:u.action,location:u.location}),{v7_startTransition:d}=r||{},f=a.useCallback((e=>{d&&Ct?Ct((()=>c(e))):c(e)}),[c,d]);return a.useLayoutEffect((()=>u.listen(f)),[u,f]),a.useEffect((()=>lt(r)),[r]),a.createElement(ft,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:u,future:r})}const St="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Et=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_t=a.forwardRef((function(e,t){let n,{onClick:r,relative:o,reloadDocument:i,replace:s,state:u,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,h=yt(e,bt),{basename:p}=a.useContext(We),m=!1;if("string"===typeof c&&Et.test(c)&&(n=c,St))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=Ee(t.pathname,p);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:m=!0}catch(wu){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Ve()||ne(!1);let{basename:r,navigator:o}=a.useContext(We),{hash:i,pathname:s,search:u}=Xe(e,{relative:n}),l=s;return"/"!==r&&(l="/"===s?r:De([r,s])),o.createHref({pathname:l,search:u,hash:i})}(c,{relative:o}),g=function(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:s,viewTransition:u}=void 0===t?{}:t,l=Ye(),c=qe(),d=Xe(e,{relative:s});return a.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:ie(c)===ie(d);l(e,{replace:n,state:o,preventScrollReset:i,relative:s,viewTransition:u})}}),[c,l,d,r,o,n,e,i,s,u])}(c,{replace:s,state:u,target:l,preventScrollReset:d,relative:o,viewTransition:f});return a.createElement("a",gt({},h,{href:n||v,onClick:m||i?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:l}))}));const Nt=a.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:o="",end:i=!1,style:s,to:u,viewTransition:l,children:c}=e,d=yt(e,xt),f=Xe(u,{relative:d.relative}),h=qe(),p=a.useContext(Be),{navigator:m,basename:v}=a.useContext(We),g=null!=p&&function(e,t){void 0===t&&(t={});let n=a.useContext(wt);null==n&&ne(!1);let{basename:r}=Dt(Tt.useViewTransitionState),o=Xe(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Ee(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Ee(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=ke(o.pathname,s)||null!=ke(o.pathname,i)}(f)&&!0===l,y=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,b=h.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(b=b.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&v&&(x=Ee(x,v)||x);const w="/"!==y&&y.endsWith("/")?y.length-1:y.length;let C,k=b===y||!i&&b.startsWith(y)&&"/"===b.charAt(w),S=null!=x&&(x===y||!i&&x.startsWith(y)&&"/"===x.charAt(y.length)),E={isActive:k,isPending:S,isTransitioning:g},_=k?n:void 0;C="function"===typeof o?o(E):[o,k?"active":null,S?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let N="function"===typeof s?s(E):s;return a.createElement(_t,gt({},d,{"aria-current":_,className:C,ref:t,style:N,to:u,viewTransition:l}),"function"===typeof c?c(E):c)}));var Tt,Rt;function Dt(e){let t=a.useContext(Le);return t||ne(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Tt||(Tt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Rt||(Rt={}));var It=n(8139),At=n.n(It),Ot=n(579);const Mt=["xxl","xl","lg","md","sm","xs"],Pt="xs",jt=a.createContext({prefixes:{},breakpoints:Mt,minBreakpoint:Pt}),{Consumer:Ft,Provider:Lt}=jt;function Bt(e,t){const{prefixes:n}=(0,a.useContext)(jt);return e||n[t]||t}function Wt(){const{breakpoints:e}=(0,a.useContext)(jt);return e}function Ut(){const{minBreakpoint:e}=(0,a.useContext)(jt);return e}const zt=["bsPrefix","fluid","as","className"],Ht=a.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:o="div",className:a}=e,i=u(e,zt);const s=Bt(n,"container"),l="string"===typeof r?"-".concat(r):"-fluid";return(0,Ot.jsx)(o,d(d({ref:t},i),{},{className:At()(a,r?"".concat(s).concat(l):s)}))}));Ht.displayName="Container";const Vt=Ht,qt=["bsPrefix","className","as"],Gt=a.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:o="div"}=e,a=u(e,qt);const i=Bt(n,"row"),s=Wt(),l=Ut(),c="".concat(i,"-cols"),f=[];return s.forEach((e=>{const t=a[e];let n;delete a[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==l?"-".concat(e):"";null!=n&&f.push("".concat(c).concat(r,"-").concat(n))})),(0,Ot.jsx)(o,d(d({ref:t},a),{},{className:At()(r,i,...f)}))}));Gt.displayName="Row";const Yt=Gt,Kt=["as","bsPrefix","className"],$t=["className"];const Xt=a.forwardRef(((e,t)=>{const[n,{as:r="div",bsPrefix:o,spans:a}]=function(e){let{as:t,bsPrefix:n,className:r}=e,o=u(e,Kt);n=Bt(n,"col");const a=Wt(),i=Ut(),s=[],l=[];return a.forEach((e=>{const t=o[e];let r,a,u;delete o[e],"object"===typeof t&&null!=t?({span:r,offset:a,order:u}=t):r=t;const c=e!==i?"-".concat(e):"";r&&s.push(!0===r?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(r)),null!=u&&l.push("order".concat(c,"-").concat(u)),null!=a&&l.push("offset".concat(c,"-").concat(a))})),[d(d({},o),{},{className:At()(r,...s,...l)}),{as:t,bsPrefix:n,spans:s}]}(e),{className:i}=n,s=u(n,$t);return(0,Ot.jsx)(r,d(d({},s),{},{ref:t,className:At()(i,!a.length&&o)}))}));Xt.displayName="Col";const Qt=Xt;var Jt=n(9461),Zt=n(8443);let en=function(e){e()};const tn=()=>en,nn=Symbol.for("react-redux-context"),rn="undefined"!==typeof globalThis?globalThis:{};function on(){var e;if(!a.createContext)return{};const t=null!=(e=rn[nn])?e:rn[nn]=new Map;let n=t.get(a.createContext);return n||(n=a.createContext(null),t.set(a.createContext,n)),n}const an=on();function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;return function(){return(0,a.useContext)(e)}}const un=sn();let ln=()=>{throw new Error("uSES not initialized!")};const cn=(e,t)=>e===t;function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;const t=e===an?un:sn(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=cn,stabilityCheck:o,noopCheck:i}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:u,getServerState:l,stabilityCheck:c,noopCheck:d}=t(),f=((0,a.useRef)(!0),(0,a.useCallback)({[e.name]:t=>e(t)}[e.name],[e,c,o])),h=ln(u.addNestedSub,s.getState,l||s.getState,f,r);return(0,a.useDebugValue)(h),h}}const fn=dn();n(219),n(2706);const hn={notify(){},get:()=>[]};function pn(e,t){let n,r=hn,o=0,a=!1;function i(){l.onStateChange&&l.onStateChange()}function s(){o++,n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=tn();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}function u(){o--,n&&0===o&&(n(),n=void 0,r.clear(),r=hn)}const l={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),u())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,s())},tryUnsubscribe:function(){a&&(a=!1,u())},getListeners:()=>r};return l}const mn=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?a.useLayoutEffect:a.useEffect;let vn=null;const gn=function(e){let{store:t,context:n,children:r,serverState:o,stabilityCheck:i="once",noopCheck:s="once"}=e;const u=a.useMemo((()=>{const e=pn(t);return{store:t,subscription:e,getServerState:o?()=>o:void 0,stabilityCheck:i,noopCheck:s}}),[t,o,i,s]),l=a.useMemo((()=>t.getState()),[t]);mn((()=>{const{subscription:e}=u;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[u,l]);const c=n||an;return a.createElement(c.Provider,{value:u},r)};function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;const t=e===an?un:sn(e);return function(){const{store:e}=t();return e}}const bn=yn();function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;const t=e===an?bn:yn(e);return function(){return t().dispatch}}const wn=xn();var Cn;(e=>{ln=e})(Zt.useSyncExternalStoreWithSelector),(e=>{vn=e})(Jt.useSyncExternalStore),Cn=mt.unstable_batchedUpdates,en=Cn;var kn=n(2963),Sn=n.n(kn),En=n(8613),_n=n.n(En);Sn().setAppElement("#root");const Nn=(e,t)=>{let{children:n,title:r,style:o,isOpen:i,onRequestClose:s,id:u,onClose:l}=e;var c=(e=>{const[t,n]=(0,a.useState)(window.matchMedia(e).matches);return(0,a.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)");const f={content:d(d({top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"rgb(36,37,38)",zIndex:"99",maxHeight:"100%"},o),{},{width:c?"95%":"600px"}),overlay:{backgroundColor:"rgba(0,0,0,0.8)",zIndex:"999"}};return(0,Ot.jsx)("div",{children:(0,Ot.jsx)(Sn(),{shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,style:f,isOpen:i,onRequestClose:s,id:u||"profile-modal",children:n})})},Tn=(e,t)=>{const n=new Image;n.src=e,n.onload=()=>t(!0),n.onerror=()=>t(!1)};JSON.parse(localStorage.getItem("user")||"{}");const Rn=e=>{const[t,n]=(0,a.useState)(e.hasStory||!1),[r,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)(!1),[u,l]=(0,a.useState)(e.profilePic||"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png"),[c,d]=(0,a.useState)(!1);var f=e.profile;return(0,a.useEffect)((()=>(o(e.updateActive||"no"),Tn(e.profilePic,d),1==(null===e||void 0===e?void 0:e.active)?s(!0):s(!1))),[e]),(0,a.useEffect)((()=>{c&&l(e.profilePic)}),[c]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{className:"user-profile-img-container",children:[i&&(0,Ot.jsx)("div",{className:"active-icon active"}),(0,Ot.jsx)("div",{className:"user-profile-img ".concat(1==t?"has-story":""),children:c?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(_t,{to:"/".concat(f||""),children:(0,Ot.jsx)("img",{src:e.profilePic,alt:""})})}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)(_t,{to:"/".concat(f||""),children:[" ",(0,Ot.jsx)("img",{src:e.profilePic,alt:""})]})})})]})})};function Dn(e,t){return function(){return e.apply(t,arguments)}}const{toString:In}=Object.prototype,{getPrototypeOf:An}=Object,{iterator:On,toStringTag:Mn}=Symbol,Pn=(e=>t=>{const n=In.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),jn=e=>(e=e.toLowerCase(),t=>Pn(t)===e),Fn=e=>t=>typeof t===e,{isArray:Ln}=Array,Bn=Fn("undefined");const Wn=jn("ArrayBuffer");const Un=Fn("string"),zn=Fn("function"),Hn=Fn("number"),Vn=e=>null!==e&&"object"===typeof e,qn=e=>{if("object"!==Pn(e))return!1;const t=An(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Mn in e)&&!(On in e)},Gn=jn("Date"),Yn=jn("File"),Kn=jn("Blob"),$n=jn("FileList"),Xn=jn("URLSearchParams"),[Qn,Jn,Zn,er]=["ReadableStream","Request","Response","Headers"].map(jn);function tr(e,t){let n,r,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ln(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=o?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let i;for(n=0;n<a;n++)i=r[n],t.call(null,e[i],i,e)}}function nr(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const rr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,or=e=>!Bn(e)&&e!==rr;const ar=(ir="undefined"!==typeof Uint8Array&&An(Uint8Array),e=>ir&&e instanceof ir);var ir;const sr=jn("HTMLFormElement"),ur=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),lr=jn("RegExp"),cr=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};tr(n,((n,o)=>{let a;!1!==(a=t(n,o,e))&&(r[o]=a||n)})),Object.defineProperties(e,r)};const dr=jn("AsyncFunction"),fr=(hr="function"===typeof setImmediate,pr=zn(rr.postMessage),hr?setImmediate:pr?((e,t)=>(rr.addEventListener("message",(n=>{let{source:r,data:o}=n;r===rr&&o===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),rr.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var hr,pr;const mr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(rr):"undefined"!==typeof process&&process.nextTick||fr,vr={isArray:Ln,isArrayBuffer:Wn,isBuffer:function(e){return null!==e&&!Bn(e)&&null!==e.constructor&&!Bn(e.constructor)&&zn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||zn(e.append)&&("formdata"===(t=Pn(e))||"object"===t&&zn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Wn(e.buffer),t},isString:Un,isNumber:Hn,isBoolean:e=>!0===e||!1===e,isObject:Vn,isPlainObject:qn,isReadableStream:Qn,isRequest:Jn,isResponse:Zn,isHeaders:er,isUndefined:Bn,isDate:Gn,isFile:Yn,isBlob:Kn,isRegExp:lr,isFunction:zn,isStream:e=>Vn(e)&&zn(e.pipe),isURLSearchParams:Xn,isTypedArray:ar,isFileList:$n,forEach:tr,merge:function e(){const{caseless:t}=or(this)&&this||{},n={},r=(r,o)=>{const a=t&&nr(n,o)||o;qn(n[a])&&qn(r)?n[a]=e(n[a],r):qn(r)?n[a]=e({},r):Ln(r)?n[a]=r.slice():n[a]=r};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&tr(arguments[o],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return tr(t,((t,r)=>{n&&zn(t)?e[r]=Dn(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,a,i;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)i=o[a],r&&!r(i,e,t)||s[i]||(t[i]=e[i],s[i]=!0);e=!1!==n&&An(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Pn,kindOfTest:jn,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Ln(e))return e;let t=e.length;if(!Hn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[On]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:sr,hasOwnProperty:ur,hasOwnProp:ur,reduceDescriptors:cr,freezeMethods:e=>{cr(e,((t,n)=>{if(zn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];zn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Ln(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:nr,global:rr,isContextDefined:or,isSpecCompliantForm:function(e){return!!(e&&zn(e.append)&&"FormData"===e[Mn]&&e[On])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Vn(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=Ln(e)?[]:{};return tr(e,((e,t)=>{const a=n(e,r+1);!Bn(a)&&(o[t]=a)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:dr,isThenable:e=>e&&(Vn(e)||zn(e))&&zn(e.then)&&zn(e.catch),setImmediate:fr,asap:mr,isIterable:e=>null!=e&&zn(e[On])};function gr(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}vr.inherits(gr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:vr.toJSONObject(this.config),code:this.code,status:this.status}}});const yr=gr.prototype,br={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{br[e]={value:e}})),Object.defineProperties(gr,br),Object.defineProperty(yr,"isAxiosError",{value:!0}),gr.from=(e,t,n,r,o,a)=>{const i=Object.create(yr);return vr.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),gr.call(i,e.message,t,n,r,o),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};const xr=gr;function wr(e){return vr.isPlainObject(e)||vr.isArray(e)}function Cr(e){return vr.endsWith(e,"[]")?e.slice(0,-2):e}function kr(e,t,n){return e?e.concat(t).map((function(e,t){return e=Cr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Sr=vr.toFlatObject(vr,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Er=function(e,t,n){if(!vr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=vr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!vr.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,a=n.dots,i=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&vr.isSpecCompliantForm(t);if(!vr.isFunction(o))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(vr.isDate(e))return e.toISOString();if(!s&&vr.isBlob(e))throw new xr("Blob is not supported. Use a Buffer instead.");return vr.isArrayBuffer(e)||vr.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let s=e;if(e&&!o&&"object"===typeof e)if(vr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(vr.isArray(e)&&function(e){return vr.isArray(e)&&!e.some(wr)}(e)||(vr.isFileList(e)||vr.endsWith(n,"[]"))&&(s=vr.toArray(e)))return n=Cr(n),s.forEach((function(e,r){!vr.isUndefined(e)&&null!==e&&t.append(!0===i?kr([n],r,a):null===i?n:n+"[]",u(e))})),!1;return!!wr(e)||(t.append(kr(o,n,a),u(e)),!1)}const c=[],d=Object.assign(Sr,{defaultVisitor:l,convertValue:u,isVisitable:wr});if(!vr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!vr.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),vr.forEach(n,(function(n,a){!0===(!(vr.isUndefined(n)||null===n)&&o.call(t,n,vr.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])})),c.pop()}}(e),t};function _r(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Nr(e,t){this._pairs=[],e&&Er(e,this,t)}const Tr=Nr.prototype;Tr.append=function(e,t){this._pairs.push([e,t])},Tr.toString=function(e){const t=e?function(t){return e.call(this,t,_r)}:_r;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Rr=Nr;function Dr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ir(e,t,n){if(!t)return e;const r=n&&n.encode||Dr;vr.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(a=o?o(t,n):vr.isURLSearchParams(t)?t.toString():new Rr(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Ar=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){vr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Or={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Rr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Pr="undefined"!==typeof window&&"undefined"!==typeof document,jr="object"===typeof navigator&&navigator||void 0,Fr=Pr&&(!jr||["ReactNative","NativeScript","NS"].indexOf(jr.product)<0),Lr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Br=Pr&&window.location.href||"http://localhost",Wr=d(d({},e),Mr);const Ur=function(e){function t(e,n,r,o){let a=e[o++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),s=o>=e.length;if(a=!a&&vr.isArray(r)?r.length:a,s)return vr.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!i;r[a]&&vr.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],o)&&vr.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],t[a]=e[a];return t}(r[a])),!i}if(vr.isFormData(e)&&vr.isFunction(e.entries)){const n={};return vr.forEachEntry(e,((e,r)=>{t(function(e){return vr.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const zr={transitional:Or,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=vr.isObject(e);o&&vr.isHTMLForm(e)&&(e=new FormData(e));if(vr.isFormData(e))return r?JSON.stringify(Ur(e)):e;if(vr.isArrayBuffer(e)||vr.isBuffer(e)||vr.isStream(e)||vr.isFile(e)||vr.isBlob(e)||vr.isReadableStream(e))return e;if(vr.isArrayBufferView(e))return e.buffer;if(vr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Er(e,new Wr.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Wr.isNode&&vr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=vr.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Er(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(vr.isString(e))try{return(t||JSON.parse)(e),vr.trim(e)}catch(wu){if("SyntaxError"!==wu.name)throw wu}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||zr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(vr.isResponse(e)||vr.isReadableStream(e))return e;if(e&&vr.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(wu){if(n){if("SyntaxError"===wu.name)throw xr.from(wu,xr.ERR_BAD_RESPONSE,this,null,this.response);throw wu}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wr.classes.FormData,Blob:Wr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};vr.forEach(["delete","get","head","post","put","patch"],(e=>{zr.headers[e]={}}));const Hr=zr,Vr=vr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qr=Symbol("internals");function Gr(e){return e&&String(e).trim().toLowerCase()}function Yr(e){return!1===e||null==e?e:vr.isArray(e)?e.map(Yr):String(e)}function Kr(e,t,n,r,o){return vr.isFunction(r)?r.call(this,t,n):(o&&(t=n),vr.isString(t)?vr.isString(r)?-1!==t.indexOf(r):vr.isRegExp(r)?r.test(t):void 0:void 0)}class $r{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=Gr(t);if(!o)throw new Error("header name must be a non-empty string");const a=vr.findKey(r,o);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Yr(e))}const a=(e,t)=>vr.forEach(e,((e,n)=>o(e,n,t)));if(vr.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(vr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Vr[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(vr.isObject(e)&&vr.isIterable(e)){let n,r,o={};for(const t of e){if(!vr.isArray(t))throw TypeError("Object iterator must return a key-value pair");o[r=t[0]]=(n=o[r])?vr.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(o,t)}else null!=e&&o(t,e,n);return this}get(e,t){if(e=Gr(e)){const n=vr.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(vr.isFunction(t))return t.call(this,e,n);if(vr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gr(e)){const n=vr.findKey(this,e);return!(!n||void 0===this[n]||t&&!Kr(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=Gr(e)){const o=vr.findKey(n,e);!o||t&&!Kr(0,n[o],o,t)||(delete n[o],r=!0)}}return vr.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!Kr(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return vr.forEach(this,((r,o)=>{const a=vr.findKey(n,o);if(a)return t[a]=Yr(r),void delete t[o];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();i!==o&&delete t[o],t[i]=Yr(r),n[i]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return vr.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&vr.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[qr]=this[qr]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Gr(e);t[r]||(!function(e,t){const n=vr.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return vr.isArray(e)?e.forEach(r):r(e),this}}$r.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),vr.reduceDescriptors($r.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),vr.freezeMethods($r);const Xr=$r;function Qr(e,t){const n=this||Hr,r=t||n,o=Xr.from(r.headers);let a=r.data;return vr.forEach(e,(function(e){a=e.call(n,a,o.normalize(),t?t.status:void 0)})),o.normalize(),a}function Jr(e){return!(!e||!e.__CANCEL__)}function Zr(e,t,n){xr.call(this,null==e?"canceled":e,xr.ERR_CANCELED,t,n),this.name="CanceledError"}vr.inherits(Zr,xr,{__CANCEL__:!0});const eo=Zr;function to(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new xr("Request failed with status code "+n.status,[xr.ERR_BAD_REQUEST,xr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const no=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,a=0,i=0;return t=void 0!==t?t:1e3,function(s){const u=Date.now(),l=r[i];o||(o=u),n[a]=s,r[a]=u;let c=i,d=0;for(;c!==a;)d+=n[c++],c%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),u-o<t)return;const f=l&&u-l;return f?Math.round(1e3*d/f):void 0}};const ro=function(e,t){let n,r,o=0,a=1e3/t;const i=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-o;for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];t>=a?i(u,e):(n=u,r||(r=setTimeout((()=>{r=null,i(n)}),a-t)))},()=>n&&i(n)]},oo=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const o=no(50,250);return ro((n=>{const a=n.loaded,i=n.lengthComputable?n.total:void 0,s=a-r,u=o(s);r=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:s,rate:u||void 0,estimated:u&&i&&a<=i?(i-a)/u:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),n)},ao=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},io=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vr.asap((()=>e(...n)))},so=Wr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Wr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Wr.origin),Wr.navigator&&/(msie|trident)/i.test(Wr.navigator.userAgent)):()=>!0,uo=Wr.hasStandardBrowserEnv?{write(e,t,n,r,o,a){const i=[e+"="+encodeURIComponent(t)];vr.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),vr.isString(r)&&i.push("path="+r),vr.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function lo(e,t,n){let r=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const co=e=>e instanceof Xr?d({},e):e;function fo(e,t){t=t||{};const n={};function r(e,t,n,r){return vr.isPlainObject(e)&&vr.isPlainObject(t)?vr.merge.call({caseless:r},e,t):vr.isPlainObject(t)?vr.merge({},t):vr.isArray(t)?t.slice():t}function o(e,t,n,o){return vr.isUndefined(t)?vr.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function a(e,t){if(!vr.isUndefined(t))return r(void 0,t)}function i(e,t){return vr.isUndefined(t)?vr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,a){return a in t?r(n,o):a in e?r(void 0,n):void 0}const u={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(e,t,n)=>o(co(e),co(t),0,!0)};return vr.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=u[r]||o,i=a(e[r],t[r],r);vr.isUndefined(i)&&a!==s||(n[r]=i)})),n}const ho=e=>{const t=fo({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:a,xsrfCookieName:i,headers:s,auth:u}=t;if(t.headers=s=Xr.from(s),t.url=Ir(lo(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&s.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),vr.isFormData(r))if(Wr.hasStandardBrowserEnv||Wr.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(Wr.hasStandardBrowserEnv&&(o&&vr.isFunction(o)&&(o=o(t)),o||!1!==o&&so(t.url))){const e=a&&i&&uo.read(i);e&&s.set(a,e)}return t},po="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=ho(e);let o=r.data;const a=Xr.from(r.headers).normalize();let i,s,u,l,c,{responseType:d,onUploadProgress:f,onDownloadProgress:h}=r;function p(){l&&l(),c&&c(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let m=new XMLHttpRequest;function v(){if(!m)return;const r=Xr.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());to((function(e){t(e),p()}),(function(e){n(e),p()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(v)},m.onabort=function(){m&&(n(new xr("Request aborted",xr.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new xr("Network Error",xr.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||Or;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new xr(t,o.clarifyTimeoutError?xr.ETIMEDOUT:xr.ECONNABORTED,e,m)),m=null},void 0===o&&a.setContentType(null),"setRequestHeader"in m&&vr.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),vr.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),h&&([u,c]=oo(h,!0),m.addEventListener("progress",u)),f&&m.upload&&([s,l]=oo(f),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(i=t=>{m&&(n(!t||t.type?new eo(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===Wr.protocols.indexOf(g)?n(new xr("Unsupported protocol "+g+":",xr.ERR_BAD_REQUEST,e)):m.send(o||null)}))},mo=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof xr?t:new eo(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,o(new xr("timeout ".concat(t," of ms exceeded"),xr.ETIMEDOUT))}),t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=r;return s.unsubscribe=()=>vr.asap(i),s}};function vo(e,t){this.v=e,this.k=t}function go(e){return function(){return new yo(e.apply(this,arguments))}}function yo(e){var t,n;function r(t,n){try{var a=e[t](n),i=a.value,s=i instanceof vo;Promise.resolve(s?i.v:i).then((function(n){if(s){var u="return"===t?"return":"next";if(!i.k||n.done)return r(u,n);n=e[u](n).value}o(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(a,i){var s={key:e,arg:o,resolve:a,reject:i,next:null};n?n=n.next=s:(t=n=s,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function bo(e){return new vo(e,0)}function xo(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new vo(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function wo(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Co(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Co(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Co=function(e){this.s=e,this.n=e.next},Co.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Co(e)}yo.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},yo.prototype.next=function(e){return this._invoke("next",e)},yo.prototype.throw=function(e){return this._invoke("throw",e)},yo.prototype.return=function(e){return this._invoke("return",e)};const ko=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},So=function(){var e=go((function*(e,t){var n,r=!1,o=!1;try{for(var a,i=wo(Eo(e));r=!(a=yield bo(i.next())).done;r=!1){const e=a.value;yield*xo(wo(ko(e,t)))}}catch(s){o=!0,n=s}finally{try{r&&null!=i.return&&(yield bo(i.return()))}finally{if(o)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Eo=function(){var e=go((function*(e){if(e[Symbol.asyncIterator])return void(yield*xo(wo(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield bo(t.read());if(e)break;yield n}}finally{yield bo(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),_o=(e,t,n,r)=>{const o=So(e,t);let a,i=0,s=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return s(),void e.close();let a=r.byteLength;if(n){let e=i+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},No="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,To=No&&"function"===typeof ReadableStream,Ro=No&&("function"===typeof TextEncoder?(Do=new TextEncoder,e=>Do.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Do;const Io=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(wu){return!1}},Ao=To&&Io((()=>{let e=!1;const t=new Request(Wr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Oo=To&&Io((()=>vr.isReadableStream(new Response("").body))),Mo={stream:Oo&&(e=>e.body)};var Po;No&&(Po=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Mo[e]&&(Mo[e]=vr.isFunction(Po[e])?t=>t[e]():(t,n)=>{throw new xr("Response type '".concat(e,"' is not supported"),xr.ERR_NOT_SUPPORT,n)})})));const jo=async(e,t)=>{const n=vr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(vr.isBlob(e))return e.size;if(vr.isSpecCompliantForm(e)){const t=new Request(Wr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return vr.isArrayBufferView(e)||vr.isArrayBuffer(e)?e.byteLength:(vr.isURLSearchParams(e)&&(e+=""),vr.isString(e)?(await Ro(e)).byteLength:void 0)})(t):n},Fo=No&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:a,timeout:i,onDownloadProgress:s,onUploadProgress:u,responseType:l,headers:c,withCredentials:f="same-origin",fetchOptions:h}=ho(e);l=l?(l+"").toLowerCase():"text";let p,m=mo([o,a&&a.toAbortSignal()],i);const v=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(u&&Ao&&"get"!==n&&"head"!==n&&0!==(g=await jo(c,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(vr.isFormData(r)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=ao(g,oo(io(u)));r=_o(n.body,65536,e,t)}}vr.isString(f)||(f=f?"include":"omit");const o="credentials"in Request.prototype;p=new Request(t,d(d({},h),{},{signal:m,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:o?f:void 0}));let a=await fetch(p);const i=Oo&&("stream"===l||"response"===l);if(Oo&&(s||i&&v)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=vr.toFiniteNumber(a.headers.get("content-length")),[n,r]=s&&ao(t,oo(io(s),!0))||[];a=new Response(_o(a.body,65536,n,(()=>{r&&r(),v&&v()})),e)}l=l||"text";let y=await Mo[vr.findKey(Mo,l)||"text"](a,e);return!i&&v&&v(),await new Promise(((t,n)=>{to(t,n,{data:y,headers:Xr.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})}))}catch(y){if(v&&v(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new xr("Network Error",xr.ERR_NETWORK,e,p),{cause:y.cause||y});throw xr.from(y,y&&y.code,e,p)}}),Lo={http:null,xhr:po,fetch:Fo};vr.forEach(Lo,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(wu){}Object.defineProperty(e,"adapterName",{value:t})}}));const Bo=e=>"- ".concat(e),Wo=e=>vr.isFunction(e)||null===e||!1===e,Uo=e=>{e=vr.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!Wo(n)&&(r=Lo[(t=String(n)).toLowerCase()],void 0===r))throw new xr("Unknown adapter '".concat(t,"'"));if(r)break;o[t||"#"+a]=r}if(!r){const e=Object.entries(o).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Bo).join("\n"):" "+Bo(e[0]):"as no adapter specified";throw new xr("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function zo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new eo(null,e)}function Ho(e){zo(e),e.headers=Xr.from(e.headers),e.data=Qr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Uo(e.adapter||Hr.adapter)(e).then((function(t){return zo(e),t.data=Qr.call(e,e.transformResponse,t),t.headers=Xr.from(t.headers),t}),(function(t){return Jr(t)||(zo(e),t&&t.response&&(t.response.data=Qr.call(e,e.transformResponse,t.response),t.response.headers=Xr.from(t.response.headers))),Promise.reject(t)}))}const Vo="1.9.0",qo={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{qo[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Go={};qo.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,a)=>{if(!1===e)throw new xr(r(o," has been removed"+(t?" in "+t:"")),xr.ERR_DEPRECATED);return t&&!Go[o]&&(Go[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,a)}},qo.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Yo={assertOptions:function(e,t,n){if("object"!==typeof e)throw new xr("options must be an object",xr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const a=r[o],i=t[a];if(i){const t=e[a],n=void 0===t||i(t,a,e);if(!0!==n)throw new xr("option "+a+" must be "+n,xr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new xr("Unknown option "+a,xr.ERR_BAD_OPTION)}},validators:qo},Ko=Yo.validators;class $o{constructor(e){this.defaults=e||{},this.interceptors={request:new Ar,response:new Ar}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(wu){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=fo(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&Yo.assertOptions(n,{silentJSONParsing:Ko.transitional(Ko.boolean),forcedJSONParsing:Ko.transitional(Ko.boolean),clarifyTimeoutError:Ko.transitional(Ko.boolean)},!1),null!=r&&(vr.isFunction(r)?t.paramsSerializer={serialize:r}:Yo.assertOptions(r,{encode:Ko.function,serialize:Ko.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Yo.assertOptions(t,{baseUrl:Ko.spelling("baseURL"),withXsrfToken:Ko.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&vr.merge(o.common,o[t.method]);o&&vr.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=Xr.concat(a,o);const i=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const u=[];let l;this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));let c,d=0;if(!s){const e=[Ho.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,u),c=e.length,l=Promise.resolve(t);d<c;)l=l.then(e[d++],e[d++]);return l}c=i.length;let f=t;for(d=0;d<c;){const e=i[d++],t=i[d++];try{f=e(f)}catch(h){t.call(this,h);break}}try{l=Ho.call(this,f)}catch(h){return Promise.reject(h)}for(d=0,c=u.length;d<c;)l=l.then(u[d++],u[d++]);return l}getUri(e){return Ir(lo((e=fo(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}vr.forEach(["delete","get","head","options"],(function(e){$o.prototype[e]=function(t,n){return this.request(fo(n||{},{method:e,url:t,data:(n||{}).data}))}})),vr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(fo(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}$o.prototype[e]=t(),$o.prototype[e+"Form"]=t(!0)}));const Xo=$o;class Qo{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new eo(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Qo((function(t){e=t}));return{token:t,cancel:e}}}const Jo=Qo;const Zo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zo).forEach((e=>{let[t,n]=e;Zo[n]=t}));const ea=Zo;const ta=function e(t){const n=new Xo(t),r=Dn(Xo.prototype.request,n);return vr.extend(r,Xo.prototype,n,{allOwnKeys:!0}),vr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(fo(t,n))},r}(Hr);ta.Axios=Xo,ta.CanceledError=eo,ta.CancelToken=Jo,ta.isCancel=Jr,ta.VERSION=Vo,ta.toFormData=Er,ta.AxiosError=xr,ta.Cancel=ta.CanceledError,ta.all=function(e){return Promise.all(e)},ta.spread=function(e){return function(t){return e.apply(null,t)}},ta.isAxiosError=function(e){return vr.isObject(e)&&!0===e.isAxiosError},ta.mergeConfig=fo,ta.AxiosHeaders=Xr,ta.formToJSON=e=>Ur(vr.isHTMLForm(e)?new FormData(e):e),ta.getAdapter=Uo,ta.HttpStatusCode=ea,ta.default=ta;const na=ta;let ra=localStorage.getItem("user")||"{}",oa=JSON.parse(ra).accessToken;const aa=na.create({baseURL:"https://connectbd.onrender.com/api/",headers:{Authorization:"".concat(oa),"User-Agent":"MyCustomUserAgent","Access-Control-Allow-Origin":"*"}});const ia=e=>{let{setNewsFeed:t}=e,n=fn((e=>e.profile)),r=n._id,[o,i]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),l=e=>{i(!0)},c=()=>{i(!1)},[f,h]=(0,a.useState)({caption:"",attachments:null,urls:null,location:"",feelings:""}),[p,m]=(0,a.useState)(!1);const[v,g]=(0,a.useState)(!1);(0,a.useEffect)((()=>{aa.get("/profile/hasStory",{params:{profileId:r}}).then((e=>{if(200==e.status){let t=e.data.hasStory;"yes"==t&&g(!0),"no"==t&&g(!1)}}))}),[]);var y=(e=>{const[t,n]=(0,a.useState)(window.matchMedia(e).matches);return(0,a.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)");let b=n.user&&n.user.firstName+" "+n.user.surname,x="What's On Your Mind "+b+" ?",w=e=>{let t=e.target.value,n=e.target.name;0==p&&"caption"==n&&m("caption"),h((e=>d(d({},e),{},{[n]:t})))},C=(0,a.useCallback)((e=>{let t=e.currentTarget;_n()(t).parents(".cpm-attachment-upload").slideUp(),_n()(t).parents(".cpm-attachment-upload").siblings(".cpm-attachment-preview").slideDown();let n=e.target.files[0];k(n.type,n)})),k=async(e,t)=>{u(!0);try{let o=e.split("/")[0];switch(m(o),o){case"image":let e=new FormData;e.append("image",t),e.append("type","image/png");let a=await aa.post("/upload/",e,{headers:{"content-type":"multipart/form-data"}});if(200==a.status){u(!1);var n=a.data.secure_url;h((e=>d(d({},e),{},{urls:n,type:o})))}break;case"video":let i=new FormData;i.append("attachment",t),i.append("type","video/mp4");let s=await aa.post("/upload/video",i,{headers:{"content-type":"multipart/form-data"}});if(200==s.status){var r=s.data.secure_url;u(!1),h((e=>d(d({},e),{},{type:o,urls:r})))}}}catch(o){console.log(o)}},S=(0,a.useCallback)((async e=>{e.preventDefault(),i(!1);try{switch(f.type){case"image":e.target.classList.add("added");let t=new FormData;t.append("caption",f.caption),t.append("urls",f.urls),t.append("feelings",f.feelings),t.append("location",f.location),200===(await aa.post("/post/create/",t,{headers:{"content-type":"multipart/form-data"}})).status&&i(!1);break;case"video":e.target.classList.add("added"),200===(await aa.post("/watch/create",{caption:f.caption,videoUrl:f.urls,location:f.location,feelings:f.feelings},{headers:{"content-type":"multipart/form-data"}})).status&&i(!1);break;default:let n=new FormData;n.append("caption",f.caption),n.append("urls",f.urls),n.append("feelings",f.feelings),n.append("location",f.location),200===(await aa.post("/post/create/",n,{headers:{"content-type":"multipart/form-data"}})).status&&i(!1)}}catch(t){console.log(t)}}));return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{className:"nf-create-post",children:[(0,Ot.jsxs)("div",{className:"top",children:[(0,Ot.jsx)("div",{className:"profile-pic",children:(0,Ot.jsx)(Rn,{profilePic:n.profilePic,hasStory:v,profile:n._id})}),(0,Ot.jsx)("div",{onClick:l,className:"cp-field",children:(0,Ot.jsx)("input",{readOnly:!0,placeholder:x,className:"cp-input"})})]}),(0,Ot.jsx)("div",{className:"bottom",children:(0,Ot.jsxs)("ul",{onClick:l,className:"button-container",children:[(0,Ot.jsxs)("li",{className:"photo-button",children:[(0,Ot.jsx)("div",{className:"button-icon"}),(0,Ot.jsx)("div",{className:"button-text",children:"Photo/video"})]}),(0,Ot.jsxs)("li",{className:"live-button",children:[(0,Ot.jsx)("div",{className:"button-icon"}),(0,Ot.jsx)("div",{className:"button-text",children:"Live Video"})]})]})}),(0,Ot.jsxs)(Nn,{isOpen:o,id:"create-post-modal",onRequestClose:c,title:"Create A Post",style:{width:y?"95%":"600px"},children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{className:"modal-title",children:"Create a Post"}),(0,Ot.jsx)("div",{onClick:c,className:"modal-close-btn",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsx)("div",{className:"modal-body",children:(0,Ot.jsxs)("div",{className:"cp-modal-container",children:[(0,Ot.jsxs)("div",{className:"cpm-header",children:[(0,Ot.jsx)("div",{className:"cpm-profilePic",children:(0,Ot.jsx)(Rn,{profilePic:n.profilePic,hasStory:v,profile:n._id})}),(0,Ot.jsx)("div",{className:"cpm-username",children:(0,Ot.jsx)("h3",{children:b})}),(0,Ot.jsx)("div",{className:"cpm-feelings-container ml-2",children:(0,Ot.jsxs)("select",{name:"feelings",onChange:w,className:"form-control",children:[(0,Ot.jsx)("option",{value:"0",children:"Select Feelings"}),(0,Ot.jsx)("option",{value:"funny",children:"Funny"}),(0,Ot.jsx)("option",{value:"lovely",children:"Lovely"}),(0,Ot.jsx)("option",{value:"sad",children:"Sad"})]})}),(0,Ot.jsx)("div",{className:"cpm-location-container",children:(0,Ot.jsx)("input",{type:"text",name:"location",onChange:w,className:"form-control",placeholder:"Location...."})})]}),(0,Ot.jsxs)("form",{className:"cpm-form",onSubmit:e=>{e.preventDefault()},children:[(0,Ot.jsx)("div",{className:"cpm-form-text",children:(0,Ot.jsx)("textarea",{name:"caption",onChange:w,placeholder:x,className:"cpm-form-text-input",value:f.caption})}),(0,Ot.jsxs)("div",{className:"cpm-attachment-control",children:[(0,Ot.jsx)("div",{className:"cpm-attachment-preview",children:(0,Ot.jsx)("img",{src:f.urls&&f.urls,alt:"attachment preview"})}),(0,Ot.jsxs)("div",{className:"cpm-attachment-upload",children:[(0,Ot.jsxs)("div",{className:"cpm-attachment-upload-overlay",children:[(0,Ot.jsx)("span",{className:"plus-icon"}),(0,Ot.jsx)("span",{className:"overlay-text",children:"Add Photos/Videos"})]}),(0,Ot.jsx)("input",{onChange:C,name:"photos_vidoes",type:"file"})]})]}),(0,Ot.jsxs)("div",{className:"cpm-attachment",children:[(0,Ot.jsx)("span",{className:"cpm-button-text",children:"Add to your post"}),(0,Ot.jsx)("div",{className:"post-meta-buttons",children:(0,Ot.jsx)("div",{onClick:e=>{let t=e.currentTarget;_n()(t).parents(".cpm-attachment").siblings(".cpm-attachment-control").slideToggle()},className:"attachment-button-file"})})]}),(0,Ot.jsx)("div",{className:"cpm-submit-button",children:(0,Ot.jsxs)("button",{onClick:S.bind(void 0),className:"button",disabled:s,type:"submit",children:["  ",f.urls||f.caption?1==s?"Media Uploading....":"Post Now":"Upload","  "]})})]})]})})]})]})})};const sa=e=>{let{children:t,style:n,className:r}=e;return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{style:d({zIndex:"999",position:"absolute",boxShadow:"1px #888",display:"none",padding:"10px"},n),className:r,children:t})})};const ua=()=>{let e=fn((e=>e.profile));const t="/"+JSON.parse(localStorage.getItem("user")||"{}").profile+"/";return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{id:"left-sidebar",className:"text-left",children:(0,Ot.jsxs)("ul",{className:"ls-nav-menu",children:[(0,Ot.jsx)("li",{children:(0,Ot.jsx)(_t,{to:t,className:"text-decoration-none",children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"ls-profile-img",children:(0,Ot.jsx)(Rn,{profilePic:e.profilePic,profile:e._id})}),(0,Ot.jsxs)("div",{className:"ls-text user-name",children:[e.user&&e.user.firstName," ",e.user&&e.user.surname]})]})})}),(0,Ot.jsx)("li",{children:(0,Ot.jsx)(_t,{to:"/friends/",className:"text-decoration-none",children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"ls-icon lsi-friends"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Find Friends"})]})})}),(0,Ot.jsx)("li",{children:(0,Ot.jsx)(_t,{to:"/groups/",className:"text-decoration-none",children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"ls-icon lsi-group"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Groups"})]})})}),(0,Ot.jsx)("li",{children:(0,Ot.jsx)(_t,{to:"/watch/",className:"text-decoration-none",children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"ls-icon lsi-watch"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Watch"})]})})}),(0,Ot.jsx)("li",{children:(0,Ot.jsx)(_t,{to:"/marketplace/",className:"text-decoration-none",children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"ls-icon lsi-mp"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Marketplace"})]})})}),(0,Ot.jsx)("li",{children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"ls-icon lsi-memo"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Memories"})]})}),(0,Ot.jsx)("li",{children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"lsi-star"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Favourites"})]})}),(0,Ot.jsx)("li",{children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"ls-icon lsi-pages"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Pages"})]})}),(0,Ot.jsx)("li",{children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"ls-icon lsi-saved"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Saved"})]})}),(0,Ot.jsx)("li",{children:(0,Ot.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Ot.jsx)("div",{className:"lsi-card"}),(0,Ot.jsx)("div",{className:"ls-text",children:"Orders & Payments"})]})})]})})})},la=()=>{const[e,t]=(0,a.useState)(window.matchMedia("(max-width: 768px)").matches);return(0,a.useEffect)((()=>{const e=window.matchMedia("(max-width: 768px)"),n=e=>t(e.matches);return e.addEventListener("change",n),()=>e.removeEventListener("change",n)}),[]),e};const ca=()=>{let[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),d=qe(),f=la();(0,a.useEffect)((()=>{u(!1)}),[d]);let h=e=>{u(!s)},p=()=>(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{onClick:h,className:"header-mm-button",style:{lineHeight:1},children:(0,Ot.jsx)("i",{className:"fa fa-bars"})})});let m=()=>{f||(_n()(".header-search-icon, .header-logo").hide(),_n()(".header-search-back-container").fadeIn("slow"),_n()(".header-search-icon, .header-logo-container").animate({left:"-10px",opacity:0},"fast"),_n()("#header-search").css({width:"100%",display:"block"}))};return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{className:"header-left",children:[(0,Ot.jsx)("div",{className:"header-logo-container",children:(0,Ot.jsx)(_t,{to:"/",children:(0,Ot.jsx)("img",{className:"header-logo",src:"https://programmerikram.com/wp-content/uploads/2025/05/ics_logo.png",alt:"logo"})})}),(0,Ot.jsxs)("div",{className:"header-mobile-menu-button-container",children:[f&&(0,Ot.jsx)(p,{}),s&&(0,Ot.jsx)(sa,{className:"header-mm-dropdown",style:{top:"100%",left:0,width:"300px",zIndex:"999999",display:"block"},children:(0,Ot.jsx)(ua,{})})]}),(0,Ot.jsx)("div",{className:"header-search-back-container",children:(0,Ot.jsx)("i",{onClick:e=>{i(!1)},className:"fal fa-arrow-left header-search-back-icon"})}),(0,Ot.jsxs)("div",{className:"header-search-container ".concat(1==o?"active-mobile":""),children:[(0,Ot.jsx)("i",{className:"fal fa-search header-search-icon",onClick:(e=>{f&&(i(!o),m())}).bind(void 0)}),(0,Ot.jsx)("input",{value:l,onChange:e=>{c(e.target.value)},onBlur:()=>{f||(_n()(".header-search-back-container").hide(),_n()(".header-search-icon, .header-logo-container").animate({left:"0",opacity:1},"fast"),_n()(".header-search-icon, .header-logo").fadeIn(),_n()("#header-search").css({width:"auto",display:"block"})),c("")},onFocus:m,onKeyUp:(async e=>{if(l.length>0){let e=await aa.get("search/",{params:{input:l}});200===e.status&&(t(e.data),r(e.data.length>0))}else t([]),r(!1)}).bind(void 0),id:"header-search",type:"search",placeholder:"Search ICS"}),n&&(0,Ot.jsxs)("ul",{className:"header-search-results",children:[e&&e.map(((e,t)=>(0,Ot.jsx)("li",{className:"search-result-item",onClick:()=>{r(!1),i(!1)},children:(0,Ot.jsxs)(_t,{to:"/"+e._id,children:[(0,Ot.jsx)("div",{className:"user-profile-pic",children:(0,Ot.jsx)(Rn,{profilePic:e.profilePic,profile:e._id})}),(0,Ot.jsx)("div",{className:"user-details",children:e.fullName})]})},t))),0===e.length&&(0,Ot.jsx)("p",{className:"text-small text-muted mb-0 text-center",children:"No Profile Found"})]})]})]})})};const da=()=>{let e=qe(),t=e=>{let t=e.currentTarget;_n()(t).siblings().removeClass("active"),_n()(t).addClass("active"),_n()(".header-nav-menu-item").children().children().removeClass("primary-color fas"),_n()(".header-nav-menu-item").children().children().addClass("fal"),_n()(e.currentTarget).children().children().addClass("primary-color fas"),_n()(e.currentTarget).children().children().removeClass("fal")};return(0,a.useEffect)((()=>{_n()(".header-nav-menu-item.active").siblings().removeClass("active"),_n()(".header-nav-menu-item.active").siblings().find("i").removeClass("primary-color"),_n()(".header-nav-menu-item.active").siblings().find("i").removeClass("fas"),_n()(".header-nav-menu-item.active").siblings().find("i").addClass("fal")}),[e]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{className:"header-nav-menu-container",children:(0,Ot.jsxs)("ul",{className:"header-nav-menu",children:[(0,Ot.jsx)(Nt,{to:"/",exact:"true",onClick:t,className:"header-nav-menu-item",title:"Home",children:(0,Ot.jsx)("div",{className:"header-nav-menu-icon",children:(0,Ot.jsx)("i",{className:"fal fa-home-alt "})})}),(0,Ot.jsx)(Nt,{to:"/friends",onClick:t,className:"header-nav-menu-item",title:"Friends",children:(0,Ot.jsx)("div",{className:"header-nav-menu-icon",children:(0,Ot.jsx)("i",{className:"fal fa-user-friends "})})}),(0,Ot.jsx)(Nt,{to:"/watch",onClick:t,className:"header-nav-menu-item",title:"Videos",children:(0,Ot.jsx)("div",{className:"header-nav-menu-icon",children:(0,Ot.jsx)("i",{className:"fal fa-play-circle"})})}),(0,Ot.jsx)(Nt,{to:"/message",onClick:t,className:"header-nav-menu-item",title:"Marketplace",children:(0,Ot.jsx)("div",{className:"header-nav-menu-icon",children:(0,Ot.jsx)("i",{className:"fal fa-envelope"})})}),(0,Ot.jsx)(Nt,{to:"/story",onClick:t,className:"header-nav-menu-item",title:"Story",children:(0,Ot.jsx)("div",{className:"header-nav-menu-icon",children:(0,Ot.jsx)("i",{className:"fal fa-images"})})})]})})})};var fa=n(1747),ha=n.n(fa);const pa="SET_LOGIN",ma="LOGOUT",va=e=>({type:pa,payload:e}),ga=Object.create(null);ga.open="0",ga.close="1",ga.ping="2",ga.pong="3",ga.message="4",ga.upgrade="5",ga.noop="6";const ya=Object.create(null);Object.keys(ga).forEach((e=>{ya[ga[e]]=e}));const ba={type:"error",data:"parser error"},xa="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),wa="function"===typeof ArrayBuffer,Ca=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ka=(e,t,n)=>{let{type:r,data:o}=e;return xa&&o instanceof Blob?t?n(o):Sa(o,n):wa&&(o instanceof ArrayBuffer||Ca(o))?t?n(o):Sa(new Blob([o]),n):n(ga[r]+(o||""))},Sa=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Ea(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let _a;const Na="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ta="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)Ta[Na.charCodeAt(n)]=n;const Ra="function"===typeof ArrayBuffer,Da=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Aa(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Ia(e.substring(1),t)};return ya[n]?e.length>1?{type:ya[n],data:e.substring(1)}:{type:ya[n]}:ba},Ia=(e,t)=>{if(Ra){const n=(e=>{let t,n,r,o,a,i=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const l=new ArrayBuffer(i),c=new Uint8Array(l);for(t=0;t<s;t+=4)n=Ta[e.charCodeAt(t)],r=Ta[e.charCodeAt(t+1)],o=Ta[e.charCodeAt(t+2)],a=Ta[e.charCodeAt(t+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|o>>2,c[u++]=(3&o)<<6|63&a;return l})(e);return Aa(n,t)}return{base64:!0,data:e}},Aa=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Oa=String.fromCharCode(30);function Ma(){return new TransformStream({transform(e,t){!function(e,t){xa&&e.data instanceof Blob?e.data.arrayBuffer().then(Ea).then(t):wa&&(e.data instanceof ArrayBuffer||Ca(e.data))?t(Ea(e.data)):ka(e,!1,(e=>{_a||(_a=new TextEncoder),t(_a.encode(e))}))}(e,(n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const e=new DataView(o.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{o=new Uint8Array(9);const e=new DataView(o.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(o[0]|=128),t.enqueue(o),t.enqueue(n)}))}})}let Pa;function ja(e){return e.reduce(((e,t)=>e+t.length),0)}function Fa(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function La(e){if(e)return function(e){for(var t in La.prototype)e[t]=La.prototype[t];return e}(e)}La.prototype.on=La.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},La.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},La.prototype.off=La.prototype.removeListener=La.prototype.removeAllListeners=La.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},La.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},La.prototype.emitReserved=La.prototype.emit,La.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},La.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ba="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Wa="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Ua(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const za=Wa.setTimeout,Ha=Wa.clearTimeout;function Va(e,t){t.useNativeTimers?(e.setTimeoutFn=za.bind(Wa),e.clearTimeoutFn=Ha.bind(Wa)):(e.setTimeoutFn=Wa.setTimeout.bind(Wa),e.clearTimeoutFn=Wa.clearTimeout.bind(Wa))}function qa(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Ga extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Ya extends La{constructor(e){super(),this.writable=!1,Va(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Ga(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Da(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Ka extends Ya{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Oa),r=[];for(let o=0;o<n.length;o++){const e=Da(n[o],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let o=0;e.forEach(((e,a)=>{ka(e,!1,(e=>{r[a]=e,++o===n&&t(r.join(Oa))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=qa()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let $a=!1;try{$a="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(QB){}const Xa=$a;function Qa(){}class Ja extends Ka{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class Za extends La{constructor(e,t,n){super(),this.createRequest=e,Va(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Ua(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(wu){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(wu){}try{n.setRequestHeader("Accept","*/*")}catch(wu){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(wu){return void this.setTimeoutFn((()=>{this._onError(wu)}),0)}"undefined"!==typeof document&&(this._index=Za.requestsCount++,Za.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Qa,e)try{this._xhr.abort()}catch(wu){}"undefined"!==typeof document&&delete Za.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Za.requestsCount=0,Za.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",ei);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Wa?"pagehide":"unload",ei,!1)}function ei(){for(let e in Za.requests)Za.requests.hasOwnProperty(e)&&Za.requests[e].abort()}const ti=function(){const e=ni({xdomain:!1});return e&&null!==e.responseType}();function ni(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Xa))return new XMLHttpRequest}catch(wu){}if(!t)try{return new(Wa[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(wu){}}const ri="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class oi extends Ya{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=ri?{}:Ua(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(QB){return this.emitReserved("error",QB)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;ka(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(wu){}r&&Ba((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=qa()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ai=Wa.WebSocket||Wa.MozWebSocket;const ii={websocket:class extends oi{createSocket(e,t,n){return ri?new ai(e,t,n):t?new ai(e,t):new ai(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Ya{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(QB){return this.emitReserved("error",QB)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Pa||(Pa=new TextDecoder);const n=[];let r=0,o=-1,a=!1;return new TransformStream({transform(i,s){for(n.push(i);;){if(0===r){if(ja(n)<1)break;const e=Fa(n,1);a=128===(128&e[0]),o=127&e[0],r=o<126?3:126===o?1:2}else if(1===r){if(ja(n)<2)break;const e=Fa(n,2);o=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(ja(n)<8)break;const e=Fa(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>Math.pow(2,21)-1){s.enqueue(ba);break}o=a*Math.pow(2,32)+t.getUint32(4),r=3}else{if(ja(n)<o)break;const e=Fa(n,o);s.enqueue(Da(a?e:Pa.decode(e),t)),r=0}if(0===o||o>e){s.enqueue(ba);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Ma();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const o=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),o())})).catch((e=>{}))};o();const a={type:"open"};this.query.sid&&(a.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(a).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&Ba((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Ja{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=ti&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new Za(ni,this.uri(),e)}}},si=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ui=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function li(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=si.exec(e||""),a={},i=14;for(;i--;)a[ui[i]]=o[i]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,a.query),a}const ci="function"===typeof addEventListener&&"function"===typeof removeEventListener,di=[];ci&&addEventListener("offline",(()=>{di.forEach((e=>e()))}),!1);class fi extends La{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=li(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=li(t.host).host);Va(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,o=n.length;r<o;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),ci&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},di.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&fi.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",fi.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"===typeof(t=r)?function(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ba((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(fi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ci&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=di.indexOf(this._offlineEventListener);-1!==e&&di.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}fi.protocol=4;class hi extends fi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;fi.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;fi.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function o(){n||(n=!0,l(),t.close(),t=null)}const a=e=>{const n=new Error("probe error: "+e);n.transport=t.name,o(),this.emitReserved("upgradeError",n)};function i(){a("transport closed")}function s(){a("socket closed")}function u(e){t&&e.name!==t.name&&o()}const l=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",i),this.off("close",s),this.off("upgrading",u)};t.once("open",r),t.once("error",a),t.once("close",i),this.once("close",s),this.once("upgrading",u),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class pi extends hi{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>ii[e])).filter((e=>!!e))),super(e,t)}}const mi="function"===typeof ArrayBuffer,vi=Object.prototype.toString,gi="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===vi.call(Blob),yi="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===vi.call(File);function bi(e){return mi&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||gi&&e instanceof Blob||yi&&e instanceof File}function xi(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(xi(e[t]))return!0;return!1}if(bi(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return xi(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&xi(e[n]))return!0;return!1}function wi(e){const t=[],n=e.data,r=e;return r.data=Ci(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ci(e,t){if(!e)return e;if(bi(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ci(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ci(e[r],t));return n}return e}function ki(e,t){return e.data=Si(e.data,t),delete e.attachments,e}function Si(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Si(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Si(e[n],t));return e}const Ei=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],_i=5;var Ni;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Ni||(Ni={}));class Ti{constructor(e){this.replacer=e}encode(e){return e.type!==Ni.EVENT&&e.type!==Ni.ACK||!xi(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Ni.EVENT?Ni.BINARY_EVENT:Ni.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Ni.BINARY_EVENT&&e.type!==Ni.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=wi(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Ri(e){return"[object Object]"===Object.prototype.toString.call(e)}class Di extends La{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ni.BINARY_EVENT;n||t.type===Ni.BINARY_ACK?(t.type=n?Ni.EVENT:Ni.ACK,this.reconstructor=new Ii(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!bi(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Ni[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Ni.BINARY_EVENT||n.type===Ni.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Di.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(wu){return!1}}static isPayloadValid(e,t){switch(e){case Ni.CONNECT:return Ri(t);case Ni.DISCONNECT:return void 0===t;case Ni.CONNECT_ERROR:return"string"===typeof t||Ri(t);case Ni.EVENT:case Ni.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Ei.indexOf(t[0]));case Ni.ACK:case Ni.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ii{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=ki(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Ai(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Oi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Mi extends La{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ai(e,"open",this.onopen.bind(this)),Ai(e,"packet",this.onpacket.bind(this)),Ai(e,"error",this.onerror.bind(this)),Ai(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,r;if(Oi.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];if(a.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const s={type:Ni.EVENT,data:a,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"===typeof a[a.length-1]){const e=this.ids++,t=a.pop();this._registerAckCallback(e,t),s.id=e}const u=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,l=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!u||(l?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var n,r=this;const o=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===o)return void(this.acks[e]=t);const a=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),o),i=function(){r.io.clearTimeoutFn(a);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.apply(r,n)};i.withError=!0,this.acks[e]=i}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(((t,r)=>{const o=(e,n)=>e?r(e):t(n);o.withError=!0,n.push(o),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];n(null,...a)}return r.pending=!1,t._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ni.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ni.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ni.EVENT:case Ni.BINARY_EVENT:this.onevent(e);break;case Ni.ACK:case Ni.BINARY_ACK:this.onack(e);break;case Ni.DISCONNECT:this.ondisconnect();break;case Ni.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];t.packet({type:Ni.ACK,id:e,data:o})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ni.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Pi(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Pi.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Pi.prototype.reset=function(){this.attempts=0},Pi.prototype.setMin=function(e){this.ms=e},Pi.prototype.setMax=function(e){this.max=e},Pi.prototype.setJitter=function(e){this.jitter=e};class ji extends La{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,Va(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Pi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||t;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new pi(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Ai(t,"open",(function(){n.onopen(),e&&e()})),o=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},a=Ai(t,"error",o);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),o(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ai(e,"ping",this.onping.bind(this)),Ai(e,"data",this.ondata.bind(this)),Ai(e,"error",this.onerror.bind(this)),Ai(e,"close",this.onclose.bind(this)),Ai(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(wu){this.onclose("parse error",wu)}}ondecoded(e){Ba((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Mi(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Fi={};function Li(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=li(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,o=n.id,a=n.path,i=Fi[o]&&a in Fi[o].nsps;let s;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?s=new ji(r,t):(Fi[o]||(Fi[o]=new ji(r,t)),s=Fi[o]),n.query&&!t.query&&(t.query=n.queryKey),s.socket(n.path,t)}Object.assign(Li,{Manager:ji,Socket:Mi,io:Li,connect:Li});let Bi=localStorage.getItem("user")||"{}",Wi=JSON.parse(Bi);const Ui=Li.connect("https://connectbd.onrender.com",{query:{profile:Wi.profile}}),zi=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsx)("li",{className:"message-list-item",children:(0,Ot.jsx)("div",{className:"skeleton-card mb-0 p-1 border-0",children:(0,Ot.jsxs)("div",{className:"skeleton-header mb-0",children:[(0,Ot.jsx)("div",{className:"skeleton-avatar"}),(0,Ot.jsxs)("div",{className:"skeleton-lines",children:[(0,Ot.jsx)("div",{className:"skeleton-line short"}),(0,Ot.jsx)("div",{className:"skeleton-line medium"})]})]})})},t)))};const Hi=JSON.parse(localStorage.getItem("user")||"{}").profile,Vi=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)({}),[o,i]=(0,a.useState)([]),[s,u]=(0,a.useState)(!1),l=(0,a.useRef)();$e(),qe();let c=fn((e=>e.profile))._id,d=fn((e=>e.message));(0,a.useEffect)((()=>(d&&d.map(((o,a)=>(r(o.person),i(o.messages),Ui.emit("is_active",{profileId:n._id,myId:Hi}),Ui.on("is_active",((n,r,o)=>{if(1==n&&!e.includes(o))return t([...e,o])})),()=>Ui.off("is_active")))),()=>Ui.off("is_active"))),[]),(0,a.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);let f=(0,a.useCallback)((async e=>{})),h=(0,a.useCallback)((async e=>{u(!s)})),p=()=>(0,Ot.jsx)("div",{className:"header-message-option-menu",style:{position:"relative",display:"inline-block"},ref:l,children:s&&(0,Ot.jsx)("div",{style:{position:"absolute",top:"15px",right:"0",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1e17,width:"200px"},children:(0,Ot.jsxs)("ul",{className:"message-option-menu",style:{listStyle:"none",margin:0,padding:"8px 0"},children:[(0,Ot.jsx)("li",{onClick:f,style:{padding:"8px 16px",cursor:"pointer"},children:"Mark All As Read"}),(0,Ot.jsx)("li",{style:{padding:"8px 16px",cursor:"pointer"},children:(0,Ot.jsx)(_t,{to:"/settings/message",children:"Message Settings"})})]})})});return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{className:"left-sidebar-container",children:[(0,Ot.jsxs)("div",{className:"message-leftside-header",children:[(0,Ot.jsx)("h2",{className:"message-leftside-title",children:"Chats"}),(0,Ot.jsx)("div",{className:"message-sidebar-header-menu",children:(0,Ot.jsxs)("div",{onClick:h,className:"header-menu-icons",children:[(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"}),s&&(0,Ot.jsx)(p,{})]})})]}),(0,Ot.jsx)("div",{className:"message-list-container",children:(0,Ot.jsx)("ul",{className:"message-list",children:d.length>0?d.map(((t,n)=>{var r;let o=t.person,a=t.messages||[],i=null===o||void 0===o?void 0:o.fullName,s=!!a[0]&&(a[0].senderId==c||a[0].isSeen),u=e.includes(o._id);return(0,Ot.jsx)(_t,{style:{textDecoration:"none"},to:"/message/".concat(o._id),children:(0,Ot.jsxs)("li",{className:"message-list-item ".concat(s?"message-seen":"message-unseen"),children:[(0,Ot.jsx)("div",{className:"user-profilePic",children:(0,Ot.jsx)(Rn,{profilePic:o.profilePic,profile:o._id,active:u})}),(0,Ot.jsxs)("div",{className:"user-data",children:[(0,Ot.jsx)("h4",{className:"message-author-name",children:i}),(0,Ot.jsxs)("p",{className:"last-message-data",children:[(0,Ot.jsxs)("span",{className:"last-message",children:[(l=a&&(null===(r=a[0])||void 0===r?void 0:r.message)||"",d=45,l.length>d?l.slice(0,d)+"...":l)," "]}),a&&a.length>0?(0,Ot.jsxs)("span",{className:"last-msg-time",children:["| ",(0,Ot.jsx)(ha(),{fromNow:!0,children:a&&a[0].timestamp})]}):(0,Ot.jsx)(Ot.Fragment,{})]})]})]})},n);var l,d})):(0,Ot.jsx)(zi,{count:5})})})]})})},qi="ADD_NOTIFICATION",Gi="ADD_NOTIFICATIONS",Yi="VIEW_NOTIFICATION",Ki="VIEW_NOTIFICATIONS",$i=function(e){return{type:Gi,payload:e,reset:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}};const Xi="/"+JSON.parse(localStorage.getItem("user")||"{}").profile+"/";const Qi=e=>{let{dispatch:t,useSelector:n}=e,r=n((e=>e.profile)),o=n((e=>e.option)),i=n((e=>e.notification)),s=n((e=>e.message)),[u,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[f,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)(0),[v,g]=(0,a.useState)(0),y=qe();const[b,x]=(0,a.useState)(null);let[w,C]=(0,a.useState)("https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png");Ye();const[k,S]=(0,a.useState)(!1),E=(0,a.useRef)(null);let _={maxHeight:o.bodyHeight-o.headerHeight-100+"px",overflowY:"scroll"};(0,a.useEffect)((()=>{null!==r&&void 0!==r&&r.profilePic&&C(r.profilePic)}),[r]),(0,a.useEffect)((()=>{l(!1),d(!1),h(!1)}),[y]),(0,a.useEffect)((()=>{let e=i.filter((e=>!1===e.isSeen));m(e.length)}),[i]),(0,a.useEffect)((()=>{let e=s.filter((e=>{var t;return e.messages.length>0&&e.messages[0].senderId!==r._id&&!1===(null===(t=e.messages[0])||void 0===t?void 0:t.isSeen)}));g(e.length)}),[s]);let N=(0,a.useCallback)((async e=>{let n=e.currentTarget.dataset.id;200==(await aa.post("/notification/view",{notificationId:n})).status&&t({type:Yi,payload:n})})),T=(0,a.useCallback)((async()=>{S(1!=k)})),R=(0,a.useCallback)((async e=>{let n=i.filter((e=>0==e.isSeen));console.log(n),n.map((async(e,n)=>{200==(await aa.post("/notification/viewall",{profile:r._id})).status&&t({type:Ki})}))})),D=(0,a.useCallback)((async e=>{200==(await aa.post("/notification/deleteall",{profile:r._id})).status&&(t($i([],!0)),h(!1))}));(0,a.useEffect)((()=>{const e=e=>{E.current&&!E.current.contains(e.target)&&S(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);let I=()=>(0,Ot.jsx)("div",{className:"header-notification-option-menu",style:{position:"relative",display:"inline-block"},ref:E,children:k&&(0,Ot.jsx)("div",{style:{position:"absolute",top:"20px",right:"0",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1e17,width:"200px"},children:(0,Ot.jsxs)("ul",{className:"notification-option-menu",style:{listStyle:"none",margin:0,padding:"8px 0"},children:[(0,Ot.jsx)("li",{onClick:R,style:{padding:"8px 16px",cursor:"pointer"},children:"Mark All As Read"}),(0,Ot.jsx)("li",{onClick:D,style:{padding:"8px 16px",cursor:"pointer"},children:"Delete All"}),(0,Ot.jsx)("li",{style:{padding:"8px 16px",cursor:"pointer"},children:(0,Ot.jsx)(_t,{to:"/settings/notification",children:"Notification Setting"})})]})})});return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{className:"header-quick-menu-container",children:(0,Ot.jsxs)("ul",{className:"header-quick-menu",children:[(0,Ot.jsx)("li",{onClick:e=>{l(!u),d(!1),h(!1)},className:"header-quick-menu-item ".concat(u?"active":""),title:"Message",children:(0,Ot.jsxs)("div",{className:"header-quick-menu-icon",children:[(0,Ot.jsx)("i",{className:"far fa-comment-alt-lines"}),v>0&&(0,Ot.jsx)("span",{className:"hr-counter-badge",children:(0,Ot.jsx)("span",{className:"counter",children:v})})]})}),u&&(0,Ot.jsx)(sa,{style:{right:"50%",zIndex:9999999999999,transform:"translateX(50%)",top:"101%",width:"300px",backgroundColor:"#242526",borderRadius:"5px",display:"block",boxShadow:"0px 0px 2px 0px rgba(255,255,255,0.3)"},className:"hr-mega-menu",children:(0,Ot.jsx)(Vi,{})}),(0,Ot.jsx)("li",{onClick:()=>{h(!f),d(!1),l(!1)},className:"header-quick-menu-item ".concat(f?"active":""),title:"",children:(0,Ot.jsxs)("div",{className:"header-quick-menu-icon",children:[(0,Ot.jsx)("i",{className:"far fa-bell"}),p>0&&(0,Ot.jsx)("span",{className:"hr-counter-badge",children:(0,Ot.jsx)("span",{className:"counter",children:p})})]})}),f&&(0,Ot.jsx)(sa,{style:{right:"50%",zIndex:999999999999,transform:"translateX(50%)",top:"101%",width:"300px",backgroundColor:"#242526",borderRadius:"5px",display:"block",boxShadow:"0px 0px 2px 0px rgba(255,255,255,0.3)"},className:"hr-mega-menu",children:(0,Ot.jsx)("div",{className:"hr-mm-container",children:i.length>0?(0,Ot.jsxs)("div",{className:"hr-notification-menu-container",children:[(0,Ot.jsxs)("div",{className:"notification-leftside-header",children:[(0,Ot.jsx)("h2",{className:"notification-leftside-title",children:"Notifications"}),(0,Ot.jsx)("div",{className:"notification-sidebar-header-menu",children:(0,Ot.jsxs)("div",{onClick:T,className:"header-menu-icons",children:[(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"}),k&&(0,Ot.jsx)(I,{})]})})]}),(0,Ot.jsx)("ul",{className:"hr-notification-menu",style:_,children:i.map(((e,t)=>(0,Ot.jsx)("li",{className:"hr-notification-item ".concat(0==e.isSeen&&"unseen"),"data-id":e._id,onClick:N.bind(void 0),children:(0,Ot.jsx)(_t,{to:e.link||"",children:(0,Ot.jsxs)("div",{className:"hr-notification-row align-items-center",children:[(0,Ot.jsx)("div",{className:"hr-notification-col-2",children:(0,Ot.jsx)("div",{className:"hr-notification-icon-continaer",children:(0,Ot.jsx)("img",{className:"hr-notification-icon",src:e.icon,alt:"Notification Icon"})})}),(0,Ot.jsxs)("div",{className:"hr-notification-col-10",children:[" ",(0,Ot.jsxs)("p",{className:"hr-notification-text",children:[e.text," . ",(0,Ot.jsx)(ha(),{fromNow:!0,children:e.timestamp})]})]})]})})},t)))})]}):(0,Ot.jsx)("p",{className:"text-muted text-center mb-0",children:"No Notification Found"})})}),(0,Ot.jsx)("li",{onClick:()=>{d(!c),l(!1),h(!1)},className:"header-quick-menu-item item-profile",title:"",children:(0,Ot.jsx)("div",{className:"profile-pic",children:(0,Ot.jsx)("img",{src:w,alt:"Author Name"})})}),c&&(0,Ot.jsx)(sa,{style:{right:"50%",transform:"translateX(50%)",top:"101%",width:"300px",backgroundColor:"#242526",borderRadius:"5px",display:"block",boxShadow:"0px 0px 2px 0px rgba(255,255,255,0.3)"},className:"hr-mega-menu",children:(0,Ot.jsxs)("div",{className:"hr-mm-container",children:[(0,Ot.jsx)(_t,{to:Xi,children:(0,Ot.jsxs)("div",{className:"all-profiles",children:[r&&(0,Ot.jsx)(Rn,{profilePic:w}),(0,Ot.jsxs)("span",{className:"text-capitalize",children:[" ",r.fullName?r.fullName:r.user&&r.user.firstName+" "+r.user.surname," "]})]})}),(0,Ot.jsxs)("div",{className:"profile-menus",children:[(0,Ot.jsxs)(_t,{to:"/settings",className:"profile-menu-item",children:[(0,Ot.jsx)("div",{className:"menu-item-icon",children:(0,Ot.jsx)("i",{className:"fa fa-cog"})}),(0,Ot.jsx)("span",{className:"menu-item-name",children:"Settings"})]}),(0,Ot.jsxs)(_t,{onClick:e=>{localStorage.removeItem("user"),t({type:ma}),window.location.reload()},to:"#",className:"profile-menu-item",children:[(0,Ot.jsx)("div",{className:"menu-item-icon",children:(0,Ot.jsx)("i",{className:"fa fa-sign-out-alt"})}),(0,Ot.jsx)("span",{className:"menu-item-name",children:"LogOut"})]})]})]})})]})})})},Ji="SET_HEADER_HEIGHT",Zi="SET_BODY_HEIGHT",es="SET_LOADING",ts=e=>({type:es,payload:e}),ns=()=>{const e=wn();qe(),fn((e=>e.profile)),$e();let t=(0,a.useRef)(null);const[n,r]=(0,a.useState)(null),o={dispatch:e,useSelector:fn};e((e=>({type:Ji,payload:e}))(n));let[i,s]=(0,a.useState)(window.matchMedia("(max-width: 768px)").matches);return(0,a.useEffect)((()=>{var e;(_n()(window).on("scroll",(e=>{if(window.pageYOffset>100){_n()("#header").addClass("sticky-header");let e=_n()("#header").height();_n()("#main-container").css("padding-top",e)}else _n()("#header").removeClass("sticky-header"),_n()("#main-container").css("padding-top",0)})),t.current)&&r(null===(e=t.current)||void 0===e?void 0:e.offsetHeight);window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{s(e.matches)}))}),[]),(0,Ot.jsxs)(a.Fragment,{children:[(0,Ot.jsx)("header",{ref:t,className:"header",id:"header",children:(0,Ot.jsx)(Vt,{className:"header-container",fluid:"xxl",children:(0,Ot.jsxs)(Yt,{children:[(0,Ot.jsx)(Qt,{className:"d-flex align-items-center",children:(0,Ot.jsx)(ca,{})}),!i&&(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(Qt,{className:"header-middle",md:6,xs:2,children:(0,Ot.jsx)(da,{})})}),(0,Ot.jsx)(Qt,{className:"header-right d-flex justify-content-end align-items-center",children:(0,Ot.jsx)(Qi,d({},o))})]})})}),(0,Ot.jsx)(ct,{})]})};for(var rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",os=new Map,as=0;as<64;as++){var is=as.toString(2);is="0".repeat(6-is.length)+is,os.set(rs.charCodeAt(as),is)}function ss(e){try{if("string"!=typeof e||3!==e.split(".").length)return null;var t=function(e){for(var t,n="",r=e.length,o=0;o<r;o++)t=e[o],n+=String.fromCodePoint(t>251&&t<254&&o+5<r?1073741824*(t-252)+(e[++o]-128<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:t>247&&t<252&&o+4<r?(t-248<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:t>239&&t<248&&o+3<r?(t-240<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:t>223&&t<240&&o+2<r?(t-224<<12)+(e[++o]-128<<6)+e[++o]-128:t>191&&t<224&&o+1<r?(t-192<<6)+e[++o]-128:t);return n}(function(e){for(var t="",n=0;n<e.length;n++)t+=os.get(e.charCodeAt(n));t=t.slice(0,t.length-t.length%8);for(var r=[],o=0;o<t.length/8;o++)r.push(t.slice(8*o,8*o+8));return r}(e.split(".")[1].replaceAll("=","").replaceAll("-","+").replaceAll("_","/")).map((function(e){return parseInt(e,2)})));return JSON.parse(t)}catch(e){return console.error("There was an error decoding token: ",e),null}}function us(e){var t=(0,a.useState)(!1),n=t[0],r=t[1],o=(0,a.useState)(null),i=o[0],s=o[1];(0,a.useEffect)((function(){u(e)}),[e]);var u=function(e){s(ss(e)),r(function(e){var t=ss(e),n=!0;if(t&&t.exp){var r=new Date(0);r.setUTCSeconds(t.exp),n=r.valueOf()<(new Date).valueOf()}return n}(e))};return{isExpired:n,decodedToken:i,reEvaluateToken:u}}const ls=e=>{let{children:t}=e,{token:n}=fn((e=>e.auth)),r=Ye(),o=qe();const{isExpired:i}=us(n)||!1;return(0,a.useEffect)((()=>{n&&!i||r("/login")}),[n,o]),(0,Ot.jsx)(Ot.Fragment,{children:t})},cs=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsx)("li",{className:"rs-nav-menu-item",children:(0,Ot.jsx)("div",{className:"skeleton-card mb-0 p-1 border-0",children:(0,Ot.jsxs)("div",{className:"skeleton-header mb-0",children:[(0,Ot.jsx)("div",{className:"skeleton-avatar"}),(0,Ot.jsx)("div",{className:"skeleton-lines",children:(0,Ot.jsx)("div",{className:"skeleton-line medium"})})]})})},t)))};const ds=()=>{$e();let e=Ye(),t=localStorage.getItem("user")?localStorage.getItem("user"):"{}",{profile:n}=JSON.parse(t),r=fn((e=>e.profile)),[o,i]=(0,a.useState)([]);const[s,u]=(0,a.useState)([]);(0,a.useEffect)((()=>(r.friends&&r.friends.map(((e,t)=>(Ui.emit("is_active",{profileId:e._id,myId:r._id}),Ui.on("is_active",((e,t,n)=>{if(1==e&&!s.includes(n))return u([...s,n])})),()=>Ui.off("is_active")))),()=>Ui.off("is_active"))),[r,setTimeout((()=>!0)),[2e3]]),(0,a.useEffect)((()=>{i(r.friends)}),[r]);let l=t=>{let n=t.currentTarget.dataset.profile;e("/message/"+n)};return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"right-sidebar",className:"text-left",children:[(0,Ot.jsx)("h3",{className:"rs-nav-title",children:"Contacts"}),(0,Ot.jsx)("ul",{className:"rs-nav-menu",children:o&&o.length>1?o.map(((e,t)=>{let n=s.includes(e._id);return(0,Ot.jsx)("li",{children:(0,Ot.jsxs)("div",{className:"rs-nav-menu-item","data-profile":e._id,onClick:l.bind(void 0),children:[(0,Ot.jsxs)("div",{className:"rs-profile-img-container",children:[(0,Ot.jsx)("div",{className:"active-icon"}),(0,Ot.jsx)("div",{className:"rs-profile-img",children:(0,Ot.jsx)(Rn,{profilePic:"".concat(e.profilePic),profile:e._id,active:n})})]}),(0,Ot.jsx)("div",{className:"rs-text user-name",children:e.fullName?e.fullName:e.user.firstName+" "+e.user.surname})]})},t)})):(0,Ot.jsx)(cs,{count:10})})]})})},fs=e=>{let{item:t,myProfile:n,setReplies:r,comment:o,replies:i,isEditMode:s}=e,u=n._id,[l,c]=(0,a.useState)(!1),[f,h]=(0,a.useState)(null===t||void 0===t?void 0:t.reacts.length),[p,m]=(0,a.useState)(!1),[v,g]=(0,a.useState)({body:null,attachment:null});return(0,Ot.jsxs)("div",{className:"reply-container",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:t.author.profilePic,profile:t.author._id})}),(0,Ot.jsxs)("div",{className:"comment-info",children:[(0,Ot.jsxs)("div",{className:"comment-box",children:[(0,Ot.jsxs)("div",{className:"name-comment",children:[(0,Ot.jsx)("div",{className:"author-name",children:(0,Ot.jsx)(_t,{to:"/".concat(t.author._id),children:t.author.fullName})}),(0,Ot.jsx)("p",{className:"comment-text",children:t.body})]}),(t.author._id==u||s)&&(0,Ot.jsxs)("div",{className:"options-icon",onClick:(e=>{c(!l)}).bind(void 0),children:[(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Ot.jsx)("div",{className:"options-container ".concat(l&&"open"),children:(0,Ot.jsx)("button",{"data-id":t._id,onClick:(async e=>{let t=e.currentTarget.dataset.id;200===(await aa.post("/comment/deleteReply",{replyId:t})).status&&_n()(e.target).parents(".reply-container").remove()}).bind(void 0),className:"comment-option text-danger",children:"Delete Reply"})})]})]}),(0,Ot.jsxs)("div",{className:"comment-react",children:[(0,Ot.jsxs)("div",{className:"like button ".concat(t.reacts.includes(u)&&"reacted"),onClick:(async e=>{let t=e.target.dataset.id;if(_n()(e.target).hasClass("reacted")){200==(await aa.post("/comment/reply/removeReact",{replyId:t,myId:u})).status&&(h(f-1),_n()(e.target).removeClass("reacted"))}else{200===(await aa.post("/comment/reply/addReact",{replyId:t,myId:u})).status&&(h(f+1),_n()(e.target).addClass("reacted"))}}).bind(void 0),"data-id":t._id,children:["Like ","".concat(f>0?"(".concat(f,")"):"")]}),(0,Ot.jsx)("div",{className:"reply button",onClick:(e=>{m(!p)}).bind(void 0),"data-id":t._id,children:"Reply"}),(0,Ot.jsx)("div",{className:"comment-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:t.createdAt})})]}),p&&(0,Ot.jsx)("div",{className:"new-reply",children:(0,Ot.jsxs)("div",{className:"comment-field",children:[(0,Ot.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode){let e=o._id;if(v){let t=await aa.post("/comment/addReply",{replyMsg:v.body,authorId:n._id,commentId:e});if(200===t.status){m(!1);let e=t.data;r((t=>[...t,e]))}}}},onChange:(async e=>{g((t=>d(d({},t),{},{body:e.target.value})))}).bind(void 0),className:"field-comment-text",type:"text","data-reply":t._id,placeholder:"Reply to ".concat(t.author.fullName)}),(0,Ot.jsx)("div",{onClick:(async e=>{let t=o._id;if(v){let e=await aa.post("/comment/addReply",{replyMsg:v.body,authorId:n._id,commentId:t});if(200===e.status){m(!1);let t=e.data._id;r((e=>[...e,t]))}}}).bind(void 0),"data-reply":t._id,className:"comment-attachment",children:(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-paper-plane"})})})]})})]})]})},hs=e=>{let{comment:t,postData:n,myProfile:r,isEditMode:o}=e,i=r._id,[s,u]=(0,a.useState)(0),[l,c]=(0,a.useState)(!1),[f,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null===t||void 0===t?void 0:t.replies);const v=n;(0,a.useEffect)((()=>{u(t.reacts.length||0),c(t.reacts.includes(i))}),[t]);let[g,y]=(0,a.useState)({body:null,attachment:null});return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"comment-container comment-id-".concat(t._id),children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:t.author.profilePic,profile:t.author._id})}),(0,Ot.jsxs)("div",{className:"comment-info",children:[(0,Ot.jsxs)("div",{className:"comment-box",children:[(0,Ot.jsxs)("div",{className:"name-comment",children:[(0,Ot.jsx)("div",{className:"author-name",children:(0,Ot.jsx)(_t,{to:"/".concat(t.author._id),children:t.author.user.firstName+" "+t.author.user.surname})}),(0,Ot.jsx)("p",{className:"comment-text",children:t.body}),t.attachment&&(0,Ot.jsx)("div",{className:"comment-attachment-container",children:(0,Ot.jsx)("img",{src:t.attachment,alt:"attachment"})})]}),t.author._id==r._id||o?(0,Ot.jsxs)("div",{onClick:e=>{_n()(e.currentTarget).children(".options-container").hasClass("open")?_n()(e.currentTarget).children(".options-container").removeClass("open"):_n()(e.currentTarget).children(".options-container").addClass("open")},className:"options-icon",children:[(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Ot.jsx)("div",{className:"options-container",children:(0,Ot.jsx)("button",{dataid:t._id,onClick:(async e=>{try{let t=_n()(e.currentTarget).attr("dataid"),n=v._id;_n()(e.currentTarget).parents(".comment-container").remove(),(await aa.post("/comment/deleteComment",{commentId:t,postId:n})).status}catch(t){console.log(t)}}).bind(void 0),className:"comment-option text-danger",children:"Delete Comment"})})]}):""]}),(0,Ot.jsxs)("div",{className:"comment-react",children:[(0,Ot.jsxs)("div",{className:"like button ".concat(l?"reacted":""),onClick:(async e=>{let t=e.currentTarget.dataset.id;if(_n()(e.currentTarget).hasClass("reacted")){200==(await aa.post("/comment/removeReact",{commentId:t,reactorId:i})).status&&(_n()(e.target).removeClass("reacted"),u((e=>e-1)))}else{200==(await aa.post("/comment/addReact",{commentId:t,reactorId:i})).status&&(u((e=>e+1)),_n()(e.target).addClass("reacted"))}}).bind(void 0),"data-id":t._id,children:["Like ","".concat(s>0?"("+s+")":"")]}),(0,Ot.jsx)("div",{className:"reply button","data-id":t._id,onClick:(async e=>{h(!f)}).bind(void 0),children:"Reply"}),(0,Ot.jsx)("div",{className:"comment-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:t.createdAt})})]}),f&&(0,Ot.jsx)("div",{className:"new-reply",children:(0,Ot.jsxs)("div",{className:"comment-field",children:[(0,Ot.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode){let t=e.currentTarget.dataset.comment;if(g){let e=await aa.post("/comment/addReply",{replyMsg:g.body,authorId:r._id,commentId:t});if(200==e.status){h(!1);let t=e.data;m((e=>[...e,t]))}}}},onChange:(async e=>{y((t=>d(d({},t),{},{body:e.target.value})))}).bind(void 0),className:"field-comment-text",type:"text","data-comment":t._id,placeholder:"Reply to ".concat(t.author.displayName||t.author.user.surname)}),(0,Ot.jsx)("div",{onClick:(async e=>{let t=e.currentTarget.dataset.comment;if(g){let e=await aa.post("/comment/addReply",{replyMsg:g.body,authorId:r._id,commentId:t});if(200==e.status){h(!1);let t=e.data;m((e=>[...e,t]))}}}).bind(void 0),"data-comment":t._id,className:"comment-attachment",children:(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-paper-plane"})})})]})}),p.map(((e,n)=>(0,Ot.jsx)(fs,{isEditMode:o,setReplies:m,replies:p,comment:t,item:e,myProfile:r},n)))]})]})})};const ps=e=>{let{post:t,authProfilePicture:n,authProfile:r,myProfile:o,setAllComments:i,allComments:s=[],commentState:u,isEditMode:l}=e;o._id;const c=qe();let[f,h]=(0,a.useState)(c.pathname.includes("/".concat(((null===t||void 0===t?void 0:t._id)||"").toString())));(0,a.useEffect)((()=>{h(c.pathname.includes("/".concat(((null===t||void 0===t?void 0:t._id)||"").toString())))}),[[],c]);let[p,m]=(0,a.useState)(null),[v,g]=(0,a.useState)({body:null,attachment:null});return(0,Ot.jsxs)(a.Fragment,{children:[(0,Ot.jsxs)("div",{className:"comments",children:[s.slice(f?-s.length-1:-3).map(((e,n)=>e&&(0,Ot.jsx)(hs,{isEditMode:l,comment:e,postData:t,myProfile:o},n))),(null===t||void 0===t?void 0:t.comments.length)>3&&!f&&(0,Ot.jsxs)("div",{className:"more-comment-button",children:[" ",(0,Ot.jsx)(_t,{to:"/post/".concat(t._id),children:"View more comments"})]})]}),(0,Ot.jsxs)("div",{className:"new-comment",children:[(0,Ot.jsx)("div",{className:"user-pp",children:(0,Ot.jsx)(Rn,{profilePic:n,profile:r})}),(0,Ot.jsxs)("div",{className:"comment-field",children:[(0,Ot.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode)try{e.target.value="";let n=new FormData;n.append("body",null==v.body?"":v.body),n.append("attachment",null==p?"":p),n.append("post",t._id);let r=await aa.post("/comment/addComment",{body:v.body,attachment:p,post:t._id.toString()}),a={body:v.body,author:o,post:t._id,reacts:[],replies:[]};if(i((e=>[...e,a])),200===r.status){r.data.author=o,g([]),u((e=>e+1))}}catch(n){console.log(n)}},onChange:async e=>{g((t=>d(d({},t),{},{body:e.target.value})))},className:"field-comment-text",type:"text",placeholder:"Write a Public Comment"}),(0,Ot.jsxs)("div",{onClick:async e=>{let t=e.currentTarget;_n()(t).children("input").trigger("click")},className:"comment-attachment",children:[(0,Ot.jsx)("input",{onChange:async e=>{g((e=>d(d({},e),{},{attachment:"https://programmerikram.com/wp-content/uploads/2025/03/loading.gif"})));let t=new FormData;t.append("image",e.target.files[0]);let n=await aa.post("/upload/",t,{headers:{"content-type":"multipart/form-data"}});n&&setTimeout((()=>{let e=n.data.secure_url;m(e),g((t=>d(d({},t),{},{attachment:e})))}),1e3)},className:"attachment",type:"file"}),(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-camera"})})]})]})]}),(0,Ot.jsx)("div",{className:"comment-attachment-preview",children:v.attachment&&(0,Ot.jsx)("img",{alt:"comment attachment",src:v.attachment})})]})};var ms=n(917);const vs=e=>{let{count:t=1,style:n}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsx)("div",{className:"pp-skleton-container",style:{backgroundColor:"gray"},children:(0,Ot.jsx)("div",{style:{padding:0},className:"skeleton-card no-border",children:(0,Ot.jsx)("div",{style:{padding:0},className:"skeleton-main"})})},t)))},gs=e=>{try{return new URL(e),!0}catch(QB){return!1}},ys="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",bs="https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",xs="https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg";const ws=e=>{let{data:t,postContainer:n,index:r}=e,o=t||{},i=fn((e=>e.profile)),s=i._id,u=null===o||void 0===o?void 0:o.author._id,[l,c]=(0,a.useState)(o.reacts.length),[d,f]=(0,a.useState)(o.shares.length),[h,p]=(0,a.useState)(o.comments.length),[m,v]=(0,a.useState)(o.comments),[g,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),[k,S]=(0,a.useState)(""),[E,_]=(0,a.useState)([]),[N,T]=(0,a.useState)(!1),[R,D]=(0,a.useState)(!1),[I,A]=(0,a.useState)([]);const[O,M]=(0,a.useState)(!1);let P=la(),j=Ye(),F=(0,a.useRef)([]),L=(0,a.useRef)();(0,a.useEffect)((()=>(Ui.emit("is_active",{profileId:u,myId:s}),Ui.on("is_active",((e,t,n)=>{n===s&&y(e)})),()=>Ui.off("is_active"))),[i]);var B=s===u;o.author.profilePic;(0,a.useEffect)((()=>{let e=[];o.reacts.map((t=>{if(t.profile){switch(t.type){case"like":e.includes("like")||e.push("like");break;case"love":e.includes("love")||e.push("love");break;case"haha":e.includes("haha")||e.push("haha")}t.profile===s&&(x(t.type),C(!0))}})),_(e)}),[]);let W=o.photos,U=o.type||"post";(0,a.useEffect)((()=>{Tn(W,M)}),[W]);let z=async e=>{let t=e.currentTarget;B?(0,ms.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{let e=await aa.post("/post/delete",{postId:o._id,authorId:o.author._id});200===e.status?(_n()(t).parents(".nf-post").css({"min-height":"0px",padding:"10px"}),_n()(t).parents(".nf-post").html('<p class="fs-6 mb-0 text-center text-danger">'+e.data.message+"</p>")):alert("Failed to delete post")}},{label:"No",onClick:()=>{}}]}):_n()(t).parents(".nf-post").hide()},H=async function(){if(c((e=>e-1)),x(!1),200===(await aa.post("/react/removeReact",{id:o._id,postType:"post",reactor:s})).status)return C(!1),!0;c((e=>e+1))},V=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";if(w||c((e=>e+1)),_([...E,e]),x(e),200===(await aa.post("/react/addReact",{id:o._id,postType:t,reactType:e})).status)return C(!0),!0;c(o.reacts),_([...E]),x(!1)},q=async e=>{let t=e.currentTarget;_n()(t).parent().hasClass("reacted")?(H("post"),_n()(t).parent().removeClass("reacted")):(V("like","post",t),_n()(t).parent().addClass("reacted"))},G=async e=>{let t=e.currentTarget;_n()(t).parents(".post-react-container").css("visibility","hidden"),_n()(t).hasClass("reacted")?(H("post"),_n()(t).removeClass("reacted")):(V("like","post",t),_n()(t).addClass("reacted"),_n()(e.currentTarget).siblings().removeClass("reacted")),setTimeout((()=>{_n()(t).parents(".post-react-container").css("visibility","visible")}),500)},Y=e=>{let t=e.currentTarget;_n()(t).parents(".post-react-container").css("visibility","hidden"),_n()(e.currentTarget).hasClass("reacted")?(H("post"),_n()(e.currentTarget).removeClass("reacted")):(V("love","post"),_n()(e.currentTarget).siblings().removeClass("reacted"),_n()(e.currentTarget).addClass("reacted")),setTimeout((()=>{_n()(t).parents(".post-react-container").css("visibility","visible")}),500)},K=e=>{let t=e.currentTarget;_n()(t).parents(".post-react-container").css("visibility","hidden"),_n()(e.currentTarget).hasClass("reacted")?(H(),_n()(e.currentTarget).removeClass("reacted")):(V("haha","post",t),_n()(e.currentTarget).siblings().removeClass("reacted"),_n()(e.currentTarget).addClass("reacted")),setTimeout((()=>{_n()(t).parents(".post-react-container").css("visibility","visible")}),500)},$=e=>{let t=e.currentTarget;_n()(t).children(".post-react-container").css("visibility","visible")},X=e=>{let t=e.currentTarget;_n()(t).parents(".footer").find(".field-comment-text").focus()},Q=e=>{T(!0)},J=()=>{T(!1)},Z=(0,a.useCallback)((async e=>{e.preventDefault(),200==(await aa.post("post/share",{postId:o._id,caption:k})).status&&(f((e=>e+1)),T(!1))})),ee=fn((e=>e.profile.profilePic)),te=fn((e=>e.profile._id)),ne=e=>{j("/post/".concat(o._id))},re="".concat(o.author.profilePic),oe=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=e=>{oe.current&&!oe.current.contains(e.target)&&D(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);let ae=(0,a.useCallback)((e=>{D(!R)}));const ie=(0,a.useRef)(new Set);(0,a.useEffect)((()=>{const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{const n=Number(e.target.dataset.index);var r;e.isIntersecting&&!ie.current.has(n)&&(ie.current.add(n),r=e.target.dataset.id,console.log("Post ".concat(r," is now visible \u2014 triggered once")),Ui.emit("viewPost",{visitorId:s,postId:r}),t.unobserve(e.target))}))}),{root:n.current,threshold:.5});return F.current.forEach((t=>t&&e.observe(t))),()=>{e.disconnect()}}),[]);let se=()=>"share"===U?(0,Ot.jsxs)("div",{"data-id":o._id,ref:e=>F.current[r]=e,"data-index":r,className:"share-nf-post nf-post",children:[(0,Ot.jsxs)("div",{className:"header",children:[(0,Ot.jsx)("div",{className:"reason",children:(0,Ot.jsxs)("span",{className:"",children:[(0,Ot.jsx)("b",{children:(0,Ot.jsx)(_t,{to:"/".concat(o.author._id),children:o.author.fullName})})," Shared ",(0,Ot.jsxs)("b",{children:[(0,Ot.jsxs)(_t,{to:"/".concat(null===o||void 0===o?void 0:o.parentPost.author._id),children:[null===o||void 0===o?void 0:o.parentPost.author.fullName,"'s"]})," "]}),(0,Ot.jsx)("span",{className:"text-capitalize",children:null===o||void 0===o?void 0:o.parentPost.type})]})}),(0,Ot.jsxs)("div",{className:"author-info",children:[(0,Ot.jsxs)("div",{className:"left",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:o.author.profilePic,profile:o.author._id,active:!1})}),(0,Ot.jsxs)("div",{className:"post-nd-container",children:[(0,Ot.jsx)(_t,{to:"/"+o.author._id,children:(0,Ot.jsx)("h4",{className:"author-name",children:o.author.fullName})}),(0,Ot.jsx)("span",{className:"post-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:o.createdAt})})]})]}),(0,Ot.jsxs)("div",{className:"right",children:[(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsx)("button",{onClick:ae.bind(void 0),className:"post-three-dot",children:(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"})}),R&&(0,Ot.jsx)("div",{className:"post-option-menu",ref:oe,children:(0,Ot.jsxs)("ul",{children:[B&&(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsx)("li",{children:(0,Ot.jsx)(_t,{to:"/post/".concat(o._id,"/edit"),children:"Edit Post"})}),(0,Ot.jsx)("li",{children:"Edit Audience"})]}),(0,Ot.jsx)("li",{children:"Report This Post"})]})})]}),(0,Ot.jsxs)("button",{onClick:z.bind(void 0),className:"post-close",children:[" ",(0,Ot.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Ot.jsxs)("div",{ref:L,"data-id":o._id,className:"body",children:[(0,Ot.jsx)("p",{className:"caption",children:o.caption}),(0,Ot.jsxs)("div",{className:"nf-post ".concat(U," m-3 border overflow-hidden"),children:[(0,Ot.jsxs)("div",{className:"header",children:["profilePic"===U&&(0,Ot.jsxs)("div",{className:"reason",children:[(0,Ot.jsx)("span",{className:"d-none",children:(0,Ot.jsx)("b",{children:"Shared a photos"})}),(0,Ot.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Ot.jsxs)("div",{className:"author-info",children:[(0,Ot.jsxs)("div",{className:"left",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:null===o||void 0===o?void 0:o.parentPost.author.profilePic,profile:null===o||void 0===o?void 0:o.parentPost.author._id,active:g})}),(0,Ot.jsxs)("div",{className:"post-nd-container",children:[(0,Ot.jsx)(_t,{to:"/"+o.author._id,children:(0,Ot.jsx)("h4",{className:"author-name",children:null===o||void 0===o?void 0:o.parentPost.author.fullName})}),(0,Ot.jsx)("span",{className:"post-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:null===o||void 0===o?void 0:o.parentPost.createdAt})})]})]}),(0,Ot.jsx)("div",{className:"right"})]})]}),(0,Ot.jsxs)("div",{className:"body",children:[(0,Ot.jsx)("p",{className:"caption",children:null===o||void 0===o?void 0:o.parentPost.caption}),O&&gs(W)?(0,Ot.jsxs)(Ot.Fragment,{children:[" ",(0,Ot.jsx)("div",{className:"attachment",children:(0,Ot.jsx)(_t,{to:"/post/".concat(o._id),children:(0,Ot.jsx)("img",{src:W,alt:"post"})})})]}):(0,Ot.jsx)(Ot.Fragment,{children:gs(W)&&(0,Ot.jsx)(vs,{})})]})]})]}),(0,Ot.jsxs)("div",{className:"footer",children:[(0,Ot.jsxs)("div",{className:"react-count",children:[(0,Ot.jsxs)("div",{className:"reacts",children:[E.includes("like")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:ys,alt:"like"}),"  "]}):(0,Ot.jsx)("span",{}),E.includes("love")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:bs,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),E.includes("haha")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:xs,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),(0,Ot.jsxs)("span",{className:"text",children:[o.reacts&&l," ",l>1?"Reacts":"React"]})]}),(0,Ot.jsxs)("div",{className:"comment-share",children:[(0,Ot.jsxs)("div",{className:"comment",children:[(0,Ot.jsx)("div",{className:"text",children:o.comments&&h}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Ot.jsxs)("div",{className:"shares",children:[(0,Ot.jsx)("div",{className:"text",children:o.shares&&d}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Ot.jsx)("div",{className:"like-comment-share",children:(0,Ot.jsxs)("div",{className:"buttons-container",children:[(0,Ot.jsxs)("div",{className:"react-buttons button ".concat(b?"reacted":""),children:[(0,Ot.jsxs)("div",{onClick:q,onMouseOver:$,className:"react-like ".concat(1==b?"reacted":""),children:[(0,Ot.jsxs)("span",{className:"react-icon",datatype:b||"",children:["haha"==b?(0,Ot.jsx)("img",{src:xs,alt:"haha"}):(0,Ot.jsx)("span",{}),"love"==b?(0,Ot.jsx)("img",{src:bs,alt:"love"}):(0,Ot.jsx)("span",{}),0==b||"like"==b?(0,Ot.jsx)("img",{src:ys,alt:"like"}):(0,Ot.jsx)("span",{})]}),(0,Ot.jsx)("span",{className:"text text-capitalize",children:b||"like"})]}),(0,Ot.jsxs)("div",{className:"post-react-container",children:[(0,Ot.jsx)("div",{className:"react react-like ".concat("like"==b?"reacted":""),onClick:G,id:"postReactLike",title:"Like",children:(0,Ot.jsx)("img",{src:ys,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-love ".concat("love"==b?"reacted":""),onClick:Y,id:"postReactLove",title:"Love",children:(0,Ot.jsx)("img",{src:bs,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-haha ".concat("haha"==b?"reacted":""),onClick:K,id:"postReactHaha",title:"Haha",children:(0,Ot.jsx)("img",{src:xs,alt:"haha"})})]})]}),(0,Ot.jsxs)("div",{onClick:X,className:"comment button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})}),(0,Ot.jsx)("span",{className:"text",children:"Comment"})]}),!B&&(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsxs)("div",{onClick:Q,className:"share button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-share"})}),(0,Ot.jsx)("span",{className:"text",children:"Share"})]}),(0,Ot.jsxs)(Nn,{title:"Share Post",style:{width:P?"95%":"600px",top:"50%"},isOpen:N,onRequestClose:J,id:"cp-view-modal",children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{}),(0,Ot.jsx)("div",{onClick:J,className:"modal-close-btn text-danger",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsx)("div",{className:"modal-body",children:(0,Ot.jsxs)("div",{className:"share-post-container",children:[(0,Ot.jsxs)("div",{className:"share-post-header",children:[(0,Ot.jsxs)("div",{className:"row",children:[(0,Ot.jsx)("div",{className:"col-1",children:(0,Ot.jsx)(Rn,{profilePic:i.profilePic})}),(0,Ot.jsx)("div",{className:"col-3",children:(0,Ot.jsx)("h3",{children:i.fullName})})]}),(0,Ot.jsx)("div",{className:"row",children:(0,Ot.jsxs)("div",{className:"col",children:["You're Sharing ",o.author.fullName||"Someone","'s Post"]})})]}),(0,Ot.jsxs)("div",{className:"share-post-body my-3",children:[(0,Ot.jsx)("textarea",{className:"form-control",rows:"3",placeholder:"What's On Your Mind?",onChange:e=>S(e.target.value),value:k}),(0,Ot.jsx)("div",{className:"share-post-button text-end mt-2",children:(0,Ot.jsx)("button",{className:"btn btn-primary",onClick:Z.bind(void 0),children:"Share Now"})})]}),(0,Ot.jsx)("div",{className:"share-post-footer"})]})})]})]})]})}),(0,Ot.jsx)(ps,{post:o,commentState:p,allComments:m,setAllComments:v,myProfile:i,authProfile:te,authProfilePicture:ee})]})]}):(0,Ot.jsxs)("div",{"data-id":o._id,ref:e=>F.current[r]=e,"data-index":r,className:"nf-post ".concat(U),children:[(0,Ot.jsxs)("div",{className:"header",children:["profilePic"===U&&(0,Ot.jsxs)("div",{className:"reason",children:[(0,Ot.jsxs)("span",{className:"d-none",children:[(0,Ot.jsx)("b",{children:"A bitch"})," commented."]}),(0,Ot.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Ot.jsxs)("div",{className:"author-info",children:[(0,Ot.jsxs)("div",{className:"left",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:re,profile:o.author._id,active:g})}),(0,Ot.jsxs)("div",{className:"post-nd-container",children:[(0,Ot.jsxs)("h4",{className:"author-name",onClick:ne.bind(void 0),children:[(0,Ot.jsx)(_t,{to:"/"+o.author._id,children:o.author.fullName}),o.fellings&&(0,Ot.jsxs)("span",{className:"post-feelings",children:[" ",(0,Ot.jsx)("small",{className:"text-lowercase text-secondary",children:"is felling"})," ",o.fellings||""]}),o.location&&(0,Ot.jsxs)("span",{className:"post-location",children:[" ",(0,Ot.jsx)("small",{className:"text-lowercase text-secondary",children:" at"})," ",o.location||""]})]}),(0,Ot.jsx)("span",{className:"post-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:o.createdAt})})]})]}),(0,Ot.jsxs)("div",{className:"right",children:[(0,Ot.jsx)("button",{onClick:ae.bind(void 0),className:"post-three-dot",children:(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"})}),R&&(0,Ot.jsx)("div",{className:"post-option-menu",ref:oe,children:(0,Ot.jsxs)("ul",{children:[B&&(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsx)("li",{children:"Edit Post"}),(0,Ot.jsx)("li",{children:"Edit Audience"})]}),(0,Ot.jsx)("li",{children:"Report This Post"})]})}),(0,Ot.jsxs)("button",{onClick:z.bind(void 0),className:"post-close",children:[" ",(0,Ot.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Ot.jsxs)("div",{ref:L,"data-id":o._id,className:"body",children:[(0,Ot.jsx)("p",{className:"caption",children:o.caption}),O&&gs(W)?(0,Ot.jsxs)(Ot.Fragment,{children:[" ",(0,Ot.jsx)("div",{className:"attachment",children:(0,Ot.jsx)(_t,{to:"/post/".concat(o._id),children:(0,Ot.jsx)("img",{src:W,alt:"post"})})})]}):(0,Ot.jsx)(Ot.Fragment,{children:gs(W)&&(0,Ot.jsx)(vs,{})})]}),(0,Ot.jsxs)("div",{className:"footer",children:[(0,Ot.jsxs)("div",{className:"react-count",children:[(0,Ot.jsxs)("div",{className:"reacts",children:[E.includes("like")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:ys,alt:"like"}),"  "]}):(0,Ot.jsx)("span",{}),E.includes("love")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:bs,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),E.includes("haha")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:xs,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),(0,Ot.jsxs)("span",{className:"text",children:[o.reacts&&l," ",l>1?"Reacts":"React"]})]}),(0,Ot.jsxs)("div",{className:"comment-share",children:[(0,Ot.jsxs)("div",{className:"comment",children:[(0,Ot.jsx)("div",{className:"text",children:o.comments&&h}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Ot.jsxs)("div",{className:"shares",children:[(0,Ot.jsx)("div",{className:"text",children:o.shares&&d}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Ot.jsx)("div",{className:"like-comment-share",children:(0,Ot.jsxs)("div",{className:"buttons-container",children:[(0,Ot.jsxs)("div",{className:"react-buttons button ".concat(b?"reacted":""),children:[(0,Ot.jsxs)("div",{onClick:q,onMouseOver:$,className:"react-like ".concat(1==b?"reacted":""),children:[(0,Ot.jsxs)("span",{className:"react-icon",datatype:b||"",children:["haha"==b?(0,Ot.jsx)("img",{src:xs,alt:"haha"}):(0,Ot.jsx)("span",{}),"love"==b?(0,Ot.jsx)("img",{src:bs,alt:"love"}):(0,Ot.jsx)("span",{}),0==b||"like"==b?(0,Ot.jsx)("img",{src:ys,alt:"like"}):(0,Ot.jsx)("span",{})]}),(0,Ot.jsx)("span",{className:"text text-capitalize",children:b||"like"})]}),(0,Ot.jsxs)("div",{className:"post-react-container",children:[(0,Ot.jsx)("div",{className:"react react-like ".concat("like"==b?"reacted":""),onClick:G,id:"postReactLike",title:"Like",children:(0,Ot.jsx)("img",{src:ys,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-love ".concat("love"==b?"reacted":""),onClick:Y,id:"postReactLove",title:"Love",children:(0,Ot.jsx)("img",{src:bs,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-haha ".concat("haha"==b?"reacted":""),onClick:K,id:"postReactHaha",title:"Haha",children:(0,Ot.jsx)("img",{src:xs,alt:"haha"})})]})]}),(0,Ot.jsxs)("div",{onClick:X,className:"comment button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})}),(0,Ot.jsx)("span",{className:"text",children:"Comment"})]}),(0,Ot.jsxs)("div",{onClick:Q,className:"share button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-share"})}),(0,Ot.jsx)("span",{className:"text",children:"Share"})]}),(0,Ot.jsxs)(Nn,{title:"Share Post",style:{width:P?"95%":"600px",top:"50%"},isOpen:N,onRequestClose:J,id:"cp-view-modal",children:[(0,Ot.jsx)("div",{className:"modal",children:(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("h3",{className:"modal-title"}),(0,Ot.jsx)("div",{className:"modal-close-btn",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]})}),(0,Ot.jsxs)("div",{className:"share-post-container",children:[(0,Ot.jsxs)("div",{className:"share-post-header",children:[(0,Ot.jsxs)("div",{className:"row",children:[(0,Ot.jsx)("div",{className:"col-1",children:(0,Ot.jsx)(Rn,{profilePic:i.profilePic})}),(0,Ot.jsx)("div",{className:"col-3",children:(0,Ot.jsx)("h3",{children:i.fullName})})]}),(0,Ot.jsx)("div",{className:"row",children:(0,Ot.jsxs)("div",{className:"col",children:["Your Sharing ",o.author.fullName||"Someone","'s Post"]})})]}),(0,Ot.jsxs)("div",{className:"share-post-body my-3",children:[(0,Ot.jsx)("textarea",{className:"form-control",onChange:e=>S(e.target.value),value:k}),(0,Ot.jsx)("div",{className:"share-post-button text-end mt-2",children:(0,Ot.jsx)("button",{className:"btn btn-primary",onClick:Z,children:"Share Now"})})]}),(0,Ot.jsx)("div",{className:"share-post-footer"})]})]})]})}),(0,Ot.jsx)(ps,{post:o,commentState:p,allComments:m,setAllComments:v,myProfile:i,authProfile:te,authProfilePicture:ee})]})]});return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(se,{})})};const Cs=e=>{var t;let n=e.data||{};null===n||void 0===n||null===(t=n.author)||void 0===t||t._id;const[r,o]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{o(!0)}),[]),(0,Ot.jsx)(Ot.Fragment,{children:null==n?(0,Ot.jsx)("p",{children:"No Story Found"}):(0,Ot.jsx)("div",{className:"nf-story",style:{backgroundImage:n.bgColor},children:(0,Ot.jsxs)(_t,{to:"/story/".concat(n._id),children:[(0,Ot.jsx)("div",{className:"nf-story-pp-container",children:(0,Ot.jsx)(Rn,{profile:n.author._id,hasStory:r,checkStory:"no",profilePic:n.author.profilePic})}),(0,Ot.jsx)("div",{className:"nf-story-image-container",children:(0,Ot.jsx)("img",{src:n.image,className:"nf-story-image",alt:"Story"})})]})})})},ks=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsxs)("div",{className:"skeleton-card",children:[(0,Ot.jsxs)("div",{className:"skeleton-header",children:[(0,Ot.jsx)("div",{className:"skeleton-avatar"}),(0,Ot.jsxs)("div",{className:"skeleton-lines",children:[(0,Ot.jsx)("div",{className:"skeleton-line short"}),(0,Ot.jsx)("div",{className:"skeleton-line medium"})]})]}),(0,Ot.jsx)("div",{className:"skeleton-main"}),(0,Ot.jsxs)("div",{className:"skeleton-footer",children:[(0,Ot.jsx)("div",{className:"skeleton-line small button"}),(0,Ot.jsx)("div",{className:"skeleton-line small button"}),(0,Ot.jsx)("div",{className:"skeleton-line small button"})]})]},t)))},Ss=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsx)("div",{className:"nf-story",children:(0,Ot.jsxs)("div",{className:"skeleton-card",style:{margin:"0px",marginRight:"20px",padding:"5px",maxWidth:"150px",height:"100%",float:"left"},children:[(0,Ot.jsxs)("div",{className:"skeleton-header",style:{margin:0},children:[(0,Ot.jsx)("div",{className:"skeleton-avatar"}),(0,Ot.jsx)("div",{className:"skeleton-lines mt-2",children:(0,Ot.jsx)("div",{className:"skeleton-line medium"})})]}),(0,Ot.jsx)("div",{className:"skeleton-main",style:{height:"150px"}})]},t)})))},Es="LOAD_POSTS";const _s=()=>{let e=wn(),t=(0,a.useRef)(),n=(0,a.useRef)();function r(e){t.current.scrollBy({left:-300,behavior:"smooth"})}function o(e){t.current.scrollBy({left:300,behavior:"smooth"})}let[i,s]=(0,a.useState)(window.matchMedia("(max-width: 768px)").matches);const[u,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!0);let[f,h]=(0,a.useState)([]),[p,m]=(0,a.useState)([]),[v,g]=(0,a.useState)(!1),[y,b]=(0,a.useState)(0),x=(fn((e=>e.profile)),fn((e=>e.post))),w=async()=>{if(!1===c)return;let t=await aa.get("/post/newsFeed/",{params:{pageNumber:y+1}});if(200===t.status){e((n=[...t.data.posts]||[],{type:Es,payload:n})),b(y+1);let r=t.data.hasNewPost;d(r),l(!1)}var n;let r=await aa.get("/story/");200===r.status&&m(r.data),e(ts(!1))};return(0,a.useEffect)((()=>{window.addEventListener("scroll",(()=>{(window.scrollY+window.innerHeight)/document.body.scrollHeight>=.8&&0==u&&l(!0)}))}),[]),(0,a.useEffect)((()=>{u&&c&&w()}),[u]),(0,a.useEffect)((()=>{e(ts(!1)),window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{s(e.matches)})),d(!0),l(!0)}),[]),(0,a.useEffect)((()=>{if(x.length>0){let e=Math.floor(x.length/3);b(e)}}),[x]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{id:"home",className:"home-page",children:(0,Ot.jsx)(Vt,{fluid:!0,children:(0,Ot.jsxs)(Yt,{children:[(0,Ot.jsx)(Qt,{md:"3",children:!i&&(0,Ot.jsx)(ua,{})}),(0,Ot.jsxs)(Qt,{md:"6",children:[(0,Ot.jsx)(ia,{setNewsFeed:h}),(0,Ot.jsxs)("div",{id:"newsfeed-container",className:"newsfeed-container",children:[p.length>0?(0,Ot.jsxs)("div",{id:"nf-story-container",children:[(0,Ot.jsx)("div",{ref:t,className:"nf-story-overflow-container",children:p.map(((e,t)=>(0,Ot.jsx)(Cs,{data:e},t)))}),(0,Ot.jsx)("div",{className:"nf-story-arrow-left",onClick:r.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-chevron-left"})}),(0,Ot.jsx)("div",{className:"nf-story-arrow-right",onClick:o.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]}):(0,Ot.jsxs)("div",{id:"nf-story-container",children:[(0,Ot.jsx)("div",{ref:t,className:"nf-story-overflow-container",children:(0,Ot.jsx)(Ss,{count:7})}),(0,Ot.jsx)("div",{className:"nf-story-arrow-left",onClick:r.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-chevron-left"})}),(0,Ot.jsx)("div",{className:"nf-story-arrow-right",onClick:o.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]}),(0,Ot.jsxs)("div",{id:"nf-post-container",ref:n,children:[x.length>0?x.map(((e,t)=>(0,Ot.jsx)(ws,{index:x.indexOf(e),postContainer:n,data:e},t))):(0,Ot.jsx)(ks,{count:3}),(0,Ot.jsx)(ks,{count:1})]})]})]}),(0,Ot.jsx)(Qt,{md:"3",children:!i&&(0,Ot.jsx)(ds,{})})]})})})})},Ns=e=>{const t=Ye();let n=fn((e=>e.profile)),r=e.profileData,o=e.isAuth,i=e.isFriend,s=r.friendReqs&&r.friendReqs.includes(n._id),u=n.friendReqs&&n.friendReqs.includes(r._id),l=s||u,[c,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[m,v]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!0),[b,x]=(0,a.useState)({photo:null,uploadedUrl:!1}),w=(e=>{const[t,n]=(0,a.useState)(window.matchMedia(e).matches);return(0,a.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)"),C=r.user&&r.user.firstName+" "+r.user.surname;(0,a.useEffect)((()=>{y(!0)}),[g]);let k=e=>{t("/message/".concat(r._id))},S=()=>{f(!1)};return(0,Ot.jsx)(a.Fragment,{children:o?(0,Ot.jsxs)("div",{className:"profile-buttons",children:[(0,Ot.jsxs)("div",{className:"highligh-btn button add-story",onClick:async()=>{f(!0)},children:[(0,Ot.jsx)("i",{className:"fas fa-plus-circle"}),(0,Ot.jsx)("span",{children:"Add to story"})]}),(0,Ot.jsxs)(Nn,{isOpen:c,id:"create-post-modal",onRequestClose:S,title:"Create A Post",style:{width:w?"95%":"600px"},children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{className:"modal-title",children:"Add to Story"}),(0,Ot.jsx)("div",{onClick:S.bind(void 0),className:"modal-close-btn",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsx)("div",{className:"modal-body",children:(0,Ot.jsxs)("div",{className:"cp-modal-container",children:[(0,Ot.jsxs)("div",{className:"cpm-header",children:[(0,Ot.jsx)("div",{className:"cpm-profilePic",children:(0,Ot.jsx)(Rn,{profilePic:r.profilePic,profile:r._id})}),(0,Ot.jsx)("div",{className:"cpm-username",children:(0,Ot.jsx)("h3",{children:C})})]}),(0,Ot.jsxs)("form",{className:"cpm-form",onSubmit:e=>{e.preventDefault()},children:[(0,Ot.jsxs)("div",{className:"cpm-attachment-control",children:[(0,Ot.jsx)("div",{className:"cpm-attachment-preview",children:(0,Ot.jsx)("img",{src:b.url||"",alt:"attachment preview"})}),(0,Ot.jsxs)("div",{className:"cpm-attachment-upload",children:[(0,Ot.jsxs)("div",{className:"cpm-attachment-upload-overlay",children:[(0,Ot.jsx)("span",{className:"plus-icon"}),(0,Ot.jsx)("span",{className:"overlay-text",children:"Add Photos/Videos"})]}),(0,Ot.jsx)("input",{onChange:(async e=>{let t=e.currentTarget,n=e.target.files;var r=URL.createObjectURL(n[0]);x((e=>d(d({},e),{},{photo:n[0],url:r}))),_n()(t).parents(".cpm-attachment-upload").slideUp(),_n()(t).parents(".cpm-attachment-upload").siblings(".cpm-attachment-preview").slideDown();let o=new FormData;o.append("image",n[0]),p(!0);let a=await aa.post("/upload/",o,{headers:{"content-type":"multipart/form-data"}});if(200==a.status){let e=a.data.secure_url;if(e){const t=new Image;t.crossOrigin="Anonymous",t.src=e,t.onload=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");e.width=t.width,e.height=t.height,n.drawImage(t,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height).data,o=0,a=0,i=0,s=0;for(let t=0;t<r.length;t+=4)o+=r[t],a+=r[t+1],i+=r[t+2],s++;o=Math.floor(o/s),a=Math.floor(a/s),i=Math.floor(i/s);const u="linear-gradient(135deg, rgb(".concat(o,", ").concat(a,", ").concat(i,") 0%, rgba(").concat(o-30,", ").concat(a-30,", ").concat(i-30,", 0.8) 100%)");v(u)},p(!1),y(!1),x((t=>d(d({},t),{},{uploadedUrl:e,bgColors:m})))}}}).bind(void 0),name:"photos",type:"file"})]})]}),(0,Ot.jsxs)("div",{className:"cpm-attachment",children:[(0,Ot.jsx)("span",{className:"cpm-button-text",children:"Add Image to your story"}),(0,Ot.jsx)("div",{className:"post-meta-buttons",children:(0,Ot.jsx)("div",{onClick:e=>{let t=e.currentTarget;_n()(t).parents(".cpm-attachment").siblings(".cpm-attachment-control").slideToggle()},className:"attachment-button-file"})})]}),(0,Ot.jsx)("div",{className:"cpm-submit-button",children:(0,Ot.jsxs)("button",{className:"button",onClick:(async e=>{if(e.preventDefault(),f(!1),!e.target.classList.containers("added")&&0!=b.uploadedUrl&&0!=m)try{e.target.classList.add("added"),200===(await aa.post("/story/create/",{image:b.uploadedUrl,storyBg:m})).status&&f(!1)}catch(t){console.log(t)}}).bind(void 0),type:"submit",children:[" ",h?"Uploading ... ":"Add to your story"]})})]})]})})]}),(0,Ot.jsxs)("div",{onClick:()=>t("/settings"),className:"normal-btn button edit-profile",children:[(0,Ot.jsx)("i",{className:"fas fa-pen"}),(0,Ot.jsx)("span",{children:"Edit Profile"})]})]}):i?(0,Ot.jsxs)("div",{className:"profile-buttons",children:[(0,Ot.jsxs)("div",{onClick:e=>{let t=e.currentTarget;_n()(t).children(".friend-options-menu").toggleClass("hide")},className:"button normal-btn  friend",children:[(0,Ot.jsx)("i",{className:"fas fa-user-check"}),(0,Ot.jsx)("span",{children:"Friend"}),(0,Ot.jsx)("div",{className:"friend-options-menu hide",children:(0,Ot.jsxs)("div",{onClick:async e=>{try{let t=e.currentTarget;aa.post("/friend/removeFriend",{profile:r._id});_n()(t).parents(".friend").hide()}catch(t){console.log(t)}},className:"friend-options-menu-item",children:[(0,Ot.jsx)("div",{className:"menu-item-icon",children:(0,Ot.jsx)("i",{className:"fas fa-user-times"})}),(0,Ot.jsx)("div",{className:"menu-item-text",children:"Remove Friend"})]})})]}),(0,Ot.jsxs)("div",{onClick:k,className:"highligh-btn button message-button",children:[(0,Ot.jsx)("i",{className:"fas fa-comment-dots"}),(0,Ot.jsx)("span",{children:"Message"})]})]}):l?s?(0,Ot.jsxs)("div",{className:"profile-buttons",children:[(0,Ot.jsxs)("div",{onClick:async e=>{try{let t=e.currentTarget;if(!_n()(t).hasClass("removed")){await aa.post("/friend/removeRequest",{profile:r._id});_n()(t).addClass("removed"),_n()(t).children("span").text("Request Cenceled")}}catch(t){console.log(t)}},className:"normal-btn button cencel-friend",children:[(0,Ot.jsx)("i",{className:"fas fa-user-check"}),(0,Ot.jsx)("span",{children:"Cencel Request"})]}),(0,Ot.jsxs)("div",{onClick:k,className:"highligh-btn button message-button",children:[(0,Ot.jsx)("i",{className:"fas fa-comment-dots"}),(0,Ot.jsx)("span",{children:"Message"})]})]}):(0,Ot.jsxs)("div",{className:"profile-buttons",children:[(0,Ot.jsxs)("div",{onClick:async e=>{try{let t=e.currentTarget;if(!_n()(t).hasClass("accepted")){await aa.post("/friend/reqAccept",{profile:r._id});_n()(t).children("span").text("Accepted"),_n()(t).addClass("Friend Accepted")}}catch(t){console.log(t)}},className:"highligh-btn button confirm-friend",children:[(0,Ot.jsx)("i",{className:"fas fa-user-check"}),(0,Ot.jsx)("span",{children:"Confirm Request"})]}),(0,Ot.jsxs)("div",{onClick:k,className:"normal-btn button message-button",children:[(0,Ot.jsx)("i",{className:"fas fa-comment-dots"}),(0,Ot.jsx)("span",{children:"Message"})]})]}):(0,Ot.jsxs)("div",{className:"profile-buttons",children:[(0,Ot.jsxs)("div",{onClick:e=>{let t=e.currentTarget;_n()(t).hasClass("sent")||aa.post("/friend/sendRequest/",{profile:r._id}).then((e=>{_n()(t).children("span").text("Request Sent"),_n()(t).addClass("sent")})).catch((e=>{console.log(e)}))},className:"highligh-btn button add-friend",children:[(0,Ot.jsx)("i",{className:"fas fa-user-check"}),(0,Ot.jsx)("span",{children:"Add Friend"})]}),(0,Ot.jsxs)("div",{onClick:k,className:"normal-btn button message-button",children:[(0,Ot.jsx)("i",{className:"fas fa-comment-dots"}),(0,Ot.jsx)("span",{children:"Message"})]})]})})};var Ts=function(e,t){return Ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ts(e,t)};function Rs(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ts(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ds=function(){return Ds=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ds.apply(this,arguments)};Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Is=n(1185),As=n.n(Is);function Os(e,t,n,r,o){void 0===o&&(o=0);var a=Ws(t.width,t.height,o),i=a.width,s=a.height;return{x:Ms(e.x,i,n.width,r),y:Ms(e.y,s,n.height,r)}}function Ms(e,t,n,r){var o=t*r/2-n/2;return Us(e,-o,o)}function Ps(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function js(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function Fs(e,t){return Math.min(e,Math.max(0,t))}function Ls(e,t){return t}function Bs(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Ws(e,t,n){var r=n*Math.PI/180;return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function Us(e,t,n){return Math.min(Math.max(e,t),n)}function zs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return"string"===typeof e&&e.length>0})).join(" ").trim()}var Hs=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.cropperRef=a.createRef(),n.imageRef=a.createRef(),n.videoRef=a.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc="undefined"!==typeof document?document:null,n.currentWindow="undefined"!==typeof window?window:null,n.resizeObserver=null,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if("undefined"!==typeof window.ResizeObserver&&n.containerRef){var e=!0;n.resizeObserver=new window.ResizeObserver((function(t){e?e=!1:n.computeSizes()})),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(e){return e.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var e=n.computeSizes();e&&(n.emitCropData(),n.setInitialCrop(e)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(e){if(n.props.initialCroppedAreaPercentages){var t=function(e,t,n,r,o,a){var i=Ws(t.width,t.height,n),s=Us(r.width/i.width*(100/e.width),o,a);return{crop:{x:s*i.width/2-r.width/2-i.width*s*(e.x/100),y:s*i.height/2-r.height/2-i.height*s*(e.y/100)},zoom:s}}(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,e,n.props.minZoom,n.props.maxZoom),r=t.crop,o=t.zoom;n.props.onCropChange(r),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var a=function(e,t,n,r,o,a){void 0===n&&(n=0);var i=Ws(t.naturalWidth,t.naturalHeight,n),s=Us(function(e,t,n){var r=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return n.height>n.width?n.height/(e.height*r):n.width/(e.width*r)}(e,t,r),o,a),u=r.height>r.width?r.height/e.height:r.width/e.width;return{crop:{x:((i.width-e.width)/2-e.x)*u,y:((i.height-e.height)/2-e.y)*u},zoom:s}}(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,e,n.props.minZoom,n.props.maxZoom);r=a.crop,o=a.zoom;n.props.onCropChange(r),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var e,t,r,o,a,i,s=n.imageRef.current||n.videoRef.current;if(s&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var u=n.containerRect.width/n.containerRect.height,l=(null===(e=n.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=n.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,c=(null===(r=n.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(o=n.videoRef.current)||void 0===o?void 0:o.videoHeight)||0,d=l/c,f=void 0;if(s.offsetWidth<l||s.offsetHeight<c)switch(n.state.mediaObjectFit){default:case"contain":f=u>d?{width:n.containerRect.height*d,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/d};break;case"horizontal-cover":f={width:n.containerRect.width,height:n.containerRect.width/d};break;case"vertical-cover":f={width:n.containerRect.height*d,height:n.containerRect.height}}else f={width:s.offsetWidth,height:s.offsetHeight};n.mediaSize=Ds(Ds({},f),{naturalWidth:l,naturalHeight:c}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var h=n.props.cropSize?n.props.cropSize:function(e,t,n,r,o,a){void 0===a&&(a=0);var i=Ws(e,t,a),s=i.width,u=i.height,l=Math.min(s,n),c=Math.min(u,r);return l>c*o?{width:c*o,height:c}:{width:l,height:l/o}}(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(null===(a=n.state.cropSize)||void 0===a?void 0:a.height)===h.height&&(null===(i=n.state.cropSize)||void 0===i?void 0:i.width)===h.width||n.props.onCropSizeChange&&n.props.onCropSizeChange(h),n.setState({cropSize:h},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(h),h}},n.saveContainerPosition=function(){if(n.containerRef){var e=n.containerRef.getBoundingClientRect();n.containerPosition={x:e.left,y:e.top}}},n.onMouseDown=function(e){n.currentDoc&&(e.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(t.getMousePoint(e)))},n.onMouseMove=function(e){return n.onDrag(t.getMousePoint(e))},n.onScroll=function(e){n.currentDoc&&(e.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(e){n.currentDoc&&(n.isTouching=!0,n.props.onTouchRequest&&!n.props.onTouchRequest(e)||(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),2===e.touches.length?n.onPinchStart(e):1===e.touches.length&&n.onDragStart(t.getTouchPoint(e.touches[0]))))},n.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?n.onPinchMove(e):1===e.touches.length&&n.onDrag(t.getTouchPoint(e.touches[0]))},n.onGestureStart=function(e){n.currentDoc&&(e.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(e){if(e.preventDefault(),!n.isTouching){var r=t.getMousePoint(e),o=n.gestureZoomStart-1+e.scale;if(n.setNewZoom(o,r,{shouldUpdatePosition:!0}),n.props.onRotationChange){var a=n.gestureRotationStart+e.rotation;n.props.onRotationChange(a)}}},n.onGestureEnd=function(e){n.cleanEvents()},n.onDragStart=function(e){var t,r,o=e.x,a=e.y;n.dragStartPosition={x:o,y:a},n.dragStartCrop=Ds({},n.props.crop),null===(r=(t=n.props).onInteractionStart)||void 0===r||r.call(t)},n.onDrag=function(e){var t=e.x,r=e.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame((function(){if(n.state.cropSize&&void 0!==t&&void 0!==r){var e=t-n.dragStartPosition.x,o=r-n.dragStartPosition.y,a={x:n.dragStartCrop.x+e,y:n.dragStartCrop.y+o},i=n.props.restrictPosition?Os(a,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):a;n.props.onCropChange(i)}})))},n.onDragStopped=function(){var e,t;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),null===(t=(e=n.props).onInteractionEnd)||void 0===t||t.call(e)},n.onWheel=function(e){if(n.currentWindow&&(!n.props.onWheelRequest||n.props.onWheelRequest(e))){e.preventDefault();var r=t.getMousePoint(e),o=As()(e).pixelY,a=n.props.zoom-o*n.props.zoomSpeed/200;n.setNewZoom(a,r,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},(function(){var e,t;return null===(t=(e=n.props).onInteractionStart)||void 0===t?void 0:t.call(e)})),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout((function(){return n.setState({hasWheelJustStarted:!1},(function(){var e,t;return null===(t=(e=n.props).onInteractionEnd)||void 0===t?void 0:t.call(e)}))}),250)}},n.getPointOnContainer=function(e,t){var r=e.x,o=e.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(r-t.x),y:n.containerRect.height/2-(o-t.y)}},n.getPointOnMedia=function(e){var t=e.x,r=e.y,o=n.props,a=o.crop,i=o.zoom;return{x:(t+a.x)/i,y:(r+a.y)/i}},n.setNewZoom=function(e,t,r){var o=(void 0===r?{}:r).shouldUpdatePosition,a=void 0===o||o;if(n.state.cropSize&&n.props.onZoomChange){var i=Us(e,n.props.minZoom,n.props.maxZoom);if(a){var s=n.getPointOnContainer(t,n.containerPosition),u=n.getPointOnMedia(s),l={x:u.x*i-s.x,y:u.y*i-s.y},c=n.props.restrictPosition?Os(l,n.mediaSize,n.state.cropSize,i,n.props.rotation):l;n.props.onCropChange(c)}n.props.onZoomChange(i)}},n.getCropData=function(){return n.state.cropSize?function(e,t,n,r,o,a,i){void 0===a&&(a=0),void 0===i&&(i=!0);var s=i?Fs:Ls,u=Ws(t.width,t.height,a),l=Ws(t.naturalWidth,t.naturalHeight,a),c={x:s(100,((u.width-n.width/o)/2-e.x/o)/u.width*100),y:s(100,((u.height-n.height/o)/2-e.y/o)/u.height*100),width:s(100,n.width/u.width*100/o),height:s(100,n.height/u.height*100/o)},d=Math.round(s(l.width,c.width*l.width/100)),f=Math.round(s(l.height,c.height*l.height/100)),h=l.width>=l.height*r?{width:Math.round(f*r),height:f}:{width:d,height:Math.round(d/r)};return{croppedAreaPercentages:c,croppedAreaPixels:Ds(Ds({},h),{x:Math.round(s(l.width-h.width,c.x*l.width/100)),y:Math.round(s(l.height-h.height,c.y*l.height/100))})}}(n.props.restrictPosition?Os(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition):null},n.emitCropData=function(){var e=n.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(t,r),n.props.onCropAreaChange&&n.props.onCropAreaChange(t,r)}},n.emitCropAreaChange=function(){var e=n.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(t,r)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var e=n.props.restrictPosition?Os(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(e),n.emitCropData()}},n.onKeyDown=function(e){var t,r,o=n.props,a=o.crop,i=o.onCropChange,s=o.keyboardStep,u=o.zoom,l=o.rotation,c=s;if(n.state.cropSize){e.shiftKey&&(c*=.2);var d=Ds({},a);switch(e.key){case"ArrowUp":d.y-=c,e.preventDefault();break;case"ArrowDown":d.y+=c,e.preventDefault();break;case"ArrowLeft":d.x-=c,e.preventDefault();break;case"ArrowRight":d.x+=c,e.preventDefault();break;default:return}n.props.restrictPosition&&(d=Os(d,n.mediaSize,n.state.cropSize,u,l)),e.repeat||null===(r=(t=n.props).onInteractionStart)||void 0===r||r.call(t),i(d)}},n.onKeyUp=function(e){var t,r;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}n.emitCropData(),null===(r=(t=n.props).onInteractionEnd)||void 0===r||r.call(t)},n}return Rs(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),"undefined"===typeof window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&("undefined"===typeof window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){var t,n,r,o,a,i,s,u,l;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.height)||(null===(r=e.cropSize)||void 0===r?void 0:r.width)!==(null===(o=this.props.cropSize)||void 0===o?void 0:o.width)?this.computeSizes():(null===(a=e.crop)||void 0===a?void 0:a.x)===(null===(i=this.props.crop)||void 0===i?void 0:i.x)&&(null===(s=e.crop)||void 0===s?void 0:s.y)===(null===(u=this.props.crop)||void 0===u?void 0:u.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(l=this.videoRef.current)||void 0===l||l.load());var c=this.getObjectFit();c!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:c},this.computeSizes)},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,n=e.aspect;return t?t.width/t.height:n},t.prototype.getObjectFit=function(){var e,t,n,r;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var o=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(n=this.imageRef.current)||void 0===n?void 0:n.naturalHeight)||(null===(r=this.videoRef.current)||void 0===r?void 0:r.videoHeight)||0)<o?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var n=t.getTouchPoint(e.touches[0]),r=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=Ps(n,r),this.lastPinchRotation=js(n,r),this.onDragStart(Bs(n,r))},t.prototype.onPinchMove=function(e){var n=this;if(this.currentDoc&&this.currentWindow){var r=t.getTouchPoint(e.touches[0]),o=t.getTouchPoint(e.touches[1]),a=Bs(r,o);this.onDrag(a),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame((function(){var e=Ps(r,o),t=n.props.zoom*(e/n.lastPinchDistance);n.setNewZoom(t,a,{shouldUpdatePosition:!1}),n.lastPinchDistance=e;var i=js(r,o),s=n.props.rotation+(i-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(s),n.lastPinchRotation=i}))}},t.prototype.render=function(){var e,t=this,n=this.props,r=n.image,o=n.video,i=n.mediaProps,s=n.cropperProps,u=n.transform,l=n.crop,c=l.x,d=l.y,f=n.rotation,h=n.zoom,p=n.cropShape,m=n.showGrid,v=n.style,g=v.containerStyle,y=v.cropAreaStyle,b=v.mediaStyle,x=n.classes,w=x.containerClassName,C=x.cropAreaClassName,k=x.mediaClassName,S=null!==(e=this.state.mediaObjectFit)&&void 0!==e?e:this.getObjectFit();return a.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return t.containerRef=e},"data-testid":"container",style:g,className:zs("reactEasyCrop_Container",w)},r?a.createElement("img",Ds({alt:"",className:zs("reactEasyCrop_Image","contain"===S&&"reactEasyCrop_Contain","horizontal-cover"===S&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===S&&"reactEasyCrop_Cover_Vertical",k)},i,{src:r,ref:this.imageRef,style:Ds(Ds({},b),{transform:u||"translate(".concat(c,"px, ").concat(d,"px) rotate(").concat(f,"deg) scale(").concat(h,")")}),onLoad:this.onMediaLoad})):o&&a.createElement("video",Ds({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:zs("reactEasyCrop_Video","contain"===S&&"reactEasyCrop_Contain","horizontal-cover"===S&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===S&&"reactEasyCrop_Cover_Vertical",k)},i,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Ds(Ds({},b),{transform:u||"translate(".concat(c,"px, ").concat(d,"px) rotate(").concat(f,"deg) scale(").concat(h,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map((function(e){return a.createElement("source",Ds({key:e.src},e))}))),this.state.cropSize&&a.createElement("div",Ds({ref:this.cropperRef,style:Ds(Ds({},y),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:zs("reactEasyCrop_CropArea","round"===p&&"reactEasyCrop_CropAreaRound",m&&"reactEasyCrop_CropAreaGrid",C)},s)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(a.Component);const Vs=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsx)("div",{className:"skeleton-card no-border",children:(0,Ot.jsx)("div",{className:"skeleton-main"})},t)))};const qs=e=>{let{profileData:t}=e;$e();const[n,r]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)(t.profilePic||""),[m,v]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[b,x]=(0,a.useState)({x:0,y:0}),[w,C]=(0,a.useState)(null),[k,S]=(0,a.useState)(1);let E=fn((e=>e.profile));(0,a.useEffect)((()=>{p(""),f(!1)}),[En.param]),(0,a.useEffect)((()=>{t&&(f(!1),(e=>{const t=new Image;t.src=e,t.onload=()=>f(!0),t.onerror=()=>f(!1)})(t.coverPic))}),[t,En.param]),(0,a.useEffect)((()=>{1==d&&p(t.coverPic)}),[d]);const _=(e=>{const[t,n]=(0,a.useState)(window.matchMedia(e).matches);return(0,a.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)");let N=()=>{c(!1)};var T={fontSize:_?"18px":"30px"};const R=(0,a.useCallback)(((e,t)=>{C(t)}),[]),D=(0,a.useCallback)((async()=>{if(m)try{const o=await(e=URL.createObjectURL(m),t=w,n=1430,r=450,new Promise(((o,a)=>{const i=new Image;i.src=e,i.onload=()=>{const e=document.createElement("canvas");e.width=n,e.height=r,e.getContext("2d").drawImage(i,t.x,t.y,t.width,t.height,0,0,n,r),e.toBlob((e=>{if(!e)return void a(new Error("Canvas is empty"));const t=URL.createObjectURL(e);o(t)}),"image/jpeg")},i.onerror=a})));if(o)return y(o),!0}catch(wu){console.error(wu)}var e,t,n,r}),[m&&URL.createObjectURL(m),w]);let I=E._id===t._id;return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{className:"cover-photo-container",children:[d?(0,Ot.jsx)("img",{onClick:()=>{c(!0)},className:"cover-photo",src:h,alt:"cover"}):(0,Ot.jsx)(Vs,{count:1}),I&&(0,Ot.jsxs)("div",{className:"upload-cover-photo",onClick:()=>{r(!0)},children:[(0,Ot.jsx)("i",{className:"fa fa-camera-alt"}),(0,Ot.jsx)("span",{children:"Upload Cover Photo"})]}),(0,Ot.jsxs)(Nn,{title:"View Cover Photo",style:{width:_?"95%":"600px",top:"50%"},isOpen:l,onRequestClose:N,id:"cp-view-modal",children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{className:"modal-title",style:T,children:" View Profile Picture"}),(0,Ot.jsx)("div",{onClick:N,className:"modal-close-btn",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsx)("div",{className:"modal-body text-center",children:(0,Ot.jsx)("img",{src:h,className:"w-100",alt:"Cover Pic View"})})]}),(0,Ot.jsxs)(Nn,{title:"Upload Cover Photo",style:{width:"500px",top:"20%",top:"50%"},isOpen:n,onRequestClose:()=>{r(!1)},id:"cp-upload-modal",children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{className:"modal-title",children:"Upload Cover Photo"}),(0,Ot.jsx)("div",{onClick:()=>{r(!1)},className:"modal-close-btn",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsxs)("div",{className:"modal-body",children:[(0,Ot.jsx)("div",{className:"modal-upload-preview",children:m&&(0,Ot.jsx)(Hs,{image:URL.createObjectURL(m),crop:b,zoom:k,aspect:1430/450,onCropChange:x,onZoomChange:S,onCropComplete:R})}),(0,Ot.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!h)return D(),(async()=>{u(!1),i(!0);let e=new FormData;e.append("image",m);let t=await aa.post("/upload",e,{headers:{"content-type":"multipart/form-data"}});if(200===t.status){let e=t.data.secure_url;i(!1),p(e)}})(),!0;try{if(h){i(!0);let e=new FormData;e.append("coverPicUrl",h),e.append("profile",t._id),200===(await aa.post("/profile/update/coverPic",e,{headers:{"content-type":"multipart/form-data"}})).status&&(r(!1),window.location.reload())}}catch(n){console.log(n)}},children:[(0,Ot.jsx)("input",{name:"cover_pic",onChange:(async e=>{v(e.target.files[0]||""),u(!0)}).bind(void 0),className:"cp-upload-input",type:"file"}),(0,Ot.jsx)("button",{type:"submit",className:"cp-upload-button",children:o?"Uploading...":s?"Crop":"Update Cover Picture"})]})]})]})]})})};var Gs=n(4872),Ys=n.n(Gs);const Ks=e=>{let{profileData:t}=e,{profile:n}=$e(),r=fn((e=>e.profile));const[o,i]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),[l,c]=(0,a.useState)(),[d,f]=(0,a.useState)(t.profilePic),[h,p]=(0,a.useState)(t.profilePic),[m,v]=(0,a.useState)(!1),[g,y]=(0,a.useState)("");(0,a.useEffect)((()=>{aa.get("/profile/hasStory?profileId="+n).then((e=>{200==e.status&&v(e.data.hasStory)}))}),[n]),(0,a.useEffect)((()=>{f(t?gs(t.profilePic)?t.profilePic:"":"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png")}),[t]),(0,a.useEffect)((e=>{d&&Tn(d,p)}),[d]);let b="";let x=()=>{i(!1)},w=e=>{u(!1)},C=r._id===t._id;var k=(e=>{const[t,n]=(0,a.useState)(window.matchMedia(e).matches);return(0,a.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)"),S={fontSize:k?"18px":"30px"};return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{className:"profile-pic",children:[(0,Ot.jsx)("div",{className:"profilePic-container ".concat("yes"==m?"has-story":""),onClick:()=>{u(!0)},children:h?(0,Ot.jsx)("img",{src:d,alt:""}):(0,Ot.jsx)(vs,{})}),C&&(0,Ot.jsx)("div",{onClick:e=>{i(!0)},className:"upload-profile-pic",children:(0,Ot.jsx)("i",{className:"fa fa-camera-alt"})}),(0,Ot.jsxs)(Nn,{title:"View Profile Picture",style:{width:k?"95%":"600px",top:"50%"},isOpen:s,onRequestClose:w,id:"pp-view-modal",children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{className:"modal-title",style:S,children:" View Profile Picture"}),(0,Ot.jsx)("div",{onClick:w,className:"modal-close-btn",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsx)("div",{className:"modal-body text-center",children:(0,Ot.jsx)("img",{src:t.profilePic,className:"w-100",alt:"Ikram"})})]}),(0,Ot.jsxs)(Nn,{title:"Upload Profile Pics",style:{width:"600px",maxWidth:"95%",top:"50%"},isOpen:o,onRequestClose:x,id:"pp-upload-modal",children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{className:"modal-title",children:" Upload Profile Picture"}),(0,Ot.jsx)("div",{onClick:x,className:"modal-close-btn",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsx)("div",{className:"modal-body",children:(0,Ot.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!1);try{b.getImageScaledToCanvas().toBlob((async e=>{let n=new File([e],"".concat(t._id,".png"),{type:e.type,lastModified:(new Date).getTime()}),r=new FormData;r.append("image",n);let o=await aa.post("/upload",r,{headers:{"Content-Type":"multipart/form-data"}});if(200===o.status){let e=o.data.secure_url,t=new FormData;t.append("profilePicUrl",e),t.append("type","profilePic"),t.append("caption",g),200===(await aa.post("/profile/update/profilePic",t,{headers:{"Content-Type":"multipart/form-data"}})).status&&window.location.reload()}}))}catch(n){console.log(n)}},children:[(0,Ot.jsx)("textarea",{onChange:(e=>{y(e.target.value)}).bind(void 0),placeholder:"What's in your Mind?",name:"caption",className:"post-caption",value:g}),l&&(0,Ot.jsx)(Ys(),{ref:e=>{b=e},image:URL.createObjectURL(l),width:450,height:450,border:50,borderRadius:300,color:[0,0,0,.5],scale:1.1,rotate:0,style:{margin:"auto",marginBottom:"20px",maxWidth:"100%",height:"100%",width:"100%"}}),(0,Ot.jsx)("input",{onChange:e=>{c(e.target.files[0])},name:"profilePic",className:"pp-upload-input",type:"file"}),(0,Ot.jsx)("button",{className:"pp-upload-button",type:"submit",children:"Upload"})]})})]})]})})};const $s=e=>{let t=$e(),n=wn(),r=fn((e=>e.profile))||{},o=r._id,[i,s]=(0,a.useState)(t.profile===o||t.profile==r.username),[u,l]=(0,a.useState)(i?d({},r):{});(0,a.useEffect)((()=>{s(t.profile===o),r.friends&&r.friends.filter((e=>{e._id===t.profile&&f(!0)}))}),[r]);let[c,f]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(!i){n(ts(!0));try{aa.post("/profile",{profile:t.profile}).then((e=>{200===e.status&&(l(e.data),n(ts(!1)))})).catch((e=>{console.log(e)}))}catch(e){console(e)}}}),[t]);let h="/"+u._id+"/";const p=()=>(0,Ot.jsxs)("div",{className:"animate-pulse flex flex-col items-center space-y-4",children:[(0,Ot.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-300"}),(0,Ot.jsx)("div",{className:"w-40 h-6 bg-gray-300 rounded"}),(0,Ot.jsx)("div",{className:"w-60 h-4 bg-gray-300 rounded"})]});let m=e=>{_n()(e.currentTarget).siblings().removeClass("active")};return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"profile",children:[(0,Ot.jsxs)("div",{className:"profile-header",children:[u?(0,Ot.jsx)(qs,{profileData:u}):(0,Ot.jsx)(p,{}),(0,Ot.jsxs)("div",{className:"profile-info-container",children:[(0,Ot.jsx)(Ks,{profileData:u}),(0,Ot.jsxs)("div",{className:"profile-info",children:[(0,Ot.jsxs)("div",{className:"profile-name",children:[(0,Ot.jsxs)("h3",{className:"full-name",children:[u.user&&u.user.firstName," ",u.user&&u.user.surname," ",(null===u||void 0===u?void 0:u.nickname)&&(0,Ot.jsxs)("span",{className:"nickname",children:["(",u.nickname,")"]})]}),(0,Ot.jsx)("div",{className:"friends-count",children:(0,Ot.jsxs)(_t,{className:"text-decoration-none",to:"/".concat(u._id,"/friends"),children:[u.friends&&u.friends.length," Friends"]})})]}),(0,Ot.jsx)(Ns,{profileData:u,isAuth:i,isFriend:c})]})]}),(0,Ot.jsxs)("div",{className:"profile-info-tab-navigator",children:[(0,Ot.jsx)("div",{className:"header-nav-menu",children:(0,Ot.jsxs)("div",{className:"header-nav-menu-container",children:[(0,Ot.jsx)(Nt,{to:h,onClick:m,className:"header-nav-menu-item",children:"Posts"}),(0,Ot.jsx)(Nt,{to:h+"about",onClick:m,className:"header-nav-menu-item",children:"About"}),(0,Ot.jsx)(Nt,{to:h+"friends",onClick:m,className:"header-nav-menu-item",children:" Friends"}),(0,Ot.jsx)(Nt,{to:h+"images",onClick:m,className:"header-nav-menu-item",children:"Images"}),(0,Ot.jsx)(Nt,{to:h+"videos",onClick:m,className:"header-nav-menu-item",children:"Videos"})]})}),(0,Ot.jsx)("div",{className:"options-menu",children:(0,Ot.jsx)("i",{className:"fa fa-ellipsis-h"})})]})]}),(0,Ot.jsx)("div",{className:"profile-content-container",children:(0,Ot.jsx)(ct,{})})]})})};const Xs=()=>{let e=fn((e=>e.profile));return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"friends",children:[(0,Ot.jsxs)("div",{className:"friends-sidebar",children:[(0,Ot.jsx)("h4",{className:"page-title",children:"Friends"}),(0,Ot.jsxs)("div",{className:"friends-sidebar-menu",children:[(0,Ot.jsxs)(Nt,{to:"/friends/",className:"friends-sidebar-menu-item",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"fas fa-user-friends"})}),(0,Ot.jsx)("span",{className:"text",children:"Home"})]}),(0,Ot.jsxs)(Nt,{to:"/friends/requests",className:"friends-sidebar-menu-item",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"fas fa-user-edit"})}),(0,Ot.jsx)("span",{className:"text",children:"Friend Requests"})]}),(0,Ot.jsxs)(Nt,{to:"/friends/suggestions",className:"friends-sidebar-menu-item",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"fas fa-user-plus"})}),(0,Ot.jsx)("span",{className:"text",children:"Suggestions"})]}),(0,Ot.jsxs)(Nt,{to:"/".concat(e?e._id:"","/friends"),className:"friends-sidebar-menu-item",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"fas fa-users"})}),(0,Ot.jsx)("span",{className:"text",children:"All Freinds"})]})]})]}),(0,Ot.jsx)("div",{className:"friends-content",children:(0,Ot.jsx)(ct,{})})]})})},Qs=e=>{let{item:t,myProfile:n,setReplies:r,comment:o,replies:i}=e,s=n._id,[u,l]=(0,a.useState)(!1),[c,f]=(0,a.useState)(t.reacts.length),[h,p]=(0,a.useState)(!1),[m,v]=(0,a.useState)({body:null,attachment:null});return(0,Ot.jsxs)("div",{className:"reply-container",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:t.author.profilePic,profile:t.author._id})}),(0,Ot.jsxs)("div",{className:"comment-info",children:[(0,Ot.jsxs)("div",{className:"comment-box",children:[(0,Ot.jsxs)("div",{className:"name-comment",children:[(0,Ot.jsx)("div",{className:"author-name",children:(0,Ot.jsx)(_t,{to:"/".concat(t.author._id),children:t.author.fullName})}),(0,Ot.jsx)("p",{className:"comment-text",children:t.body})]}),t.author._id==s&&(0,Ot.jsxs)("div",{className:"options-icon",onClick:(e=>{l(!u)}).bind(void 0),children:[(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Ot.jsx)("div",{className:"options-container ".concat(u&&"open"),children:(0,Ot.jsx)("button",{"data-id":t._id,onClick:(async e=>{let t=e.currentTarget.dataset.id;200==(await aa.post("/comment/deleteReply",{replyId:t})).status&&_n()(e.target).parents(".reply-container").remove()}).bind(void 0),className:"comment-option text-danger",children:"Delete Reply"})})]})]}),(0,Ot.jsxs)("div",{className:"comment-react",children:[(0,Ot.jsxs)("div",{className:"like button ".concat(t.reacts.includes(s)&&"reacted"),onClick:(async e=>{let t=e.target.dataset.id;if(_n()(e.target).hasClass("reacted")){200==(await aa.post("/comment/reply/removeReact",{replyId:t,myId:s})).status&&(f(c-1),_n()(e.target).removeClass("reacted"))}else{200==(await aa.post("/comment/reply/addReact",{replyId:t,myId:s})).status&&(f(c+1),_n()(e.target).addClass("reacted"))}}).bind(void 0),"data-id":t._id,children:["Like ","".concat(c>0?"(".concat(c,")"):"")]}),(0,Ot.jsx)("div",{className:"reply button",onClick:(e=>{p(!h)}).bind(void 0),"data-id":t._id,children:"Reply"}),(0,Ot.jsx)("div",{className:"comment-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:t.createdAt})})]}),h&&(0,Ot.jsx)("div",{className:"new-reply",children:(0,Ot.jsxs)("div",{className:"comment-field",children:[(0,Ot.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode){let e=o._id;if(m){let t=await aa.post("/comment/addReply",{replyMsg:m.body,authorId:n._id,commentId:e});if(200==t.status){p(!1);let e=t.data;r((t=>[...t,e]))}}}},onChange:(async e=>{v((t=>d(d({},t),{},{body:e.target.value})))}).bind(void 0),className:"field-comment-text",type:"text","data-reply":t._id,placeholder:"Reply to ".concat(t.author.fullName)}),(0,Ot.jsx)("div",{onClick:(async e=>{let t=o._id;if(m){let e=await aa.post("/comment/addReply",{replyMsg:m.body,authorId:n._id,commentId:t});if(200==e.status){p(!1);let t=e.data._id;r((e=>[...e,t]))}}}).bind(void 0),"data-reply":t._id,className:"comment-attachment",children:(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-paper-plane"})})})]})})]})]})},Js=e=>{var t;let n=e.watch||{},r=e.myProfile?e.myProfile:{},[o,i]=(0,a.useState)(e.comment),s=r._id,[u,l]=(0,a.useState)(0),[c,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[m,v]=(0,a.useState)(null===(t=e.comment)||void 0===t?void 0:t.replies);(0,a.useEffect)((()=>{i(e.comment),l(e.comment.reacts.length||0),f(e.comment.reacts.includes(s))}),[e]);let[g,y]=(0,a.useState)({body:null,attachment:null});return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"comment-container comment-id-".concat(o._id),children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:o.author.profilePic,profile:o.author._id})}),(0,Ot.jsxs)("div",{className:"comment-info",children:[(0,Ot.jsxs)("div",{className:"comment-box",children:[(0,Ot.jsxs)("div",{className:"name-comment",children:[(0,Ot.jsx)("div",{className:"author-name",children:(0,Ot.jsx)(_t,{to:"/".concat(o.author._id),children:o.author.user.firstName+" "+o.author.user.surname})}),(0,Ot.jsx)("p",{className:"comment-text",children:o.body}),o.attachment&&(0,Ot.jsx)("div",{className:"comment-attachment-container",children:(0,Ot.jsx)("img",{src:o.attachment,alt:"attachment"})})]}),o.author._id==r._id?(0,Ot.jsxs)("div",{onClick:e=>{_n()(e.currentTarget).children(".options-container").hasClass("open")?_n()(e.currentTarget).children(".options-container").removeClass("open"):_n()(e.currentTarget).children(".options-container").addClass("open")},className:"options-icon",children:[(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Ot.jsx)("div",{className:"options-container",children:(0,Ot.jsx)("button",{dataid:o._id,onClick:(async e=>{try{let t=_n()(e.currentTarget).attr("dataid"),o=n._id;_n()(e.currentTarget).parents(".comment-container").remove();let a=await aa.post("/comment/deleteComment",{commentId:t,watchId:o});if(200===a.status){a.data.author=r}}catch(t){console.log(t)}}).bind(void 0),className:"comment-option text-danger",children:"Delete Comment"})})]}):""]}),(0,Ot.jsxs)("div",{className:"comment-react",children:[(0,Ot.jsxs)("div",{className:"like button ".concat(c?"reacted":""),onClick:(async e=>{let t=e.currentTarget.dataset.id;if(_n()(e.currentTarget).hasClass("reacted")){200==(await aa.post("/comment/removeReact",{commentId:t,reactorId:s})).status&&(_n()(e.target).removeClass("reacted"),l((e=>e-1)))}else{200==(await aa.post("/comment/addReact",{commentId:t,reactorId:s})).status&&(l((e=>e+1)),_n()(e.target).addClass("reacted"))}}).bind(void 0),"data-id":o._id,children:["Like ","".concat(u>0?"("+u+")":"")]}),(0,Ot.jsx)("div",{className:"reply button","data-id":o._id,onClick:(async e=>{p(!h)}).bind(void 0),children:"Reply"}),(0,Ot.jsx)("div",{className:"comment-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:o.createdAt})})]}),h&&(0,Ot.jsx)("div",{className:"new-reply",children:(0,Ot.jsxs)("div",{className:"comment-field",children:[(0,Ot.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode){let t=e.currentTarget.dataset.comment;if(g){let e=await aa.post("/comment/addReply",{replyMsg:g.body,authorId:r._id,commentId:t});if(200==e.status){p(!1);let t=e.data;v((e=>[...e,t]))}}}},onChange:(async e=>{y((t=>d(d({},t),{},{body:e.target.value})))}).bind(void 0),className:"field-comment-text",type:"text","data-comment":o._id,placeholder:"Reply to ".concat(o.author.fullName)}),(0,Ot.jsx)("div",{onClick:(async e=>{let t=e.currentTarget.dataset.comment;if(g){let e=await aa.post("/comment/addReply",{replyMsg:g.body,authorId:r._id,commentId:t});if(200==e.status){p(!1);let t=e.data;v((e=>[...e,t]))}}}).bind(void 0),"data-comment":o._id,className:"comment-attachment",children:(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-paper-plane"})})})]})}),m.map(((e,t)=>(0,Ot.jsx)(Qs,{setReplies:v,replies:m,comment:o,item:e,myProfile:r},t)))]})]})})};const Zs=e=>{let t=e.watch||{},n=e.authProfilePicture,r=e.authProfile,o=e.myProfile?e.myProfile:{},[i,s]=(o._id,(0,a.useState)(t.comments)),[u,l]=(0,a.useState)(null),[c,f]=(0,a.useState)({body:null,attachment:null});return(0,Ot.jsxs)(a.Fragment,{children:[(0,Ot.jsxs)("div",{className:"comments",children:[i&&i.map(((e,n)=>e&&(0,Ot.jsx)(Js,{comment:e,watch:t,myProfile:o},n))),t.comments.length>i.length&&(0,Ot.jsx)("div",{className:"more-comment-button",children:" View more comments"})]}),(0,Ot.jsxs)("div",{className:"new-comment",children:[(0,Ot.jsx)("div",{className:"user-pp",children:(0,Ot.jsx)(Rn,{profilePic:n,profile:r})}),(0,Ot.jsxs)("div",{className:"comment-field",children:[(0,Ot.jsx)("input",{onKeyUp:async n=>{if(n.preventDefault(),13===n.keyCode)try{n.target.value="";let r=new FormData;r.append("body",null==c.body?"":c.body),r.append("attachment",null==u?"":u),r.append("watch",t._id);let a=await aa.post("/comment/addComment",{body:c.body,attachment:u,watch:t._id.toString()});if(200===a.status){let t=a.data;t.author=o;let n=t;s((t=>{[...t].slice(-3);let r=[...t,n];return f([]),e.commentState((e=>e+1)),r}))}}catch(r){console.log(r)}},onChange:async e=>{f((t=>d(d({},t),{},{body:e.target.value})))},className:"field-comment-text",type:"text",placeholder:"Write a Public Comment"}),(0,Ot.jsxs)("div",{onClick:async e=>{let t=e.currentTarget;_n()(t).children("input").trigger("click")},className:"comment-attachment",children:[(0,Ot.jsx)("input",{onChange:async e=>{f((e=>d(d({},e),{},{attachment:"https://programmerikram.com/wp-content/uploads/2025/03/loading.gif"})));let t=new FormData;t.append("image",e.target.files[0]);let n=await aa.post("/upload/",t,{headers:{"content-type":"multipart/form-data"}});n&&setTimeout((()=>{let e=n.data.secure_url;l(e),f((t=>d(d({},t),{},{attachment:e})))}),1e3)},className:"attachment",type:"file"}),(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-camera"})})]})]})]}),(0,Ot.jsx)("div",{className:"comment-attachment-preview",children:c.attachment&&(0,Ot.jsx)("img",{alt:"comment attachment",src:c.attachment})})]})},eu=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsxs)("div",{className:"skeleton-card",children:[(0,Ot.jsxs)("div",{className:"skeleton-header",children:[(0,Ot.jsx)("div",{className:"skeleton-avatar"}),(0,Ot.jsxs)("div",{className:"skeleton-lines",children:[(0,Ot.jsx)("div",{className:"skeleton-line short"}),(0,Ot.jsx)("div",{className:"skeleton-line medium"})]})]}),(0,Ot.jsx)("div",{className:"skeleton-main"}),(0,Ot.jsxs)("div",{className:"skeleton-footer",children:[(0,Ot.jsx)("div",{className:"skeleton-line small button"}),(0,Ot.jsx)("div",{className:"skeleton-line small button"}),(0,Ot.jsx)("div",{className:"skeleton-line small button"})]})]},t)))},tu=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsx)("div",{className:"skeleton-card no-border",children:(0,Ot.jsx)("div",{className:"skeleton-main"})},t)))},nu="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",ru="https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",ou="https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg",au=e=>{let{watch:t}=e,n=fn((e=>e.profile)),r=n._id,[o,i]=(0,a.useState)(t.reacts.length),[s,u]=(0,a.useState)(t.shares.length),[l,c]=(0,a.useState)(t.comments.length),[d,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[m,v]=(0,a.useState)([]);const[g,y]=(0,a.useState)(!1),[b,x]=(0,a.useState)(t.videoUrl),w=(0,a.useRef)(null),C=(0,a.useRef)(null);(0,a.useEffect)((()=>(Ui.emit("is_active",{profileId:"",myId:r}),Ui.on("is_active",((e,t,n)=>{n===r&&f(e)})),()=>Ui.off("is_active"))),[n]),(0,a.useEffect)((()=>{x(t.videoUrl)}),[t]);var k=""===r;(0,a.useEffect)((()=>{let e=[];t.reacts.map((t=>{if(t.profile){switch(t.type){case"like":e.includes("like")||e.push("like");break;case"love":e.includes("love")||e.push("love");break;case"haha":e.includes("haha")||e.push("haha")}t.profile===r&&p(t.type)}})),v(e)}),[]);let S=t.type||"watch",E=async function(){i((e=>e-1));let e=await aa.post("/react/removeReact",{id:t._id,watchType:"watch"});return 200===e.status&&(i(e.data.reacts.length),p(""),!0)},_=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"watch";i((e=>e+1));let r=await aa.post("/react/addReact",{id:t._id,watchType:n,reactType:e});return 200===r.status&&(i(r.data.reacts.length),v([...m,e]),p(e),!0)},N=fn((e=>e.profile.profilePic)),T=fn((e=>e.profile._id)),R="".concat(null===t||void 0===t?void 0:t.author.profilePic);return(0,a.useEffect)((()=>{window.addEventListener("scroll",(()=>{(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(null==e)return;return e.getBoundingClientRect().top<=t})(null===C||void 0===C?void 0:C.current)&&(document.querySelectorAll(".watch-video").forEach((e=>{e.pause()})),w.current.play())}))}),[]),(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{ref:C,className:"nf-watch ".concat(S),children:[(0,Ot.jsxs)("div",{className:"header",children:["profilePic"===S&&(0,Ot.jsxs)("div",{className:"reason",children:[(0,Ot.jsxs)("span",{className:"d-none",children:[(0,Ot.jsx)("b",{children:"A bitch"})," commented."]}),(0,Ot.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Ot.jsxs)("div",{className:"author-info",children:[(0,Ot.jsxs)("div",{className:"left",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:R,profile:t.author._id,active:d})}),(0,Ot.jsxs)("div",{className:"watch-nd-container",children:[(0,Ot.jsx)(_t,{to:"/"+t.author._id,children:(0,Ot.jsx)("h4",{className:"author-name",children:t.author.user.firstName+" "+t.author.user.surname})}),(0,Ot.jsx)("span",{className:"watch-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:t.createdAt})})]})]}),(0,Ot.jsxs)("div",{className:"right",children:[k&&(0,Ot.jsx)("button",{className:"watch-three-dot",children:(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"})}),(0,Ot.jsxs)("button",{onClick:(async e=>{let n=e.currentTarget;k?(0,ms.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this watch?",buttons:[{label:"Yes",onClick:async()=>{let e=await aa.watch("/watch/delete",{watchId:t._id,authorId:t.author._id});200===e.status?(_n()(n).parents(".nf-watch").css({"min-height":"0px",padding:"10px"}),_n()(n).parents(".nf-watch").html('<p class="fs-6 mb-0 text-center text-danger">'+e.data.message+"</p>")):alert("Failed to delete watch")}},{label:"No",onClick:()=>{}}]}):_n()(n).parents(".nf-watch").hide()}).bind(void 0),className:"watch-close",children:[" ",(0,Ot.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Ot.jsxs)("div",{className:"body",children:[(0,Ot.jsx)("p",{className:"caption",children:t.caption}),b&&(0,Ot.jsx)("div",{className:"attachment",children:(0,Ot.jsx)(_t,{to:"/watch/".concat(t._id),children:(0,Ot.jsx)("video",{id:"watch-".concat(t._id),ref:w,className:"w-100 watch-video",controls:!0,src:"".concat(b)})})})||(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(tu,{})})]}),(0,Ot.jsxs)("div",{className:"footer",children:[(0,Ot.jsxs)("div",{className:"react-count",children:[(0,Ot.jsxs)("div",{className:"reacts",children:[m.includes("like")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:nu,alt:"like"}),"  "]}):(0,Ot.jsx)("span",{}),m.includes("love")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:ru,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),m.includes("haha")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:ou,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),(0,Ot.jsxs)("span",{className:"text",children:[t.reacts&&o," ",o>1?"Reacts":"React"]})]}),(0,Ot.jsxs)("div",{className:"comment-share",children:[(0,Ot.jsxs)("div",{className:"comment",children:[(0,Ot.jsx)("div",{className:"text",children:t.comments&&l}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Ot.jsxs)("div",{className:"shares",children:[(0,Ot.jsx)("div",{className:"text",children:t.shares&&s}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Ot.jsx)("div",{className:"like-comment-share",children:(0,Ot.jsxs)("div",{className:"buttons-container",children:[(0,Ot.jsxs)("div",{className:"react-buttons button ".concat(h?"reacted":""),children:[(0,Ot.jsxs)("div",{onClick:async e=>{let t=e.currentTarget;_n()(t).parent().hasClass("reacted")?(E("watch"),_n()(t).parent().removeClass("reacted")):(_("like","watch",t),_n()(t).parent().addClass("reacted"))},onMouseOver:e=>{let t=e.currentTarget;_n()(t).children(".watch-react-container").css("visibility","visible")},className:"react-like ".concat(1==h?"reacted":""),children:[(0,Ot.jsxs)("span",{className:"react-icon",datatype:h||"",children:["haha"==h?(0,Ot.jsx)("img",{src:ou,alt:"haha"}):(0,Ot.jsx)("span",{}),"love"==h?(0,Ot.jsx)("img",{src:ru,alt:"love"}):(0,Ot.jsx)("span",{}),0==h||"like"==h?(0,Ot.jsx)("img",{src:nu,alt:"like"}):(0,Ot.jsx)("span",{})]}),(0,Ot.jsx)("span",{className:"text text-capitalize",children:h||"like"})]}),(0,Ot.jsxs)("div",{className:"watch-react-container",children:[(0,Ot.jsx)("div",{className:"react react-like ".concat("like"==h?"reacted":""),onClick:async e=>{let t=e.currentTarget;_n()(t).parents(".watch-react-container").css("visibility","hidden"),_n()(t).hasClass("reacted")?(E("watch"),_n()(t).removeClass("reacted")):(_("like","watch",t),_n()(t).addClass("reacted"),_n()(e.currentTarget).siblings().removeClass("reacted")),setTimeout((()=>{_n()(t).parents(".watch-react-container").css("visibility","visible")}),500)},id:"watchReactLike",title:"Like",children:(0,Ot.jsx)("img",{src:nu,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-love ".concat("love"==h?"reacted":""),onClick:e=>{let t=e.currentTarget;_n()(t).parents(".watch-react-container").css("visibility","hidden"),_n()(e.currentTarget).hasClass("reacted")?(E("watch"),_n()(e.currentTarget).removeClass("reacted")):(_("love","watch"),_n()(e.currentTarget).siblings().removeClass("reacted"),_n()(e.currentTarget).addClass("reacted")),setTimeout((()=>{_n()(t).parents(".watch-react-container").css("visibility","visible")}),500)},id:"watchReactLove",title:"Love",children:(0,Ot.jsx)("img",{src:ru,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-haha ".concat("haha"==h?"reacted":""),onClick:e=>{let t=e.currentTarget;_n()(t).parents(".watch-react-container").css("visibility","hidden"),_n()(e.currentTarget).hasClass("reacted")?(E(),_n()(e.currentTarget).removeClass("reacted")):(_("haha","watch",t),_n()(e.currentTarget).siblings().removeClass("reacted"),_n()(e.currentTarget).addClass("reacted")),setTimeout((()=>{_n()(t).parents(".watch-react-container").css("visibility","visible")}),500)},id:"watchReactHaha",title:"Haha",children:(0,Ot.jsx)("img",{src:ou,alt:"haha"})})]})]}),(0,Ot.jsxs)("div",{onClick:e=>{let t=e.currentTarget;_n()(t).parents(".footer").find(".field-comment-text").focus()},className:"comment button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})}),(0,Ot.jsx)("span",{className:"text",children:"Comment"})]}),(0,Ot.jsxs)("div",{onClick:e=>{},className:"share button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-share"})}),(0,Ot.jsx)("span",{className:"text",children:"Share"})]})]})}),(0,Ot.jsx)(Zs,{watch:t,commentState:c,myProfile:n,authProfile:T,authProfilePicture:N})]})]})})},iu=()=>{let e=fn((e=>e.profile))._id,t=la();const[n,r]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(async()=>{let t=await aa.get("watch/related",{params:{profile_id:e}});200===t.status&&r(t.data)})()}),[]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{className:"container my-3",children:(0,Ot.jsxs)("div",{className:"row",children:[(0,Ot.jsx)("div",{className:"col-md-3",children:!t&&(0,Ot.jsx)(ua,{})}),(0,Ot.jsx)("div",{className:"col-md-6",children:n.length>0?n.map(((e,t)=>(0,Ot.jsx)(au,{watch:e,type:"watch"},t))):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(eu,{count:3})})}),(0,Ot.jsx)("div",{className:"col-md-3",children:!t&&(0,Ot.jsx)(ds,{})})]})})})};const su=()=>(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("h2",{children:"Marketplace"})});const uu=()=>(0,Ot.jsx)(a.Fragment,{}),lu=()=>(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"yt-download-page",children:(0,Ot.jsx)("div",{className:"container my-3",children:(0,Ot.jsx)("div",{className:"row",children:(0,Ot.jsx)("div",{className:"col",children:(0,Ot.jsx)("h1",{children:"Yt Downloader"})})})})})});var cu=n(6178),du=n.n(cu);let fu=e=>{const t=du()(e);du()();return t.format("DD/MM/YY hh:mm A")};const hu=e=>{var t,n,r,o,i,s,u,l,c,d;let{index:f,msg:h,friendProfile:p,isActive:m,messages:v,setReplyData:g,setIsReplying:y,setIsPreview:b,isPreview:x,msgListRef:w,isMsgLoading:C}=e,k=fn((e=>e.profile))._id,S=p._id,[E,_]=(h.reacts.includes(k)||h.reacts.includes(k),(0,a.useState)(h.reacts.includes(k))),[N,T]=(0,a.useState)(!1),[R,D]=(0,a.useState)(h.reacts.includes(S)),[I,A]=(0,a.useState)(!1),[O,M]=(0,a.useState)(!1),[P,j]=(0,a.useState)(!h||void 0!==(null===h||void 0===h?void 0:h.parent));(0,a.useEffect)((()=>{var e,t;(gs(h.attachment)&&Tn(h.attachment,A),gs(null===h||void 0===h||null===(e=h.parent)||void 0===e?void 0:e.attachment))&&Tn(null===h||void 0===h||null===(t=h.parent)||void 0===t?void 0:t.attachment,M)}),[h]),(0,a.useEffect)((()=>{}),[I]),(0,a.useEffect)((()=>(Ui.on("messageReacted",(e=>{h._id===e&&D(!0)})),Ui.on("messageReactRemoved",(e=>{h._id===e&&D(!1)})),()=>{Ui.off("messageReacted"),Ui.off("messageReactRemoved")}))),(0,a.useEffect)((()=>{var e;null!==h&&void 0!==h&&null!==(e=h.parent)&&void 0!==e&&e._id&&j(!0)}),[]);let F=async e=>{let t=_n()(e.currentTarget).data("id");Ui.emit("deleteMessage",t)},L=async e=>{let t=_n()(e.currentTarget).data("id");if(E){200==(await aa.post("/message/removeReact",{messageId:t,myId:k})).status&&_(!1)}else{200==(await aa.post("/message/addReact",{messageId:t,myId:k})).status&&_(!0)}},B=async e=>{let t=_n()(e.currentTarget).data("id");y(!0),b(!0),g({messageId:t,body:h.message})},W=async e=>{Ui.emit("speak_message",_n()(e.currentTarget).data("id"),S)},U=async e=>{let t=e.currentTarget.dataset.parent;document.querySelectorAll("#chatMessageList .chat-message-container .chat-message").forEach(((e,t)=>{e.style.border="unset"}));let n=document.querySelector("#chatMessageList .chat-message-container.message-id-".concat(t," .chat-message"));null!==n&&(n.scrollIntoView({behavior:"smooth"}),n.style.border="2px solid #29B1A9",T(!0));let r=new CustomEvent("scroll",{bubbles:!0,cancelable:!0}),o=setInterval((()=>{N&&(n=document.querySelector("#chatMessageList .chat-message-container.message-id-".concat(t," .chat-message")),n.scrollIntoView({behavior:"smooth"}),n.style.border="2px solid #29B1A9",clearInterval(o)),null==n?0==C&&(w.current.scrollTop=10,w.current.dispatchEvent(r),n=document.querySelector("#chatMessageList .chat-message-container.message-id-".concat(t," .chat-message"))):(n=document.querySelector("#chatMessageList .chat-message-container.message-id-".concat(t," .chat-message")),n&&(T(!0),clearInterval(o),n.scrollIntoView({behavior:"smooth"}),n.style.border="2px solid #29B1A9"))}),1500)};return(0,Ot.jsx)(Ot.Fragment,{children:h.senderId!==k?(0,Ot.jsxs)("div",{className:"chat-message-container message-receive message-id-".concat(h._id," ").concat(!0===E||1==R?"message-reacted":""),"data-toggle":"tooltip",title:fu(h.timestamp),children:[(0,Ot.jsx)("div",{className:"chat-message-profilePic",children:(0,Ot.jsx)(Rn,{profilePic:"".concat(p.profilePic),profile:p._id,active:!!m})}),(0,Ot.jsxs)("div",{className:"chat-message ".concat(gs(v.attachment)&&"has-attachment"),children:[(0,Ot.jsxs)("div",{className:"chat-message-options",children:[(0,Ot.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option like ".concat(1==E?"reacted":""),onClick:L.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-thumbs-up"})}),(0,Ot.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option reply",onClick:B.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-reply"})}),(0,Ot.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option share",onClick:W.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-speaker"})}),(0,Ot.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option delete",onClick:F.bind(h),children:(0,Ot.jsx)("i",{className:"fa fa-trash"})})]}),void 0===(null===h||void 0===h?void 0:h.parent)||null===(null===h||void 0===h?void 0:h.parent)?(0,Ot.jsx)(Ot.Fragment,{}):(0,Ot.jsxs)("p",{onClick:U.bind(void 0),"data-parent":null===h||void 0===h||null===(t=h.parent)||void 0===t?void 0:t._id,className:"parent-message-container ".concat(gs(null===h||void 0===h||null===(n=h.parent)||void 0===n?void 0:n.attachment)&&"has-attachment"),children:[(0,Ot.jsx)("span",{children:null===h||void 0===h||null===(r=h.parent)||void 0===r?void 0:r.message}),1==O?(0,Ot.jsx)("div",{className:"message-attachment-container",children:(0,Ot.jsx)("img",{src:null===h||void 0===h||null===(o=h.parent)||void 0===o?void 0:o.attachment,alt:"Message Attchment",className:"message-attachment"})}):gs(null===h||void 0===h||null===(i=h.parent)||void 0===i?void 0:i.attachment)&&(0,Ot.jsx)(vs,{style:{minWidth:"200px"}})]}),(0,Ot.jsx)("div",{className:"message-container mb-0",children:(0,Ot.jsx)("span",{children:h.message})}),1==I?(0,Ot.jsx)("div",{className:"message-attachment-container",children:(0,Ot.jsx)("img",{src:h.attachment,alt:"",className:"message-attachment"})}):gs(h.attachment)&&(0,Ot.jsx)(vs,{style:{minWidth:"200px"}}),(0,Ot.jsx)("span",{className:"message-react",children:(0,Ot.jsx)("i",{children:"\ud83d\udc4d"})})]}),(0,Ot.jsx)("div",{className:"chat-message-seen-status d-none",children:"Seen"})]},f):(0,Ot.jsxs)("div",{className:"chat-message-container message-sent message-id-".concat(h._id," ").concat(!0===E||1==R?"message-reacted":""),"data-toggle":"tooltip",title:fu(h.timestamp),children:[(0,Ot.jsxs)("div",{className:"chat-message ".concat(gs(v.attachment)&&"has-attachment"),children:[(0,Ot.jsxs)("div",{className:"chat-message-options",children:[(0,Ot.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option like ".concat(1==E?"reacted":""),onClick:L.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-thumbs-up"})}),(0,Ot.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option reply",onClick:B.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-reply"})}),(0,Ot.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option share speaker",onClick:W.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-speaker"})}),(0,Ot.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option delete",onClick:F.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-trash"})})]}),void 0===(null===h||void 0===h?void 0:h.parent)||null===(null===h||void 0===h?void 0:h.parent)?(0,Ot.jsx)(Ot.Fragment,{}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("p",{onClick:U.bind(void 0),"data-parent":null===h||void 0===h||null===(s=h.parent)||void 0===s?void 0:s._id,className:"parent-message-container ".concat(gs(null===h||void 0===h||null===(u=h.parent)||void 0===u?void 0:u.attachment)&&"has-attachment"),children:[(0,Ot.jsx)("span",{children:null===h||void 0===h||null===(l=h.parent)||void 0===l?void 0:l.message}),1==O?(0,Ot.jsx)("div",{className:"message-attachment-container",children:(0,Ot.jsx)("img",{src:null===h||void 0===h||null===(c=h.parent)||void 0===c?void 0:c.attachment,alt:"",className:"message-attachment"})}):gs(null===h||void 0===h||null===(d=h.parent)||void 0===d?void 0:d.attachment)&&(0,Ot.jsx)(vs,{style:{minWidth:"200px"}})]})}),(0,Ot.jsx)("div",{className:"message-container mb-0",children:(0,Ot.jsx)("span",{children:h.message})}),1==I?(0,Ot.jsx)("div",{className:"message-attachment-container",children:(0,Ot.jsx)("img",{src:h.attachment,alt:"Message Attchment",className:"message-attachment"})}):gs(h.attachment)&&(0,Ot.jsx)(vs,{style:{minWidth:"200px"}}),(0,Ot.jsx)("span",{className:"message-react",children:(0,Ot.jsx)("i",{children:"\ud83d\udc4d"})})]}),(0,Ot.jsx)("div",{className:"chat-message-seen-status ".concat(h.isSeen?"message-seen":"message-unseen"),children:(0,Ot.jsx)("img",{src:p.profilePic,alt:"Seen"})})]},f)})};var pu=function(e,t){return pu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},pu(e,t)};function mu(e,t){function n(){this.constructor=e}pu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var vu=function(){return vu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vu.apply(this,arguments)};function gu(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(wu){a(wu)}}function s(e){try{u(r.throw(e))}catch(wu){a(wu)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function yu(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(wu){a=[6,wu],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function bu(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r}var xu=function(e,t){return(xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function wu(e,t){function n(){this.constructor=e}xu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Cu=function(){return(Cu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ku(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function Su(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var Eu=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=_u(this.global.location.search);"tfjsflags"in t&&t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],o=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,o)}))}},e}();function _u(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")})),t}var Nu=null;function Tu(e){Nu=e}Object.freeze({Environment:Eu,getQueryParams:_u,get ENV(){return Nu},setEnvironmentGlobal:Tu});function Ru(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Du(e,t,n){return Math.max(e,Math.min(t,n))}function Iu(e){return e%2==0?e:e+1}function Au(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Ou(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Mu(e,t,n){void 0===n&&(n=""),Ou(Lu(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Pu(e){Ou(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function ju(e,t){if(void 0===t&&(t=[]),null==t&&(t=[]),Array.isArray(e)||Zu(e))for(var n=0;n<e.length;++n)ju(e[n],t);else t.push(e);return t}function Fu(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Lu(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Bu(e){return e%1==0}function Wu(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Uu(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function zu(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Hu(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,o){var a=0,i=function(){if(e())r();else{var s=t(++a);null!=n&&a>=n?o():setTimeout(i,s)}};i()}))}function Vu(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var a=e.slice();return a[r]=t/n,a}function qu(e,t){var n=t.length;return Ou((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),Ou(e.every((function(e){return Bu(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function Gu(e,t){for(var n=[],r=[],o=null==t?null:qu(t,e).sort(),a=0,i=0;i<e.length;++i){if(null!=o){if(o[a]===i&&1!==e[i])throw new Error("Can't squeeze axis "+i+" since its dim '"+e[i]+"' is not 1");(null==o[a]||o[a]>i)&&1===e[i]&&(n.push(e[i]),r.push(i)),o[a]<=i&&a++}1!==e[i]&&(n.push(e[i]),r.push(i))}return{newShape:n,keptDims:r}}function Yu(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Ku(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function $u(e,t,n){if("float32"===t)for(var r=0;r<e.length;r++){var o=e[r];if(isNaN(o)||!isFinite(o))throw Error("The result of the '"+n+"' is "+o+".")}}function Xu(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function Qu(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function Ju(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function Zu(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function el(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function tl(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=2*e.length})),t}function nl(e){return"string"==typeof e||e instanceof String}function rl(e){return"boolean"==typeof e}function ol(e){return"number"==typeof e}function al(e){return Array.isArray(e)?al(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":ol(e)?"float32":nl(e)?"string":rl(e)?"bool":"float32"}function il(e){return!!(e&&e.constructor&&e.call&&e.apply)}function sl(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function ul(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function ll(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ju(e)),n&&Xu(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)0!==Math.round(e[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function cl(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var o=new Array;if(1===n.length)for(var a=n[0],i=0;i<a;i++)o[i]=r[t+i];else{a=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(i=0;i<a;i++)o[i]=e(t+i*u,s,r)}return o}(0,e,t)}function dl(e,t){for(var n=fl(e,t),r=0;r<n.length;r++)n[r]=1;return n}function fl(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function hl(){if("undefined"!=typeof performance)return performance.now();if("undefined"!=typeof process){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}function pl(e){e.forEach((function(t){Ou(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function ml(e,t){return Nu.platform.fetch(e,t)}Object.freeze({shuffle:Ru,clamp:Du,nearestLargerEven:Iu,sum:Au,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},assert:Ou,assertShapesMatch:Mu,assertNonNull:Pu,flatten:ju,sizeFromShape:Fu,isScalarShape:function(e){return 0===e.length},arraysEqual:Lu,isInt:Bu,tanh:Wu,sizeToSquarishShape:Uu,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Ru(t),t},rightPad:zu,repeatedTry:Hu,inferFromImplicitShape:Vu,parseAxisParam:qu,squeezeShape:Gu,getTypedArrayFromDType:Yu,getArrayFromDType:Ku,checkComputationForErrors:$u,checkConversionForErrors:Xu,isValidDtype:Qu,hasEncodingLoss:Ju,isTypedArray:Zu,bytesPerElement:el,bytesFromStringArray:tl,isString:nl,isBoolean:rl,isNumber:ol,inferDtype:al,isFunction:il,nearestDivisor:sl,computeStrides:ul,toTypedArray:ll,toNestedArray:cl,makeOnesTypedArray:dl,makeZerosTypedArray:fl,now:hl,assertNonNegativeIntegerDimensions:pl,fetch:ml});var vl=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new gl)}return e.prototype.profileKernel=function(e,t){var n,r=this,o=this.backendTimer.time((function(){n=t()}));return(Array.isArray(n)?n:[n]).forEach((function(t){var n=t.dataSync();$u(n,t.dtype,e),o.then((function(o){var a="";null!=o.getExtraProfileInfo&&(a=o.getExtraProfileInfo()),r.logger.logKernelProfile(e,t,n,o.kernelMs,a)}))})),n},e}(),gl=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,o){var a=zu(r+"ms",9),i=zu(e,25),s=t.rank,u=t.size,l=zu(t.shape.toString(),14);console.log("%c"+i+"\t%c"+a+"\t%c"+s+"D "+l+"\t%c"+u+"\t%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green")},e}();function yl(e,t,n){return zu(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":nl(e)?"'"+e+"'":"bool"===n?bl(e):parseFloat(e.toFixed(7)).toString(),t)}function bl(e){return 0===e?"false":"true"}function xl(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var wl=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Fu(e),null!=n){var o=n.length;Ou(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Ku(t,this.size),this.strides=ul(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Ou(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var o=this.locToIndex(n);this.values[o]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,o=e;r<o.length;r++){var a=o[r];if(a<0||a>=this.shape[n]){var i="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return El.make(this.shape,{values:this.values},this.dtype)},e}(),Cl=null,kl=null,Sl=null,El=function(){function e(e,t,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Fu(e),this.strides=ul(e),this.dataId=null!=r?r:{},this.id=Cl().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",Cl().registerTensor(this,o),null!=n&&Cl().write(o,this.dataId,n)}return e.make=function(t,n,r,o){return new e(t,r,n.values,n.dataId,o)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),Ou(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),this.reshape([e,t,n,r,o])},e.prototype.asType=function(e){return this.throwIfDisposed(),kl.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return ku(this,void 0,void 0,(function(){var e;return Su(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,kl.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return kl.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return ku(this,void 0,void 0,(function(){var e;return Su(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,cl(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return cl(this.shape,this.dataSync())},e.prototype.data=function(){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){return this.throwIfDisposed(),[2,Cl().read(this.dataId)]}))}))},e.prototype.dataSync=function(){return this.throwIfDisposed(),Cl().readSync(this.dataId)},e.prototype.dispose=function(){this.isDisposed||(Cl().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),kl.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),kl.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),kl.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),kl.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),kl.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),kl.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),kl.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var o=ul(t),a=function(e,t,n,r){var o=Fu(t),a=r[r.length-1],i=new Array(a).fill(0),s=t.length,u="complex64"===n?xl(e):e;if(s>1)for(var l=0;l<o/a;l++)for(var c=l*a,d=0;d<a;d++)i[d]=Math.max(i[d],yl(u[c+d],0,n).length);return i}(e,t,n,o),i=t.length,s=function e(t,n,r,o,a,i){void 0===i&&(i=!0);var s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[yl(xl(t)[0],0,r)]:"bool"===r?[bl(t[0])]:[t[0].toString()];if(1===l){if(u>20){var c=3*s,d=Array.from(t.slice(0,c)),f=Array.from(t.slice(u-3*s,u));return"complex64"===r&&(d=xl(d),f=xl(f)),["["+d.map((function(e,t){return yl(e,a[t],r)})).join(", ")+", ..., "+f.map((function(e,t){return yl(e,a[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?xl(t):Array.from(t)).map((function(e,t){return yl(e,a[t],r)})).join(", ")+"]"]}var h=n.slice(1),p=o.slice(1),m=o[0]*s,v=[];if(u>20){for(var g=0;g<3;g++){var y=(b=g*m)+m;v.push.apply(v,e(t.slice(b,y),h,r,p,a,!1))}for(v.push("..."),g=u-3;g<u;g++)y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),h,r,p,a,g===u-1))}else for(g=0;g<u;g++){var b;y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),h,r,p,a,g===u-1))}var x=2===l?",":"";for(v[0]="["+v[0]+x,g=1;g<v.length-1;g++)v[g]=" "+v[g]+x;var w=",\n";for(g=2;g<l;g++)w+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(i?"":w),v}(e,t,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),kl.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),kl.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),kl.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),kl.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),kl.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),kl.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),kl.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),kl.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),kl.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),kl.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),kl.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),kl.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,o){return void 0===n&&(n=.001),Sl("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,o,r,n)},e.prototype.batchNorm=function(e,t,n,r,o){return void 0===o&&(o=.001),this.throwIfDisposed(),kl.batchNorm(this,e,t,n,r,o)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),kl.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),kl.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),kl.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),kl.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),kl.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),kl.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),kl.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),kl.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),kl.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),kl.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),kl.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),kl.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),kl.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),kl.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),kl.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),kl.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),kl.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),kl.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),kl.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),kl.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),kl.div(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),kl.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),kl.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),kl.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),kl.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),kl.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),kl.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),kl.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),kl.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),kl.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),kl.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),kl.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),kl.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),kl.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),kl.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),kl.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),kl.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),kl.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),kl.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),kl.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),kl.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),kl.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),kl.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),kl.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),kl.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),kl.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),kl.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),kl.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),kl.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),kl.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),kl.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),kl.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),kl.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),kl.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),kl.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),kl.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),kl.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),kl.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),kl.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),kl.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),kl.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),kl.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),kl.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),kl.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),kl.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),kl.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),kl.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),kl.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),kl.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),kl.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),kl.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),kl.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),kl.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),kl.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),kl.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),kl.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),kl.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),kl.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),kl.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),kl.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),kl.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),kl.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),kl.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),kl.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),kl.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),kl.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),kl.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),kl.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),kl.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),kl.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),kl.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),kl.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),kl.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),kl.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),kl.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,o,a){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),kl.conv1d(this,e,t,n,r,o,a)},e.prototype.conv2d=function(e,t,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),kl.conv2d(this,e,t,n,r,o,a)},e.prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),kl.conv2dTranspose(this,e,t,n,r,o)},e.prototype.depthwiseConv2D=function(e,t,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),kl.depthwiseConv2d(this,e,t,n,r,o,a)},e.prototype.separableConv2d=function(e,t,n,r,o,a){return void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),kl.separableConv2d(this,e,t,n,r,o,a)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),kl.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),kl.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),kl.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,o){return this.throwIfDisposed(),kl.pool(this,e,t,n,r,o)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),_l.variable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),kl.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),kl.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),kl.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),kl.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,o,a,i,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),this.throwIfDisposed(),kl.stridedSlice(this,e,t,n,r,o,a,i,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),kl.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),kl.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),kl.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),kl.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),kl.spectral.irfft(this)},e}();Object.defineProperty(El,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var _l=function(e){function t(t,n,r){void 0===n&&(n=!0);var o=e.call(this,t.shape,t.dtype,null,t.dataId)||this;o.trainable=n,o.name=r,null==o.name&&(o.name=Cl().nextVariableId().toString());try{Cl().registerVariable(o)}catch(e){throw Cl().disposeTensor(o),e}return o}return wu(t,e),t.variable=function(e,n,r,o){return void 0===n&&(n=!0),null!=o&&o!==e.dtype&&(e=e.asType(o)),new t(e,n,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Lu(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Cl().disposeTensor(this),this.dataId=e.dataId,Cl().registerTensor(this)},t.prototype.dispose=function(){Cl().disposeVariable(this),this.isDisposedInternal=!0},t}(El);Object.defineProperty(_l,Symbol.hasInstance,{value:function(e){return e instanceof El&&null!=e.assign&&e.assign instanceof Function}});var Nl,Tl,Rl,Dl,Il;_l.variable;!function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Nl||(Nl={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Tl||(Tl={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Rl||(Rl={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Dl||(Dl={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Il||(Il={}));var Al={float32:Dl,int32:Tl,bool:Rl,complex64:Il};function Ol(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Al[e][t]}function Ml(e){return Ol(e,"int32")}function Pl(e,t){if(e.dtype===t.dtype)return[e,t];var n=Ol(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function jl(e,t){Ou(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function Fl(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof El)n.push(t);else if(o=t,Array.isArray(o)||"object"==typeof o){var o,a=t;for(var i in a){var s=a[i];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:Pl,assertTypesMatch:jl,isTensorInList:function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0;return!1},getTensorsInContainer:Fl});var Ll,Bl=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Wl=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Bl}return e.prototype.ready=function(){return ku(this,void 0,void 0,(function(){var e,t,n;return Su(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return ku(this,void 0,void 0,(function(){var t,n,r;return Su(this,(function(o){switch(o.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.profiler=new vl(this.backendInstance),[2,!0]}}))}))},e.prototype.initializeBackend=function(e){var t=this,n=Ul.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,a=r.then((function(n){return!(o<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(o<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),o=r.success,a=r.asyncInit;if(a||o)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){this.write(e,t,this.readSync(t))},e.prototype.tidy=function(e,t){var n,r=this,o=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun((function(){return r.startScope(o)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=El.make(e.shape,{dataId:e.dataId},e.dtype);return this.addTapeNode([e],t,(function(e){return[e.toFloat()]})),t},e.prototype.runKernel=function(e,t,n){var r,o=this,a=[],i=this.isTapeOn(),s=null!=this.state.activeScope?this.state.activeScope.name:"",u=function(e){i&&(a=e.map((function(e){return o.keep(o.clone(e))})))},l=this.state.numBytes,c=this.state.numTensors;if(this.scopedRun((function(){return o.state.kernelDepth++}),(function(){return o.state.kernelDepth--}),(function(){r=o.ENV.getBool("DEBUG")?o.profiler.profileKernel(s,(function(){return e(o.backend,u)})):e(o.backend,u)})),i){var d={id:this.state.nextTapeNodeId++,name:s,inputs:t,outputs:Array.isArray(r)?r:[r],saved:a};null!=n&&(d.gradient=function(e){return n(e,a)}),this.state.activeTape.push(d)}return this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-l,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-c,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShape:Array.isArray(r)?r.map((function(e){return e.shape})):r.shape}),r},e.prototype.registerTensor=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*el(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:null!=t?t:this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r,null!=t?t.register(e.dataId,e.shape,e.dtype):this.backend.register(e.dataId,e.shape,e.dtype)}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof _l||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.state.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered");this.state.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return ku(this,void 0,void 0,(function(){var t,n;return Su(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n){var r={};e.forEach((function(e,t){r[t]=e}));var o={id:this.state.nextTapeNodeId++,name:this.state.activeScope.name,inputs:r,outputs:[t],gradient:function(e){var t=n(e),r={};return t.forEach((function(e,t){r[t]=function(){return e}})),r}};this.state.activeTape.push(o)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Fl(e),r=new Set(n.map((function(e){return e.id}))),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||r.has(a.id)||a.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),Ou(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",e)}));Ou(a instanceof El,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},o={},a=0;a<t.length;a++)r[t[a].id]=!0;for(a=0;a<e.length;a++){var i=(p=e[a]).inputs;for(var s in i){for(var u=i[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,o[p.id]=!0;break}if(l)break}}var d={};d[n.id]=!0;var f={};for(a=e.length-1;a>=0;a--)for(i=(p=e[a]).inputs,c=0;c<p.outputs.length;c++)if(d[p.outputs[c].id]){for(var s in i)d[i[s].id]=!0,f[p.id]=!0;break}var h=[];for(a=0;a<e.length;a++){var p;if(o[(p=e[a]).id]&&f[p.id]){var m={};for(var s in p.inputs){var v=p.inputs[s];r[v.id]&&(m[s]=v)}var g=Object.assign({},p);g.inputs=m,g.outputs=p.outputs,h.push(g)}}return h}(this.state.activeTape,t,a);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[a.id]=null==n?(r=dl(Fu(e=a.shape),"float32"),El.make(e,{values:r})):n,function(e,t,n){for(var r=function(r){var o=t[r],a=[];if(o.outputs.forEach((function(t){var n=e[t.id];if(null!=n)a.push(n);else{var r=El.make(t.shape,{values:fl(t.size,t.dtype)},t.dtype);a.push(r)}})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.name+".");var i=o.gradient(1===o.outputs.length?a[0]:a),s=function(t){if(!(t in i))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(i)+".");var r=n((function(){return i[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.name+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=o.inputs[t];if(!Lu(r.shape,a.shape))throw new Error("Error in gradient for op "+o.name+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==e[a.id])e[a.id]=r;else{var s=e[a.id];e[a.id]=s.add(r),s.dispose()}};for(var u in o.inputs)s(u)},o=t.length-1;o>=0;o--)r(o)}(s,i,(function(e){return o.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===o.state.gradientDepth&&(o.state.activeTape.forEach((function(e){for(var t in e.saved)e.saved[t].dispose()})),o.state.activeTape=null),{value:a,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return Ou(il(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];Ou(r.every((function(e){return e instanceof El})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var a={};return r.forEach((function(e,t){a[t]=e})),t.runKernel((function(t,o){return Ou((n=e.apply(void 0,r.concat([o]))).value instanceof El,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Ou(il(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),a,(function(e,t){var o=n.gradFunc(e,t),a=Array.isArray(o)?o:[o];Ou(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Ou(a.every((function(e){return e instanceof El})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i}))}},e.prototype.write=function(e,t,n){var r=this.state.tensorInfo.get(t),o=r.backend;if(e=e||this.backend,"string"===r.dtype){var a=tl(n);this.state.numBytes+=a-r.bytes,r.bytes=a}e!==o&&(o.disposeData(t),r.backend=e,e.register(t,r.shape,r.dtype)),e.write(t,n)},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return ku(this,void 0,void 0,(function(){var t,n;return Su(this,(function(r){switch(r.label){case 0:return t=hl(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=hl()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Bl,this.registry)this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Ul=function(){var e=function(){if(null==Ll){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Ll=e}return Ll}();if(null==e._tfengine){var t=new Eu(e);e._tfengine=new Wl(t)}return Tu(e._tfengine.ENV),Cl=function(){return e._tfengine},e._tfengine}();function zl(){return"undefined"!=typeof window||"undefined"!=typeof WorkerGlobalScope}Nu.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Nu.registerFlag("IS_BROWSER",(function(){return zl()})),Nu.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),Nu.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Nu.registerFlag("PROD",(function(){return!1})),Nu.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Nu.getBool("DEBUG")})),Nu.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Nu.registerFlag("IS_TEST",(function(){return!1}));var Hl={},Vl={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function ql(e,t){Hl[e]=t}function Gl(e){e in Hl||(Hl[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Hl[e]}),!1),1===e?t.getContext("webgl",Vl)||t.getContext("experimental-webgl",Vl):t.getContext("webgl2",Vl)}(e));var t=Hl[e];return t.isContextLost()?(delete Hl[e],Gl(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Hl[e])}function Yl(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+$l(e,t))}(e),r}function Kl(e){return!!(Nu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function $l(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Xl(e,t,n){return bc(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function Ql(e,t,n){var r=bc(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Yl(e,t,(function(){return e.shaderSource(r,n)})),Yl(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Jl(e,t,n){var r=bc(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Yl(e,t,(function(){return e.shaderSource(r,n)})),Yl(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=tc.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map((function(e,t){return zu((t+1).toString(),a)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),c=i.slice(r-1,r),d=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+zu(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Zl,ec,tc=/ERROR: [0-9]+:([0-9]+):/g;function nc(e,t){return bc(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function rc(e,t,n){if(Yl(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function oc(e,t,n){if(Yl(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function ac(e,t,n){var r=bc(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Yl(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Yl(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function ic(e,t,n){var r=bc(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Yl(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),Yl(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function sc(e,t){return bc(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function uc(e,t){var n=Nu.getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function lc(e,t){return bc(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function cc(e,t,n,r,o,a,i,s){var u=e.getAttribLocation(n,r);return-1!==u&&(Yl(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,o)})),Yl(e,t,(function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,s)})),Yl(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function dc(e,t,n,r){xc(e,r),Yl(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),Yl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function fc(e,t,n,r){return bc(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function hc(e,t,n){return e.getUniformLocation(t,n)}function pc(e,t,n,r,o,a){Yl(e,t,(function(){return dc(e,t,r,a)})),Yl(e,t,(function(){return e.uniform1i(o,a)}))}function mc(e,t,n,r){Yl(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),Yl(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function vc(e,t,n){Yl(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),Yl(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function gc(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+yc(e,t))}function yc(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function bc(e,t,n,r){var o=Yl(e,t,(function(){return n()}));if(null==o)throw new Error(r);return o}function xc(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function wc(e,t){return void 0===t&&(t=2),Fu(e.slice(0,e.length-t))}function Cc(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function kc(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[wc(e)].concat(Cc(e))),t}function Sc(e,t){var n;void 0===t&&(t=!1);var r=Nu.getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Iu(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var o=Gu(e);e=o.newShape}var a=Fu(e);if(e.length<=1&&a<=r)return[1,a];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=wc(e),s=2,u=2;return e.length&&(s=(n=Cc(e))[0],u=n[1]),Uu(a=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return Uu(a)}function Ec(e){return e%2==0}function _c(e,t){if(Lu(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Ec(n)&&Ec(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Ec(e[0])&&Ec(t[0])}function Nc(e){if(null==Zl){var t=Gl(e);Zl=t.getParameter(t.MAX_TEXTURE_SIZE)}return Zl}function Tc(e){if(null==ec){var t=Gl(e);ec=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ec)}function Rc(e){if(0===e)return 0;var t=Gl(e);return Dc(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Dc(t,"EXT_disjoint_timer_query")?1:0}function Dc(e,t){return null!=e.getExtension(t)}function Ic(e){try{if(null!=Gl(e))return!0}catch(e){return!1}return!1}function Ac(e){if(0===e)return!1;var t=Gl(e);if(1===e){if(!Dc(t,"OES_texture_float"))return!1}else if(!Dc(t,"EXT_color_buffer_float"))return!1;return Mc(t,e)}function Oc(e){if(0===e)return!1;var t=Gl(e);if(1===e){if(!Dc(t,"OES_texture_float"))return!1;if(!Dc(t,"WEBGL_color_buffer_float"))return!1}else if(!Dc(t,"EXT_color_buffer_float"))return!1;return Mc(t,e)}function Mc(e,t){var n=e.createFramebuffer(),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var o=2===t?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,o,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),a}function Pc(e){return 2===e&&null!=Gl(e).fenceSync}var jc=Object.freeze({callAndCheck:Yl,canBeRepresented:Kl,getWebGLErrorMessage:$l,getExtensionOrThrow:Xl,createVertexShader:Ql,createFragmentShader:Jl,createProgram:nc,linkProgram:rc,validateProgram:oc,createStaticVertexBuffer:ac,createStaticIndexBuffer:ic,getNumChannels:function(){return 2===Nu.getNumber("WEBGL_VERSION")?1:4},createTexture:sc,validateTextureSize:uc,createFramebuffer:lc,bindVertexBufferToProgramAttribute:cc,bindTextureUnit:dc,unbindTextureUnit:function(e,t,n){xc(e,n),Yl(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),Yl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:fc,getProgramUniformLocation:hc,bindTextureToProgramUniformSampler:pc,bindCanvasToFramebuffer:function(e,t){Yl(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),Yl(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),Yl(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:mc,unbindColorTextureFromFramebuffer:vc,validateFramebuffer:gc,getFramebufferErrorMessage:yc,getBatchDim:wc,getRowsCols:Cc,getShapeAs3D:kc,getTextureShapeFromLogicalShape:Sc,isReshapeFree:_c,get MAX_TEXTURE_SIZE(){return Zl},get MAX_TEXTURES_IN_SHADER(){return ec},getWebGLMaxTextureSize:Nc,getMaxTexturesInShader:Tc,getWebGLDisjointQueryTimerVersion:Rc,isWebGLVersionEnabled:Ic,isRenderToFloatTextureEnabled:Ac,isDownloadFloatTextureEnabled:Oc,isWebGLFenceEnabled:Pc});function Fc(e){Nu.getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Lc(e,t){return Ul.tidy(e,t)}function Bc(e){Fl(e).forEach((function(e){return e.dispose()}))}function Wc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Nu.getBool("IS_TEST")||console.warn.apply(console,e)}function Uc(e){var t=e;if(Zu(e))return[e.length];if(!Array.isArray(e))return[];for(var n=[];Array.isArray(t)||Zu(t);)n.push(t.length),t=t[0];return Array.isArray(e)&&Nu.getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||Zu(t)){Ou(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),Ou(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var o=n.slice(1),a=0;a<t.length;++a)e(t[a],o,r.concat(a))}else Ou(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,n,[]),n}function zc(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function Hc(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof El)return zc(r,e.dtype,t,n),e;var o=al(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),zc(r,o,t,n),null==e||!Zu(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var a=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=Uc(e);Zu(e)||Array.isArray(e)||(e=[e]);var s="string"!==o?ll(e,o,Nu.getBool("DEBUG")):ju(e);return El.make(i,{values:s},o)}function Vc(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return Hc(e,t+"["+r+"]",n)}),r)}function qc(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Gc(e,t,n){for(var r=e.length+t.length,o=[],a=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}function Yc(e,t){for(var n=[],r=e.length,o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((function(t){return e[t]}))]}function Kc(e,t){return Gc(e,t.map((function(e){return 1})),t)}function $c(e,t,n){Ou(qc(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function Xc(e,t){if(qc(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Qc(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Jc(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Zc(e,t){var n=e[0].length;e.forEach((function(e,t){Ou(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),Ou(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,o){for(var a=0;a<n;a++)Ou(a===t||e[a]===r[a],(function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function ed(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function td(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ul.startScope(n);try{var o=r.apply(void 0,e);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ul.endScope(o),o}catch(e){throw Ul.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Nu.registerFlag("HAS_WEBGL",(function(){return Nu.getNumber("WEBGL_VERSION")>0})),Nu.registerFlag("WEBGL_VERSION",(function(){return Ic(2)?2:Ic(1)?1:0})),Nu.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Nu.get("WEBGL_VERSION")})),Nu.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Nu.registerFlag("WEBGL_PACK",(function(){return Nu.getBool("HAS_WEBGL")})),Nu.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Nu.getBool("WEBGL_PACK")})),Nu.registerFlag("WEBGL_PACK_CLIP",(function(){return Nu.getBool("WEBGL_PACK")})),Nu.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Nu.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Nu.getBool("WEBGL_PACK")})),Nu.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Nu.getBool("WEBGL_PACK")})),Nu.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Nu.getBool("WEBGL_PACK")})),Nu.registerFlag("WEBGL_PACK_REDUCE",(function(){return Nu.getBool("WEBGL_PACK")})),Nu.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Nu.getBool("WEBGL_PACK")})),Nu.registerFlag("WEBGL_CONV_IM2COL",(function(){return Nu.getBool("WEBGL_PACK")})),Nu.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Nc(Nu.getNumber("WEBGL_VERSION"))})),Nu.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Tc(Nu.getNumber("WEBGL_VERSION"))})),Nu.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Nu.getNumber("WEBGL_VERSION");return 0===e?0:Rc(e)})),Nu.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),Nu.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return Ac(Nu.getNumber("WEBGL_VERSION"))})),Nu.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Oc(Nu.getNumber("WEBGL_VERSION"))})),Nu.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return Pc(Nu.getNumber("WEBGL_VERSION"))})),Nu.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Nu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Sl=Fc;var nd=td({complex_:function(e,t){var n=Hc(e,"real","complex"),r=Hc(t,"imag","complex");return Mu(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Ul.runKernel((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),rd=td({real_:function(e){var t=Hc(e,"input","real");return Ul.runKernel((function(e){return e.real(t)}),{$input:t})}}),od=td({imag_:function(e){var t=Hc(e,"input","imag");return Ul.runKernel((function(e){return e.imag(t)}),{$input:t})}});function ad(e,t,n){return id(e,t,Uc(e),n)}function id(e,t,n,r){if(null==r&&(r=al(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Zu(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){pl(t);var o=Fu(t),a=Fu(n);Ou(o===a,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+a}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==Fu(t.slice(i));Ou(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return Zu(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?ll(e,r,Nu.getBool("DEBUG")):ju(e),El.make(t,{values:e},r)}function sd(e,t){if((Zu(e)||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");return id(e,[],[],t)}function ud(e,t){Pu(e);var n=Uc(e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return id(e,null,n,t)}function ld(e,t,n){if(Pu(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Uc(e);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return id(e,t,r,n)}function cd(e,t,n){if(Pu(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Uc(e);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return id(e,t,r,n)}function dd(e,t,n){if(Pu(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Uc(e);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return id(e,t,r,n)}function fd(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=fd(e,"float32"),r=hd(e,"float32");return nd(n,r)}var o=dl(Fu(e),t);return El.make(e,{values:o},t)}function hd(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=hd(e,"float32"),r=hd(e,"float32");return nd(n,r)}var o=fl(Fu(e),t);return El.make(e,{values:o},t)}function pd(e,t,n){return Ul.runKernel((function(r){return r.fill(e,t,n)}),{})}function md(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return hd([0],r);var o=fl(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return ud(o,r)}var vd=td({onesLike_:function(e){var t=Hc(e,"x","onesLike");if("complex64"===t.dtype){var n=vd(rd(t)),r=gd(od(t));return nd(n,r)}return Ul.runKernel((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return gd(e)}}}))}}),gd=td({zerosLike_:function(e){var t=Hc(e,"x","zerosLike");return Ul.runKernel((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return gd(e)}}}))}}),yd=td({concat_:function(e,t){void 0===t&&(t=0),Ou(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Vc(e,"tensors","concat");t=qu(t,n[0].shape)[0];var r=ed(n.map((function(e){return e.shape})),t);if(0===Fu(r))return ad([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var o=n.map((function(e){return e.shape}));Zc(o,t);var a=n;return Ul.runKernel((function(e){return e.concat(n,t)}),a,(function(e){var n=o.map((function(e){return e[t]}));return kd(e,n,t).map((function(e){return function(){return e}}))}))}}),bd=td({concat1d_:function(e){return yd(e,0)}}),xd=td({concat2d_:function(e,t){return yd(e,t)}}),wd=td({concat3d_:function(e,t){return yd(e,t)}}),Cd=td({concat4d_:function(e,t){return yd(e,t)}}),kd=td({split_:function(e,t,n){void 0===n&&(n=0);var r,o=Hc(e,"x","split");return n=qu(n,o.shape)[0],"number"==typeof t?(Ou(o.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(o.shape[n]/t)):(Ou(o.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),Ul.runKernel((function(e){return e.split(o,r,n)}),{$x:o},(function(e){return{$x:function(){return yd(e,n)}}}))}});function Sd(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var Ed=Sd((function(e){!function(e,t){function n(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var o=new n(e),a=t&&t.state,i=o.next;return i.int32=function(){return 4294967296*o.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,a&&("object"==typeof a&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.alea=o}(0,e)})),_d=Sd((function(e){!function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&("object"==typeof a&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.xor128=o}(0,e)})),Nd=Sd((function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&("object"==typeof a&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)})),Td=Sd((function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&(a.x&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)})),Rd=Sd((function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),o=0,a=-32;a<u;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&(a.X&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)})),Dd=Sd((function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&("object"==typeof a&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.tychei=o}(0,e)})),Id=Sd((function(e){!function(t,r){var o,a=this,i=256,s="random",u=r.pow(i,6),l=r.pow(2,52),c=2*l,d=255;function f(e,n,d){var f=[],g=m(function e(t,n){var r,o=[],a=typeof t;if(n&&"object"==a)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==a?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,v(t)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(i):(e=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(e)),v(e)}catch(e){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,v(t)]}}():e,3),f),y=new h(f),b=function(){for(var e=y.g(6),t=u,n=0;e<l;)e=(e+n)*i,t*=i,n=y.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(v(y.S),t),(n.pass||d||function(e,t,n,o){return o&&(o.S&&p(o,y),e.state=function(){return p(y,{})}),n?(r[s]=e,t):e})(b,g,"global"in n?n.global:this==r,n.state)}function h(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<i;)s[o]=o++;for(o=0;o<i;o++)s[o]=s[a=d&a+e[o%n]+(t=s[o])],s[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,s=r.S;e--;)t=s[o=d&o+1],n=n*i+s[d&(s[o]=s[a=d&a+t])+(s[a]=t)];return r.i=o,r.j=a,n})(i)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",o=0;o<r.length;)t[d&o]=d&(n^=19*t[d&o])+r.charCodeAt(o++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=f,m(r.random(),t),e.exports){e.exports=f;try{o=n(Object(function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}}}([],Math)}));Id.alea=Ed,Id.xor128=_d,Id.xorwow=Nd,Id.xorshift7=Td,Id.xor4096=Rd,Id.tychei=Dd;var Ad=Id.alea,Od=function(){function e(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=Ad(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var o=void 0,a=void 0,i=void 0;do{i=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),Md=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=1);var o=this;if(this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Ad(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Pd(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",pl(e),new wl(e,t,n)}var jd=td({batchToSpaceND_:function(e,t,n){var r=Hc(e,"x","batchToSpaceND"),o=t.reduce((function(e,t){return e*t}));return Ou(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),Ou(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),Ou(r.shape[0]%o==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o})),Ul.runKernel((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),Fd=td({cast_:function(e,t){var n=Hc(e,"x","cast");if(!Qu(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Ul.runKernel((function(e){return e.cast(n,t)}),{$x:n},(function(e){return{$x:function(){return e.clone()}}}))}}),Ld=td({clone_:function(e){var t=Hc(e,"x","clone",null);return Ul.runKernel((function(e){return El.make(t.shape,{dataId:t.dataId},t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),Bd=td({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=Hc(e,"x","cumsum"),a=Xc([t|=0],o.rank),i=o;null!=a&&(i=o.transpose(a));var s=Jc(1,o.rank)[0],u=Ul.runKernel((function(e){return e.cumsum(i,s,n,r)}),{permutedX:i},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=a&&(u=u.transpose(a)),u}}),Wd=td({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=Hc(e,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return Ou(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),Ou(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),Ou(i%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape})),Ul.runKernel((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),Ud=td({expandDims_:function(e,t){void 0===t&&(t=0);var n=Hc(e,"x","expandDims",null);Ou(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(Ou(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),Zd(n,r)}}),zd=td({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var o=Pd([e,t],r),a=e<=t?e:t,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return rf(Ud(s,0),[n[0],1,1]);if(2===n.length)return rf(Ud(Ud(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return rf(Ud(Ud(Ud(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),Hd=td({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var o=Hc(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=1===i?o.as2D(1,-1):o,u=Ul.runKernel((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===i?u.as1D():u}}),Vd=td({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=Hc(e,"indices","oneHot","int32"),a=o.shape.concat([t]);return o=o.flatten(),Ul.runKernel((function(e){return e.oneHot(o,t,n,r)}),{$indices:o},(function(e){return{$indices:function(){return hd(o.shape,"float32")}}})).reshape(a)}}),qd=td({pad_:function(e,t,n){void 0===n&&(n=0);var r=Hc(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o=t.map((function(e){return e[0]}));return Ul.runKernel((function(e){return e.pad(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.slice(o,r.shape)}}}))}}),Gd=td({pad1d_:function(e,t,n){return void 0===n&&(n=0),Ou(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),qd(e,[t],n)}}),Yd=td({pad2d_:function(e,t,n){return void 0===n&&(n=0),Ou(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),qd(e,t,n)}}),Kd=td({pad3d_:function(e,t,n){return void 0===n&&(n=0),Ou(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),qd(e,t,n)}}),$d=td({pad4d_:function(e,t,n){return void 0===n&&(n=0),Ou(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),qd(e,t,n)}}),Xd=td({rand_:function(e,t,n){var r=Fu(e),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=t();return El.make(e,{values:o},n)}}),Qd=td({randomNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new Od(t,n,r,!1,o),i=Pd(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Jd=td({randomUniform_:function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=Pd(e,r),i=new Md(t,n,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Zd=td({reshape_:function(e,t){var n=Hc(e,"x","reshape",null);return t=Vu(t,n.size),Ou(n.size===Fu(t),(function(){return"new shape and old shape must have the same number of elements."})),Ul.runKernel((function(e){return e.reshape(n,t)}),{$x:n},(function(e){return{$x:function(){return e.reshape(n.shape)}}}))}}),ef=td({spaceToBatchND_:function(e,t,n){var r=Hc(e,"x","spaceToBatchND");return Ou(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),Ou(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),Ou(r.shape.reduce((function(e,r,o){return o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),Ul.runKernel((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),tf=td({squeeze_:function(e,t){var n=Hc(e,"x","squeeze");return Zd(n,Gu(n.shape,t).newShape)}}),nf=td({stack_:function(e,t){void 0===t&&(t=0);var n=Vc(e,"tensors","stack");if(Ou(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;Ou(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Mu(o,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){Ou(a===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(e){return e.expandDims(t)}));return yd(i,t)}}),rf=td({tile_:function(e,t){var n=Hc(e,"x","tile",null);return Ou(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."})),Ul.runKernel((function(e,r){var o=e.tile(n,t);return r([n]),o}),{$x:n},(function(e,n){var r=n[0];return{$x:function(){var n=gd(r);if(1===r.rank)for(var o=0;o<t[0];++o)n=n.add(e.slice([o*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(o=0;o<t[0];++o)for(var a=0;a<t[1];++a)n=n.add(e.slice([o*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(o=0;o<t[0];++o)for(a=0;a<t[1];++a)for(var i=0;i<t[2];++i)n=n.add(e.slice([o*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(o=0;o<t[0];++o)for(a=0;a<t[1];++a)for(i=0;i<t[2];++i)for(var s=0;s<t[3];++s)n=n.add(e.slice([o*r.shape[0],a*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}))}}),of=td({truncatedNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new Od(t,n,r,!0,o),i=Pd(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),af=td({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=Hc(e,"x","unstack");return Ou(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length),Ul.runKernel((function(e){return e.unstack(n,t)}),{$x:n},(function(e){return{$x:function(){return nf(e,t)}}}))}});function sf(e,t,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var a=t.length,i=0;i<a;++i)o=o.concat([e[i+1]/t[i],t[i]]);o=o.concat(e.slice(a+1))}return o}function uf(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function lf(e,t,n,r){void 0===r&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var a=1;a<e.length;++a)a<=t.length?r?o.push(t[a-1]*e[a]):o.push(e[a]/t[a-1]):o.push(e[a]);return o}function cf(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function df(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function ff(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=e.shape,s=n.slice();s.pop();var u=1;for(a=r;a<e.rank;++a)u*=i[a],s.push(i[a]);var l=ul(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,o,u,l]}function hf(e){return e<=30?e:sl(e,Math.floor(Math.sqrt(e)))}function pf(e,t,n){for(var r=t.rank>1?t.shape[t.rank-1]:1,o=n.length,a=1,i=r;i<o;++i)a*=n[i];var s=r<1?1:r;return{sliceRank:r,numUpdates:t.size/s,sliceSize:a,strides:ul(n.slice(0,r)).concat([1]),outputSize:Fu(n)}}function mf(e,t,n,r,o,a,i,s,u){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==i)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");for(var l=[],c=[],d=[],f=0;f<e.length;f++)l[f]=vf(o,t,r,e,f),c[f]=gf(a,n,r,e,f),u&1<<f&&(c[f]=l[f]+1,d.push(f));var h=new Array(e.length).fill(0);return h=h.map((function(e,t){for(var n=0,o=r[t]||1,a=l[t];!(o>0?a>=c[t]:a<=c[t]);a+=o)n+=1;return n})),[l,h,d]}function vf(e,t,n,r,o){var a=t[o],i=n[o]||1;(e&1<<o||null==a)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),Du(0,a,s-1)}function gf(e,t,n,r,o){var a=t[o],i=n[o]||1;(e&1<<o||null==a)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),i>0?Du(0,a,s):Du(-1,a,s-1)}function yf(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function bf(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function xf(e){return Ul.customGrad(e)}var wf=td({softmax_:function(e,t){void 0===t&&(t=-1);var n=Hc(e,"logits","softmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return xf((function(e,n){var r=e.logSumExp([t],!0),o=e.toFloat().sub(r).exp();return n([o]),{value:o,gradFunc:function(e,n){var r=n[0],o=e.mul(r);return o.sub(o.sum([t],!0).mul(r))}}}))(n)}}),Cf=td({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=Hc(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return xf((function(e,n){var r=e.max(t,!0),o=e.sub(r),a=o.toFloat().sub(o.exp().sum(t,!0).log());return n([a]),{value:a,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),kf=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.data.delete(e)},e}();!function(){function e(){}e.prototype.time=function(e){throw new Error("Not yet implemented.")},e.prototype.read=function(e){throw new Error("Not yet implemented.")},e.prototype.readSync=function(e){throw new Error("Not yet implemented.")},e.prototype.disposeData=function(e){throw new Error("Not yet implemented.")},e.prototype.write=function(e,t){throw new Error("Not yet implemented.")},e.prototype.fromPixels=function(e,t){throw new Error("Not yet implemented.")},e.prototype.register=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.memory=function(){throw new Error("Not yet implemented.")},e.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.fusedBatchMatMul=function(e,t,n,r,o,a){throw new Error("Not yet implemented")},e.prototype.slice=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.stridedSlice=function(e,t,n,r,o,a,i,s,u){throw new Error("Not yet implemented")},e.prototype.unstack=function(e,t){throw new Error("Not yet implemented")},e.prototype.reverse=function(e,t){throw new Error("Not yet implemented")},e.prototype.concat=function(e,t){throw new Error("Not yet implemented")},e.prototype.neg=function(e){throw new Error("Not yet implemented")},e.prototype.add=function(e,t){throw new Error("Not yet implemented")},e.prototype.addN=function(e){throw new Error("Not yet implemented")},e.prototype.subtract=function(e,t){throw new Error("Not yet implemented")},e.prototype.multiply=function(e,t){throw new Error("Not yet implemented")},e.prototype.realDivide=function(e,t){throw new Error("Not yet implemented")},e.prototype.floorDiv=function(e,t){throw new Error("Not yet implemented")},e.prototype.sum=function(e,t){throw new Error("Not yet implemented")},e.prototype.prod=function(e,t){throw new Error("Not yet implemented")},e.prototype.unsortedSegmentSum=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.argMin=function(e,t){throw new Error("Not yet implemented")},e.prototype.argMax=function(e,t){throw new Error("Not yet implemented")},e.prototype.equal=function(e,t){throw new Error("Not yet implemented")},e.prototype.notEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.less=function(e,t){throw new Error("Not yet implemented")},e.prototype.lessEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.greater=function(e,t){throw new Error("Not yet implemented")},e.prototype.greaterEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalNot=function(e){throw new Error("Not yet implemented")},e.prototype.logicalAnd=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalOr=function(e,t){throw new Error("Not yet implemented")},e.prototype.where=function(e){throw new Error("Not yet implemented")},e.prototype.select=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.topk=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.min=function(e,t){throw new Error("Not yet implemented")},e.prototype.minimum=function(e,t){throw new Error("Not yet implemented")},e.prototype.mod=function(e,t){throw new Error("Not yet implemented")},e.prototype.max=function(e,t){throw new Error("Not yet implemented")},e.prototype.maximum=function(e,t){throw new Error("Not yet implemented")},e.prototype.all=function(e,t){throw new Error("Not yet implemented")},e.prototype.any=function(e,t){throw new Error("Not yet implemented")},e.prototype.squaredDifference=function(e,t){throw new Error("Not yet implemented")},e.prototype.ceil=function(e){throw new Error("Not yet implemented")},e.prototype.floor=function(e){throw new Error("Not yet implemented")},e.prototype.round=function(e){throw new Error("Not yet implemented")},e.prototype.sign=function(e){throw new Error("Not yet implemented")},e.prototype.isNaN=function(e){throw new Error("Not yet implemented")},e.prototype.isInf=function(e){throw new Error("Not yet implemented")},e.prototype.isFinite=function(e){throw new Error("Not yet implemented")},e.prototype.pow=function(e,t){throw new Error("Not yet implemented")},e.prototype.exp=function(e){throw new Error("Not yet implemented")},e.prototype.expm1=function(e){throw new Error("Not yet implemented")},e.prototype.log=function(e){throw new Error("Not yet implemented")},e.prototype.log1p=function(e){throw new Error("Not yet implemented")},e.prototype.sqrt=function(e){throw new Error("Not yet implemented")},e.prototype.rsqrt=function(e){throw new Error("Not yet implemented")},e.prototype.square=function(e){throw new Error("Not yet implemented")},e.prototype.reciprocal=function(e){throw new Error("Not yet implemented")},e.prototype.relu=function(e){throw new Error("Not yet implemented")},e.prototype.prelu=function(e,t){throw new Error("Not yet implemented")},e.prototype.elu=function(e){throw new Error("Not yet implemented")},e.prototype.eluDer=function(e,t){throw new Error("Not yet implemented")},e.prototype.selu=function(e){throw new Error("Not yet implemented")},e.prototype.int=function(e){throw new Error("Not yet implemented")},e.prototype.clip=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.abs=function(e){throw new Error("Not yet implemented")},e.prototype.complexAbs=function(e){throw new Error("Not yet implemented")},e.prototype.sigmoid=function(e){throw new Error("Not yet implemented")},e.prototype.softplus=function(e){throw new Error("Not yet implemented")},e.prototype.sin=function(e){throw new Error("Not yet implemented")},e.prototype.cos=function(e){throw new Error("Not yet implemented")},e.prototype.tan=function(e){throw new Error("Not yet implemented")},e.prototype.asin=function(e){throw new Error("Not yet implemented")},e.prototype.acos=function(e){throw new Error("Not yet implemented")},e.prototype.atan=function(e){throw new Error("Not yet implemented")},e.prototype.atan2=function(e,t){throw new Error("Not yet implemented")},e.prototype.sinh=function(e){throw new Error("Not yet implemented")},e.prototype.cosh=function(e){throw new Error("Not yet implemented")},e.prototype.tanh=function(e){throw new Error("Not yet implemented")},e.prototype.asinh=function(e){throw new Error("Not yet implemented")},e.prototype.acosh=function(e){throw new Error("Not yet implemented")},e.prototype.atanh=function(e){throw new Error("Not yet implemented")},e.prototype.erf=function(e){throw new Error("Not yet implemented")},e.prototype.step=function(e,t){throw new Error("Not yet implemented")},e.prototype.conv2d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2D=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.maxPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.maxPoolBackprop=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.avgPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.avgPoolBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.reshape=function(e,t){throw new Error("Not yet implemented")},e.prototype.cast=function(e,t){throw new Error("Not yet implemented")},e.prototype.tile=function(e,t){throw new Error("Not yet implemented")},e.prototype.pad=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.transpose=function(e,t){throw new Error("Not yet implemented")},e.prototype.gather=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.gatherND=function(e,t){throw new Error("Not yet implemented")},e.prototype.scatterND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchToSpaceND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.spaceToBatchND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeBilinear=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeBilinearBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchNormalization=function(e,t,n,r,o,a){throw new Error("Not yet implemented")},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){throw new Error("Not yet implemented")},e.prototype.LRNGrad=function(e,t,n,r,o,a,i){throw new Error("Not yet implemented")},e.prototype.multinomial=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.oneHot=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.cumsum=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.nonMaxSuppression=function(e,t,n,r,o){throw new Error("Not yet implemented")},e.prototype.fft=function(e){throw new Error("Not yet implemented")},e.prototype.ifft=function(e){throw new Error("Not yet implemented")},e.prototype.complex=function(e,t){throw new Error("Not yet implemented")},e.prototype.real=function(e){throw new Error("Not yet implemented")},e.prototype.imag=function(e){throw new Error("Not yet implemented")},e.prototype.cropAndResize=function(e,t,n,r,o,a){throw new Error("Not yet implemented")},e.prototype.depthToSpace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.split=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.sparseToDense=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.fill=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.onesLike=function(e){throw new Error("Not yet implemented")},e.prototype.zerosLike=function(e){throw new Error("Not yet implemented")},e.prototype.linspace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.dispose=function(){throw new Error("Not yet implemented")}}();function Sf(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var a=n-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function Ef(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function _f(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var a=e[e.length-o-1];null==a&&(a=1);var i=t[t.length-o-1];if(null==i&&(i=1),1===a)n.unshift(i);else if(1===i)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(a)}}return n}function Nf(e,t,n,r,o,a,i){void 0===i&&(i="channelsLast");var s,u=If(t),l=u[0],c=u[1];if("channelsLast"===i)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);s=[l,c,e[1],e[1]]}return Tf(e,s,n,r,o,a,!1,i)}function Tf(e,t,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3];if("channelsLast"===s)l=e[0],c=e[1],d=e[2],f=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],f=e[1],c=e[2],d=e[3]}var h,p=t[0],m=t[1],v=t[3],g=If(n),y=g[0],b=g[1],x=If(r),w=x[0],C=x[1],k=Of(p,w),S=Of(m,C),E=function(e,t,n,r,o,a,i,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,o,a){null==o&&(o=Df(e,t,r));var i=e[1],s=Mf((e[0]-t+2*o)/r+1,a);Ou(Bu(s),(function(){return"The output # of rows ("+s+") must be an integer. Change the stride and/or zero pad parameters"}));var u=Mf((i-t+2*o)/r+1,a);return Ou(Bu(u),(function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"})),[s,u,1]}([t,n,1],a,0,r,e,s);l=d[0],c=d[1]}else if("same"===e){l=Math.ceil(t/r),c=Math.ceil(n/o);var f=Math.max(0,(l-1)*r+a-t),h=Math.max(0,(c-1)*o+i-n),p=Math.floor(f/2),m=f-p,v=Math.floor(h/2);u={top:p,bottom:m,left:v,right:h-v,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-a+1)/r),c=Math.ceil((n-i+1)/o)}return{padInfo:u,outHeight:l,outWidth:c}}(o,c,d,y,b,k,S,a),_=E.padInfo,N=E.outHeight,T=E.outWidth,R=i?v*f:v;return"channelsFirst"===s?h=[l,R,N,T]:"channelsLast"===s&&(h=[l,N,T,R]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:f,outHeight:N,outWidth:T,outChannels:R,padInfo:_,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:k,effectiveFilterWidth:S,dilationHeight:w,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function Rf(e,t,n,r,o,a,i){void 0===a&&(a=!1),void 0===i&&(i="channelsLast");var s=[-1,-1,-1,-1,-1],u=s[0],l=s[1],c=s[2],d=s[3],f=s[4];if("channelsLast"===i)u=e[0],l=e[1],c=e[2],d=e[3],f=e[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);u=e[0],f=e[1],l=e[2],c=e[3],d=e[4]}var h,p=t[0],m=t[1],v=t[2],g=t[4],y=Af(n),b=y[0],x=y[1],w=y[2],C=Af(r),k=C[0],S=C[1],E=C[2],_=function(e,t,n,r,o,a,i,s,u,l){var c,d,f,h;if("same"===e){var p=((d=Math.ceil(t/o))-1)*o+s-t,m=((f=Math.ceil(n/a))-1)*a+u-n,v=((h=Math.ceil(r/i))-1)*i+l-r,g=Math.floor(p/2),y=p-g,b=Math.floor(m/2),x=m-b,w=Math.floor(v/2);c={top:b,bottom:x,left:w,right:v-w,front:g,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/o),f=Math.ceil((n-u+1)/a),h=Math.ceil((r-l+1)/i)}return{padInfo:c,outDepth:d,outHeight:f,outWidth:h}}(o,l,c,d,b,x,w,Of(p,k),Of(m,S),Of(v,E)),N=_.padInfo,T=_.outDepth,R=_.outHeight,D=_.outWidth,I=a?g*f:g;return"channelsFirst"===i?h=[u,I,T,R,D]:"channelsLast"===i&&(h=[u,T,R,D,I]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:c,inWidth:d,inChannels:f,outDepth:T,outHeight:R,outWidth:D,outChannels:I,padInfo:N,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:p,filterHeight:m,filterWidth:v,dilationDepth:k,dilationHeight:S,dilationWidth:E,inShape:e,outShape:h,filterShape:t}}function Df(e,t,n,r){void 0===r&&(r=1);var o=Of(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function If(e){return"number"==typeof e?[e,e]:e}function Af(e){return"number"==typeof e?[e,e,e]:e}function Of(e,t){return t<=1?e:e+(e-1)*(t-1)}function Mf(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Pf(e){var t=If(e),n=t[0],r=t[1];return 1===n&&1===r}function jf(e,t){return Pf(e)||Pf(t)}function Ff(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=hd(e.shape),o=e.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!Ju(e.dtype,t))return El.make(e.shape,{dataId:e.dataId},t);if("complex64"===e.dtype){var i=n.real(e);return a=i.cast(t),i.dispose(),a}if("int32"===t)return n.int(e);if("bool"===t){var s=sd(0,e.dtype);return a=n.notEqual(e,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Lf(e,t){return El.make(t,{dataId:e.dataId},e.dtype)}function Bf(e,t,n){var r=(t-e)/(n-1),o=fl(n,"float32");o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return ud(o,"float32")}Object.freeze({castTensor:Ff,reshapeTensor:Lf,linspaceImpl:Bf,upcastType:Ol,axesAreInnerMostDims:qc,combineLocations:Gc,computeOutAndReduceShapes:Yc,expandShapeToKeepDim:Kc,assertAxesAreInnerMostDims:$c,getAxesPermutation:Xc,getUndoAxesPermutation:Qc,getInnerMostAxes:Jc,getBroadcastDims:Sf,getReductionAxes:Ef,assertAndGetBroadcastShape:_f,assertParamsConsistent:Zc,computeOutShape:ed,computePool2DInfo:Nf,computeConv2DInfo:Tf,computeConv3DInfo:Rf,computeDefaultPad:Df,tupleValuesAreOne:Pf,eitherStridesOrDilationsAreOne:jf});function Wf(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Uf(e,t){return{real:e[2*t],imag:e[2*t+1]}}function zf(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Hf(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Vf(e,t,n,r,o){for(var a=Array.from(t).map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>o})).sort((function(e,t){return t.score-e.score})),i=[],s=0;s<a.length;s++){var u=a[s],l=u.score,c=u.boxIndex;if(l<o)break;for(var d=!1,f=i.length-1;f>=0;--f)if(qf(e,c,i[f])>=r){d=!0;break}if(!d&&(i.push(c),i.length>=n))break}return ud(i,"int32")}function qf(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(s-a)*(u-i),p=(d-l)*(f-c);if(h<=0||p<=0)return 0;var m=Math.max(a,l),v=Math.max(i,c),g=Math.min(s,d),y=Math.min(u,f),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(h+p-b)}function Gf(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map((function(t){o[n]=t;var a=e.slice(r,o);return r[n]+=t,a}))}function Yf(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=Pd(n,e.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(e.rank),s=0;s<i.length;s++)i[s]=a[s]%e.shape[s];var u=e.locToIndex(i);o.values[r]=e.values[u]}return o.toTensor()}function Kf(e,t,n,r,o){for(var a=t[t.length-1],i=[e.length/a,a],s=i[0],u=i[1],l=Yu(n,s*r),c=Yu("int32",s*r),d=0;d<s;d++){for(var f=d*u,h=e.subarray(f,f+u),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort((function(e,t){return t.value-e.value}));var v=d*r,g=l.subarray(v,v+r),y=c.subarray(v,v+r);for(m=0;m<r;m++)g[m]=p[m].value,y[m]=p[m].index}var b=t.slice();return b[b.length-1]=r,[ad(l,b,n),ad(c,b,"int32")]}function $f(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=Pd(e,"int32"),a=Pd([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*e.length;a.values.set(i,s)}return a.toTensor()}var Xf=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Qf=function(e,t){this.outputShape=[],this.usesPackedTextures=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Jf=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,a=e.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Zf(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function eh(e,t){return 1===t?[e]:Zf(e,t)}function th(){var e,t,n,r,o,a,i,s,u,l;return 2===Nu.getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 0. || val == 0.) ? false : true;\n      }\n    ",u="\n      const float INFINITY = uintBitsToFloat(uint(0x7f800000));\n    ",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function nh(e,t,n){void 0===n&&(n="index");var r=ul(t);return r.map((function(t,o){return"int "+e[o]+" = "+n+" / "+t+"; "+(o===r.length-1?"int "+e[o+1]+" = "+n+" - "+e[o]+" * "+t:"index -= "+e[o]+" * "+t)+";"})).join("")}function rh(e){var t=ul(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var oh="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function ah(e,t,n,r){var o=[];e.forEach((function(e){var t=Fu(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?o.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(o.push("uniform sampler2D "+e.name+";"),o.push("uniform int offset"+e.name+";"))}));var a,i,s=o.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?sh(e):ih(e);var o=e.shapeInfo.logicalShape,a=t.logicalShape;return o.length<=a.length&&(r+=n?function(e,t){var n,r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Sf(e.shapeInfo.logicalShape,t.logicalShape),l=ph(s),c=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+d[e+c]+" = 0;"})).join("\n");var f;f=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+c]})).join(", ");var h="return outputValue;",p=1===Fu(e.shapeInfo.logicalShape),m=1===Fu(t.logicalShape);if(1!==i||p||m){if(p&&!m)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=i-2,g=i-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?h="return vec4(outputValue.x);":u.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+f+");\n      "+h+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Lu(i,a))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l,c=ph(u),d=Sf(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,h=["x","y","z","w","u","v"];l=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords."+h[e+f]+" = 0;"})).join("\n");var p;return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+h[t+f]})).join(", "),"\n    float "+o+"() {\n      "+c+" coords = getOutputCoords();\n      "+l+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),l=t.texShape,c=th(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),f=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    #define isnan(value) isnan_custom(value)\n    "+e.defineSpecialNaN+"\n    bvec4 isnan_custom(vec4 val) {\n      return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n    }\n\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+uh+"\n    "+lh+"\n    "+ch+"\n  "}(c);return t.isPacked?(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Lu(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2),a=o,i="",s="b, r, c",u=2;u<e.length-1;u++)i="\n      int b"+u+" = index / "+(a*=e[e.length-u-1])+";\n      index -= b"+u+" * "+a+";\n    "+i,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,o,a,i}(t.logicalShape,l),i=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return Lu(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=nh(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=nh(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=nh(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=nh(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),i=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(f+=dh),[f,d,i,s,a,u,n].join("\n")}function ih(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,o=r[0],a=r[1];if(1===o&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+fh(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+hh(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,o=r[0],a=r[1];if(1===a&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=fh(t);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+o+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+a+", index + "+i+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape;if(null!=o&&Lu(t,o)){var a=o[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var i=Gu(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length)return"\n      "+ih(mh(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+vh(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+hh(e)+"\n      }\n    ";var c=o[0],d=o[1],f=fh(n);return 1===d?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+f+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+f+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+f+";\n    vec2 uv = uvFromFlat("+c+", "+d+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[1]*t[2],a=t[2],i=Gu(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length)return"\n        "+ih(mh(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+vh(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+a+", 1)));\n        "+hh(e)+"\n      }\n    ";var c=e.shapeInfo.texShape,d=c[0],f=c[1],h=e.shapeInfo.flatOffset;return f===o&&null==h?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+f+".0, "+d+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":f===a&&null==h?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+f+".0, "+d+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+a+" + depth + "+fh(n)+";\n        vec2 uv = uvFromFlat("+d+", "+f+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[3],a=t[2]*o,i=t[1]*a,s=Gu(t),u=s.newShape,l=s.keptDims;if(u.length<t.length)return"\n      "+ih(mh(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+vh(["row","col","depth","depth2"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+a+", "+o+", 1)));\n        "+hh(e)+"\n      }\n    ";var c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1];return h===i&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===o&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+a+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+f+", "+h+", index + "+fh(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,s=t[1]*i,u=Gu(t),l=u.newShape,c=u.keptDims;if(l.length<t.length)return"\n      "+ih(mh(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+vh(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+i+", "+a+", "+o+")) +\n          depth3;\n        "+hh(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],p=f[1];return p===s&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===o&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+i+" + depth * "+a+" +\n          depth2 * "+o+" + depth3 + "+fh(n)+";\n      vec2 uv = uvFromFlat("+h+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Gu(t),a=o.newShape,i=o.keptDims;if(a.length<t.length)return"\n      "+ih(mh(e,a))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+vh(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    ";var s=t[5],u=t[4]*s,l=t[3]*u,c=t[2]*l,d=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+c+", "+l+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+hh(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],m=h[1];return m===d&&null==f?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+c+", "+l+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==f?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+c+" + depth * "+l+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+fh(n)+";\n      vec2 uv = uvFromFlat("+p+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function sh(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+th().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=th();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+a.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=o[0],i=o[1],s=th();if(null!=o&&Lu(t,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+a+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===t[0])return"\n        "+sh(mh(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+vh(["b","row","col"],[1,2])+");\n        }\n      ";var i=a[0],s=a[1],u=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+i+", "+s+", "+u*Math.ceil(t[1]/2)+", "+u+", b, row, col);\n      return "+th().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=i[0],u=i[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),d="int b, int row, int col",f="b * "+c+" + (row / 2) * "+l+" + (col / 2)",h=2;h<n-1;h++)d="int b"+h+", "+d,f="b"+h+" * "+(c*=t[n-h-1])+" + "+f;return"\n    vec4 "+o+"("+d+") {\n      int index = "+f+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+th().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var uh="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",lh="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ch="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",dh="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function fh(e){return"offset"+e}function hh(e){var t=e.name,n=Fu(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function ph(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function mh(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function vh(e,t){return t.map((function(t){return e[t]})).join(", ")}var gh=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,Ou(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,c=ph(l),d=eh("coords",l);if(1===a){var f=ph(s=l+1);i="\n        "+f+" sourceLocR = "+f+"("+d.join()+", 0);\n        ++"+d[l-1]+";\n        "+f+" sourceLocG = "+f+"("+d.join()+", 0);\n        ++"+d[l-2]+";\n        "+f+" sourceLocA = "+f+"("+d.join()+", 0);\n        --"+d[l-1]+";\n        "+f+" sourceLocB = "+f+"("+d.join()+", 0);\n        --"+d[l-2]+";"}else s=l,i="\n        "+c+" sourceLocR = coords;\n        ++"+d[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+d[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+d[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+d[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],m=h.map((function(e){return"int "+e})),v=eh("sourceLocR",s-1).concat("inIdx.r"),g=eh("sourceLocG",s-1).concat("inIdx.g"),y=eh("sourceLocB",s-1).concat("inIdx.b"),b=eh("sourceLocA",s-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",C="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",k=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+h.join()+"),\n                                          vec2("+h.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+h.join()+"),\n                               vec2("+h.slice(-2).join()+"));\n      }\n      "+k+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+d[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+d[l-2]+" < "+(u[l-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},yh=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},bh=function(e,t,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],_f(e,t),_f(e,n);var i="0.0";null!=r&&(_f(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";null!=o&&(_f(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},xh=function(e,t,n,r,o,a){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],_f(e,t),_f(e,n);var i="vec4(0.0)";null!=r&&(_f(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=o&&(_f(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},wh=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=_f(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Ch="return a + b;",kh="return a - b;",Sh="return a * b;",Eh=function(e,t,n){this.variableNames=["A","B"],this.outputShape=_f(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},_h=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=_f(t,n);var o=this.outputShape.length,a="";if(r)if(0===o||1===Fu(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+ph(o)+" coords = getOutputCoords();\n        ",1===o)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=eh("coords",o);a+="\n            bool nextRowOutOfBounds =\n              ("+i[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+i[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},Nh=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, min, max));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"min"),n.maxLoc=r.getUniformLocationNoThrow(o,"max")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Th=function(){function e(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(min), vec4(max)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"min"),n.maxLoc=r.getUniformLocationNoThrow(o,"max")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Rh=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},Dh=function(e){this.outputShape=[],this.outputShape=ed(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=t.length,i=t[t.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Ih=function(e,t){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=ed(e,t);var n=this.outputShape,r=n.length,o=ph(r),a=eh("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=i[t],c="vec2("+i.slice(-2).join()+")",d=i.join(),f="if ("+l+" < "+s[0]+")\n          return getChannel(getT0("+d+"), "+c+");";for(u=1;u<s.length;u++){var h=s[u-1];f+="\n        else if ("+l+" < "+s[u]+") {\n          "+l+" -= "+h+";\n          return getChannel(getT"+u+"("+d+"), "+c+");\n        }"}var p=s.length;f+="\n        else {\n          "+l+" -= "+s[s.length-1]+";\n          return getChannel(getT"+p+"("+d+"), "+c+");\n        }",this.userCode="\n      float getValue("+i.map((function(e){return"int "+e}))+") {\n        "+f+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n        if (++"+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n        if (++"+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            --"+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "},Ah=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Oh=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Mh=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+o+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ph=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+o+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},jh=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Fh=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Lh=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.top,n=e.padInfo.left,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.filterHeight,u=e.filterWidth,l=4*Math.floor(e.inChannels/4),c=e.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+o+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+a+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+i+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+l+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===c)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+l+") *\n                getW(wR, wC, "+l+", d2);\n            } else if ("+(2===c)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===c)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1),\n                getX(batch, xR, xC, "+l+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2),\n                getW(wR, wC, "+l+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Bh=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+h+") *\n                  getW(wF, wR, wC, "+h+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1),\n                  getX(batch, xF, xR, xC, "+h+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2),\n                  getW(wF, wR, wC, "+h+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Wh=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,d=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+r+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+d+";\n        int q = d2 - d1 * "+d+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+t+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+c+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Uh=function(e){this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=e.outShape;for(var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,d=c,f="int xR; int xC; int xCOffset;",h=0;h<l;h++)for(var p=0;p<c;p++)f+="\n          vec4 xTexelR"+h+"C"+2*p+" = vec4(0.);\n          vec4 wR"+h+"C"+p+" = vec4(0.);\n          vec4 xR"+h+"C"+p+" = vec4(0.);";for(h=0;h<l;h++)for(var m=0;m<d;m++){if(f+="\n          xR = xRCorner + "+h*s+";\n          xC = xCCorner + "+(p=2*m)*u+";\n        ",1===i){if(p<c&&(f+=o%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+t+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+h+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+h+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+t+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n                  xR"+h+"C"+p+" = vec4(previous.zw, xTexelR"+h+"C"+p+".xy);\n                } else {\n                  xR"+h+"C"+p+" = vec4(0, 0, xTexelR"+h+"C"+p+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+t+" && xC >= 0 && xC < "+n+") {\n                  xTexelR"+h+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+h+"C"+p+" = vec4(0.);\n                }\n\n                xR"+h+"C"+p+" = xTexelR"+h+"C"+p+";\n              ",p+1<c)){var v=o%2==0?Iu(u):u;u%2==0&&o%2==1||u%2!=0&&o%2!=1?(f+="\n                  xCOffset = xC + "+o%2+" + "+v+";\n\n                  if(xR >= 0 && xR < "+t+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+h+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",u>1&&(f+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+t+" &&\n                      xCOffset >= 0 && xCOffset < "+n+") {\n                      xTexelR"+h+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+h+"C"+p+" = vec4(0.);\n                    }\n                  "),f+="\n                  xR"+h+"C"+(p+1)+" = vec4(\n                    xTexelR"+h+"C"+p+".zw, xTexelR"+h+"C"+(p+2)+".xy);\n                "):f+="\n                  xCOffset = xC + "+v+";\n\n                  if(xR >= 0 && xR < "+t+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+h+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+h+"C"+(p+1)+" = xTexelR"+h+"C"+(p+2)+";\n                "}}else p<c&&(f+="\n              if(xR >= 0 && xR < "+t+") {\n            ",o%2==1?(f+="\n                xCOffset = xC + 1 - "+i+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+h+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+h+"C"+p+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+n+") {\n                  xTexelR"+h+"C"+(p+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+h+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+h+"C"+p+" = vec4(\n                  xTexelR"+h+"C"+p+".zw, xTexelR"+h+"C"+(p+2)+".zw);\n              ",p+1<c&&(f+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+i+";\n                  if(xCOffset >= 0 && xCOffset < "+n+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+h+"C"+(p+1)+" = vec4(xTexelR"+h+"C"+(p+2)+".xy, final.xy);\n                ")):(f+="\n                if(xC >= 0 && xC < "+n+") {\n                  xTexelR"+h+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+h+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+i+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+h+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+h+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+h+"C"+p+" = vec4(\n                  xTexelR"+h+"C"+p+".xy, xTexelR"+h+"C"+(p+2)+".xy);\n              ",p+1<c&&(f+="\n                  xR"+h+"C"+(p+1)+" = vec4(\n                    xTexelR"+h+"C"+p+".zw, xTexelR"+h+"C"+(p+2)+".zw);\n                ")),f+="}");p<c&&(f+="\n            vec4 wTexelR"+h+"C"+p+" = getW("+h+", "+p+", d1, q);\n            wR"+h+"C"+p+" = vec4(wTexelR"+h+"C"+p+".xz, wTexelR"+h+"C"+p+".xz);\n          ",p+1<c&&(f+="\n              vec4 wTexelR"+h+"C"+(p+1)+" = getW("+h+", "+(p+1)+", d1, q);\n              wR"+h+"C"+(p+1)+" =\n                vec4(wTexelR"+h+"C"+(p+1)+".xz, wTexelR"+h+"C"+(p+1)+".xz);"))}for(h=0;h<l;h++)for(p=0;p<c;p++)f+="result += xR"+h+"C"+p+" * wR"+h+"C"+p+";";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+r+", "+o+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 result = vec4(0.);\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},zh=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],i=e[1],s=e[2],u=e[3],l=t[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var f="bilinear"===r?1:0,h=[i-1+".0",s-1+".0"],p=h[0],m=h[1],v=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=v[0],y=v[1],b=v[2],x=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=x[0],C=x[1],k=x[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+C+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+k+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+f+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Hh=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+ph(r)+" coords = getOutputCoords();\n        int end = "+Vh(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Vh(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Vh(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var qh,Gh,Yh=function(e,t){this.variableNames=["A"];var n=th();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+nh(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Kh=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0;var n=th();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+nh(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},$h=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Xh=function(e){this.variableNames=["A"];var t=th();this.outputShape=e,this.userCode="\n      "+oh+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Qh=function(e){this.variableNames=["A"],this.usesPackedTextures=!0;var t=th();this.outputShape=e,this.userCode="\n      "+oh+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Jh=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=th(),o=t[0],a=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+rh(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex /= 4;\n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},Zh=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=th(),o=t[0],a=t[1];this.outputShape=e;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n    \n              flatIndex /= 4;\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+rh(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n        \n        "+i+"\n\n        "+r.output+" = "+s+";\n      }\n    "},ep=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},tp=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),np=function(e){this.variableNames=["A"];var t=th(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},rp=function(e){this.variableNames=["A"];var t=th(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},op=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=ph(this.rank),a=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<e.length;a++)a===t?o.push("int(getIndices("+r[a]+"))"):o.push(""+r[a]);return o.join()}(e,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},ap=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=ph(t.length),o=ph(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function ip(e,t){return[t,e]}function sp(e){var t=Fu(e);return Uu(Math.ceil(t/4))}function up(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function lp(e,t){var n=th();return Ql(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function cp(e,t){return ac(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function dp(e,t){return ic(e,t,new Uint16Array([0,1,2,2,1,3]))}function fp(e,t){var n,r,o,a,i,s,u,l,c=e;return 2===Nu.getNumber("WEBGL_VERSION")?(n=c.R32F,r=c.R16F,o=c.RGBA16F,a=c.RGBA32F,i=c.RED,s=4,u=1,l=c.HALF_FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,a=c.RGBA,i=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l}}function hp(e,t,n,r,o,a,i){uc(n,r);var s=sc(e,t),u=e.TEXTURE_2D;return Yl(e,t,(function(){return e.bindTexture(u,s)})),Yl(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),Yl(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),Yl(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),Yl(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),Yl(e,t,(function(){return e.texImage2D(u,0,o,n,r,0,a,i,null)})),Yl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function pp(e,t,n,r,o){var a=ip(n,r);return hp(e,t,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function mp(e,t,n,r,o){var a=ip(n,r);return hp(e,t,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function vp(e,t,n,r,o){var a=ip(n,r);return hp(e,t,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function gp(e,t,n,r,o){var a=up(n,r);return hp(e,t,a[0],a[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function yp(e,t,n,r,o){var a=up(n,r);return hp(e,t,a[0],a[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function bp(e,t,n,r){return Yl(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),cc(e,t,n,"clipSpacePos",r,3,20,0)&&cc(e,t,n,"uv",r,2,20,12)}function xp(e,t,n,r,o,a,i){var s,u,l;Yl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*o*4),u=e.FLOAT,l=i.internalFormatPackedFloat),s.set(a),Yl(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,o,0,e.RGBA,u,s)})),Yl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function wp(e,t,n,r){Yl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?Yl(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):Yl(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),Yl(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Cp(e,t,n,r,o){var a=e.createBuffer();Yl(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*n*r;return Yl(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),Yl(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),Yl(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function kp(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function Sp(e,t,n,r,o){var a=ip(n,r),i=a[0],s=a[1],u=new Uint8Array(n*r*4);return Yl(e,t,(function(){return e.readPixels(0,0,i,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function Ep(e,t,n,r,o,a,i,s){var u=e,l=new Float32Array(function(e,t){var n=up(e,t);return n[0]*n[1]*4}(a,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function _p(e,t,n,r){var o=new Float32Array(n*r*4);return Yl(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)})),o}!function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(qh||(qh={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Gh||(Gh={}));var Np=Object.freeze({createVertexShader:lp,createVertexBuffer:cp,createIndexBuffer:dp,getTextureConfig:fp,createFloat32MatrixTexture:pp,createFloat16MatrixTexture:mp,createUnsignedBytesMatrixTexture:vp,createPackedMatrixTexture:gp,createFloat16PackedMatrixTexture:yp,bindVertexProgramAttributeStreams:bp,uploadDenseMatrixToTexture:xp,uploadPixelDataToTexture:wp,createBufferFromOutputTexture:Cp,downloadFloat32MatrixFromBuffer:kp,downloadByteEncodedFloatMatrixFromOutputTexture:Sp,downloadPackedMatrixFromBuffer:Ep,downloadMatrixFromPackedOutputTexture:_p}),Tp=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Nu.getNumber("WEBGL_VERSION");null!=e?(this.gl=e,ql(t,e)):this.gl=Gl(t),1===Nu.getNumber("WEBGL_VERSION")?(this.textureFloatExtension=Xl(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),Nu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=Xl(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=Xl(this.gl,this.debug,"EXT_color_buffer_float"),this.vertexBuffer=cp(this.gl,this.debug),this.indexBuffer=dp(this.gl,this.debug),this.framebuffer=lc(this.gl,this.debug),this.textureConfig=fp(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Nu.getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Yl(t,this.debug,(function(){return t.finish()})),Yl(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),Yl(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),Yl(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),Yl(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),Yl(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),pp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),mp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),vp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),wp(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),xp(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),yp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),gp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(vc(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Yl(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return Sp(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,o,a){return Ep(this.gl,e,0,0,0,o,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return kp(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=Cp(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(Nu.getBool("WEBGL_FENCE_API_ENABLED")){var o=e,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=o.clientWaitSync(a,0,0);return e===o.ALREADY_SIGNALED||e===o.CONDITION_SATISFIED},t=a}else Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return _p(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Jl(t,this.debug,e),r=lp(t,this.debug),o=nc(t,this.debug);return Yl(t,this.debug,(function(){return t.attachShader(o,r)})),Yl(t,this.debug,(function(){return t.attachShader(o,n)})),rc(t,this.debug,o),this.debug&&oc(t,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=bp(t,this.debug,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Yl(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&oc(this.gl,this.debug,this.program),Yl(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?fc(this.gl,this.debug,e,t):hc(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Yl(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),pc(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=up(t,n),o=r[0],a=r[1];this.setOutputMatrixTextureDriver(e,o,a)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&oc(this.gl,this.debug,this.program),gc(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Yl(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Yl(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Xl(this.gl,this.debug,2===Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return ku(this,void 0,void 0,(function(){var t=this;return Su(this,(function(n){switch(n.label){case 0:return[4,Hu((function(){return t.disposed||t.isQueryAvailable(e,Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Hu((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),mc(this.gl,this.debug,e,this.framebuffer),this.debug&&gc(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(mc(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&gc(this.gl)):vc(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;mc(r,this.debug,e,this.framebuffer),this.debug&&gc(r),this.outputTexture=e,Yl(r,this.debug,(function(){return r.viewport(0,0,t,n)})),Yl(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var o=this;this.throwIfDisposed(),Yl(this.gl,this.debug,(function(){return o.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function Rp(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,o=t[n],a=o.shape;if(!Lu(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var i=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!Lu(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+s+" must match")}}))}var Dp=function(e,t,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=s.left,f=s.top,h=o*r,p=th();this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            int blockIndex = rc.y + col;\n            int pos = rc.x + row;\n\n            if(blockIndex >= "+e[1]+" || pos >= "+e[0]+") continue;\n\n            int offsetY = int(blockIndex / ("+u+")) * "+i+" - "+f+";\n            int d0 = offsetY + "+c+" * (pos / "+h+");\n\n            if(d0 >= "+t[0]+" || d0 < 0) continue;\n\n            int offsetX = int(mod(float(blockIndex), "+u+".) * "+a+". - "+d+".);\n            int d1 = offsetX + "+l+" * (int(mod(float(pos), "+h+".) / "+o+".));\n\n            if(d1 >= "+t[1]+" || d1 < 0) continue;\n\n            vec2 innerDims = vec2(d1, int(mod(float(pos), "+o+".)));\n            result[row * 2 + col] = getChannel(getA(d0, int(innerDims.x),\n                                              int(innerDims.y)), innerDims);\n          }\n        }\n\n        "+p.output+" = result;\n      }\n    "},Ip=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},Ap=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},Op=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.usesPackedTextures=!0;var a,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},Mp=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,u=o*a-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Pp=function(e,t,n,r,o,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=null),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=t;var i=n?e[1]:e[2],s=Math.ceil(i/2),u=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",c=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",h="";a&&(f="vec4 activation(vec4 x) {\n        "+a+"\n      }",h="result = activation(result);");var p=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+s+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+s+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+u+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          result += ("+c[0]+" * "+d[0]+") + ("+c[1]+" * "+d[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+p+"\n\n        "+h+"\n\n        setOutput(result);\n      }\n    "},jp=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),Fp=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Lp=function(e){this.variableNames=["A"],this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=eh("rc",t),r=ph(t),o=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",o=e-2;o<e;o++)r+=n[o]+" >= "+t[o],o<e-1&&(r+="||");return r}(t,e,n),a=function(e,t,n,r){if(1===e)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var a=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),i=2;i<e;i++)a=t[t.length-1-i]+","+a;n.push(a)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},Bp=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,o=ph(r),a=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+a+");\n      "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Wp=function(e,t,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,o=ph(r),a=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=eh("rc",r),u=eh("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",d=[o+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=1===r?2:4;p<m;p++)h+="\n        "+d[p]+"\n        if ("+f+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";h+=1===r?"} ":"}}",this.userCode="\n      const "+o+" start = "+o+"("+a+");\n      const "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+h+"\n        setOutput(result);\n      }\n    "},Up=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var f="avg"===t,h="0.0";if(f||(h="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+a+");\n        const ivec2 pads = ivec2("+c+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+i+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+l+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(p="avgValue / count");var m=4*Math.floor(r/4),v=r%4,g="\n      if ("+f+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+a+");\n      const ivec2 pads = ivec2("+c+", "+d+");\n      const float initializationValue = "+h+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+h+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+i+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},zp=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",f="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var h="";o%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(2===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(3===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+u+");\n      }\n    "},Hp=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+nh(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+rh(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Vp=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,p=1/f,m=2*Math.ceil(h)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},qp=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Gp=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+",\n          "+u[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n        \n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+"; \n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Yp=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,p=1/f,m=2*Math.ceil(h)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Kp=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},$p=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),o=ph(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Xp=function(e,t){this.variableNames=["x"],this.usesPackedTextures=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=eh("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=ph(n);function s(n){var r=e.map((function(r,o){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+o+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+o+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+o+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Qp=function(e,t,n,r,o,a,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=ph(o.length),u=ph(a.length),l="";1===n?l="i":2===n&&(l="i, j");var c="getIndices("+l+")",d="";1===r?d="i":2===r&&(d="i, coords[1]");var f="getUpdates("+d+")",h=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+o+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+h+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+f+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Jp=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";o%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},Zp=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<t.length;u++)s.push(""+a[u]),u<e&&i.push(""+a[u]);r=i.join(),o=s.join()}var l=ph(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},em=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=ph(this.rank),r="uniform int start["+this.rank+"];",o=function(e){if(1===e)return"sourceLoc";if(e<=6)return tm.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+tm[t]+" = start["+t+"] + coords."+tm[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+o+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),tm=["x","y","z","w","u","v"],nm=function(){function e(e){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=e,this.rank=e.length;var t=ph(this.rank),n=eh("coords",this.rank),r=eh("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+o+")",i="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+" \n        vec4 result = vec4(0.);\n        "+i+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),rm=function(e,t,n,r){this.variableNames=["x"];var o=n.filter((function(e,t){return-1===r.indexOf(t)}));this.outputShape=o;var a=n.length,i=ph(n.length),s=ph(o.length),u="";if(1===a)u="coords * strides + begin";else{var l=0;u=n.map((function(e,t){return-1===r.indexOf(t)?(l++,1===o.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(l-1)+"] * strides["+t+"] + begin["+t+"]"):"begin["+t+"]"})).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+e+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+u+"));\n      }\n    "},om=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,o=am(t,n),a=im(e,o,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[a].shift();return this.usedTextures[a].push(i),i}return this.numUsedTextures++,this.log(),o===Gh.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===Gh.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===Gh.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===Gh.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===Gh.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var o=im(t,am(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],i=a.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(i,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function am(e,t){if(e===qh.UPLOAD)return Gh.PACKED_2X2_FLOAT32;if(e===qh.RENDER||null==e)return t?Nu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?Gh.PACKED_2X2_FLOAT32:Gh.PACKED_2X2_FLOAT16:Nu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?Gh.UNPACKED_FLOAT32:Gh.UNPACKED_FLOAT16;if(e===qh.DOWNLOAD||e===qh.PIXELS)return Gh.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function im(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var sm=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=ph(this.rank),a=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<e.length;o++)r.push("imod("+n[o]+", "+e[o]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},um=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=ph(this.rank),a=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},lm=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=ph(this.rank),a=Zf("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+u+") {\n        result[1] = "+l+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+u+") {\n          result[3] = "+l+";\n        }\n      }  \n      setOutput(result);\n    }\n    "},cm=1.7580993408473768,dm=1.0507009873554805,fm=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},hm="if (isnan(x)) return x;",pm=hm+"\n  return (x < 0.0) ? 0.0 : x;\n",mm="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+cm+";\n  float scale = "+dm+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",vm="return exp(x);",gm=hm+"\n  return sin(x);\n",ym=hm+"\n  return cos(x);\n",bm=hm+"\n  return atan(x);\n",xm=hm+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",wm=hm+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",Cm="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",km=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Sm=function(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;var t=e.length,n=eh("rc",t),r=ph(t),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},Em={},_m=function(){function e(e){if(this.gpgpu=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.disposed=!1,!Nu.getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var t=Gl(Nu.getNumber("WEBGL_VERSION"));this.binaryCache=((n=Nu.getNumber("WEBGL_VERSION"))in Em||(Em[n]={}),Em[n]),this.gpgpu=new Tp(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var n;this.textureManager=new om(this.gpgpu),this.numMBBeforeWarning=null==Nu.global.screen?1024:Nu.global.screen.height*Nu.global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new kf(this,Ul)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:t,dtype:n})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=[e.height,e.width],r=[e.height,e.width,t];if(Nu.getBool("IS_BROWSER")){if(!(e instanceof HTMLVideoElement||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData||e.data instanceof Uint8Array))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);if(e instanceof HTMLVideoElement){if(null==this.fromPixels2DContext){if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.browser.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixels2DContext=document.createElement("canvas").getContext("2d")}this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),e=this.fromPixels2DContext.canvas}}var o,a,i=this.makeTensorHandle(n,"int32");if(this.texData.get(i.dataId).usage=qh.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(i.dataId),e),Nu.getBool("WEBGL_PACK")){o=new rp(r);var s=this.makePackedTensor(o.outputShape,i.dtype);a=this.compileAndRun(o,[i],s)}else o=new np(r),a=this.compileAndRun(o,[i]);return this.disposeData(i.dataId),a},e.prototype.makeTensorHandle=function(e,t){var n={};return this.register(n,e,t),{dataId:n,shape:e,dtype:t}},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null");if(Nu.getBool("DEBUG"))for(var n=0;n<t.length;n++){var r=t[n];if(!Kl(r))throw Error("The value "+r+" cannot be represented on this device.")}var o=this.texData.get(e);if("complex64"===o.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.releaseGPUData(e),o.usage=qh.UPLOAD,o.values=t},e.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,o=t.complexTensors,a=t.slice,i=t.shape;if(null!=a){var s=new fm(i,"return x;"),u=this.compileAndRun(s,[{dataId:e,shape:i,dtype:r}]),l=this.readSync(u.dataId);return u.dispose(),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var c,d,f=null!=this.activeTimers;return f&&(c=performance.now()),d="complex64"===r?Wf(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=performance.now()-c),this.convertAndCacheOnCPU(e,d)},e.prototype.read=function(e){return ku(this,void 0,void 0,(function(){var t,n,r,o,a,i,s,u,l,c,d,f,h,p,m,v,g,y,b,x,w;return Su(this,(function(C){switch(C.label){case 0:if(this.pendingRead.has(e))return n=this.pendingRead.get(e),[2,new Promise((function(e){return n.push(e)}))];if(r=this.texData.get(e),o=r.values,a=r.shape,i=r.slice,s=r.dtype,u=r.complexTensors,null!=i)return l=new fm(a,"return x;"),c=this.compileAndRun(l,[{dataId:e,shape:a,dtype:s}]),d=this.read(c.dataId),c.dispose(),[2,d];if(null!=o)return[2,this.convertAndCacheOnCPU(e)];if(!Nu.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Nu.getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return f=null,"complex64"!==s&&Nu.get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(e),e=h.dataId,p=this.texData.get(h.dataId),f=(t=this.gpgpu).createBufferFromTexture.apply(t,[p.texture].concat(sp(a)))),this.pendingRead.set(e,[]),"complex64"===s?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:C.sent(),C.label=2;case 2:return"complex64"!==s?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return v=C.sent(),g=v[0],y=v[1],m=Wf(g,y),[3,5];case 4:null==f?m=this.getValuesFromTexture(e):(b=Fu(a),m=this.gpgpu.downloadFloat32MatrixFromBuffer(f,b),this.disposeData(e)),C.label=5;case 5:return x=this.convertAndCacheOnCPU(e,m),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach((function(e){return e(x)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,x]}}))}))},e.prototype.getValuesFromTexture=function(e){var t,n=this,r=this.texData.get(e),o=r.shape,a=r.dtype,i=r.isPacked,s=Fu(o);if(Nu.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(e),l=this.texData.get(u.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[l.texture].concat(sp(o))).subarray(0,s);return this.disposeData(u.dataId),c}var d=Nu.getBool("WEBGL_PACK")&&!0===i,f=d?kc(o):o,h=this.makeTensorHandle(f,"float32");h.size=Fu(o),this.texData.get(h.dataId).usage=qh.DOWNLOAD;var p=Lc((function(){var t=d?new Qh(f):new Xh(f);return n.compileAndRun(t,[{shape:f,dtype:a,dataId:e}],h,null)})),m=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,s);return this.disposeData(h.dataId),v},e.prototype.time=function(e){return ku(this,void 0,void 0,(function(){var t,n,r,o,a,i,s;return Su(this,(function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),o=ju(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),a=ju(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(o)];case 1:return i=u.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:Au(i),getExtraProfileInfo:function(){return i.map((function(e,t){return{name:a[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},e.prototype.endTimer=function(e){return Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},e.prototype.getQueryTime=function(e){return ku(this,void 0,void 0,(function(){var t;return Su(this,(function(n){return Nu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},e.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e))if(this.pendingRead.has(e))this.pendingDisposal.add(e);else if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}},e.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,o=t.texShape,a=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,a,i)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getCPUBackend=function(){return Nu.getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Ul.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(e,t){var n=this.makeOutputArray(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Ul.keep(e.clone()),imag:Ul.keep(t.clone())},n},e.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},e.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===Fu(n))return ad([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,o=yf(e.shape,t,n);if(r||!o){var a=Nu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nm(n):new em(n),i=a.getCustomSetupFunc(t);return this.compileAndRun(a,[e],null,i)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},e.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),o=El.make(n,{},e.dtype,this),a=this.texData.get(o.dataId);Object.assign(a,r),a.shape=n,a.dtype=e.dtype;var i=bf(t,e.strides);r.slice&&(i+=r.slice.flatOffset),a.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),o},e.prototype.stridedSlice=function(e,t,n,r,o,a,i,s,u){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r,o,a,i,s,u);var l=mf(e.shape,t,n,r,o,a,i,s,u),c=l[0],d=l[1],f=l[2],h=d.filter((function(e,t){return-1===f.indexOf(t)}));if(h.some((function(e){return 0===e})))return ad([],h);var p=new rm(c,r,d,f);return this.compileAndRun(p,[e])},e.prototype.reverse=function(e,t){var n=Nu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Xp(e.shape,t):new $p(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.concat=function(e,t){if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>Nu.getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(e.length/2),r=this.concat(e.slice(0,n),t),o=this.concat(e.slice(n),t);return this.concat([r,o],t)}if(Nu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var a=new Ih(e.map((function(e){return e.shape})),t);return this.compileAndRun(a,e)}var i=ed(e.map((function(e){return e.shape})),t),s=e.map((function(e){return e.as2D(-1,Fu(e.shape.slice(t)))})),u=new Dh(s.map((function(e){return e.shape})));return this.compileAndRun(u,s).reshape(i)},e.prototype.neg=function(e){var t=new fm(e.shape,"return -x;");return this.compileAndRun(t,[e])},e.prototype.batchMatMul=function(e,t,n,r){var o=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],i=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===o||1===a)&&i>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var u=1===a?e:e.as3D(s,i,1),l=1===a?2:1,c=1===a?t.as3D(s,1,i):t;return this.multiply(u,c).sum(l,!0)}var d=Ol(e.dtype,t.dtype),f=new Pp(e.shape,[s,o,a],n,r),h=this.makePackedTensor(f.outputShape,d);return this.compileAndRun(f,[e,t],h)},e.prototype.fusedBatchMatMul=function(e,t,n,r,o,a){var i=n?e.shape[2]:e.shape[1],s=r?t.shape[1]:t.shape[2],u=e.shape[0],l=Ol(e.dtype,t.dtype),c=new Pp(e.shape,[u,i,s],n,r,!!o,a?function(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?Cm:pm;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}(a,!0):null),d=this.makePackedTensor(c.outputShape,l),f=[e,t];return o&&f.push(o),this.compileAndRun(c,f,d)},e.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),o=new wh("return areal * breal - aimag * bimag;",e.shape,t.shape),a=new wh("return areal * bimag + aimag * breal;",e.shape,t.shape),i=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag),this.makeComplexComponentTensorHandle(t,r.complexTensors.real),this.makeComplexComponentTensorHandle(t,r.complexTensors.imag)],s=this.compileAndRun(o,i),u=this.compileAndRun(a,i),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Sh,e.dtype);var c=new Eh(Sh,e.shape,t.shape),d=this.makeOutputArray(c.outputShape,e.dtype);return this.compileAndRun(c,[e,t],d)},e.prototype.batchNormalization=function(e,t,n,r,o,a){var i=[e,t,n],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;if(null!=o&&(u=o.shape,i.push(o)),Nu.getBool("WEBGL_PACK_NORMALIZATION")){var l=new xh(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,i)}var c=new bh(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,i)},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){var a=Nu.getBool("WEBGL_PACK_NORMALIZATION")?new Op(e.shape,t,n,r,o):new Ip(e.shape,t,n,r,o);return this.compileAndRun(a,[e])},e.prototype.LRNGrad=function(e,t,n,r,o,a,i){var s=new Ap(t.shape,r,o,a,i);return this.compileAndRun(s,[t,n,e])},e.prototype.tile=function(e,t){if("string"===e.dtype)return Yf(Pd(e.shape,e.dtype,this.readSync(e.dataId)),t);var n=new sm(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.pad=function(e,t,n){var r=Nu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wp(e.shape,t,n):new Bp(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=Nu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lm(e.shape,t):new um(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new op(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},e.prototype.batchToSpaceND=function(e,t,n){Ou(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=sf(e.shape,t,r),a=uf(o.length,t.length),i=lf(e.shape,t,r),s=cf(n,t.length),u=df(i,n,t.length);return e.reshape(o).transpose(a).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){Ou(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var a=1+t.length;a<e.shape.length;++a)o.push([0,0]);var i=e.pad(o),s=sf(i.shape,t,r,!1),u=uf(s.length,t.length,!1),l=lf(i.shape,t,r,!1);return i.reshape(s).transpose(u).reshape(l)},e.prototype.reduce=function(e,t,n){var r=e.shape[0],o=e.shape[1],a=hf(o),i=new zp({windowSize:a,inSize:o,batchSize:r},t),s=i.outputShape,u=s[0],l=s[1],c=this.makeOutputArray([u,l],n);return this.compileAndRun(i,[e],c),1===c.shape[1]?c:this.reduce(c,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],o=e.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var a=hf(o),i=new Jf({windowSize:a,inSize:o,batchSize:r},t,null==n),s=i.outputShape,u=s[0],l=s[1],c=this.makeOutputArray([u,l],"int32"),d=[e];return null!=n&&d.push(n),this.compileAndRun(i,d,c),1===c.shape[1]?c:this.argReduce(e,t,c)},e.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,o=hf(r[r.length-1]),a=new gh(r,o,t,null==n),i=this.makePackedTensor(a.outputShape,"int32"),s=null==n?[e]:[e,n];return this.compileAndRun(a,s,i),i.rank===e.rank?this.argReducePacked(e,t,i):i},e.prototype.sum=function(e,t){$c("sum",t,e.rank);var n=Yc(e.shape,t),r=n[0],o=Fu(n[1]),a=e.as2D(-1,o),i=Ml(e.dtype);return this.reduce(a,"sum",i).reshape(r)},e.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=Yc(e.shape,t),r=n[0],o=Fu(n[1]),a=e.as2D(-1,o),i=Ml(e.dtype);return this.reduce(a,"prod",i).reshape(r)},e.prototype.unsortedSegmentSum=function(e,t,n){var r=0,o=Xc([r],e.rank),a=e;null!=o&&(a=e.transpose(o),r=Jc(1,e.rank)[0]);var i=function(e,t,n){for(var r=[],o=e.length,a=0;a<o;a++)a!==t?r.push(e[a]):r.push(n);return r}(a.shape,r,n),s=Fu([a.shape[r]]),u=a.as2D(-1,s),l=Ml(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(i);return null!=o&&(c=c.transpose(Qc(o))),c},e.prototype.segOpCompute=function(e,t,n,r,o){var a=e.shape[0],i=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=sl(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=sl(e,n+1);return n}(i,o),u=new Jp({windowSize:s,inSize:i,batchSize:a,numSegments:o},t),l=u.outputShape,c=l[0],d=l[1],f=this.makeOutputArray([c,d],r);return this.compileAndRun(u,[e,n],f),f.shape[1]===o?f:(n=md(0,o).tile([i/s]),this.segOpCompute(f,t,n,r,o))},e.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if($c("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Nu.getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var o=Yc(e.shape,r),a=o[0],i=Fu(o[1]),s=e.as2D(-1,i);return this.argReduce(s,n).reshape(a)}return this.argReducePacked(e,n)},e.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},e.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var o=new Hh(e.shape,n,r);return this.compileAndRun(o,[e])},e.prototype.equal=function(e,t){if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new Eh("return float(a == b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new Eh("return float(a != b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new Eh("return float(a < b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new Eh("return float(a <= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new Eh("return float(a > b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new Eh("return float(a >= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new fm(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new Eh("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new Eh("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.select=function(e,t,n){var r=new Zp(e.rank,t.shape,t.rank),o=this.makeOutputArray(r.outputShape,Ol(t.dtype,n.dtype));return this.compileAndRun(r,[e,t,n],o)},e.prototype.where=function(e){Wc("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return $f(e.shape,t)},e.prototype.topk=function(e,t,n){return Kf(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){$c("min",t,e.rank);var n=Yc(e.shape,t),r=n[0],o=Fu(n[1]),a=e.as2D(-1,o);return this.reduce(a,"min",a.dtype).reshape(r)},e.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _h("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Eh("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.mod=function(e,t){var n=Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _h("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Eh("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);$c("max",t,e.rank);var n=Yc(e.shape,t),r=n[0],o=Fu(n[1]),a=e.as2D(-1,o);return this.reduce(a,"max",a.dtype).reshape(r)},e.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _h("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Eh("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.all=function(e,t){$c("all",t,e.rank);var n=Yc(e.shape,t),r=n[0],o=Fu(n[1]),a=e.as2D(-1,o);return this.reduce(a,"all",a.dtype).reshape(r)},e.prototype.any=function(e,t){$c("any",t,e.rank);var n=Yc(e.shape,t),r=n[0],o=Fu(n[1]),a=e.as2D(-1,o);return this.reduce(a,"any",a.dtype).reshape(r)},e.prototype.squaredDifference=function(e,t){var n=Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _h("return (a - b) * (a - b);",e.shape,t.shape):new Eh("return (a - b) * (a - b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.realDivide=function(e,t){if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(b.x == 0.0) {\n    result.x = NAN;\n  } else if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(b.y == 0.0) {\n    result.y = NAN;\n  } else if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(b.z == 0.0) {\n    result.z = NAN;\n  } else if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(b.w == 0.0) {\n    result.w = NAN;\n  } else if(a.w == b.w) {\n    result.w = 1.;\n  }\n  \n  return result;\n","float32",!0);var n=new Eh("\nif (b == 0.0) {\n  return NAN;\n} \nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e,t],r)},e.prototype.floorDiv=function(e,t){if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new Eh("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[e,t],r)},e.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Ch);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Ol(e.dtype,t.dtype);if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Ch,n);var r=new Eh(Ch,e.shape,t.shape),o=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[e,t],o)},e.prototype.packedBinaryOp=function(e,t,n,r,o){void 0===o&&(o=!1);var a=new _h(n,e.shape,t.shape,o),i=this.makePackedTensor(a.outputShape,r);return this.compileAndRun(a,[e,t],i)},e.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,o=this.texData.get(e.dataId),a=this.texData.get(t.dataId),i=[[o.complexTensors.real,a.complexTensors.real],[o.complexTensors.imag,a.complexTensors.imag]].map((function(o){var a=o[0],i=o[1],s=r.makeComplexComponentTensorHandle(e,a),u=r.makeComplexComponentTensorHandle(t,i),l=new Eh(n,e.shape,t.shape),c=r.makeOutputArray(l.outputShape,Ol(a.dtype,i.dtype));return r.compileAndRun(l,[s,u],c)})),s=i[0],u=i[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},e.prototype.makeComplexComponentTensorHandle=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},e.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>Nu.get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var o=e.map((function(e){return e.dtype})).reduce((function(e,t){return Ol(e,t)})),a=e.map((function(e){return e.shape})),i=Nu.getBool("WEBGL_PACK"),s=i?new Qf(e[0].shape,a):new Xf(e[0].shape,a),u=i?this.makePackedTensor(s.outputShape,o):this.makeOutputArray(s.outputShape,o);return this.compileAndRun(s,e,u)},e.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,kh);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Ol(e.dtype,t.dtype);if(Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,kh,e.dtype);var r=new Eh(kh,e.shape,t.shape),o=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[e,t],o)},e.prototype.pow=function(e,t){var n=Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=n?new _h("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Eh("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),o=Ol(e.dtype,t.dtype),a=n?this.makePackedTensor(r.outputShape,o):this.makeOutputArray(r.outputShape,o);return this.compileAndRun(r,[e,t],a)},e.prototype.ceil=function(e){var t=new fm(e.shape,"return ceil(x);");return this.compileAndRun(t,[e])},e.prototype.floor=function(e){var t=new fm(e.shape,"return floor(x);");return this.compileAndRun(t,[e])},e.prototype.sign=function(e){var t=new fm(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},e.prototype.isNaN=function(e){var t=new fm(e.shape,"return float(isnan(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.isInf=function(e){var t=new fm(e.shape,"return float(isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.isFinite=function(e){var t=new fm(e.shape,"return float(!isnan(x) && !isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.round=function(e){var t=new fm(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},e.prototype.exp=function(e){var t;return t=Nu.getBool("WEBGL_PACK")?new km(e.shape,vm):new fm(e.shape,vm),this.compileAndRun(t,[e])},e.prototype.expm1=function(e){var t=new fm(e.shape,"return exp(x) - 1.0;");return this.compileAndRun(t,[e])},e.prototype.log=function(e){var t;return t=Nu.getBool("WEBGL_PACK")?new km(e.shape,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n"):new fm(e.shape,"if (x < 0.0) return NAN;\n  return log(x);"),this.compileAndRun(t,[e])},e.prototype.log1p=function(e){var t=new fm(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new fm(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},e.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new fm(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new fm(e.shape,"return x * x;");return this.compileAndRun(t,[e])},e.prototype.reciprocal=function(e){var t=new fm(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t;return t=Nu.getBool("WEBGL_PACK")?new km(e.shape,Cm):new fm(e.shape,pm),this.compileAndRun(t,[e])},e.prototype.prelu=function(e,t){var n=Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _h("\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",e.shape,t.shape):new Eh("return (a < 0.) ? b * a : a;",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.elu=function(e){var t=new fm(e.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e,t){var n=Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _h("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new Eh("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.selu=function(e){var t=new fm(e.shape,mm);return this.compileAndRun(t,[e])},e.prototype.int=function(e){var t=new fm(e.shape,"return float(int(x));"),n=this.makeOutputArray(t.outputShape,"int32");return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r,o=(r=Nu.getBool("WEBGL_PACK_CLIP")?new Th(e.shape):new Nh(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,o)},e.prototype.abs=function(e){var t=new fm(e.shape,"return abs(x);");return this.compileAndRun(t,[e])},e.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new Rh(e.shape),r=[this.makeComplexComponentTensorHandle(e,t.complexTensors.real),this.makeComplexComponentTensorHandle(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},e.prototype.sigmoid=function(e){var t=new fm(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},e.prototype.softplus=function(e){var t=new fm(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new fm(e.shape,gm);return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new fm(e.shape,ym);return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new fm(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new fm(e.shape,"return asin(x);");return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new fm(e.shape,"return acos(x);");return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new fm(e.shape,bm);return this.compileAndRun(t,[e])},e.prototype.atan2=function(e,t){var n=Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _h("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Eh("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.sinh=function(e){var t=new fm(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new fm(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new fm(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},e.prototype.asinh=function(e){var t=new fm(e.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},e.prototype.acosh=function(e){var t=new fm(e.shape,xm);return this.compileAndRun(t,[e])},e.prototype.atanh=function(e){var t=new fm(e.shape,wm);return this.compileAndRun(t,[e])},e.prototype.erf=function(e){var t=new fm(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new fm(e.shape,function(e){return void 0===e&&(e=0),hm+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},e.prototype.conv2dByMatMul=function(e,t,n){var r=e.shape,o=this.texData.get(e.dataId),a=n.inChannels,i=r[0]*r[1]*r[2],s=n.outChannels,u=(1===i||1===s)&&a>1e3,l=r[2]%2!=0&&!!o.isPacked;if(u||!Nu.getBool("WEBGL_LAZILY_UNPACK")||!Nu.getBool("WEBGL_PACK_BINARY_OPERATIONS")||!l){var c=this.reshape(e,[1,r[0]*r[1]*r[2],n.inChannels]),d=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.batchMatMul(c,d,!1,!1),n.outShape)}var f=El.make([1,r[0]*r[1]*(r[2]+1),n.inChannels],{dataId:e.dataId},e.dtype,this),h=o.shape;o.shape=o.shape.slice(),o.shape[o.shape.length-2]++,Ou(_c(o.shape,f.shape),(function(){return"packed reshape "+o.shape+" to "+f.shape+" isn't free"}));var p=this.reshape(t,[1,n.inChannels,n.outChannels]),m=this.batchMatMul(f,p,!1,!1),v=this.texData.get(m.dataId);return Ou(v.isPacked,(function(){return"batchMatMul result is expected to be packed"})),o.shape=h,v.shape=n.outShape,El.make(n.outShape,{dataId:m.dataId},m.dtype,this)},e.prototype.conv2dWithIm2Row=function(e,t,n){var r=n.filterWidth,o=n.filterHeight,a=n.inChannels,i=n.outWidth,s=n.outHeight,u=r*o*a,l=s*i,c=[u,l],d=e.squeeze([0]),f=t.reshape([1,u,-1]),h=new Dp(c,d.shape,n),p=this.compileAndRun(h,[d]).reshape([1,c[0],c[1]]),m=new Pp(p.shape,[1,l,n.outChannels],!0,!1);return this.compileAndRun(m,[p,f]).reshape([1,s,i,n.outChannels])},e.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(Nu.getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Lh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new Oh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new Ah(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2D=function(e,t,n){var r;return Nu.getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Uh(n),this.compileAndRun(r,[e,t],this.makePackedTensor(n.outShape,e.dtype))):(r=new Wh(n),this.compileAndRun(r,[e,t]))},e.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Fh(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new jh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3d=function(e,t,n){var r=new Bh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerInput=function(e,t,n){var r=new Ph(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerFilter=function(e,t,n){var r=new Mh(n);return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new Up(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new Up(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n,r){var o=new Up(r,"max",!0),a=this.compileAndRun(o,[t]),i=new Mp(r),s=this.makeOutputArray(i.outputShape,t.dtype),u=this.compileAndRun(i,[e,a],s);return a.dispose(),u},e.prototype.avgPoolBackprop=function(e,t,n){var r=new yh(n),o=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[e],o)},e.prototype.cast=function(e,t){return Ff(e,t,this)},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,a=0;a<e.rank;a++)a!==t&&(r[o++]=e.shape[a]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[t]=a,u[a]=this.slice(e,i,s).reshape(r);return u},e.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);return!n.isPacked||_c(e.shape,t)||null!==n.texture&&_c(n.shape,t)?Lf(e,t):this.packedReshape(e,t)},e.prototype.resizeBilinear=function(e,t,n,r){var o=Nu.getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Gp(e.shape,t,n,r):new qp(e.shape,t,n,r);return this.compileAndRun(o,[e])},e.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Vp(e,t,n);return this.compileAndRun(r,[e])},e.prototype.resizeNearestNeighbor=function(e,t,n,r){var o=new Kp(e.shape,t,n,r);return this.compileAndRun(o,[e])},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Yp(e,t,n);return this.compileAndRun(r,[e])},e.prototype.multinomial=function(e,t,n,r){var o=t?e:wf(e),a=o.shape[0],i=o.shape[1],s=new jp(a,i,n),u=this.makeOutputArray(s.outputShape,"int32"),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[o],u,l)},e.prototype.oneHot=function(e,t,n,r){var o=new Fp(e.size,t,n,r);return this.compileAndRun(o,[e])},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return Wc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Vf(e.dataSync(),t.dataSync(),n,r,o)},e.prototype.cropAndResize=function(e,t,n,r,o,a){var i=new zh(e.shape,t.shape,r,o,a);return this.compileAndRun(i,[e,t,n])},e.prototype.depthToSpace=function(e,t,n){Ou(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],o="NHWC"===n?e.shape[1]:e.shape[2],a="NHWC"===n?e.shape[2]:e.shape[3],i="NHWC"===n?e.shape[3]:e.shape[1],s=o*t,u=a*t,l=i/(t*t),c=new $h("NHWC"===n?[r,s,u,l]:[r,l,s,u],t,n);return this.compileAndRun(c,[e])},e.prototype.split=function(e,t,n){return Gf(e,t,n)},e.prototype.scatterND=function(e,t,n){var r=pf(0,e,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=[u/i,i],c=e.reshape([a,o]),d=t.reshape([a,i]);if(0===u)return Lf(ad([]),n);var f=sd(0),h=new Qp(a,o,c.rank,d.rank,s,l);return this.compileAndRun(h,[d,c,f]).reshape(n)},e.prototype.sparseToDense=function(e,t,n,r){var o=pf(0,e,n),a=o.sliceRank,i=o.numUpdates,s=o.strides,u=o.outputSize,l=new Qp(i,a,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)},e.prototype.fft=function(e){return this.fftImpl(e,!1)},e.prototype.ifft=function(e){return this.fftImpl(e,!0)},e.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new ep("return real * expR - imag * expI;",e.shape,t),o=new ep("return real * expI + imag * expR;",e.shape,t),a=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag)],i=this.compileAndRun(r,a),s=this.compileAndRun(o,a),u=this.complex(i,s).as2D(e.shape[0],e.shape[1]);return i.dispose(),s.dispose(),u},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=ff(e,t),a=o[0],i=o[1],s=o[2],u=o[3],l=t.reshape([i,r]),c=e.reshape([e.size/s,s]),d=new ap(r,u,[i,s]);return this.compileAndRun(d,[c,l]).reshape(a)},e.prototype.fill=function(e,t,n){if("string"===(n=n||al(t))){var r=Ku(n,Fu(e));return r.fill(t),El.make(e,{values:r},n)}var o=new tp(e,t),a=o.getCustomSetupFunc(t),i=this.makeOutputArray(e,n);return this.compileAndRun(o,[],i,a)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},e.prototype.linspace=function(e,t,n){return Bf(e,t,n)},e.prototype.makeOutputArray=function(e,t){return El.make(e,{},t,this)},e.prototype.makePackedTensor=function(e,t){var n=El.make(e,{},t,this);return this.texData.get(n.dataId).isPacked=!0,n},e.prototype.unpackTensor=function(e){var t=new Sm(e.shape);return this.compileAndRun(t,[e],El.make(t.outputShape,{},e.dtype,this))},e.prototype.packTensor=function(e){var t=new Lp(e.shape);return this.compileAndRun(t,[e],this.makePackedTensor(e.shape,e.dtype),null,!0)},e.prototype.packedReshape=function(e,t){var n=e.reshape([wc(e.shape)].concat(Cc(e.shape))),r=[wc(t)].concat(Cc(t)),o=new Hp(r,n.shape);return this.compileAndRun(o,[n]).reshape(t)},e.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,o=n.shape,a=n.dtype,i=kc(o),s=sp(o),u=this.makeTensorHandle(o,"float32");return this.texData.get(u.dataId).isPacked=!0,this.texData.get(u.dataId).dtype=a,this.texData.get(u.dataId).texShape=s.map((function(e){return 2*e})),t=r?new Kh(i,s):new Yh(i,s),this.compileAndRun(t,[{shape:i,dtype:a,dataId:e}],u,null,!0),u},e.prototype.compileAndRun=function(e,t,n,r,o){var a=this;if(void 0===o&&(o=!1),null==n&&(n=e.usesPackedTextures?this.makePackedTensor(e.outputShape,t[0].dtype):this.makeOutputArray(e.outputShape,t[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=Yu(n.dtype,0),n;var i=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.usesPackedTextures&&Fu(t.shape)<=Nu.getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.usesPackedTextures&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.usesPackedTextures)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!_c(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),n=a.texData.get(t.dataId),r.shape=o}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(n.dataId);var s,u={shape:n.shape,texData:this.texData.get(n.dataId),isUniform:!1},l=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var o=e.userCode;return e.constructor.name+"_"+r+"_"+o}(e,i,u),c=this.getAndSaveBinary(l,(function(){return function(e,t,n,r){var o=t.userCode,a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=ah(a,s,o,t.usesPackedTextures),l=e.createProgram(u),c=null,d=e.getUniformLocation(l,"NAN",!1);1===Nu.getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(l,"INFINITY",!1));for(var f={},h=0;h<t.variableNames.length;h++){var p=t.variableNames[h];f[p]=e.getUniformLocation(l,p,!1),f["offset"+p]=e.getUniformLocation(l,"offset"+p,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:f,inShapeInfos:i,outShapeInfo:s,infLoc:c,nanLoc:d}}(a.gpgpu,e,i,u)})),d=null!=this.activeTimers;return d&&(s=this.startTimer()),function(e,t,n,r,o){Rp(t.inShapeInfos,n),Rp([t.outShapeInfo],[r]);var a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a,i[0],i[1]):e.setOutputMatrixTexture(a,i[0],i[1]),e.setProgram(t.webGLProgram),1===Nu.getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var o=t.program.variableNames[r],a=t.uniformLocations[o],i=t.uniformLocations["offset"+o];if(null!=a)if(n.isUniform)if(Fu(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(a,s)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,r)})),null!=o&&o(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,c,i,u,r),d&&(s=this.endTimer(s),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(s)})),!Nu.getBool("WEBGL_LAZILY_UNPACK")&&this.texData.get(n.dataId).isPacked&&!1===o?this.unpackTensor(n):n},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),null!=this.canvas&&null!=this.canvas.remove?this.canvas.remove():this.canvas=null,null!=this.fromPixels2DContext&&null!=this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Lc((function(){var t=Nu.getBool("DEBUG");Nu.set("DEBUG",!1);var n=e.abs(sd(1e-8)).dataSync()[0];return Nu.set("DEBUG",t),n>0?32:16}))),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,a=n.values,i=n.texture,s=n.usage,u=n.isPacked;if(null==i){var l,c=null!=this.activeTimers;c&&(l=performance.now());var d=n.texShape;if(null==d&&(d=Sc(r,u),n.texShape=d),null!=a){var f=kc(r),h=void 0,p=d[1],m=d[0],v=a instanceof Uint8Array;u?(p=(t=up(d[0],d[1]))[0],m=t[1],h=new Zh(f,[m,p],v)):h=new Jh(f,[m,p],v);var g=this.makeTensorHandle([m,p],o);this.texData.get(g.dataId).usage=v?qh.PIXELS:qh.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,m,a);var y=this.makeTensorHandle(h.outputShape,g.dtype);y.size=Fu(h.outputShape),this.texData.get(y.dataId).isPacked=u,this.compileAndRun(h,[g],y);var b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,c&&(this.uploadWaitMs+=performance.now()-l)}else{var x=this.acquireTexture(d,s,o,u);n.texture=x}}},e.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},e.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},e.prototype.computeBytes=function(e,t){return e[0]*e[1]*el(t)},e}();zl()&&Ul.registerBackend("webgl",(function(){return new _m}),2);var Nm=td({abs_:function(e){var t=Hc(e,"x","abs");return"complex64"===t.dtype?Ul.runKernel((function(e){return e.complexAbs(t)}),{$x:t}):Ul.runKernel((function(e,n){var r=e.abs(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.toFloat().step(-1))}}}))}}),Tm=td({acos_:function(e){var t=Hc(e,"x","acos");return Ul.runKernel((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(sd(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Rm=td({acosh_:function(e){var t=Hc(e,"x","acosh");return Ul.runKernel((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Dm=td({asin_:function(e){var t=Hc(e,"x","asin");return Ul.runKernel((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(sd(1).sub(n.toFloat().square()).sqrt())}}}))}}),Im=td({asinh_:function(e){var t=Hc(e,"x","asinh");return Ul.runKernel((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(sd(1).add(n.toFloat().square()).sqrt())}}}))}}),Am=td({atan_:function(e){var t=Hc(e,"x","atan");return Ul.runKernel((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),Om=td({atanh_:function(e){var t=Hc(e,"x","atanh");return Ul.runKernel((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(sd(1).sub(n.toFloat().square()))}}}))}}),Mm=td({ceil_:function(e){var t=Hc(e,"x","ceil");return Ul.runKernel((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return gd(e)}}}))}}),Pm=td({clipByValue_:function(e,t,n){var r=Hc(e,"x","clipByValue");return Ou(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."})),Ul.runKernel((function(e,o){var a=e.clip(r,t,n);return o([r]),a}),{$x:r},(function(e,r){var o=r[0];return{$x:function(){return e.where(o.greaterEqual(t).logicalAnd(o.lessEqual(n)),gd(e))}}}))}}),jm=td({cos_:function(e){var t=Hc(e,"x","cos");return Ul.runKernel((function(e,n){var r=e.cos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sin().neg().mul(e)}}}))}}),Fm=td({cosh_:function(e){var t=Hc(e,"x","cosh");return Ul.runKernel((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Lm=td({erf_:function(e){var t=Hc(e,"x","erf");return Ou("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),Ul.runKernel((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Bm=td({exp_:function(e){var t=Hc(e,"x","exp");return Ul.runKernel((function(e,n){var r=e.exp(t);return n([r]),r}),{$x:t},(function(e,t){return{$x:function(){return e.mulStrict(t[0])}}}))}}),Wm=td({expm1_:function(e){var t=Hc(e,"x","expm1");return Ul.runKernel((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Um=td({floor_:function(e){var t=Hc(e,"x","floor");return Ul.runKernel((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return gd(e)}}}))}}),zm=td({log_:function(e){var t=Hc(e,"x","log");return Ul.runKernel((function(e,n){var r=e.log(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat())}}}))}}),Hm=td({log1p_:function(e){var t=Hc(e,"x","log1p");return Ul.runKernel((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),Vm=td({logSigmoid_:function(e){var t=Hc(e,"x","logSigmoid");return Ul.runKernel((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),qm=td({neg_:function(e){var t=Hc(e,"x","neg");return Ul.runKernel((function(e){return e.neg(t)}),{$x:t},(function(e){return{$x:function(){return e.neg()}}}))}}),Gm=td({reciprocal_:function(e){var t=Hc(e,"x","reciprocal");return Ul.runKernel((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),Ym=td({round_:function(e){var t=Hc(e,"x","round");return Ul.runKernel((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return gd(e)}}}))}}),Km=td({rsqrt_:function(e){var t=Hc(e,"x","rsqrt");return Ul.runKernel((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}))}}),$m=td({sigmoid_:function(e){var t=Hc(e,"x","sigmoid");return Ul.runKernel((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.mul(sd(1).sub(n)))}}}))}}),Xm=td({sign_:function(e){var t=Hc(e,"x","sign");return Ul.runKernel((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return gd(e)}}}))}}),Qm=td({isNaN_:function(e){var t=Hc(e,"x","isNaN");return Ul.runKernel((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return gd(e)}}}))}}),Jm=td({isInf_:function(e){var t=Hc(e,"x","isInf");return Ul.runKernel((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return gd(e)}}}))}}),Zm=td({isFinite_:function(e){var t=Hc(e,"x","isFinite");return Ul.runKernel((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return gd(e)}}}))}}),ev=td({sin_:function(e){var t=Hc(e,"x","sin");return Ul.runKernel((function(e,n){var r=e.sin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cos().mul(e)}}}))}}),tv=td({sinh_:function(e){var t=Hc(e,"x","sinh");return Ul.runKernel((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),nv=td({softplus_:function(e){var t=Hc(e,"x","softplus");return Ul.runKernel((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),rv=td({sqrt_:function(e){var t=Hc(e,"x","sqrt");return Ul.runKernel((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),ov=td({square_:function(e){var t=Hc(e,"x","square");return Ul.runKernel((function(e,n){return n([t]),e.square(t)}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.toFloat().mul(2))}}}))}}),av=td({step_:function(e,t){void 0===t&&(t=0);var n=Hc(e,"x","step");return Ul.runKernel((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return gd(e)}}}))}}),iv=td({tan_:function(e){var t=Hc(e,"x","tan");return Ul.runKernel((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),sv=td({tanh_:function(e){var t=Hc(e,"x","tanh");return Ul.runKernel((function(e,n){var r=e.tanh(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return sd(1).sub(n.square()).mulStrict(e)}}}))}});function uv(e,t,n,r,o,a){var i,s,u=Hc(e,"x","batchNorm"),l=Hc(t,"mean","batchNorm"),c=Hc(n,"variance","batchNorm");return null!=o&&(i=Hc(o,"scale","batchNorm")),null!=r&&(s=Hc(r,"offset","batchNorm")),Ou(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Ou(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),Ou(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=i&&Ou(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."})),null!=s&&Ou(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),dv(u,l,c,s,i,a)}function lv(e,t,n,r,o,a){var i,s,u=Hc(e,"x","batchNorm"),l=Hc(t,"mean","batchNorm"),c=Hc(n,"variance","batchNorm");return null!=o&&(i=Hc(o,"scale","batchNorm")),null!=r&&(s=Hc(r,"offset","batchNorm")),Ou(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Ou(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),Ou(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=i&&Ou(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."})),null!=s&&Ou(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),dv(u,l,c,s,i,a)}function cv(e,t,n,r,o,a){var i,s,u=Hc(e,"x","batchNorm"),l=Hc(t,"mean","batchNorm"),c=Hc(n,"variance","batchNorm");return null!=o&&(i=Hc(o,"scale","batchNorm")),null!=r&&(s=Hc(r,"offset","batchNorm")),Ou(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),Ou(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),Ou(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=i&&Ou(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."})),null!=s&&Ou(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),dv(u,l,c,s,i,a)}function dv(e,t,n,r,o,a){null==a&&(a=.001);var i,s,u,l=Hc(e,"x","batchNorm"),c=Hc(t,"mean","batchNorm"),d=Hc(n,"variance","batchNorm");return null!=o&&(i=Hc(o,"scale","batchNorm")),null!=r&&(s=Hc(r,"offset","batchNorm")),Ou(c.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Ou(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Ou(null==i||c.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,Ul.runKernel((function(e,t){var n=e.batchNormalization(u,fv(c),fv(d),a,fv(i),fv(s));return t([l,c,d,i]),n}),{$x:l,$mean:c,$variance:d,$scale:i,$offset:s},(function(e,t){var n=t,r=n[0],o=n[1],i=n[2],s=n[3],l=null==s?sd(1):s,c=Ef(o.shape,u.shape),d=[];if(1===o.rank){for(var f=0;f<u.shape.length-1;++f)d.push(u.shape[f]);d.push(1)}var h=r.sub(o),p=e.mul(l),m=Km(i.add(sd(a))),v=m.mul(m).mul(m).mul(sd(-.5));return{$x:function(){return 1===o.rank?e.mul(rf(m.as4D(1,1,1,o.shape[0]),d)).mul(l).reshape(r.shape):e.mul(m).mul(l).reshape(r.shape)},$mean:function(){var e=m.mul(sd(-1)).mul(p);return 1===o.rank&&(e=e.sum(c)),e.reshape(o.shape)},$variance:function(){var e=v.mul(h).mul(p);return 1===o.rank&&(e=e.sum(c)),e.reshape(o.shape)},$scale:function(){var t=h.mul(m),n=e.mul(t);return 1===o.rank&&(n=n.sum(c)),n.reshape(o.shape)},$offset:function(){var t=e;return 1===o.rank&&(t=t.sum(c)),t.reshape(o.shape)}}})).reshape(l.shape)}function fv(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function hv(){Fc("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var pv=td({batchNormalization2d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),hv(),uv(e,t,n,a,o,r)}}),mv=td({batchNormalization3d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),hv(),lv(e,t,n,a,o,r)}}),vv=td({batchNormalization4d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),hv(),cv(e,t,n,a,o,r)}}),gv=td({batchNormalization_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),hv(),dv(e,t,n,a,o,r)}}),yv=td({batchNorm_:dv}),bv=td({batchNorm2d_:uv}),xv=td({batchNorm3d_:lv}),wv=td({batchNorm4d_:cv});function Cv(e,t,n,r,o,a){Ou(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,s=t,u=!1;3===t.rank&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),i=[1,e[0],e[1],e[2]]);var l=i[3],c=s.shape[3];Ou(4===i.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+i.length+"."})),Ou(4===s.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank})),Ou(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank})),Ou(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."})),Ou(c===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[3]+"."})),null!=a&&Ou(Bu(o),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var d=Tf(i,n.shape,r,1,o,a),f=Ul.runKernel((function(e,t){var r=e.conv2dDerInput(s,n,d);return t([n,s]),r}),{dy4D:s,filter:n},(function(e,t){var n=t[0],i=t[1];return{dy4D:function(){return _v(e,n,r,o,"NHWC",1,a)},filter:function(){return Tv(e,i,n.shape,r,o,a)}}}));return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function kv(e,t,n,r,o,a){var i=e;3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Ou(4===i.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+i.shape+"."})),Ou(4===s.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."})),Ou(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."})),Ou(i.shape[3]===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+i.shape[3]+") must match input depth in filter ("+n[2]+"."})),Ou(s.shape[3]===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."})),null!=a&&Ou(Bu(o),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var u=Tf(i.shape,n,r,1,o,a);return Ul.runKernel((function(e){return e.conv2dDerFilter(i,s,u)}),{x4D:i,dy4D:s})}function Sv(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}var Ev=td({conv1d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NWC"),void 0===a&&(a=1);var s=Hc(e,"x","conv1d"),u=Hc(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),Ou(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),Ou(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=i&&Ou(Bu(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),Ou(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),Ou(jf(n,a),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"})),Ou("NWC"===o,(function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."}));var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=_v(f,d,[1,n],r,"NHWC",[1,a],i);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),_v=td({conv2d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=Hc(e,"x","conv2d"),u=Hc(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Ou(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),Ou(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=i&&Ou(Bu(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),Ou(l.shape[3]===u.shape[2],(function(){return"Error in conv2d: depth of input ("+l.shape[3]+") must match input depth for filter "+u.shape[2]+"."})),Ou(jf(n,a),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),Ou("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var d=Tf(l.shape,u.shape,n,a,r,i),f=Ul.runKernel((function(e,t){var n=e.conv2d(l,u,d);return t([u,l]),n}),{x:l,$filter:u},(function(e,t){var o=t,i=o[0],s=o[1];return Ou(Pf(a),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"})),{x:function(){return Cv(s.shape,e,i,n,r)},$filter:function(){return kv(s,e,i.shape,n,r)}}}));return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),Nv=td({conv3d_:function(e,t,n,r,o,a){void 0===o&&(o="NDHWC"),void 0===a&&(a=[1,1,1]);var i=Hc(e,"x","conv3d"),s=Hc(t,"filter","conv3d"),u=i,l=!1;4===i.rank&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),Ou(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),Ou(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),Ou(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),Ou(function(e,t){return Sv(e)||Sv(t)}(n,a),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),Ou("NDHWC"===o,(function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."}));var c=Rf(u.shape,s.shape,n,a,r),d=Ul.runKernel((function(e,t){var n=e.conv3d(u,s,c);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){Ou(Sv(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}));var o=t[0],i=t[1];return{x:function(){return function(e,t,n,r,o){Ou(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var a=e,i=t,s=!1;4===t.rank&&(s=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var u=a[4],l=i.shape[4];Ou(5===a.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."})),Ou(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank})),Ou(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),Ou(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),Ou(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c=Rf(a,n.shape,r,1,o),d=Ul.runKernel((function(e){return e.conv3dDerInput(i,n,c)}),{dy5D:i});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}(o.shape,e,i,n,r)},$filter:function(){return function(e,t,n,r,o){var a=e;4===e.rank&&(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var i=t;4===i.rank&&(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),Ou(5===a.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."})),Ou(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."})),Ou(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),Ou(a.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."})),Ou(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=Rf(a.shape,n,r,1,o);return Ul.runKernel((function(e){return e.conv3dDerFilter(a,i,s)}),{x5D:a,dy5D:i})}(o,e,i.shape,n,r)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Tv=td({conv2dDerFilter_:kv}),Rv=td({depthwiseConv2d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=Hc(e,"x","depthwiseConv2d"),u=Hc(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Ou(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),Ou(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),Ou(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==a&&(a=[1,1]),Ou(jf(n,a),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=i&&Ou(Bu(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var d=Tf(l.shape,u.shape,n,a,r,i,!0),f=Ul.runKernel((function(e,t){var n=e.depthwiseConv2D(l,u,d);return t([l,u]),n}),{x:l,$filter:u},(function(e,t){Ou(Pf(a),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var n=t[0],r=t[1];return{x:function(){return function(e,t,n,r){var o=t,a=!1;3===t.rank&&(a=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=Ul.runKernel((function(e){return e.depthwiseConv2DDerInput(o,n,r)}),{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}(n.shape,e,r,d)},$filter:function(){return function(e,t,n,r){var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=t;return 3===a.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Ul.runKernel((function(e){return e.depthwiseConv2DDerFilter(o,a,r)}),{x4D:o,dy4D:a})}(n,e,r.shape,d)}}}));return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),Dv=td({separableConv2d_:function(e,t,n,r,o,a,i){void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC");var s=Hc(e,"x","separableConv2d"),u=Hc(t,"depthwiseFilter","separableConv2d"),l=Hc(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Ou(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),Ou(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),Ou(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),Ou(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),Ou(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var f=u.shape[2],h=u.shape[3];Ou(l.shape[2]===f*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+l.shape[2]+"."}));var p=Rv(c,u,r,o,i,a),m=_v(p,l,1,"valid",i);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Iv=td({conv2dTranspose_:function(e,t,n,r,o,a){return Cv(n,Hc(e,"x","conv2dTranspose"),Hc(t,"filter","conv2dTranspose"),r,o,a)}}),Av=td({matMul_:function(e,t,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=Hc(e,"a","matMul"),i=Hc(t,"b","matMul");o=Pl(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?i.shape[i.rank-2]:i.shape[i.rank-1],d=a.shape.slice(0,-2),f=i.shape.slice(0,-2),h=Fu(d),p=Fu(f);Ou(a.rank>=2&&i.rank>=2&&a.rank===i.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."})),Ou(Lu(d,f),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+f+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."})),Ou(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=a.shape.slice(0,-2).concat([l,c]),v=n?a.as3D(h,s,l):a.as3D(h,l,s),g=r?i.as3D(p,c,u):i.as3D(p,u,c);return Ul.runKernel((function(e,t){var o=e.batchMatMul(v,g,n,r);return t([v,g]),o}),{$a:v,$b:g},(function(e,t){var o=t,a=o[0],i=o[1];return n||r?!n&&r?{$a:function(){return e.matMul(i,!1,!1)},$b:function(){return e.matMul(a,!0,!1)}}:n&&!r?{$a:function(){return i.matMul(e,!1,!0)},$b:function(){return a.matMul(e,!1,!1)}}:{$a:function(){return i.matMul(e,!0,!0)},$b:function(){return e.matMul(a,!0,!0)}}:{$a:function(){return e.matMul(i,!1,!0)},$b:function(){return a.matMul(e,!0,!1)}}})).reshape(m)}}),Ov=td({dot_:function(e,t){var n=Hc(e,"t1","dot"),r=Hc(t,"t2","dot");Ou(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return Ou(o===a,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Mv=td({outerProduct_:function(e,t){var n=Hc(e,"v1","outerProduct"),r=Hc(t,"v2","outerProduct");return Ou(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Pv=td({reverse_:function(e,t){var n=Hc(e,"x","reverse");if(0===n.rank)return n.clone();var r=qu(t,n.shape);return Ul.runKernel((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),jv=td({reverse1d_:function(e){var t=Hc(e,"x","reverse");return Ou(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Pv(t,0)}}),Fv=td({reverse2d_:function(e,t){var n=Hc(e,"x","reverse");return Ou(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Pv(n,t)}}),Lv=td({reverse3d_:function(e,t){var n=Hc(e,"x","reverse");return Ou(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Pv(n,t)}}),Bv=td({reverse4d_:function(e,t){var n=Hc(e,"x","reverse");return Ou(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Pv(n,t)}});function Wv(e,t,n,r,o,a){var i=Hc(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),Ou(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),Ou(jf(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=a&&Ou(Bu(o),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=Nf(s.shape,t,n,r,o,a),c=Ul.runKernel((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,a){var i=a[0],s=a[1];return{x:function(){return function(e,t,n,r,o,a,i,s){var u=Hc(e,"dy","maxPoolBackprop"),l=Hc(t,"input","maxPoolBackprop"),c=Hc(n,"output","maxPoolBackprop");Ou(l.rank===u.rank,(function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"})),null==a&&(a=[1,1]),Ou(jf(o,a),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"})),Ou(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),Ou(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var d=Nf(l.shape,r,o,a,i,s);return Ul.runKernel((function(e){return e.maxPoolBackprop(u,l,c,d)}),{$dy:u,$input:l})}(e,i,s,t,n,r,o)}}}));return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function Uv(e,t,n,r,o,a){var i=Hc(e,"x","avgPool","float32");null==r&&(r=[1,1]),Ou(jf(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Ou(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=a&&Ou(Bu(o),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=Nf(s.shape,t,n,r,o,a),c=Ul.runKernel((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,o,a){var i=Hc(e,"dy","avgPoolBackprop"),s=Hc(t,"input","avgPoolBackprop");Ou(s.rank===i.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"})),null==o&&(o=[1,1]),Ou(jf(r,o),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}));var u=s,l=i,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Ou(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),Ou(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var d=Nf(u.shape,n,r,o,a),f=Ul.runKernel((function(e){return e.avgPoolBackprop(l,u,d)}),{dy4D:l,input4D:u});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}(e,s,t,n,r,o)}}}));return c=c.cast(i.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var zv=td({maxPool_:function(e,t,n,r,o){return Wv(e,t,n,1,r,o)}}),Hv=td({avgPool_:function(e,t,n,r,o){return Uv(e,t,n,1,r,o)}}),Vv=td({pool_:function(e,t,n,r,o,a){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");var i=Hc(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Ou(jf(a,o),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"}));var l,c=Nf(s.shape,t,a,o,r),d=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),o=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],o[t]]}))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var f=1===d[0]&&1===d[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),o=n.map((function(e){return e[1]})),a=e.concat(r,o),i=t.map((function(e,t){return(e-a[t]%e)%e})),s=o.map((function(e,t){return e+i[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,i[t]]}))]}([c.inHeight,c.inWidth],d,l),p=h[0],m=h[1],v=f?r:"valid",g=f?s:ef(s,d,p),y=("avg"===n?function(){return Uv(g,t,a,1,v)}:function(){return Wv(g,t,a,1,v)})(),b=f?y:jd(y,d,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),qv=td({slice_:function(e,t,n){var r,o,a=Hc(e,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");r="number"==typeof t?[t].concat(new Array(a.rank-1).fill(0)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(0)):t.slice(),o=(o=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(Ou(-1===e,(function(){return"Bad value in size"})),a.shape[t]-r[t])})),function(e,t,n){Ou(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),Ou(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){Ou(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},o=0;o<e.rank;++o)r(o)}(a,r,o);var i=a.shape;return Ul.runKernel((function(e){return e.slice(a,r,o)}),{$x:a},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],i[n]-r[n]-o[n]]);return{$x:function(){return e.pad(t)}}}))}}),Gv=td({slice1d_:function(e,t,n){var r=Hc(e,"x","slice1d");return Ou(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),qv(r,[t],[n])}}),Yv=td({slice2d_:function(e,t,n){var r=Hc(e,"x","slice2d");return Ou(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),qv(r,t,n)}}),Kv=td({slice3d_:function(e,t,n){var r=Hc(e,"x","slice3d");return Ou(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),qv(r,t,n)}}),$v=td({slice4d_:function(e,t,n){var r=Hc(e,"x","slice4d");return Ou(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),qv(r,t,n)}});function Xv(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(Kc(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Kc(e.shape,r))),{$x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==o?r:r.transpose(o)}}}var Qv=td({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Hc(e,"x","all","bool"),o=qu(t,r.shape),a=o,i=Xc(a,r.rank);null!=i&&(r=r.transpose(i),a=Jc(a.length,r.rank));var s=Ul.runKernel((function(e){return e.all(r,a)}),{$x:r});if(n){var u=Kc(s.shape,o);return s.reshape(u)}return s}}),Jv=td({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Hc(e,"x","any","bool"),o=qu(t,r.shape),a=o,i=Xc(a,r.rank);null!=i&&(r=r.transpose(i),a=Jc(a.length,r.rank));var s=Ul.runKernel((function(e){return e.any(r,a)}),{$x:r});if(n){var u=Kc(s.shape,o);return s.reshape(u)}return s}}),Zv=td({argMax_:function(e,t){void 0===t&&(t=0);var n=Hc(e,"x","argMax");null==t&&(t=0);var r=qu(t,n.shape),o=Xc(r,n.rank);return null!=o&&(n=n.transpose(o),r=Jc(r.length,n.rank)),Ul.runKernel((function(e,t){var o=e.argMax(n,r[0]);return t([n]),o}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return gd(n)}}}))}}),eg=td({argMin_:function(e,t){void 0===t&&(t=0);var n=Hc(e,"x","argMin");null==t&&(t=0);var r=qu(t,n.shape),o=Xc(r,n.rank);return null!=o&&(n=n.transpose(o),r=Jc(r.length,n.rank)),Ul.runKernel((function(e,t){var o=e.argMin(n,r[0]);return t([n]),o}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return gd(n)}}}))}}),tg=td({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Hc(e,"x","logSumExp"),o=qu(t,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=Kc(s.shape,o);return s.reshape(u)}return s}}),ng=td({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Hc(e,"x","max"),o=r,a=qu(t,r.shape),i=a,s=Xc(i,r.rank);null!=s&&(r=r.transpose(s),i=Jc(i.length,r.rank));var u=Ul.runKernel((function(e,t){var n=e.max(r,i);return t([o,n]),n}),{$x:r},(function(e,t){return Xv(e,t[1],t[0],a,s)}));if(n){var l=Kc(u.shape,a);u=u.reshape(l)}return u}}),rg=td({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Hc(e,"x","mean"),o=qu(t,r.shape),a=Fu(Yc(r.shape,o)[1]);return xf((function(e){var r=sd(a);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(fd(e.shape,"float32")).div(a)}}}))(r)}}),og=td({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Hc(e,"x","min"),o=r,a=qu(t,r.shape),i=a,s=Xc(i,r.rank);null!=s&&(r=r.transpose(s),i=Jc(i.length,r.rank));var u=Ul.runKernel((function(e,t){var n=e.min(r,i);return t([o,n]),n}),{$x:r},(function(e,t){return Xv(e,t[1],t[0],a,s)}));if(n){var l=Kc(u.shape,a);u=u.reshape(l)}return u}}),ag=td({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qu(t,(e=Hc(e,"x","moments")).shape),o=e.mean(r,n),a=o.shape;n||(a=Kc(o.shape,r));var i=e.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,n)}}}),ig=td({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Hc(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=qu(t,r.shape);return xf((function(e){var t=Xc(o,e.rank),r=o,a=e;null!=t&&(a=e.transpose(t),r=Jc(r.length,e.rank));var i=Ul.runKernel((function(e){return e.sum(a,r)}),{permutedX:a});if(n){var s=Kc(i.shape,o);i=i.reshape(s)}return{value:i,gradFunc:function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(fd(e.shape,"float32"))}}}))(r)}}),sg=td({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Hc(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=qu(t,r.shape),a=Xc(o,r.rank),i=o,s=r;null!=a&&(s=r.transpose(a),i=Jc(i.length,r.rank));var u=Ul.runKernel((function(e){return e.prod(s,i)}),{permutedX:s});if(n){var l=Kc(u.shape,o);u=u.reshape(l)}return u}}),ug=td({equal_:function(e,t){var n,r=Hc(e,"a","equal"),o=Hc(t,"b","equal");return n=Pl(r,o),r=n[0],o=n[1],_f(r.shape,o.shape),Ul.runKernel((function(e){return e.equal(r,o)}),{$a:r,$b:o})}}),lg=td({equalStrict_:function(e,t){var n=Hc(e,"a","equalStrict"),r=Hc(t,"b","equalStrict");return Mu(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),cg=td({greater_:function(e,t){var n,r=Hc(e,"a","greater"),o=Hc(t,"b","greater");return n=Pl(r,o),r=n[0],o=n[1],_f(r.shape,o.shape),Ul.runKernel((function(e){return e.greater(r,o)}),{$a:r,$b:o})}}),dg=td({greaterEqual_:function(e,t){var n,r=Hc(e,"a","greaterEqual"),o=Hc(t,"b","greaterEqual");return n=Pl(r,o),r=n[0],o=n[1],_f(r.shape,o.shape),Ul.runKernel((function(e,t){var n=e.greaterEqual(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return gd(n)},$b:function(){return gd(r)}}}))}}),fg=td({greaterEqualStrict_:function(e,t){var n=Hc(e,"a","greaterEqualStrict"),r=Hc(t,"b","greaterEqualStrict");return Mu(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),hg=td({greaterStrict_:function(e,t){var n=Hc(e,"a","greaterStrict"),r=Hc(t,"b","greaterStrict");return Mu(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),pg=td({less_:function(e,t){var n,r=Hc(e,"a","less"),o=Hc(t,"b","less");return n=Pl(r,o),r=n[0],o=n[1],_f(r.shape,o.shape),Ul.runKernel((function(e){return e.less(r,o)}),{$a:r,$b:o})}}),mg=td({lessEqual_:function(e,t){var n,r=Hc(e,"a","lessEqual"),o=Hc(t,"b","lessEqual");return n=Pl(r,o),r=n[0],o=n[1],_f(r.shape,o.shape),Ul.runKernel((function(e){return e.lessEqual(r,o)}),{$a:r,$b:o})}}),vg=td({lessEqualStrict_:function(e,t){var n=Hc(e,"a","lessEqualStrict"),r=Hc(t,"b","lessEqualStrict");return Mu(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),gg=td({lessStrict_:function(e,t){var n=Hc(e,"a","lessStrict"),r=Hc(t,"b","lessStrict");return Mu(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),yg=td({notEqual_:function(e,t){var n,r=Hc(e,"a","notEqual"),o=Hc(t,"b","notEqual");return n=Pl(r,o),r=n[0],o=n[1],_f(r.shape,o.shape),Ul.runKernel((function(e){return e.notEqual(r,o)}),{$a:r,$b:o})}}),bg=td({notEqualStrict_:function(e,t){var n=Hc(e,"a","notEqualStrict"),r=Hc(t,"b","notEqualStrict");return Mu(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),xg=td({add_:function(e,t){var n,r=Hc(e,"a","add"),o=Hc(t,"b","add");n=Pl(r,o),r=n[0],o=n[1];var a=_f(r.shape,o.shape);return Ul.runKernel((function(e){return e.add(r,o)}),{$a:r,$b:o},(function(e){return{$a:function(){var t=e,n=Ef(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=Ef(o.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(o.shape)}}}))}}),wg=td({addN_:function(e){Ou(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Ou(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return Hc(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Lu(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Ul.runKernel((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}))}}),Cg=td({addStrict_:function(e,t){var n=Hc(e,"a","addStrict"),r=Hc(t,"b","addStrict");return Mu(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),kg=td({atan2_:function(e,t){var n,r=Hc(e,"a","atan2"),o=Hc(t,"b","atan2");n=Pl(r,o),r=n[0],o=n[1];var a=_f(r.shape,o.shape);return Ul.runKernel((function(e,t){var n=e.atan2(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=xg(n.square(),r.square()),o=e.mul(r.div(t)),i=Ef(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},$b:function(){var t=xg(n.square(),r.square()),o=qm(e.mul(n.div(t))),i=Ef(r.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(r.shape)}}}))}}),Sg=td({div_:function(e,t){var n,r=Hc(e,"a","div"),o=Hc(t,"b","div");if(n=Pl(r,o),r=n[0],o=n[1],"int32"===r.dtype&&"int32"===o.dtype)return _g(r,o);var a=_f(r.shape,o.shape);return Ul.runKernel((function(e,t){var n=e.realDivide(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.div(r.toFloat()),o=Ef(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),o=Ef(r.shape,a);o.length>0&&(t=t.sum(o).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}}))}}),Eg=td({divStrict_:function(e,t){var n=Hc(e,"a","div"),r=Hc(t,"b","div");return Mu(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),_g=td({floorDiv_:function(e,t){var n,r=Hc(e,"a","floorDiv"),o=Hc(t,"b","floorDiv");n=Pl(r,o),r=n[0],o=n[1];var a=_f(r.shape,o.shape);return Ul.runKernel((function(e,t){var n=e.floorDiv(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.div(r.toFloat()),o=Ef(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),o=Ef(r.shape,a);o.length>0&&(t=t.sum(o).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}}))}}),Ng=td({maximum_:function(e,t){var n,r=Hc(e,"a","maximum"),o=Hc(t,"b","maximum");return n=Pl(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),_f(r.shape,o.shape),Ul.runKernel((function(e,t){var n=e.maximum(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return e.mul(n.greaterEqual(r).toFloat())},$b:function(){return e.mul(n.less(r).toFloat())}}}))}}),Tg=td({maximumStrict_:function(e,t){var n=Hc(e,"a","maximumStrict"),r=Hc(t,"b","maximumStrict");return Mu(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Rg=td({minimum_:function(e,t){var n,r=Hc(e,"a","minimum"),o=Hc(t,"b","minimum");return n=Pl(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),_f(r.shape,o.shape),Ul.runKernel((function(e,t){var n=e.minimum(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return e.mul(n.lessEqual(r).toFloat())},$b:function(){return e.mul(n.greater(r).toFloat())}}}))}}),Dg=td({minimumStrict_:function(e,t){var n=Hc(e,"a","minimumStrict"),r=Hc(t,"b","minimumStrict");return Mu(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Ig=td({mod_:function(e,t){var n,r=Hc(e,"a","mod"),o=Hc(t,"b","mod");n=Pl(r,o),r=n[0],o=n[1];var a=_f(r.shape,o.shape);return Ul.runKernel((function(e,t){var n=e.mod(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Ef(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),o=Ef(r.shape,a);return o.length>0?t.sum(o).reshape(r.shape):t}}}))}}),Ag=td({modStrict_:function(e,t){var n=Hc(e,"a","modStrict"),r=Hc(t,"b","modStrict");return Mu(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Og=td({mul_:function(e,t){var n,r=Hc(e,"a","mul"),o=Hc(t,"b","mul");n=Pl(r,o),r=n[0],o=n[1];var a=_f(r.shape,o.shape);return Ul.runKernel((function(e,t){var n=e.multiply(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.mul(r.toFloat()),o=Ef(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),o=Ef(r.shape,a);return o.length>0?t.sum(o).reshape(r.shape):t}}}))}}),Mg=td({mulStrict_:function(e,t){var n=Hc(e,"a","mul"),r=Hc(t,"b","mul");return Mu(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Pg=td({pow_:function(e,t){var n=Hc(e,"base","pow"),r=Hc(t,"exp","pow"),o=_f(n.shape,r.shape);return e=n.cast(Ol(n.dtype,r.dtype)),t=r.cast(Ol(n.dtype,r.dtype)),Ul.runKernel((function(e,t){var o=e.pow(n,r);return t([n,r,o]),o}),{$base:n,$exp:r},(function(e,t){var n=t[0],r=t[1],a=t[2];return{$base:function(){var t=r.toFloat(),a=e.mul(t.mul(n.pow(t.sub(sd(1))))),i=Ef(n.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(n.shape)},$exp:function(){var t=n.greater(0),i=n.log().where(t,gd(n)),s=e.mul(a.mul(i)),u=Ef(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}))}}),jg=td({powStrict_:function(e,t){return Mu(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Fg=td({squaredDifference_:function(e,t){var n,r=Hc(e,"a","squaredDifference"),o=Hc(t,"b","squaredDifference");return n=Pl(r,o),r=n[0],o=n[1],_f(r.shape,o.shape),Ul.runKernel((function(e,t){var n=e.squaredDifference(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1],o=sd(2);return{$a:function(){return e.mul(n.sub(r).mul(o))},$b:function(){return e.mul(r.sub(n).mul(o))}}}))}}),Lg=td({squaredDifferenceStrict_:function(e,t){var n=Hc(e,"a","squaredDifferenceStrict"),r=Hc(t,"b","squaredDifferenceStrict");return Mu(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Bg=td({sub_:function(e,t){var n,r=Hc(e,"a","sub"),o=Hc(t,"b","sub");n=Pl(r,o),r=n[0],o=n[1];var a=_f(r.shape,o.shape);return Ul.runKernel((function(e){return e.subtract(r,o)}),{$a:r,$b:o},(function(e){return{$a:function(){var t=e,n=Ef(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=Ef(o.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(o.shape)}}}))}}),Wg=td({subStrict_:function(e,t){var n=Hc(e,"a","subStrict"),r=Hc(t,"b","subStrict");return Mu(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Ug=td({logicalAnd_:function(e,t){var n=Hc(e,"a","logicalAnd","bool"),r=Hc(t,"b","logicalAnd","bool");return _f(n.shape,r.shape),Ul.runKernel((function(e){return e.logicalAnd(n,r)}),{$a:n,$b:r})}}),zg=td({logicalNot_:function(e){var t=Hc(e,"x","logicalNot","bool");return Ul.runKernel((function(e){return e.logicalNot(t)}),{$x:t})}}),Hg=td({logicalOr_:function(e,t){var n=Hc(e,"a","logicalOr","bool"),r=Hc(t,"b","logicalOr","bool");return _f(n.shape,r.shape),Ul.runKernel((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),Vg=td({logicalXor_:function(e,t){var n=Hc(e,"a","logicalXor","bool"),r=Hc(t,"b","logicalXor","bool");return _f(n.shape,r.shape),Hg(e,t).logicalAnd(Ug(e,t).logicalNot())}}),qg=td({where_:function(e,t,n){var r=Hc(t,"a","where"),o=Hc(n,"b","where"),a=Hc(e,"condition","where","bool");return Mu(r.shape,o.shape,"Error in where: "),1===a.rank?Ou(a.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Mu(a.shape,o.shape,"Error in where: "),Ul.runKernel((function(e,t){var n=e.select(a,r,o);return t([a]),n}),{$condition:a,$a:r,$b:o},(function(e,t){var n=t[0];return{$condition:function(){return gd(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),Gg=td({elu_:function(e){var t=Hc(e,"x","elu");return Ul.runKernel((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return Ul.runKernel((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),Yg=td({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=Hc(e,"x","leakyRelu");return Ng(sd(t).mul(n),n)}}),Kg=td({prelu_:function(e,t){var n=Hc(e,"x","prelu"),r=Hc(t,"alpha","prelu");return Ul.runKernel((function(e,t){var o=e.prelu(n,r);return t([n,r]),o}),{$x:n,$alpha:r},(function(e,t){var n=t[0],r=t[1],o=n.greater(0);return{$x:function(){return qg(o,e,e.mul(r))},$alpha:function(){var t=qg(o,gd(e),e.mul(n)),a=Ef(r.shape,e.shape);return a.length>0&&(t=t.sum(a)),t.reshape(r.shape)}}}))}}),$g=td({relu_:function(e){var t=Hc(e,"x","relu");return"bool"===t.dtype?t.toInt():Ul.runKernel((function(e,n){var r=e.relu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n.step().toFloat())}}}))}}),Xg=td({selu_:function(e){var t=Hc(e,"x","selu");return Ul.runKernel((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(sd(0)),r=sd(cm),o=sd(dm),a=e.mul(o),i=e.mul(r).mul(n.toFloat().exp());return qg(t,a,i)}}}))}}),Qg=td({transpose_:function(e,t){var n=Hc(e,"x","transpose");return null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Ou(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){Ou(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1?n.clone():Ul.runKernel((function(e){return e.transpose(n,t)}),{$x:n},(function(e){var n=Qc(t);return{$x:function(){return e.transpose(n)}}}))}}),Jg=td({localResponseNormalization_:function(e,t,n,r,o){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var a=Hc(e,"x","localResponseNormalization");Ou(4===a.rank||3===a.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."})),Ou(Bu(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var i=a,s=!1;3===a.rank&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=Ul.runKernel((function(e,a){var s=e.localResponseNormalization4D(i,t,n,r,o);return a([i,s]),s}),{x4D:i},(function(e,a){var i=a[0],s=a[1];return{x4D:function(){return Ul.runKernel((function(a){return a.LRNGrad(e,i,s,t,n,r,o)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Zg=td({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(sd(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Hc(e,"x","norm"),t,n),a=o.shape;if(r){var i=qu(n,e.shape);a=Kc(o.shape,i)}return o.reshape(a)}});function ey(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function ty(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var ny=td({gather_:function(e,t,n){void 0===n&&(n=0);var r=Hc(e,"x","gather"),o=Hc(t,"indices","gather","int32");n=qu(n,r.shape)[0];var a=function(e,t,n){for(var r=e.shape[n],o=[],a=1,i=1,s=0;s<n;s++)o.push(e.shape[s]),a*=e.shape[s];for(s=0;s<t.rank;s++)o.push(t.shape[s]);for(s=n+1;s<e.rank;s++)o.push(e.shape[s]),i*=e.shape[s];return{batchSize:a,sliceSize:i,dimSize:r,outputShape:o}}(r,o,n);return Ul.runKernel((function(e,t){var a=e.gather(r,o.flatten(),n);return t([o]),a}),{$x:r},(function(e,t){var o=t[0];return{$x:function(){var t=r.shape,a=o.size,i=t.slice(0,n),s=i.length,u=t.slice(n,t.length).slice(1),l=u.length,c=ey(0,s),d=ey(s+1,s+1+l),f=ty([i,[a],u]),h=e.reshape(f),p=o.reshape([a]),m=ty([[s],c,d]),v=h.transpose(m),g=ry(v,p,r.shape[n]),y=Qc(m);return g.transpose(y)}}})).reshape(a.outputShape)}}),ry=td({unsortedSegmentSum_:function(e,t,n){var r=Hc(e,"x","unsortedSegmentSum"),o=Hc(t,"segmentIds","unsortedSegmentSum","int32");return Ou(Bu(n),(function(){return"numSegments must be of dtype int"})),Ul.runKernel((function(e,t){var a=e.unsortedSegmentSum(r,o,n);return t([o]),a}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Ng(t,gd(t)),r=ny(e,n),o=dg(t,sd(0,"int32")),a=r.rank-o.rank,i=0;i<a;++i)o=Ud(o,i+1);o=Ug(o,fd(r.shape,"bool"));var s=gd(r);return qg(o,r,s)}(e,n)}}}))}}),oy=td({basicLSTMCell_:function(e,t,n,r,o,a){var i=Hc(e,"forgetBias","basicLSTMCell"),s=Hc(t,"lstmKernel","basicLSTMCell"),u=Hc(n,"lstmBias","basicLSTMCell"),l=Hc(r,"data","basicLSTMCell"),c=Hc(o,"c","basicLSTMCell"),d=Hc(a,"h","basicLSTMCell"),f=l.concat(d,1).matMul(s).add(u),h=f.shape[0],p=f.shape[1]/4,m=[h,p],v=f.slice([0,0],m),g=f.slice([0,p],m),y=f.slice([0,2*p],m),b=f.slice([0,3*p],m),x=v.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(i.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),ay=td({multiRNNCell_:function(e,t,n,r){for(var o=Hc(t,"data","multiRNNCell"),a=Vc(n,"c","multiRNNCell"),i=Vc(r,"h","multiRNNCell"),s=o,u=[],l=0;l<e.length;l++){var c=e[l](s,a[l],i[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],f=[];for(l=0;l<u.length;l+=2)d.push(u[l]),f.push(u[l+1]);return[d,f]}}),iy=td({movingAverage_:function(e,t,n,r,o){void 0===o&&(o=!0);var a=Hc(e,"v","movingAverage"),i=Hc(t,"x","movingAverage"),s=Hc(n,"decay","movingAverage");jl(a,i),Ou(Lu(a.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=sd(1),l=u.sub(s),c=i.sub(a).mul(l);if(o){Ou(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Hc(r,"step","movingAverage");c=c.div(u.sub(Pg(s,d)))}return a.add(c)}}),sy=td({stridedSlice_:function(e,t,n,r,o,a,i,s,u){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==i)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");var l=Hc(e,"x","stridedSlice");if(r.every((function(e){return 1===e}))){var c=mf(l.shape,t,n,r,o,a,i,s,u),d=c[0],f=c[1],h=c[2],p=f.filter((function(e,t){return-1===h.indexOf(t)}));return qv(l,d,f).reshape(p)}return Ul.runKernel((function(e){return e.stridedSlice(l,t,n,r,o,a,i,s,u)}),{$x:l})}}),uy=td({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=Hc(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var a=Ul.runKernel((function(e){return e.topk(r,t,n)}),{$x:r});return{values:a[0],indices:a[1]}}}),ly=td({scatterND_:function(e,t,n){var r=Hc(e,"indices","scatterND","int32"),o=Hc(t,"updates","scatterND");return function(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != "+(o+e.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+e[i+o]+")")}(n,t,e)}(o,r,n),Ul.runKernel((function(e){return e.scatterND(r,o,n)}),{$indices:r,$updates:o})}}),cy=td({fft_:function(e){Ou("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Ul.runKernel((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),dy=td({ifft_:function(e){Ou("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Ul.runKernel((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),fy=td({rfft_:function(e,t){Ou("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],o=e.size/r;if(null!=t&&t<r){var a=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=e.slice(a,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(hd(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=nd(n,u).as2D(o,r),c=cy(l),d=Math.floor(r/2)+1,f=rd(c),h=od(c),p=f.split([d,r-d],f.shape.length-1),m=h.split([d,r-d],h.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,nd(p[0],m[0]).reshape(v)}}),hy=td({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=dy(r);return rd(o)}var a=[n,2*(t-1)],i=rd(e).as2D(n,t),s=od(e).as2D(n,t),u=i.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(sd(-1)),c=i.concat(u,1),d=s.concat(l,1);return r=nd(c,d).as2D(a[0],a[1]),o=dy(r),rd(o)}}),py=Object.freeze({fft:cy,ifft:dy,rfft:fy,irfft:hy}),my=td({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var o=Hc(e,"sparseIndices","sparseToDense","int32"),a=Hc(t,"sparseValues","sparseToDense"),i=Hc(r,"defaultValue","sparseToDense",a.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==o))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+o+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i),Ul.runKernel((function(e){return e.sparseToDense(o,a,n,i)}),{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}}),vy=td({gatherND_:function(e,t){var n=Hc(t,"indices","gatherND","int32"),r=Hc(e,"x","gatherND");return Ul.runKernel((function(e){return e.gatherND(r,n)}),{$x:r,$indices:n})}}),gy=td({dropout_:function(e,t,n,r){if(null!=n&&!Lu(e.shape,n))throw new Error("Non-default noise shape is not implemented yet: "+JSON.stringify(n));var o=Jd(e.shape,0,1,"float32",r).greater(t);return o=o.div(Bg(1,t)),e.mul(o)}});function yy(e,t,n){for(var r=1-e%2,o=new Float32Array(e),a=0;a<e;++a){var i=2*Math.PI*a/(e+r-1);o[a]=t-n*Math.cos(i)}return ud(o,"float32")}var by,xy=td({hannWindow_:function(e){return yy(e,.5,.5)}}),wy=td({hammingWindow_:function(e){return yy(e,.54,.46)}}),Cy=td({frame_:function(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var a=0,i=[];a+t<=e.size;)i.push(qv(e,a,t)),a+=n;if(r){var s=a+t-e.size,u=yd([qv(e,a,t-s),pd([s],o)]);i.push(u)}return 0===i.length?ld([],[0,t]):yd(i).as2D(i.length,t)}}),ky=Object.freeze({hannWindow:xy,hammingWindow:wy,frame:Cy});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(by||(by={}));var Sy=td({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=by.SUM_BY_NONZERO_WEIGHTS);var o=Hc(e,"labels","absoluteDifference"),a=Hc(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=Hc(n,"weights","absoluteDifference")),Mu(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return Ey(s,i,r)}}),Ey=td({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=by.SUM_BY_NONZERO_WEIGHTS);var r=Hc(e,"losses","computeWeightedLoss"),o=null;null!=t&&(o=Hc(t,"weights","computeWeightedLoss"));var a=null==o?r:r.mul(o);if(n===by.NONE)return a;if(n===by.SUM)return a.sum();if(n===by.MEAN){if(null==o)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(sd(i)):s}if(n===by.SUM_BY_NONZERO_WEIGHTS){if(null==o)return a.sum().div(sd(r.size));var u=o.mul(fd(r.shape)).notEqual(sd(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),_y=td({cosineDistance_:function(e,t,n,r,o){void 0===o&&(o=by.SUM_BY_NONZERO_WEIGHTS);var a=Hc(e,"labels","cosineDistance"),i=Hc(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Hc(r,"weights","cosineDistance")),Mu(a.shape,i.shape,"Error in cosineDistance: ");var u=sd(1).sub(a.mul(i).sum(n,!0));return Ey(u,s,o)}}),Ny=td({hingeLoss_:function(e,t,n,r){void 0===r&&(r=by.SUM_BY_NONZERO_WEIGHTS);var o=Hc(e,"labels","hingeLoss"),a=Hc(t,"predictions","hingeLoss"),i=null;null!=n&&(i=Hc(n,"weights","hingeLoss")),Mu(o.shape,a.shape,"Error in hingeLoss: ");var s=sd(1);o=sd(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return Ey(u,i,r)}}),Ty=td({huberLoss_:function(e,t,n,r,o){void 0===r&&(r=1),void 0===o&&(o=by.SUM_BY_NONZERO_WEIGHTS);var a=Hc(e,"labels","huberLoss"),i=Hc(t,"predictions","huberLoss"),s=null;null!=n&&(s=Hc(n,"weights","huberLoss")),Mu(a.shape,i.shape,"Error in huberLoss: ");var u=sd(r),l=i.sub(a).abs(),c=Rg(l,u),d=l.sub(c),f=sd(.5).mul(c.square()).add(u.mul(d));return Ey(f,s,o)}}),Ry=td({logLoss_:function(e,t,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=by.SUM_BY_NONZERO_WEIGHTS);var a=Hc(e,"labels","logLoss"),i=Hc(t,"predictions","logLoss"),s=null;null!=n&&(s=Hc(n,"weights","logLoss")),Mu(a.shape,i.shape,"Error in logLoss: ");var u=sd(1),l=sd(r),c=a.mul(i.add(l).log()).neg().sub(u.sub(a).mul(u.sub(i).add(l).log()));return Ey(c,s,o)}}),Dy=td({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=by.SUM_BY_NONZERO_WEIGHTS);var o=Hc(e,"labels","meanSquaredError"),a=Hc(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=Hc(n,"weights","meanSquaredError")),Mu(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return Ey(s,i,r)}}),Iy=td({sigmoidCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=by.SUM_BY_NONZERO_WEIGHTS);var a=Hc(e,"multiClassLabels","sigmoidCrossEntropy"),i=Hc(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Hc(n,"weights","sigmoidCrossEntropy")),Mu(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=sd(r),l=sd(1),c=sd(.5);a=a.mul(l.sub(u)).add(c.mul(u))}var d=function(e,t){var n=Hc(e,"labels","sigmoidCrossEntropyWithLogits"),r=Hc(t,"logits","sigmoidCrossEntropyWithLogits");Mu(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),a=r.mul(n),i=r.abs().neg().exp().log1p();return o.sub(a).add(i)}(a,i);return Ey(d,s,o)}}),Ay=td({softmaxCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=by.SUM_BY_NONZERO_WEIGHTS);var a=Hc(e,"onehotLabels","softmaxCrossEntropy"),i=Hc(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Hc(n,"weights","softmaxCrossEntropy")),Mu(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=sd(r),l=sd(1),c=sd(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(c))}var d=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return xf((function(e,t,r){var o=t.logSumExp([n],!0),a=t.toFloat().sub(o);return r([e,a]),{value:a.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],o=t[1],a=Kc(e.shape,[n]);return[e.reshape(a).mul(r.toFloat().sub(o.exp())),e.reshape(a).mul(o.exp().sub(r.toFloat()))]}}}))(e,t)}(a,i);return Ey(d,s,o)}}),Oy=Object.freeze({get Reduction(){return by},absoluteDifference:Sy,computeWeightedLoss:Ey,cosineDistance:_y,hingeLoss:Ny,huberLoss:Ty,logLoss:Ry,meanSquaredError:Dy,sigmoidCrossEntropy:Iy,softmaxCrossEntropy:Ay});function My(e,t){return void 0===t&&(t=!1),Ul.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=zd(n),a=e.clone(),i=ld([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(e){var t,u=a,l=s,c=o;t=Ul.tidy((function(){var t=a.slice([e,e],[n-e,1]),u=t.norm(),l=a.slice([e,e],[1,1]),c=l.sign().neg(),d=l.sub(c.mul(u)),f=t.div(d);s=1===f.shape[0]?i.clone():i.concat(f.slice([1,0],[f.shape[0]-1,f.shape[1]]),0);var h=c.matMul(d).div(u).neg(),p=a.slice([e,0],[n-e,r]),m=h.mul(s);a=0===e?p.sub(m.matMul(s.transpose().matMul(p))):a.slice([0,0],[e,r]).concat(p.sub(m.matMul(s.transpose().matMul(p))),0);var v=o.slice([0,e],[n,o.shape[1]-e]);return o=0===e?v.sub(v.matMul(s).matMul(m.transpose())):o.slice([0,0],[n,e]).concat(v.sub(v.matMul(s).matMul(m.transpose())),1),[s,a,o]})),s=t[0],a=t[1],o=t[2],Bc([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]}))}var Py=td({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Ou(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Ou(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},o=1;o<e.length;++o)r(o)}else t=!0,e=kd(e,e.shape[0],0).map((function(e){return tf(e,[0])}));Ou(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var a=[],i=e,s=function(e){a.push(Ul.tidy((function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=ig(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(Zg(t,"euclidean"))})))};for(o=0;o<e.length;++o)s(o);return t?nf(a,0):a}}),jy=td({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return My(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=af(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];return r.forEach((function(e){var n=My(e,t),r=n[0],i=n[1];o.push(r),a.push(i)})),[nf(o,0).reshape(e.shape),nf(a,0).reshape(e.shape)]}}),Fy=Object.freeze({gramSchmidt:Py,qr:jy});function Ly(e,t,n,r,o){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY);var a=e.shape[0];return n=Math.min(n,a),Ou(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),Ou(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),Ou(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),Ou(1===t.rank,(function(){return"scores must be a 1D tensor"})),Ou(t.shape[0]===a,(function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+t.shape[0]})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o}}var By=td({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=Hc(e,"images","resizeBilinear");Ou(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),Ou(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Ul.runKernel((function(e,t){return t([o]),e.resizeBilinear(o,i,s,n)}),{batchImages:o},(function(e,t){return{batchImages:function(){return Ul.runKernel((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}));return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Wy=td({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=Hc(e,"images","resizeNearestNeighbor");Ou(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),Ou(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),Ou("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Ul.runKernel((function(e,t){return t([o]),e.resizeNearestNeighbor(o,i,s,n)}),{batchImages:o},(function(e,t){return{batchImages:function(){return Ul.runKernel((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Uy=td({nonMaxSuppression_:function(e,t,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var a=Hc(e,"boxes","nonMaxSuppression"),i=Hc(t,"scores","nonMaxSuppression"),s=Ly(a,i,n,r,o);return n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,Ul.runKernel((function(e){return e.nonMaxSuppression(a,i,n,r,o)}),{$boxes:a})}}),zy=td({cropAndResize_:function(e,t,n,r,o,a){var i=Hc(e,"image","cropAndResize","float32"),s=Hc(t,"boxes","cropAndResize","float32"),u=Hc(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var l=s.shape[0];return Ou(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."})),Ou(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),Ou(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),Ou(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),Ou(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),Ou("bilinear"===o||"nearest"===o,(function(){return"method must be bilinear or nearest, but was "+o})),Ul.runKernel((function(e,t){return e.cropAndResize(i,s,u,r,o,a)}),{$image:i,$boxes:s})}}),Hy=Object.freeze({resizeBilinear:By,resizeNearestNeighbor:Wy,nonMaxSuppression:Uy,nonMaxSuppressionAsync:function(e,t,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),ku(this,void 0,void 0,(function(){var a,i,s,u,l,c;return Su(this,(function(d){switch(d.label){case 0:return a=Hc(e,"boxes","nonMaxSuppressionAsync"),i=Hc(t,"scores","nonMaxSuppressionAsync"),s=Ly(a,i,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,a.data()];case 1:return u=d.sent(),[4,i.data()];case 2:return l=d.sent(),c=Vf(u,l,n,r,o),a!==e&&a.dispose(),i!==t&&i.dispose(),[2,c]}}))}))},cropAndResize:zy}),Vy=td({matMul_:function(e,t,n,r,o,a){var i;void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a="linear");var s=Hc(e,"a","fused matMul"),u=Hc(t,"b","fused matMul");i=Pl(s,u),s=i[0],u=i[1];var l=n?s.shape[s.rank-2]:s.shape[s.rank-1],c=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?s.shape[s.rank-1]:s.shape[s.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],h=s.shape.slice(0,-2),p=u.shape.slice(0,-2),m=Fu(h),v=Fu(p);Ou(s.rank>=2&&u.rank>=2&&s.rank===u.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+u.rank+"."})),Ou(Lu(h,p),(function(){return"Error in fused matMul: outer dimensions ("+h+") and ("+p+") of Tensors with shapes "+s.shape+" and "+u.shape+" must match."})),Ou(l===c,(function(){return"Error in fused matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+s.shape+" and "+u.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var g,y=s.shape.slice(0,-2).concat([d,f]),b=n?s.as3D(m,l,d):s.as3D(m,d,l),x=r?u.as3D(v,f,c):u.as3D(v,c,f);null!=o&&_f(y,(g=Pl(g=Hc(o,"bias","fused matMul"),s)[0]).shape);var w={$a:b,$b:x};return null!=o&&(w.$bias=g),Ul.runKernel((function(e,t){var o=e.fusedBatchMatMul(b,x,n,r,g,a);return t([b,x,o]),o}),w,(function(e,t){var i,s=t[0],u=t[1],l=t[2];if(null==a||"linear"===a)i=e;else{if("relu"!==a)throw new Error("Gradient for activation "+a+" has not been implemented yet.");i=e.mul(l.step())}var c={};return null!=o&&(c={$bias:function(){var e=i,t=Ef(g.shape,i.shape);return t.length>0&&(e=e.sum(t)),e.reshape(g.shape)}}),n||r?!n&&r?Object.assign({$a:function(){return i.matMul(u,!1,!1)},$b:function(){return i.matMul(s,!0,!1)}},c):n&&!r?Object.assign({$a:function(){return u.matMul(i,!1,!0)},$b:function(){return s.matMul(i,!1,!1)}},c):Object.assign({$a:function(){return u.matMul(i,!0,!0)},$b:function(){return i.matMul(s,!0,!0)}},c):Object.assign({$a:function(){return i.matMul(u,!1,!0)},$b:function(){return s.matMul(i,!0,!1)}},c)})).reshape(y)}}),qy=Object.freeze({matMul:Vy}),Gy=Object.freeze({image:Hy,linalg:Fy,losses:Oy,spectral:py,fused:qy,signal:ky,op:td,batchNormalization2d:pv,batchNormalization3d:mv,batchNormalization4d:vv,batchNormalization:gv,batchNorm:yv,batchNorm2d:bv,batchNorm3d:xv,batchNorm4d:wv,complex:nd,real:rd,imag:od,concat:yd,concat1d:bd,concat2d:xd,concat3d:wd,concat4d:Cd,split:kd,conv1d:Ev,conv2d:_v,conv3d:Nv,conv2dDerFilter:Tv,depthwiseConv2d:Rv,separableConv2d:Dv,conv2dTranspose:Iv,matMul:Av,dot:Ov,outerProduct:Mv,reverse:Pv,reverse1d:jv,reverse2d:Fv,reverse3d:Lv,reverse4d:Bv,maxPool:zv,avgPool:Hv,pool:Vv,slice:qv,slice1d:Gv,slice2d:Yv,slice3d:Kv,slice4d:$v,abs:Nm,acos:Tm,acosh:Rm,asin:Dm,asinh:Im,atan:Am,atanh:Om,ceil:Mm,clipByValue:Pm,cos:jm,cosh:Fm,erf:Lm,exp:Bm,expm1:Wm,floor:Um,log:zm,log1p:Hm,logSigmoid:Vm,neg:qm,reciprocal:Gm,round:Ym,rsqrt:Km,sigmoid:$m,sign:Xm,isNaN:Qm,isInf:Jm,isFinite:Zm,sin:ev,sinh:tv,softplus:nv,sqrt:rv,square:ov,step:av,tan:iv,tanh:sv,all:Qv,any:Jv,argMax:Zv,argMin:eg,logSumExp:tg,max:ng,mean:rg,min:og,moments:ag,sum:ig,prod:sg,equal:ug,equalStrict:lg,greater:cg,greaterEqual:dg,greaterEqualStrict:fg,greaterStrict:hg,less:pg,lessEqual:mg,lessEqualStrict:vg,lessStrict:gg,notEqual:yg,notEqualStrict:bg,add:xg,addN:wg,addStrict:Cg,atan2:kg,div:Sg,divStrict:Eg,floorDiv:_g,maximum:Ng,maximumStrict:Tg,minimum:Rg,minimumStrict:Dg,mod:Ig,modStrict:Ag,mul:Og,mulStrict:Mg,pow:Pg,powStrict:jg,squaredDifference:Fg,squaredDifferenceStrict:Lg,sub:Bg,subStrict:Wg,elu:Gg,leakyRelu:Yg,prelu:Kg,relu:$g,selu:Xg,logicalAnd:Ug,logicalNot:zg,logicalOr:Hg,logicalXor:Vg,where:qg,whereAsync:function(e){return ku(this,void 0,void 0,(function(){var t,n,r;return Su(this,(function(o){switch(o.label){case 0:return[4,(t=Hc(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=$f(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},buffer:Pd,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:jd,cast:Fd,clone:Ld,cumsum:Bd,depthToSpace:Wd,expandDims:Ud,eye:zd,multinomial:Hd,oneHot:Vd,pad:qd,pad1d:Gd,pad2d:Yd,pad3d:Kd,pad4d:$d,rand:Xd,randomNormal:Qd,randomUniform:Jd,reshape:Zd,spaceToBatchND:ef,squeeze:tf,stack:nf,tile:rf,truncatedNormal:of,unstack:af,setdiff1dAsync:function(e,t){return ku(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d;return Su(this,(function(f){switch(f.label){case 0:return n=Hc(e,"x","setdiff1d"),r=Hc(t,"y","setdiff1d"),Ou(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),Ou(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),Ou(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return o=f.sent(),[4,r.data()];case 2:for(a=f.sent(),i=new Set(a),s=0,c=0;c<o.length;c++)i.has(o[c])||s++;for(u=new wl([s],n.dtype),l=new wl([s],"int32"),c=0,d=0;c<o.length;c++)i.has(o[c])||(u.values[d]=o[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}}))}))},fill:pd,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Ul.runKernel((function(r){return r.linspace(e,t,n)}),{})},ones:fd,range:md,scalar:sd,tensor:ad,tensor1d:ud,tensor2d:ld,tensor3d:cd,tensor4d:dd,tensor5d:function(e,t,n){if(Pu(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Uc(e);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return id(e,t,r,n)},tensor6d:function(e,t,n){if(Pu(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Uc(e);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return id(e,t=t||r,r,n)},zeros:hd,onesLike:vd,zerosLike:gd,transpose:Qg,softmax:wf,logSoftmax:Cf,localResponseNormalization:Jg,norm:Zg,gather:ny,unsortedSegmentSum:ry,basicLSTMCell:oy,multiRNNCell:ay,movingAverage:iy,stridedSlice:sy,topk:uy,scatterND:ly,fft:cy,ifft:dy,rfft:fy,irfft:hy,sparseToDense:my,gatherND:vy,dropout:gy,hannWindow:xy,hammingWindow:wy,frame:Cy}),Yy=function(){function e(){if(this.blockSize=48,this.firstUse=!0,Nu.get("IS_BROWSER")){var e=function(){if("undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}();this.fromPixels2DContext=e.getContext("2d")}this.data=new kf(this,Ul)}return e.prototype.register=function(e,t,n){if(this.firstUse&&(this.firstUse=!1,Nu.get("IS_NODE")&&Wc("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,{dtype:n})},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(e).values=t},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n,r;if(Nu.get("IS_NODE")&&null==e.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=e.getContext)n=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else if(e instanceof ImageData||e.data instanceof Uint8Array)n=e.data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);if(null==this.fromPixels2DContext)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),n=this.fromPixels2DContext.getImageData(0,0,e.width,e.height).data}if(4===t)r=new Int32Array(n);else{var o=e.width*e.height;r=new Int32Array(o*t);for(var a=0;a<o;a++)for(var i=0;i<t;++i)r[a*t+i]=n[4*a+i]}return cd(r,[e.height,e.width,t],"int32")},e.prototype.read=function(e){return ku(this,void 0,void 0,(function(){return Su(this,(function(t){return[2,this.readSync(e)]}))}))},e.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?Wf(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},e.prototype.bufferSync=function(e){return Pd(e.shape,e.dtype,this.readSync(e.dataId))},e.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},e.prototype.time=function(e){return ku(this,void 0,void 0,(function(){var t;return Su(this,(function(n){return t=hl(),e(),[2,{kernelMs:hl()-t}]}))}))},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(e,t){var n=El.make(e.shape,{},"complex64");return this.data.get(n.dataId).complexTensors={real:Ul.keep(e.clone()),imag:Ul.keep(t.clone())},n},e.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},e.prototype.assertNotComplex=function(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Ou("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))},e.prototype.slice=function(e,t,n){if(this.assertNotComplex(e,"slice"),yf(e.shape,t,n)){var r=bf(t,e.strides),o=Fu(n);return ad(this.readSync(e.dataId).subarray(r,r+o),n,e.dtype)}for(var a=Pd(n,e.dtype),i=this.bufferSync(e),s=0;s<a.size;++s){var u=a.indexToLoc(s).map((function(e,n){return e+t[n]}));a.values[s]=i.get.apply(i,u)}return a.toTensor()},e.prototype.stridedSlice=function(e,t,n,r,o,a,i,s,u){this.assertNotComplex(e,"stridedSlice");var l=mf(e.shape,t,n,r,o,a,i,s,u),c=l[0],d=l[1],f=l[2],h=d.filter((function(e,t){return-1===f.indexOf(t)}));if(h.some((function(e){return 0===e})))return ad([],h);for(var p=Pd(d,e.dtype),m=this.bufferSync(e),v=0;v<p.size;v++){for(var g=p.indexToLoc(v),y=new Array(g.length),b=0;b<y.length;b++)y[b]=g[b]*r[b]+c[b];p.set.apply(p,[m.get.apply(m,y)].concat(g))}return p.toTensor().reshape(h)},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,a=0;a<e.rank;a++)a!==t&&(r[o++]=e.shape[a]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[t]=a,u[a]=this.slice(e,i,s).reshape(r);return u},e.prototype.reverse=function(e,t){this.assertNotComplex(e,"reverse");for(var n=Pd(e.shape,e.dtype),r=this.bufferSync(e),o=function(o){var a=n.indexToLoc(o),i=a.slice();t.forEach((function(t){return i[t]=e.shape[t]-1-i[t]})),n.set.apply(n,[r.get.apply(r,i)].concat(a))},a=0;a<n.size;a++)o(a);return n.toTensor()},e.prototype.concat=function(e,t){var n=this;this.assertNotComplex(e,"concat");var r=e.map((function(e){var n=Fu(e.shape.slice(t));return e.as2D(-1,n)})),o=ed(r.map((function(e){return e.shape})),1),a=Pd(o,e[0].dtype).values;if(1===r[0].shape[0]){var i=0;r.forEach((function(e){a.set(n.readSync(e.dataId),i),i+=e.size}))}else{var s=0;r.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,i=0;i<e.shape[0];++i)for(var u=i*o[1]+s,l=0;l<e.shape[1];++l)a[u+l]=t[r++];s+=e.shape[1]}))}var u=ed(e.map((function(e){return e.shape})),t);return ad(a,u,e[0].dtype)},e.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(sd(-1),e)},e.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Ol(e.dtype,t.dtype),(function(e,t){return e+t}))},e.prototype.addN=function(e){var t=this;this.assertNotComplex(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=Pd(e[0].shape,e[0].dtype),o=r.values,a=0;a<e.length;a++)for(var i=n[a],s=0;s<o.length;s++)o[s]+=i[s];return r.toTensor()},e.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Ol(e.dtype,t.dtype),(function(e,t){return e-t}))},e.prototype.pow=function(e,t){return this.assertNotComplex([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},e.prototype.batchMatMul=function(e,t,n,r){this.assertNotComplex([e,t],"matMul");for(var o=n?e.shape[1]:e.shape[2],a=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],d=c[0],f=c[1],h=c[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=p[0],v=p[1],g=p[2],y=a*i,b=Pd([s,a,i],e.dtype),x=b.values,w=this.blockSize,C=0;C<s;C++)for(var k=0;k<a;k+=w)for(var S=0;S<i;S+=w)for(var E=0;E<o;E+=w)for(var _=Math.min(k+w,a),N=Math.min(S+w,i),T=Math.min(E+w,o),R=k;R<_;R++)for(var D=S;D<N;D++){for(var I=0,A=E;A<T;A++)I+=u[C*d+R*f+A*h]*l[A*m+D*v+C*g];x[C*y+(R*i+D)]+=I}return b.toTensor()},e.prototype.fusedBatchMatMul=function(e,t,n,r,o,a){var i=this.batchMatMul(e,t,n,r);return o&&(i=this.add(i,o)),a&&(i=function(e,t,n){if("linear"===t)return e.linear(n);if("relu"===t)return e.relu(n);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}(this,a,i)),i},e.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Ol(e.dtype,t.dtype),(function(e,t){return e*t}))},e.prototype.realDivide=function(e,t){return this.assertNotComplex([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},e.prototype.floorDiv=function(e,t){return this.assertNotComplex([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},e.prototype.sum=function(e,t){this.assertNotComplex(e,"sum"),$c("sum",t,e.rank);for(var n=Yc(e.shape,t),r=n[0],o=n[1],a=hd(r,Ol(e.dtype,"int32")),i=Fu(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=0,f=0;f<i;++f)d+=u[c+f];s[l]=d}return a},e.prototype.prod=function(e,t){this.assertNotComplex(e,"sum");for(var n=Yc(e.shape,t),r=n[0],o=n[1],a=hd(r,Ol(e.dtype,"int32")),i=Fu(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=1,f=0;f<i;++f)d*=u[c+f];s[l]=d}return a},e.prototype.unsortedSegmentSum=function(e,t,n){this.assertNotComplex(e,"unsortedSegmentSum");for(var r=[],o=e.rank-t.rank,a=0;a<o;++a)t=t.expandDims(a+1);for(a=0;a<n;++a){var i=sd(a,"int32"),s=ug(i,t).asType("float32").mul(e).sum(0);r.push(s)}return nf(r)},e.prototype.argMin=function(e,t){this.assertNotComplex(e,"argMin");var n=[t];$c("argMin",n,e.rank);for(var r=Yc(e.shape,n),o=r[0],a=r[1],i=hd(o,"int32"),s=Fu(a),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,f=l[d],h=0,p=0;p<s;++p){var m=l[d+p];m<f&&(f=m,h=p)}u[c]=h}return i},e.prototype.argMax=function(e,t){this.assertNotComplex(e,"argMax");var n=[t];$c("argMax",n,e.rank);for(var r=Yc(e.shape,n),o=r[0],a=r[1],i=hd(o,"int32"),s=Fu(a),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,f=l[d],h=0,p=0;p<s;++p){var m=l[d+p];m>f&&(f=m,h=p)}u[c]=h}return i},e.prototype.cumsum=function(e,t,n,r){if(this.assertNotComplex(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var o=Ol(e.dtype,"int32"),a=hd(e.shape,o),i=this.readSync(a.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var d=0;d<u;d++){var f=l(c,d);if(0===d)i[f]=n?0:s[f];else{var h=l(c,d-1);i[f]=n?s[h]+i[h]:s[f]+i[h]}}return a},e.prototype.equal=function(e,t){return this.assertNotComplex([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},e.prototype.notEqual=function(e,t){return this.assertNotComplex([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},e.prototype.less=function(e,t){return this.assertNotComplex([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},e.prototype.lessEqual=function(e,t){return this.assertNotComplex([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},e.prototype.greater=function(e,t){return this.assertNotComplex([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},e.prototype.greaterEqual=function(e,t){return this.assertNotComplex([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},e.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return El.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.assertNotComplex([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},e.prototype.logicalOr=function(e,t){return this.assertNotComplex([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},e.prototype.select=function(e,t,n){this.assertNotComplex([e,t,n],"select");for(var r=this.readSync(e.dataId),o=this.readSync(t.dataId),a=this.readSync(n.dataId),i=hd(t.shape,Ol(t.dtype,n.dtype)),s=this.readSync(i.dataId),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:t.shape[1],c=0;c<r.length;c++)for(var d=0;d<l;d++)1===r[c]?s[u++]=o[c]:s[u++]=a[c];return i},e.prototype.where=function(e){this.assertNotComplex([e],"where");var t=this.readSync(e.dataId);return $f(e.shape,t)},e.prototype.topk=function(e,t,n){return this.assertNotComplex(e,"topk"),Kf(this.readSync(e.dataId),e.shape,e.dtype,t)},e.prototype.min=function(e,t){this.assertNotComplex(e,"min"),$c("min",t,e.rank);for(var n=Yc(e.shape,t),r=n[0],o=n[1],a=hd(r,e.dtype),i=Fu(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],f=0;f<i;++f){var h=u[c+f];h<d&&(d=h)}s[l]=d}return a},e.prototype.minimum=function(e,t){return this.assertNotComplex([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},e.prototype.mod=function(e,t){return this.assertNotComplex([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},e.prototype.max=function(e,t){this.assertNotComplex(e,"max"),$c("max",t,e.rank);for(var n=Yc(e.shape,t),r=n[0],o=n[1],a=hd(r,e.dtype),i=Fu(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],f=0;f<i;++f){var h=u[c+f];h>d&&(d=h)}s[l]=d}return a},e.prototype.maximum=function(e,t){return this.assertNotComplex([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},e.prototype.all=function(e,t){this.assertNotComplex(e,"all"),$c("all",t,e.rank);for(var n=Yc(e.shape,t),r=n[0],o=n[1],a=hd(r,e.dtype),i=Fu(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],f=0;f<i;++f){var h=u[c+f];d=d&&h}s[l]=d}return a},e.prototype.any=function(e,t){this.assertNotComplex(e,"any"),$c("any",t,e.rank);for(var n=Yc(e.shape,t),r=n[0],o=n[1],a=hd(r,e.dtype),i=Fu(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],f=0;f<i;++f){var h=u[c+f];d=d||h}s[l]=d}return a},e.prototype.squaredDifference=function(e,t){return this.assertNotComplex([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},e.prototype.ceil=function(e){this.assertNotComplex(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return El.make(e.shape,{values:n})},e.prototype.floor=function(e){this.assertNotComplex(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return El.make(e.shape,{values:n})},e.prototype.sign=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return El.make(e.shape,{values:n})},e.prototype.isNaN=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return El.make(e.shape,{values:n},"bool")},e.prototype.isInf=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return El.make(e.shape,{values:n},"bool")},e.prototype.isFinite=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return El.make(e.shape,{values:n},"bool")},e.prototype.round=function(e){this.assertNotComplex(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=Math.floor(t[r]);t[r]-o<.5?n[r]=Math.floor(t[r]):t[r]-o>.5?n[r]=Math.ceil(t[r]):n[r]=o%2==0?o:o+1}return El.make(e.shape,{values:n})},e.prototype.exp=function(e){this.assertNotComplex(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return El.make(e.shape,{values:n})},e.prototype.expm1=function(e){this.assertNotComplex(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return El.make(e.shape,{values:n})},e.prototype.log=function(e){this.assertNotComplex(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log(o)}return El.make(e.shape,{values:n})},e.prototype.log1p=function(e){this.assertNotComplex(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log1p(o)}return El.make(e.shape,{values:n})},e.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.sqrt(o)}return El.make(e.shape,{values:n})},e.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=1/Math.sqrt(o)}return El.make(e.shape,{values:n})},e.prototype.square=function(e){this.assertNotComplex(e,"square");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=o*o}return El.make(e.shape,{values:n})},e.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return El.make(e.shape,{values:n})},e.prototype.linear=function(e){return e},e.prototype.relu=function(e){this.assertNotComplex(e,"relu");for(var t=hd(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return t},e.prototype.prelu=function(e,t){return this.assertNotComplex([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},e.prototype.elu=function(e){this.assertNotComplex(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?o:Math.exp(o)-1}return El.make(e.shape,{values:t})},e.prototype.eluDer=function(e,t){this.assertNotComplex([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=this.readSync(e.dataId),a=0;a<r.length;++a){var i=r[a];n[a]=i>=1?o[a]:o[a]*(i+1)}return El.make(t.shape,{values:n})},e.prototype.selu=function(e){this.assertNotComplex(e,"selu");for(var t=cm,n=dm,r=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?n*i:t*(Math.exp(i)-1)}return El.make(e.shape,{values:r})},e.prototype.clip=function(e,t,n){this.assertNotComplex(e,"clip");for(var r=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>n?n:i<t?t:i}return El.make(e.shape,{values:r})},e.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return El.make(e.shape,{values:t})},e.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var o=n[2*r],a=n[2*r+1];t[r]=Math.hypot(o,a)}return El.make(e.shape,{values:t})},e.prototype.int=function(e){this.assertNotComplex(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return El.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return El.make(e.shape,{values:t})},e.prototype.softplus=function(e){this.assertNotComplex(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var a,i=r[o]>-t,s=r[o]<t,u=Math.exp(r[o]);a=s?u:i?r[o]:Math.log(1+u),n[o]=a}return El.make(e.shape,{values:n})},e.prototype.sin=function(e){this.assertNotComplex(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return El.make(e.shape,{values:t})},e.prototype.cos=function(e){this.assertNotComplex(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return El.make(e.shape,{values:t})},e.prototype.tan=function(e){this.assertNotComplex(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return El.make(e.shape,{values:t})},e.prototype.asin=function(e){this.assertNotComplex(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return El.make(e.shape,{values:t})},e.prototype.acos=function(e){this.assertNotComplex(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return El.make(e.shape,{values:t})},e.prototype.atan=function(e){this.assertNotComplex(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return El.make(e.shape,{values:t})},e.prototype.atan2=function(e,t){return this.assertNotComplex([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},e.prototype.sinh=function(e){this.assertNotComplex(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return El.make(e.shape,{values:t})},e.prototype.cosh=function(e){this.assertNotComplex(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return El.make(e.shape,{values:t})},e.prototype.tanh=function(e){this.assertNotComplex(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Wu(n[r]);return El.make(e.shape,{values:t})},e.prototype.asinh=function(e){this.assertNotComplex(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return El.make(e.shape,{values:t})},e.prototype.acosh=function(e){this.assertNotComplex(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return El.make(e.shape,{values:t})},e.prototype.atanh=function(e){this.assertNotComplex(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return El.make(e.shape,{values:t})},e.prototype.erf=function(e){this.assertNotComplex(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r],a=1/(1+.3275911*o);t[r]=1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-o*o)}return El.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0),this.assertNotComplex(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var a=r[o];isNaN(a)?n[o]=NaN:n[o]=a>0?1:t}return El.make(e.shape,{values:n})},e.prototype.conv2d=function(e,t,n){this.assertNotComplex([e,t],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=Pd(n.outShape,e.dtype),c=this.readSync(e.dataId),d=this.readSync(t.dataId),f=l.values,h=0;h<n.batchSize;++h)for(var p=h*e.strides[0],m=h*l.strides[0],v=0;v<n.outHeight;++v)for(var g=m+v*l.strides[1],y=v*n.strideHeight-u,b=0;b<r;b++){var x=y+b*a;if(!(x<0||x>=n.inHeight))for(var w=b*t.strides[0],C=p+x*e.strides[1],k=0;k<n.outWidth;++k)for(var S=g+k*n.outChannels,E=k*n.strideWidth-s,_=0;_<o;_++){var N=E+_*i;if(!(N<0||N>=n.inWidth))for(var T=w+_*t.strides[1],R=C+N*n.inChannels,D=T,I=0;I<n.inChannels;++I){for(var A=c[R+I],O=0;O<n.outChannels;++O)f[S+O]+=A*d[D+O];D+=n.outChannels}}}return l.toTensor()},e.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,o=n.filterHeight,a=n.filterWidth,i=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,l=n.padInfo.front,c=n.padInfo.left,d=n.padInfo.top,f=Pd(n.outShape,e.dtype),h=this.readSync(e.dataId),p=this.readSync(t.dataId),m=f.values,v=0;v<n.batchSize;++v)for(var g=v*e.strides[0],y=v*f.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*f.strides[1],w=b*n.strideDepth-l,C=0;C<r;C++){var k=w+C*i;if(!(k<0||k>=n.inDepth))for(var S=C*t.strides[0],E=g+k*e.strides[1],_=0;_<n.outHeight;++_)for(var N=x+_*f.strides[2],T=_*n.strideHeight-d,R=0;R<o;R++){var D=T+R*s;if(!(D<0||D>=n.inHeight))for(var I=S+R*t.strides[1],A=E+D*e.strides[2],O=0;O<n.outWidth;++O)for(var M=N+O*n.outChannels,P=O*n.strideWidth-c,j=0;j<a;j++){var F=P+j*u;if(!(F<0||F>=n.inWidth))for(var L=I+j*t.strides[2],B=A+F*n.inChannels,W=L,U=0;U<n.inChannels;++U){for(var z=h[B+U],H=0;H<n.outChannels;++H)m[M+H]+=z*p[W+H];W+=n.outChannels}}}}return f.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerInput");for(var r=Pd(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],l=this.readSync(e.dataId),c=e.strides,d=c[0],f=c[1],h=c[2],p=this.readSync(t.dataId),m=t.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,C=n.inChannels,k=n.inHeight,S=n.inWidth,E=n.outChannels,_=n.outHeight,N=n.outWidth,T=n.strideHeight,R=n.strideWidth,D=x-1-n.padInfo.top,I=w-1-n.padInfo.left,A=0;A<b;++A)for(var O=0;O<C;++O)for(var M=0;M<k;++M)for(var P=M-D,j=Math.max(0,Math.ceil(P/T)),F=Math.min(_,(x+P)/T),L=0;L<S;++L){for(var B=L-I,W=Math.max(0,Math.ceil(B/R)),U=Math.min(N,(w+B)/R),z=0,H=j;H<F;++H)for(var V=H*T-P,q=W;q<U;++q)for(var G=d*A+f*H+h*q,Y=v*(x-1-V)+g*(w-1-(q*R-B))+y*O,K=0;K<E;++K)z+=l[G+K]*p[Y+K];o[i*A+s*M+u*L+O]=z}return r.toTensor()},e.prototype.conv3dDerInput=function(e,t,n){for(var r=Pd(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],l=a[3],c=this.readSync(e.dataId),d=e.strides,f=d[0],h=d[1],p=d[2],m=d[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],C=n.batchSize,k=n.filterDepth,S=n.filterHeight,E=n.filterWidth,_=n.inChannels,N=n.inDepth,T=n.inHeight,R=n.inWidth,D=n.outChannels,I=n.outDepth,A=n.outHeight,O=n.outWidth,M=n.strideDepth,P=n.strideHeight,j=n.strideWidth,F=k-1-n.padInfo.front,L=S-1-n.padInfo.top,B=E-1-n.padInfo.left,W=0;W<C;++W)for(var U=0;U<_;++U)for(var z=0;z<N;++z)for(var H=z-F,V=Math.max(0,Math.ceil(H/M)),q=Math.min(I,(k+H)/M),G=0;G<T;++G)for(var Y=G-L,K=Math.max(0,Math.ceil(Y/P)),$=Math.min(A,(S+Y)/P),X=0;X<R;++X){for(var Q=X-B,J=Math.max(0,Math.ceil(Q/j)),Z=Math.min(O,(E+Q)/j),ee=0,te=V;te<q;++te)for(var ne=te*M-H,re=K;re<$;++re)for(var oe=re*P-Y,ae=J;ae<Z;++ae)for(var ie=f*W+h*te+p*re+m*ae,se=y*(k-1-ne)+b*(S-1-oe)+x*(E-1-(ae*j-Q))+w*U,ue=0;ue<D;++ue)ee+=c[ie+ue]*v[se+ue];o[i*W+s*z+u*G+l*X+U]=ee}return r.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=Pd(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=this.bufferSync(e),d=this.bufferSync(t),f=0;f<a;++f)for(var h=Math.max(0,Math.ceil((l-f)/r)),p=Math.min(n.outHeight,(n.inHeight+l-f)/r),m=0;m<i;++m)for(var v=Math.max(0,Math.ceil((u-m)/o)),g=Math.min(n.outWidth,(n.inWidth+u-m)/o),y=0;y<n.inChannels;++y)for(var b=0;b<n.outChannels;++b){for(var x=0,w=0;w<n.batchSize;++w)for(var C=h;C<p;++C)for(var k=f+C*r-l,S=v;S<g;++S){var E=m+S*o-u;x+=c.get(w,k,E,y)*d.get(w,C,S,b)}s.set(x,f,m,y,b)}return s.toTensor()},e.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=Pd(n.filterShape,"float32"),c=l.values,d=l.strides,f=d[0],h=d[1],p=d[2],m=d[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],C=this.readSync(e.dataId),k=e.strides,S=k[0],E=k[1],_=k[2],N=k[3],T=n.padInfo.front,R=n.padInfo.left,D=n.padInfo.top,I=0;I<i;++I)for(var A=Math.max(0,Math.ceil((T-I)/r)),O=Math.min(n.outDepth,(n.inDepth+T-I)/r),M=I*f,P=0;P<s;++P)for(var j=Math.max(0,Math.ceil((D-P)/o)),F=Math.min(n.outHeight,(n.inHeight+D-P)/o),L=P*h+M,B=0;B<u;++B)for(var W=Math.max(0,Math.ceil((R-B)/a)),U=Math.min(n.outWidth,(n.inWidth+R-B)/a),z=B*p+L,H=0;H<n.inChannels;++H)for(var V=H*m+z,q=0;q<n.outChannels;++q){for(var G=0,Y=0;Y<n.batchSize;++Y)for(var K=Y*S,$=Y*y,X=A;X<O;++X)for(var Q=(I+X*r-T)*E+K,J=X*b+$,Z=j;Z<F;++Z)for(var ee=(P+Z*o-D)*_+Q,te=Z*x+J,ne=W;ne<U;++ne){var re=ne*w+te;G+=C[(B+ne*a-R)*N+ee+H]*v[re+q]}c[V+q]=G}return l.toTensor()},e.prototype.depthwiseConv2D=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=Pd(n.outShape,e.dtype),d=this.readSync(e.dataId),f=this.readSync(t.dataId),h=c.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],v=p*c.strides[0],g=0;g<n.outHeight;++g)for(var y=v+g*c.strides[1],b=g*n.strideHeight-s,x=0;x<r;++x){var w=b+x*a;if(!(w<0||w>=n.inHeight))for(var C=x*t.strides[0],k=m+w*e.strides[1],S=0;S<n.outWidth;++S)for(var E=y+S*c.strides[2],_=S*n.strideWidth-u,N=0;N<o;++N){var T=_+N*i;if(!(T<0||T>=n.inWidth))for(var R=C+N*t.strides[1],D=k+T*n.inChannels,I=E,A=R,O=0;O<n.inChannels;++O){for(var M=d[D+O],P=0;P<l;++P)h[I+P]+=M*f[A+P];I+=l,A+=l}}}return c.toTensor()},e.prototype.depthwiseConv2DDerInput=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerInput");for(var r=Pd(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],l=this.readSync(e.dataId),c=e.strides,d=c[0],f=c[1],h=c[2],p=this.readSync(t.dataId),m=t.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,C=n.inChannels,k=n.inHeight,S=n.inWidth,E=n.outChannels,_=n.outHeight,N=n.outWidth,T=n.strideHeight,R=n.strideWidth,D=x-1-n.padInfo.top,I=w-1-n.padInfo.left,A=E/C,O=0;O<b;++O)for(var M=0;M<C;++M)for(var P=0;P<k;++P)for(var j=P-D,F=Math.max(0,Math.ceil(j/T)),L=Math.min(_,(x+j)/T),B=0;B<S;++B){for(var W=B-I,U=Math.max(0,Math.ceil(W/R)),z=Math.min(N,(w+W)/R),H=0,V=F;V<L;++V)for(var q=V*T-j,G=U;G<z;++G)for(var Y=d*O+f*V+h*G,K=v*(x-1-q)+g*(w-1-(G*R-W))+y*M,$=0;$<A;++$)H+=l[Y+(M*A+$)]*p[K+$];o[i*O+s*P+u*B+M]=H}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=Pd(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,d=this.bufferSync(e),f=this.bufferSync(t),h=0;h<a;++h)for(var p=Math.max(0,Math.ceil((l-h)/r)),m=Math.min(n.outHeight,(n.inHeight+l-h)/r),v=0;v<i;++v)for(var g=Math.max(0,Math.ceil((u-v)/o)),y=Math.min(n.outWidth,(n.inWidth+u-v)/o),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/c),w=b%c,C=0,k=0;k<n.batchSize;++k)for(var S=p;S<m;++S)for(var E=h+S*r-l,_=g;_<y;++_){var N=v+_*o-u;C+=d.get(k,E,N,x)*f.get(k,S,_,b)}s.set(C,h,v,x,w)}return s.toTensor()},e.prototype.tile=function(e,t){return this.assertNotComplex(e,"tile"),Yf(this.bufferSync(e),t)},e.prototype.pad=function(e,t,n){this.assertNotComplex(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),o=t.map((function(e){return e[0]})),a=this.bufferSync(e),i=Pd(r,e.dtype);0!==n&&i.values.fill(n);for(var s=0;s<e.size;s++){var u=a.indexToLoc(s),l=u.map((function(e,t){return e+o[t]}));i.set.apply(i,[a.get.apply(a,u)].concat(l))}return i.toTensor()},e.prototype.transpose=function(e,t){this.assertNotComplex(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var o=this.readSync(e.dataId),a=Pd(n,e.dtype),i=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=i.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[t[l]];var c=a.locToIndex(u);a.values[c]=o[r]}return a.toTensor()},e.prototype.gather=function(e,t,n){this.assertNotComplex([e,t],"gather");var r=e.shape.slice(),o=this.readSync(t.dataId);r[n]=o.length;for(var a=Pd(r,e.dtype),i=this.bufferSync(e),s=0;s<a.size;++s){var u=a.indexToLoc(s),l=u.slice();l[n]=o[u[n]];var c=i.locToIndex(l);a.values[s]=i.values[c]}return a.toTensor()},e.prototype.batchToSpaceND=function(e,t,n){this.assertNotComplex([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),o=sf(e.shape,t,r),a=uf(o.length,t.length),i=lf(e.shape,t,r),s=cf(n,t.length),u=df(i,n,t.length);return e.reshape(o).transpose(a).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){this.assertNotComplex([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var a=1+t.length;a<e.shape.length;++a)o.push([0,0]);var i=e.pad(o),s=sf(i.shape,t,r,!1),u=uf(s.length,t.length,!1),l=lf(i.shape,t,r,!1);return i.reshape(s).transpose(u).reshape(l)},e.prototype.pool=function(e,t,n){this.assertNotComplex(e,"pool");for(var r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,d="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=this.readSync(e.dataId),h=Pd(t.outShape,e.dtype),p=h.values,m=t.outShape[1]*t.outShape[2]*t.outShape[3],v=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*m,x=y*e.strides[0],w=0;w<t.inChannels;++w)for(var C=0;C<t.outHeight;++C)for(var k=C*r-l,S=Math.max(0,k),E=Math.min(t.inHeight,s+k),_=b+C*v,N=0;N<t.outWidth;++N){for(var T=N*o-c,R=Math.max(0,T),D=Math.min(t.inWidth,u+T),I=d,A=0,O=0,M=S;M<E;M+=a){for(var P=x+M*e.strides[1],j=R;j<D;j+=i){var F=f[P+j*e.strides[2]+w];"max"===n&&F>I?I=F:"avg"===n&&(A+=F,O++)}if(isNaN(I))break}p[_+N*g+w]="avg"===n?A/O:I}return h.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=Pd(t.outShape,"int32"),r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,d=this.bufferSync(e),f=0;f<t.batchSize;++f)for(var h=0;h<t.inChannels;++h)for(var p=0;p<t.outHeight;++p){for(var m=p*r-l,v=m;v<0;)v+=a;for(var g=Math.min(t.inHeight,s+m),y=0;y<t.outWidth;++y){for(var b=y*o-c,x=b;x<0;)x+=i;for(var w=Math.min(t.inWidth,u+b),C=Number.NEGATIVE_INFINITY,k=-1,S=v;S<g;S+=a)for(var E=S-m,_=x;_<w;_+=i){var N=_-b,T=d.get(f,S,_,h);T>C&&(C=T,k=E*u+N)}n.set(k,f,p,y,h)}}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPoolBackprop");for(var o=this.maxPoolPositions(t,r),a=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=c-1-r.padInfo.left,f=l-1-r.padInfo.top,h=Pd(t.shape,"float32"),p=this.bufferSync(o),m=this.bufferSync(e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-f,w=b-d,C=0,k=0;k<l;k+=s){var S=(x+k)/a;if(!(S<0||S>=r.outHeight||Math.floor(S)!==S))for(var E=0;E<c;E+=u){var _=(w+E)/i;if(!(_<0||_>=r.outWidth||Math.floor(_)!==_)){var N=l*c-1-p.get(v,S,_,g)===k*c+E?1:0;0!==N&&(C+=m.get(v,S,_,g)*N)}}}h.set(C,v,y,b,g)}return h.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=c-1-n.padInfo.left,f=l-1-n.padInfo.top,h=Pd(t.shape,"float32"),p=1/(a*i),m=this.bufferSync(e),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-f,w=b-d,C=0,k=0;k<l;k+=s){var S=(x+k)/r;if(!(S<0||S>=n.outHeight||Math.floor(S)!==S))for(var E=0;E<c;E+=u){var _=(w+E)/o;_<0||_>=n.outWidth||Math.floor(_)!==_||(C+=m.get(v,S,_,g))}}h.set(C*p,v,y,b,g)}return h.toTensor()},e.prototype.cast=function(e,t){return Ff(e,t,this)},e.prototype.reshape=function(e,t){return Lf(e,t)},e.prototype.avgPool=function(e,t){return this.assertNotComplex(e,"avgPool"),this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){this.assertNotComplex(e,"resizeBilinear");for(var o=e.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=this.readSync(e.dataId),c=new Float32Array(Fu([a,t,n,u])),d=[r&&t>1?i-1:i,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=0,p=d[0]/f[0],m=d[1]/f[1],v=0;v<a;v++)for(var g=0;g<t;g++)for(var y=p*g,b=Math.floor(y),x=y-b,w=Math.min(i-1,Math.ceil(y)),C=v*e.strides[0]+b*e.strides[1],k=v*e.strides[0]+w*e.strides[1],S=0;S<n;S++)for(var E=m*S,_=Math.floor(E),N=E-_,T=Math.min(s-1,Math.ceil(E)),R=C+_*e.strides[2],D=k+_*e.strides[2],I=C+ +T*e.strides[2],A=k+T*e.strides[2],O=0;O<u;O++){var M=l[R+O],P=l[D+O],j=M+(l[I+O]-M)*N,F=j+(P+(l[A+O]-P)*N-j)*x;c[h++]=F}return ad(c,[a,t,n,u])},e.prototype.resizeBilinearBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeBilinearBackprop");for(var r=t.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(o*a*i*s),f=[n&&l>1?a-1:a,n&&c>1?i-1:i],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],p=f[0]/h[0],m=f[1]/h[1],v=this.readSync(e.dataId),g=0,y=0;y<o;y++)for(var b=y*t.strides[0],x=0;x<l;x++)for(var w=x*p,C=Math.floor(w),k=Math.min(Math.ceil(w),a-1),S=b+C*t.strides[1],E=b+k*t.strides[1],_=w-C,N=1-_,T=0;T<c;T++)for(var R=T*m,D=Math.floor(R),I=Math.min(Math.ceil(R),i-1),A=R-D,O=1-A,M=S+D*t.strides[2],P=S+I*t.strides[2],j=E+D*t.strides[2],F=E+I*t.strides[2],L=N*O,B=N*A,W=_*O,U=_*A,z=0;z<s;z++){var H=v[g++];d[M+z]+=H*L,d[P+z]+=H*B,d[j+z]+=H*W,d[F+z]+=H*U}return dd(d,[o,i,a,s],t.dtype)},e.prototype.resizeNearestNeighbor=function(e,t,n,r){this.assertNotComplex(e,"resizeNearestNeighbor");for(var o=e.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=this.readSync(e.dataId),c=new Float32Array(a*t*n*u),d=[r&&t>1?i-1:i,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=d[0]/f[0],p=d[1]/f[1],m=0,v=0;v<a;v++)for(var g=v*e.strides[0],y=0;y<t;y++)for(var b=h*y,x=g+Math.min(i-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var C=p*w,k=x+Math.min(s-1,r?Math.round(C):Math.floor(C))*e.strides[2],S=0;S<u;S++){var E=l[k+S];c[m++]=E}return ad(c,[a,t,n,u],e.dtype)},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(o*a*i*s),f=this.readSync(e.dataId),h=[n&&l>1?a-1:a,n&&c>1?i-1:i],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=h[0]/p[0],v=h[1]/p[1],g=1/m,y=1/v,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2,w=0;w<o;w++)for(var C=w*t.strides[0],k=0;k<a;k++)for(var S=C+k*t.strides[1],E=Math.floor(k*g),_=Math.floor(E-b/2),N=0;N<i;N++)for(var T=S+N*t.strides[2],R=Math.floor(N*y),D=Math.floor(R-x/2),I=0;I<s;I++){for(var A=0,O=0;O<b;O++){var M=O+_;if(!(M<0||M>=l)){var P=C+M*e.strides[1],j=M*m;if(k===Math.min(a-1,n?Math.round(j):Math.floor(j)))for(var F=0;F<x;F++){var L=F+D;if(!(L<0||L>=c)){var B=P+L*e.strides[2],W=L*v;N===Math.min(i-1,n?Math.round(W):Math.floor(W))&&(A+=f[B+I])}}}}d[T+I]=A}return dd(d,t.shape,t.dtype)},e.prototype.batchNormalization=function(e,t,n,r,o,a){this.assertNotComplex([e,t,n,o,a],"batchNorm");for(var i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),l=o?this.readSync(o.dataId):new Float32Array([1]),c=a?this.readSync(a.dataId):new Float32Array([0]),d=new Float32Array(i.length),f=c.length,h=l.length,p=u.length,m=s.length,v=0,g=0,y=0,b=0,x=0;x<i.length;++x)d[x]=c[v++]+(i[x]-s[g++])*l[y++]/Math.sqrt(u[b++]+r),v>=f&&(v=0),g>=m&&(g=0),y>=h&&(y=0),b>=p&&(b=0);return dd(d,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){this.assertNotComplex(e,"localResponseNormalization4D");var a=e.shape[3],i=a-1,s=this.readSync(e.dataId),u=e.size,l=new Float32Array(u);function c(e){for(var n=e%a,r=e-n+Math.max(0,n-t),o=e-n+Math.min(n+t,i),u=0;r<=o;r++){var l=s[r];u+=l*l}return u}for(var d=0;d<u;d++){var f=c(d),h=s[d]*Math.pow(n+r*f,-o);l[d]=h}return dd(l,e.shape)},e.prototype.LRNGrad=function(e,t,n,r,o,a,i){this.assertNotComplex(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=this.readSync(n.dataId),d=new Float32Array(e.size),f=e.size,h=0;h<f;h++){for(var p=h%s,m=h-p+Math.max(0,p-r),v=h-p+Math.min(s,p+r+1),g=0,y=m;y<v;y++)g+=Math.pow(l[y],2);for(g=a*g+o,y=m;y<v;y++){var b=-2*a*i*l[y]*c[h]/g;h===y&&(b+=Math.pow(g,-i)),b*=u[h],d[y]+=b}}return dd(d,e.shape)},e.prototype.multinomial=function(e,t,n,r){this.assertNotComplex(e,"multinomial");for(var o=t?e:wf(e),a=o.shape[0],i=o.shape[1],s=hd([a,n],"int32"),u=this.readSync(s.dataId),l=this.readSync(o.dataId),c=0;c<a;++c){var d=c*i,f=new Float32Array(i-1);f[0]=l[d];for(var h=1;h<f.length;++h)f[h]=f[h-1]+l[d+h];for(var p=Ad(r.toString()),m=c*n,v=0;v<n;++v){var g=p();u[m+v]=f.length;for(var y=0;y<f.length;y++)if(g<f[y]){u[m+v]=y;break}}}return s},e.prototype.oneHot=function(e,t,n,r){this.assertNotComplex(e,"oneHot");var o=new Float32Array(e.size*t);o.fill(r);for(var a=this.readSync(e.dataId),i=0;i<e.size;++i)a[i]>=0&&a[i]<t&&(o[i*t+a[i]]=n);return ld(o,[e.size,t],"int32")},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return this.assertNotComplex(e,"nonMaxSuppression"),Vf(this.readSync(e.dataId),this.readSync(t.dataId),n,r,o)},e.prototype.fft=function(e){return this.fftBatch(e,!1)},e.prototype.ifft=function(e){return this.fftBatch(e,!0)},e.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],o=Pd(e.shape,"float32"),a=Pd(e.shape,"float32"),i=rd(e).as2D(n,r),s=od(e).as2D(n,r),u=0;u<n;u++)for(var l=i.slice([u,0],[1,r]),c=s.slice([u,0],[1,r]),d=nd(l,c),f=this.readSync(this.fftImpl(d,t).dataId),h=0;h<r;h++){var p=Uf(f,h);o.values[u*r+h]=p.real,a.values[u*r+h]=p.imag}return nd(o.toTensor(),a.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(o=nd(rd(o).div(sd(r)),od(o).div(sd(r)))),o}var a=this.readSync(e.dataId),i=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(a,r,t));return nd(i.real,i.imag).as2D(e.shape[0],e.shape[1])},e.prototype.isExponentOf2=function(e){return 0==(e&e-1)},e.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),o=t/2,a=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),i=nd(a.real,a.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),u=nd(s.real,s.imag).as1D();i=this.fftRadix2(i,o,n),u=this.fftRadix2(u,o,n);var l=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),o=0;o<Math.ceil(e/2);o++){var a=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}(t,n),c=nd(l.real,l.imag).mul(u),d=i.add(c),f=i.sub(c),h=rd(d).concat(rd(f)),p=od(d).concat(od(f));return nd(h,p).as1D()},e.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),o=0;o<t;o++){for(var a=0,i=0,s=0;s<t;s++){var u=Hf(o*s,t,n),l=Uf(e,s);a+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(a/=t,i/=t),zf(r,a,i,o)}return r},e.prototype.depthToSpace=function(e,t,n){Ou("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),Ou(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],o=e.shape[1],a=e.shape[2],i=e.shape[3],s=o*t,u=a*t,l=i/(t*t),c=this.readSync(e.dataId),d=new Float32Array(r*s*u*l),f=0,h=0;h<r;++h)for(var p=0;p<s;++p)for(var m=Math.floor(p/t),v=p%t,g=0;g<u;++g)for(var y=Math.floor(g/t),b=(v*t+g%t)*l,x=0;x<l;++x){var w=x+b+i*(y+a*(m+o*h));d[f++]=c[w]}return dd(d,[r,s,u,l])},e.prototype.broadcastedBinaryOp=function(e,t,n,r){var o=_f(e.shape,t.shape),a=Pd(o,n),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Sf(e.shape,o),l=Sf(t.shape,o),c=a.values;if(u.length+l.length===0)for(var d=0;d<c.length;++d)c[d]=r(i[d%i.length],s[d%s.length]);else{var f=this.bufferSync(e),h=this.bufferSync(t),p=function(n){var o=a.indexToLoc(n),d=o.slice(-e.rank);u.forEach((function(e){return d[e]=0}));var p=f.locToIndex(d),m=o.slice(-t.rank);l.forEach((function(e){return m[e]=0}));var v=h.locToIndex(m);c[n]=r(i[p],s[v])};for(d=0;d<c.length;++d)p(d)}return a.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=_f(e.shape,t.shape),o=Pd(r,"float32"),a=Pd(r,"float32"),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Sf(e.shape,r),l=Sf(t.shape,r),c=o.values,d=a.values;if(u.length+l.length===0)for(var f=0;f<c.length;f++){var h=f%i.length,p=f%s.length,m=n(i[2*h],i[2*h+1],s[2*p],s[2*p+1]);c[f]=m.real,d[f]=m.imag}else{var v=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var a=o.indexToLoc(r),f=a.slice(-e.rank);u.forEach((function(e){return f[e]=0}));var h=v.locToIndex(f),p=a.slice(-t.rank);l.forEach((function(e){return p[e]=0}));var m=g.locToIndex(p),y=n(i[2*h],i[2*h+1],s[2*m],s[2*m+1]);c[r]=y.real,d[r]=y.imag};for(f=0;f<c.length;f++)y(f)}return this.complex(o.toTensor(),a.toTensor())},e.prototype.split=function(e,t,n){return Gf(e,t,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(e,t,n,r,o,a){for(var i=e.shape,s=i[0],u=i[1],l=i[2],c=i[3],d=t.shape[0],f=r[0],h=r[1],p=Pd([d,f,h,c],e.dtype),m=this.readSync(t.dataId),v=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=p.strides,x=0;x<d;x++){var w=4*x,C=m[w],k=m[w+1],S=m[w+2],E=m[w+3],_=v[x];if(!(_>=s))for(var N=f>1?(S-C)*(u-1)/(f-1):0,T=h>1?(E-k)*(l-1)/(h-1):0,R=0;R<f;R++){var D=f>1?C*(u-1)+R*N:.5*(C+S)*(u-1);if(D<0||D>u-1)for(var I=0;I<h;I++)for(var A=0;A<c;A++){var O=A+I*b[2]+R*b[1]+x*b[0];p.values[O]=a}else if("bilinear"===o){var M=Math.floor(D),P=Math.ceil(D),j=D-M;for(I=0;I<h;I++)if((q=h>1?k*(l-1)+I*T:.5*(k+E)*(l-1))<0||q>l-1)for(A=0;A<c;A++)O=A+I*b[2]+R*b[1]+x*b[0],p.values[O]=a;else{var F=Math.floor(q),L=Math.ceil(q),B=q-F;for(A=0;A<c;A++){var W=g[O=A+F*y[2]+M*y[1]+_*y[0]],U=g[O=A+L*y[2]+M*y[1]+_*y[0]],z=g[O=A+F*y[2]+P*y[1]+_*y[0]],H=W+(U-W)*B,V=z+(g[O=A+L*y[2]+P*y[1]+_*y[0]]-z)*B;O=A+I*b[2]+R*b[1]+x*b[0],p.values[O]=H+(V-H)*j}}}else for(I=0;I<h;++I){var q;if((q=h>1?k*(l-1)+I*T:.5*(k+E)*(l-1))<0||q>l-1)for(A=0;A<c;A++)O=A+I*b[2]+R*b[1]+x*b[0],p.values[O]=a;else{var G=Math.round(q),Y=Math.round(D);for(A=0;A<c;A++){var K=A+G*y[2]+Y*y[1]+_*y[0],$=A+I*b[2]+R*b[1]+x*b[0];p.values[$]=g[K]}}}}}return p.toTensor()},e.prototype.sparseToDense=function(e,t,n,r){var o=pf(0,e,n),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize;return this.scatter(e,t,n,l,s,i,a,u,r,!1)},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=ff(e,t),a=o[0],i=o[1],s=o[2],u=o[3];if(0===i)return ad([],a,e.dtype);for(var l=new wl([i,s],e.dtype),c=this.readSync(t.dataId),d=this.readSync(e.dataId),f=0;f<i;f++){for(var h=[],p=0,m=0;m<r;m++){var v=c[f*r+m];p+=v*u[m],h.push(v)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+h+" does not index into "+e.shape);for(var g=0;g<s;g++)l.values[f*s+g]=d[p*s+g]}return l.toTensor().reshape(a)},e.prototype.scatterND=function(e,t,n){var r=pf(0,e,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=sd(0);return this.scatter(e,t,n,u,i,a,o,s,l,!0)},e.prototype.fill=function(e,t,n){var r=Ku(n=n||al(t),Fu(e));return r.fill(t),El.make(e,{values:r},n)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){var t=Ku(e.dtype,Fu(e.shape));return El.make(e.shape,{values:t},e.dtype)},e.prototype.linspace=function(e,t,n){return Bf(e,t,n)},e.prototype.scatter=function(e,t,n,r,o,a,i,s,u,l){var c=[r/o,o],d=this.readSync(e.dataId),f=this.readSync(t.dataId);if(0===r)return ad([],n,t.dtype);var h=new wl(c,t.dtype);h.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<a;p++){for(var m=[],v=0,g=0;g<i;g++){var y=d[p*i+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/o)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<o;b++)l?h.values[v*o+b]+=f[p*o+b]:h.values[v*o+b]=0===t.rank?f[0]:f[p*o+b]}return h.toTensor().reshape(n)},e}();Ul.registerBackend("cpu",(function(){return new Yy}),1);var Ky=function(){function e(){this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder}return e.prototype.encodeUTF8=function(e){return this.textEncoder.encode(e)},e.prototype.decodeUTF8=function(e){return this.textDecoder.decode(e)},e.prototype.fetch=function(e,t){return fetch(e,t)},e}();Nu.get("IS_BROWSER")&&Nu.setPlatform("browser",new Ky);var $y,Xy=function(){function e(){var e=n(745);this.textEncoder=new e.TextEncoder,this.textDecoder=new e.TextDecoder}return e.prototype.encodeUTF8=function(e){return this.textEncoder.encode(e)},e.prototype.decodeUTF8=function(e){return 0===e.length?"":this.textDecoder.decode(e)},e.prototype.fetch=function(e,t){return null!=Nu.global.fetch?Nu.global.fetch(e,t):(null==$y&&($y=n(7318)),$y(e,t))},e}();Nu.get("IS_NODE")&&Nu.setPlatform("node",new Xy);var Qy={float32:4,int32:4,uint16:2,uint8:1,bool:1};function Jy(e,t){for(var n={},r=0,o=function(t){var o=t.name,a=t.dtype,i=t.shape,s=Fu(i),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=Qy[l.dtype],d=e.slice(r,r+s*c),f="uint8"===l.dtype?new Uint8Array(d):new Uint16Array(d);if("float32"===a)u=Float32Array.from(f,(function(e){return e*l.scale+l.min}));else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=Int32Array.from(f,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*c}else if("string"===a){var h=t,p=new Uint8Array(e.slice(r,r+h.byteLength));u=Nu.platform.decodeUTF8(p).split(h.delimiter),r+=h.byteLength}else{var m=Qy[a];if(d=e.slice(r,r+s*m),"float32"===a)u=new Float32Array(d);else if("int32"===a)u=new Int32Array(d);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=new Uint8Array(d)}r+=s*m}n[o]=ad(u,i,a)},a=0,i=t;a<i.length;a++)o(i[a]);return n}function Zy(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),o=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}var eb="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function tb(e){return eb?Buffer.byteLength(e):new Blob([e]).size}function nb(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function rb(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function ob(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:tb(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:tb(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var ab=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&o.push(n)})),o},e}(),ib="://",sb=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){Ou(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(ib)&&(t=t.slice(0,t.indexOf(ib))),Ou(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Ou(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function ub(e){if(-1===e.indexOf(ib))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+sb.getSchemes().join(","));return{scheme:e.split(ib)[0],path:e.split(ib)[1]}}function lb(e,t,n){return void 0===n&&(n=!1),ku(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,c,d;return Su(this,(function(f){switch(f.label){case 0:return Ou(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),Ou((r=ab.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),Ou(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),o=r[0],Ou((a=ab.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),Ou(a.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),i=a[0],s=ub(e).scheme,u=ub(e).path,l=s===ub(e).scheme,[4,o.load()];case 1:return c=f.sent(),n&&l?[4,sb.getManager(s).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,i.save(c)];case 4:return d=f.sent(),!n||l?[3,6]:[4,sb.getManager(s).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var cb="models_store",db="model_info_store";function fb(){if(!Nu.getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function hb(e){var t=e.result;t.createObjectStore(cb,{keyPath:"modelPath"}),t.createObjectStore(db,{keyPath:"modelPath"})}var pb=function(){function e(e){if(this.indexedDB=fb(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return ku(this,void 0,void 0,(function(){return Su(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return hb(o)},o.onsuccess=function(){var a=o.result;if(null==t){var i=a.transaction(cb,"readonly"),s=i.objectStore(cb).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return a.close(),r(s.error)},i.oncomplete=function(){return a.close()}}else{var u,l=ob(t),c=a.transaction(db,"readwrite"),d=c.objectStore(db),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:l});f.onsuccess=function(){var o=(u=a.transaction(cb,"readwrite")).objectStore(cb).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});o.onsuccess=function(){return e({modelArtifactsInfo:l})},o.onerror=function(e){var t=(d=c.objectStore(db)).delete(n.modelPath);t.onsuccess=function(){return a.close(),r(o.error)},t.onerror=function(e){return a.close(),r(o.error)}}},f.onerror=function(e){return a.close(),r(f.error)},c.oncomplete=function(){null==u?a.close():u.oncomplete=function(){return a.close()}}}},o.onerror=function(e){return r(o.error)}}))},e.URL_SCHEME="indexeddb://",e}(),mb=function(e){return Nu.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(pb.URL_SCHEME)?(t=e.slice(pb.URL_SCHEME.length),new pb(t)):null;var t};ab.registerSaveRouter(mb),ab.registerLoadRouter(mb);var vb=function(){function e(){this.indexedDB=fb()}return e.prototype.listModels=function(){return ku(this,void 0,void 0,(function(){var e=this;return Su(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return hb(r)},r.onsuccess=function(){var e=r.result,o=e.transaction(db,"readonly"),a=o.objectStore(db).getAll();a.onsuccess=function(){for(var e={},n=0,r=a.result;n<r.length;n++){var o=r[n];e[o.modelPath]=o.modelArtifactsInfo}t(e)},a.onerror=function(t){return e.close(),n(a.error)},o.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return ku(this,void 0,void 0,(function(){var t=this;return Su(this,(function(n){var r;return e=(r=e).startsWith(pb.URL_SCHEME)?r.slice(pb.URL_SCHEME.length):r,[2,new Promise((function(n,r){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return hb(o)},o.onsuccess=function(){var t,a=o.result,i=a.transaction(db,"readwrite"),s=i.objectStore(db),u=s.get(e);u.onsuccess=function(){if(null==u.result)return a.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var o=s.delete(e),i=function(){var o=(t=a.transaction(cb,"readwrite")).objectStore(cb).delete(e);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(e){return r(u.error)}};o.onsuccess=i,o.onerror=function(e){return i(),a.close(),r(u.error)}},u.onerror=function(e){return a.close(),r(u.error)},i.oncomplete=function(){null==t?a.close():t.oncomplete=function(){return a.close()}}},o.onerror=function(e){return r(o.error)}}))]}))}))},e}();if(Nu.getBool("IS_BROWSER"))try{sb.registerManager(pb.URL_SCHEME,new vb)}catch(os){}var gb="/",yb="tensorflowjs_models",bb="info",xb="model_topology",wb="weight_specs",Cb="weight_data",kb="model_metadata";function Sb(e){return{info:[yb,e,bb].join(gb),topology:[yb,e,xb].join(gb),weightSpecs:[yb,e,wb].join(gb),weightData:[yb,e,Cb].join(gb),modelMetadata:[yb,e,kb].join(gb)}}function Eb(e){var t=e.split(gb);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(gb)}var _b=function(){function e(e){if(!Nu.getBool("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Sb(this.modelPath)}return e.prototype.save=function(e){return ku(this,void 0,void 0,(function(){var t,n,r;return Su(this,(function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=ob(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(a=e.weightData,eb?Buffer.from(a).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(a))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}var a}))}))},e.prototype.load=function(){return ku(this,void 0,void 0,(function(){var e,t,n,r,o,a,i;return Su(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(a=JSON.parse(o),t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy),null==(i=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(eb){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(i),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),Nb=function(e){return Nu.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(_b.URL_SCHEME)?(t=e.slice(_b.URL_SCHEME.length),new _b(t)):null;var t};ab.registerSaveRouter(Nb),ab.registerLoadRouter(Nb);var Tb=function(){function e(){Ou(Nu.getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Ou(void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return ku(this,void 0,void 0,(function(){var e,t,n,r,o,a;return Su(this,(function(i){for(e={},t=yb+gb,n=gb+bb,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(t)&&o.endsWith(n)&&(a=Eb(o),e[a]=JSON.parse(this.LS.getItem(o)));return[2,e]}))}))},e.prototype.removeModel=function(e){return ku(this,void 0,void 0,(function(){var t,n;return Su(this,(function(r){var o;if(e=(o=e).startsWith(_b.URL_SCHEME)?o.slice(_b.URL_SCHEME.length):o,t=Sb(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(Nu.getBool("IS_BROWSER"))try{sb.registerManager(_b.URL_SCHEME,new Tb)}catch(os){}function Rb(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Db=function(){function e(t){if(!Nu.getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return ku(this,void 0,void 0,(function(){var t,n,r,o,a,i;return Su(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,Rb((function(){return a.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=t,[4,Rb((function(){return i.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:ob(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),Ib=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return ku(this,void 0,void 0,(function(){var e,t,n=this;return Su(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,o){var a=new FileReader;a.onload=function(a){var i=JSON.parse(a.target.result),s=i.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=i.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void o(e)}var c=[],d=[],f=[];u.forEach((function(e){e.paths.forEach((function(e){d.push(e),f.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,o=d.indexOf(e);f[o]=n,-1===f.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:nb(f)})},t.onerror=function(t){return o("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(t){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return rb(e.name)})),o={},a=0,i=e;a<i.length;a++)i[a].paths.forEach((function(e){var a=rb(e);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");o[e]=t[r.indexOf(a)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return o},e}();function Ab(e,t,n,r){!function(e){Ou(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Ou(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),Ou(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),Ou(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(e.map((function(a){return a.then((function(a){var i=n+ ++o/e.length*(r-n);return t(i),a})),a})))}function Ob(e,t){return ku(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c;return Su(this,(function(d){switch(d.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?ml:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit)})),o=0,a=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return i=d.sent(),[3,4];case 2:return[4,Ab(r,t.onProgress,o,a)];case 3:i=d.sent(),d.label=4;case 4:return s=i.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,Ab(s,t.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}}))}))}function Mb(e){var t=this;return function(n,r,o){return void 0===r&&(r=""),ku(t,void 0,void 0,(function(){var t,a,i,s,u,l,c,d,f,h;return Su(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),a={},i=null!=o?o.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,l=Qy[u]*Fu(e.shape),c=function(){t[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=o?o.forEach((function(t,n){t===e.name&&(c(),i[n]=!0)})):c(),s.push(e.name),r+=l}))})),!i.every((function(e){return e})))throw u=o.filter((function(e,t){return!i[t]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return l=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),[4,e(c)];case 1:return d=p.sent(),f={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,o=0;o<t;o++)r+=d[h+o].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(d[h+l]);s.set(c,u),u+=c.byteLength}a[e].forEach((function(e){var t=Jy(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)f[n]=t[n]})),h+=t})),[2,f]}}))}))}}ab.registerSaveRouter((function(e){return Nu.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Db.URL_SCHEME)?(void 0===(t=e.slice(Db.URL_SCHEME.length))&&(t="model"),new Db(t)):null;var t}));var Pb=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(Ou("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=ml,Ou(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Ou(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return ku(this,void 0,void 0,(function(){var t,n,r,o;return Su(this,(function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:ob(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},e.prototype.load=function(){return ku(this,void 0,void 0,(function(){var e,t,n,r,o,a,i,s;return Su(this,(function(u){switch(u.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=u.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");u.label=2;case 2:return u.trys.push([2,4,,5]),[4,e.json()];case 3:return t=u.sent(),[3,5];case 4:throw u.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,o=t.weightsManifest,null==r&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:s=u.sent(),a=s[0],i=s[1],u.label=7;case 7:return[2,{modelTopology:r,weightSpecs:a,weightData:i}]}}))}))},e.prototype.loadWeights=function(e){return ku(this,void 0,void 0,(function(){var t,n,r,o,a,i,s,u,l,c,d;return Su(this,(function(f){switch(f.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],o=n[1],a=this.weightPathPrefix||r,i=[],s=0,u=e;s<u.length;s++)l=u[s],i.push.apply(i,l.weights);return c=[],e.forEach((function(e){e.paths.forEach((function(e){c.push(a+e+o)}))})),[4,Ob(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=f.sent(),[2,[i,nb(d)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function jb(e){return null!=e.match(Pb.URL_SCHEME_REGEX)}var Fb=function(e,t){return(Array.isArray(e)?e.every((function(e){return jb(e)})):jb(e))?Lb(e,{onProgress:t}):null};function Lb(e,t){return new Pb(e,t)}ab.registerSaveRouter(Fb),ab.registerLoadRouter(Fb);var Bb=function(){function e(e,t,n,r){this.modelTopology=e,this.weightSpecs=t,this.weightData=n,this.trainingConfig=r}return e.prototype.load=function(){return ku(this,void 0,void 0,(function(){var e;return Su(this,(function(t){return e={},null!=this.modelTopology&&(e=Cu({modelTopology:this.modelTopology},e)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(e=Cu({weightSpecs:this.weightSpecs},e)),null!=this.weightData&&this.weightData.byteLength>0&&(e=Cu({weightData:this.weightData},e)),null!=this.trainingConfig&&(e=Cu({trainingConfig:this.trainingConfig},e)),[2,e]}))}))},e}(),Wb=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return ku(this,void 0,void 0,(function(){return Su(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),Ub=(Object.freeze({browserFiles:function(e){return new Ib(e)},browserHTTPRequest:function(e,t){return Lb(e,t)},concatenateArrayBuffers:nb,decodeWeights:Jy,encodeWeights:function(e,t){return ku(this,void 0,void 0,(function(){var n,r,o,a,i,s=this;return Su(this,(function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),a=function(a){var i=o[a],u=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+i+"': "+u.dtype);var l={name:i,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var c=new Promise((function(e){return ku(s,void 0,void 0,(function(){var t,n,r;return Su(this,(function(o){switch(o.label){case 0:return t=l,[4,u.data()];case 1:return n=o.sent(),r=Nu.platform.encodeUTF8(n.join("\0")),t.byteLength=r.length,t.delimiter="\0",e(r),[2]}}))}))}));r.push(c)}else r.push(u.data());null!=t&&(l.group=t),n.push(l)},i=0;i<o.length;++i)a(i);return[4,Promise.all(r)];case 1:return[2,{data:Zy(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return new Bb(e,t,n,r)},getLoadHandlers:function(e,t){return ab.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:ob,getSaveHandlers:function(e){return ab.getSaveHandlers(e)},http:Lb,isHTTPScheme:jb,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),ku(this,void 0,void 0,(function(){return Su(this,(function(o){return[2,Mb((function(e){return Ob(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return ab.registerLoadRouter(e)},registerSaveRouter:function(e){return ab.registerSaveRouter(e)},weightsLoaderFactory:Mb,withSaveHandler:function(e){return new Wb(e)},copyModel:function(e,t){return ku(this,void 0,void 0,(function(){return Su(this,(function(n){return[2,lb(e,t,!1)]}))}))},listModels:function(){return ku(this,void 0,void 0,(function(){var e,t,n,r,o,a,i;return Su(this,(function(s){switch(s.label){case 0:e=sb.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(o=r[n],[4,sb.getManager(o).listModels()]):[3,4];case 2:for(i in a=s.sent())t[o+ib+i]=a[i];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return ku(this,void 0,void 0,(function(){return Su(this,(function(n){return[2,lb(e,t,!0)]}))}))},removeModel:function(e){return ku(this,void 0,void 0,(function(){var t;return Su(this,(function(n){return t=ub(e),[2,sb.getManager(t.scheme).removeModel(t.path)]}))}))}}),td({confusionMatrix_:function(e,t,n){var r=Hc(e,"labels","confusionMatrix"),o=Hc(t,"predictions","confusionMatrix");Ou(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),Ou(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),Ou(1===o.rank,(function(){return"Expected the rank of predictions to be 1, but got "+o.rank})),Ou(r.shape[0]===o.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."})),Ou(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var a=Vd(r.asType("int32"),n),i=Vd(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}})),zb=(Object.freeze({confusionMatrix:Ub}),td({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return Ul.fromPixels(e,t)}})),Hb=Object.freeze({toPixels:function(e,t){return ku(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d,f,h,p,m,v,g,y,b,x,w,C,k,S;return Su(this,(function(E){switch(E.label){case 0:if(n=Hc(e,"img","toPixels"),e instanceof El||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(i=2===n.rank?1:n.shape[2])>4||2===i)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return s=E.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=E.sent(),d=c[0],f=c[1],h=d[0],p=f[0],u.dispose(),l.dispose(),"float32"===n.dtype){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m="float32"===n.dtype?255:1,v=new Uint8ClampedArray(a*o*4),g=0;g<o*a;++g)y=void 0,b=void 0,x=void 0,w=void 0,1===i?(y=s[g]*m,b=s[g]*m,x=s[g]*m,w=255):3===i?(y=s[3*g]*m,b=s[3*g+1]*m,x=s[3*g+2]*m,w=255):4===i&&(y=s[4*g]*m,b=s[4*g+1]*m,x=s[4*g+2]*m,w=s[4*g+3]*m),v[0+(C=4*g)]=Math.round(y),v[C+1]=Math.round(b),v[C+2]=Math.round(x),v[C+3]=Math.round(w);return null!=t&&(t.width=a,t.height=o,k=t.getContext("2d"),S=new ImageData(v,a,o),k.putImageData(S,0,0)),n!==e&&n.dispose(),[2,v]}}))}))},fromPixels:zb}),Vb=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),qb=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Gb(e){Ou(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Ou("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Ou(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),qb.register(e)}Object.freeze({Serializable:Vb,SerializationMap:qb,registerClass:Gb});function Yb(){return 32===Ul.backend.floatPrecision()?.001:.1}function Kb(e,t,n){var r=!0;if((Zu(e)||Zu(t))&&(r=!1),Zu(e)&&Zu(t)&&(r=!0),r){var o=e.constructor.name,a=t.constructor.name;if(o!==a)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+a)}if(Array.isArray(e)&&Array.isArray(t)){var i=Uc(e),s=Uc(t);if(!Lu(i,s))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+s+"]")}var u=Zu(e)?e:ju(e),l=Zu(t)?t:ju(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var d=u[c],f=l[c];if(!n(d,f))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+f+".\nActual:   "+u+".\nExpected: "+l+".")}}function $b(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=Yb()),Kb(e,t,(function(e,t){return $b(e,t,n)}))},testEpsilon:Yb,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return nl(e)||nl(e[0])||nl(t)||nl(t[0])?Kb(e,n,(function(e,t){return e==t})):Kb(e,t,(function(e,t){return $b(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=Yb()),!$b(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:Np,webgl_util:jc,MathBackendWebGL:_m,setWebGLContext:ql,GPGPUContext:Tp});var Xb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wu(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),o=r.value,a=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:a[e.name]}}));this.applyGradients(i)}else this.applyGradients(a);return Bc(a),t?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){Ou(il(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Ou(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof _l})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Ul.registeredVariables)t.push(Ul.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,a=t.length;Ou((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."}));var i=Ul.gradients(e,t,null,!0),s=i.value,u=i.grads;Ou(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Ou(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=o&&o.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&Bc(this.iterations_)},t.prototype.saveIterations=function(){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:sd(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return ku(this,void 0,void 0,(function(){var t;return Su(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(Vb);Object.defineProperty(Xb,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Qb=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this)||this;return o.learningRate=t,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=Ul.backend.epsilon()),o}return wu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Ul.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:Lc((function(){return gd(o).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:Lc((function(){return gd(o).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Lc((function(){var e=i.mul(t.rho).add(a.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(i.add(t.epsilon).sqrt()).mul(a),r=s.mul(t.rho).add(n.square().mul(1-t.rho));i.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(o);o.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(Bc(this.accumulatedGrads.map((function(e){return e.variable}))),Bc(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return ku(this,void 0,void 0,(function(){var e;return Su(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return ku(this,void 0,void 0,(function(){var t;return Su(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="AdadeltaOptimizer",t}(Xb);Gb(Qb);var Jb=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return wu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Ul.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:Lc((function(){return pd(o.shape,t.initialAccumulatorValue).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedGrads[r].variable;Lc((function(){var e=i.add(a.square());i.assign(e);var n=a.div(e.add(Ul.backend.epsilon()).sqrt()).mul(-t.learningRate).add(o);o.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&Bc(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return ku(this,void 0,void 0,(function(){return Su(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(Xb);Gb(Jb);var Zb=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],Lc((function(){a.accBeta1=sd(n).variable(),a.accBeta2=sd(r).variable()})),null==o&&(a.epsilon=Ul.backend.epsilon()),a}return wu(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Lc((function(){var r=Bg(1,t.accBeta1),o=Bg(1,t.accBeta2);n.forEach((function(n,a){var i=Ul.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Lc((function(){return gd(i).variable(!1)}))}),null==t.accumulatedSecondMoment[a]&&(t.accumulatedSecondMoment[a]={originalName:n+"/v",variable:Lc((function(){return gd(i).variable(!1)}))});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[a].variable,l=t.accumulatedSecondMoment[a].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),f=c.div(r),h=d.div(o);u.assign(c),l.assign(d);var p=f.div(h.sqrt().add(t.epsilon)).mul(-t.learningRate).add(i);i.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Bc(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Bc(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return ku(this,void 0,void 0,(function(){var e;return Su(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return ku(this,void 0,void 0,(function(){var t,n=this;return Su(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),Lc((function(){n.accBeta1.assign(Pg(n.beta1,n.iterations_+1)),n.accBeta2.assign(Pg(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(Xb);Gb(Zb);var ex=function(e){function t(t,n,r,o,a){void 0===o&&(o=null),void 0===a&&(a=0);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=o,i.decay=a,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Lc((function(){i.iteration=sd(0).variable(),i.accBeta1=sd(n).variable()})),null==o&&(i.epsilon=Ul.backend.epsilon()),i}return wu(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Lc((function(){var r=Bg(1,t.accBeta1),o=Sg(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,a){var i=Ul.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:gd(i).variable(!1)}),null==t.accumulatedWeightedInfNorm[a]&&(t.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:gd(i).variable(!1)});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[a].variable,l=t.accumulatedWeightedInfNorm[a].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2),f=s.abs(),h=d.maximum(f);u.assign(c),l.assign(h);var p=o.div(r).mul(c.div(h.add(t.epsilon))).add(i);i.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Bc(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Bc(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(Xb);Gb(ex);var tx=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return wu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=Ul.registeredVariables[n];Lc((function(){var e=t.c.mul(o).add(a);a.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return Ul.keep(e)}(sd(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return ku(this,void 0,void 0,(function(){return Su(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(Xb);Gb(tx);var nx=function(e){function t(t,n,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.learningRate=t,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=sd(o.momentum),o}return wu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Ul.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:Lc((function(){return gd(o).variable(!1)}))});var a=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&Lc((function(){var e,n=t.m.mul(a).add(i);e=t.useNesterov?t.c.mul(i.add(n.mul(t.m))).add(o):t.c.mul(n).add(o),a.assign(n),o.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&Bc(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return ku(this,void 0,void 0,(function(){return Su(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return ku(this,void 0,void 0,(function(){return Su(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="MomentumOptimizer",t}(tx);Gb(nx);var rx=function(e){function t(t,n,r,o,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===a&&(a=!1);var i=e.call(this)||this;return i.learningRate=t,i.decay=n,i.momentum=r,i.epsilon=o,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=a,null==o&&(i.epsilon=Ul.backend.epsilon()),i}return wu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Ul.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:Lc((function(){return gd(o).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:Lc((function(){return gd(o).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:Lc((function(){return gd(o).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;Lc((function(){var e=i.mul(t.decay).add(a.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(a.mul(1-t.decay)),l=s.mul(t.momentum).add(a.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));i.assign(e),n.assign(u),s.assign(l);var c=o.sub(l);o.assign(c)}else{var d=i.mul(t.decay).add(a.square().mul(1-t.decay));l=s.mul(t.momentum).add(a.mul(t.learningRate).div(d.add(t.epsilon).sqrt())),i.assign(d),s.assign(l),c=o.sub(l),o.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&Bc(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Bc(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Bc(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return ku(this,void 0,void 0,(function(){var e;return Su(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return ku(this,void 0,void 0,(function(){var t;return Su(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(Xb);Gb(rx);var ox=function(){function e(){}return e.sgd=function(e){return new tx(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new nx(e,t,n)},e.rmsprop=function(e,t,n,r,o){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new rx(e,t,n,r,o)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Zb(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Qb(e,t,n)},e.adamax=function(e,t,n,r,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new ex(e,t,n,r,o)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Jb(e,t)},e}();ox.sgd,ox.momentum,ox.adadelta,ox.adagrad,ox.rmsprop,ox.adamax,ox.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;kl=Gy;var ax=function(e,t){return(ax=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ix(e,t){function n(){this.constructor=e}ax(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function sx(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function ux(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var lx=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],o=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,o)}))}},e}();function cx(){return dx}var dx=null,fx=new Map,hx=new Map;function px(e,t){var n=bx(e,t);return fx.get(n)}function mx(e){return hx.get(e)}function vx(e){for(var t=fx.entries(),n=[];;){var r=t.next(),o=r.done,a=r.value;if(o)break;var i=a[0],s=a[1];i.split("_")[0]===e&&n.push(s)}return n}function gx(e){var t=e.kernelName,n=e.backendName,r=bx(t,n);if(fx.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");fx.set(r,e)}function yx(e){var t=e.kernelName;hx.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),hx.set(t,e)}function bx(e,t){return t+"_"+e}function xx(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function wx(e,t,n){return Math.max(e,Math.min(t,n))}function Cx(e){return e%2==0?e:e+1}function kx(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Sx(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Ex(e,t,n){void 0===n&&(n=""),Sx(Rx(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function _x(e){Sx(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Nx(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||Hx(e)&&!n)for(var r=0;r<e.length;++r)Nx(e[r],t,n);else t.push(e);return t}function Tx(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Rx(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Dx(e){return e%1==0}function Ix(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Ax(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Ox(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Mx(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,o){var a=0,i=function(){if(e())r();else{a++;var s=t(a);null!=n&&a>=n?o():setTimeout(i,s)}};i()}))}function Px(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var a=e.slice();return a[r]=t/n,a}function jx(e,t){var n=t.length;return Sx((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),Sx(e.every((function(e){return Dx(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function Fx(e,t){for(var n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||o?null:jx(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=a){if(a[i]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==a[i]||a[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),a[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Lx(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Bx(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function Wx(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function Ux(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function zx(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function Hx(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function Vx(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function qx(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function Gx(e){return"string"==typeof e||e instanceof String}function Yx(e){return"boolean"==typeof e}function Kx(e){return"number"==typeof e}function $x(e){return Array.isArray(e)?$x(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":Kx(e)?"float32":Gx(e)?"string":Yx(e)?"bool":"float32"}function Xx(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Qx(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Jx(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Zx(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Nx(e)),n&&Wx(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)0!==Math.round(e[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function ew(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var o=new Array;if(1===n.length)for(var a=n[0],i=0;i<a;i++)o[i]=r[t+i];else{a=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(i=0;i<a;i++)o[i]=e(t+i*u,s,r)}return o}(0,e,t)}function tw(e,t){for(var n=nw(e,t),r=0;r<n.length;r++)n[r]=1;return n}function nw(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function rw(){return cx().platform.now()}function ow(e){e.forEach((function(t){Sx(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function aw(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",cx().platform.encode(e,t)}function iw(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",cx().platform.decode(e,t)}function sw(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function uw(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}Object.freeze({shuffle:xx,clamp:wx,nearestLargerEven:Cx,sum:kx,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},assert:Sx,assertShapesMatch:Ex,assertNonNull:_x,flatten:Nx,sizeFromShape:Tx,isScalarShape:function(e){return 0===e.length},arraysEqual:Rx,isInt:Dx,tanh:Ix,sizeToSquarishShape:Ax,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return xx(t),t},rightPad:Ox,repeatedTry:Mx,inferFromImplicitShape:Px,parseAxisParam:jx,squeezeShape:Fx,getTypedArrayFromDType:Lx,getArrayFromDType:Bx,checkConversionForErrors:Wx,isValidDtype:Ux,hasEncodingLoss:zx,isTypedArray:Hx,bytesPerElement:Vx,bytesFromStringArray:qx,isString:Gx,isBoolean:Yx,isNumber:Kx,inferDtype:$x,isFunction:Xx,nearestDivisor:Qx,computeStrides:Jx,toTypedArray:Zx,toNestedArray:ew,makeOnesTypedArray:tw,makeZerosTypedArray:nw,now:rw,assertNonNegativeIntegerDimensions:ow,fetch:function(e,t){return cx().platform.fetch(e,t)},encodeString:aw,decodeString:iw,locToIndex:sw,indexToLoc:uw});var lw=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new cw)}return e.prototype.profileKernel=function(e,t,n){var r,o=this,a=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var o=e[r];if(isNaN(o)||!isFinite(o))return console.warn("Found "+o+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),a.then((function(a){var i="";null!=a.getExtraProfileInfo&&(i=a.getExtraProfileInfo()),o.logger.logKernelProfile(e,n,r,a.kernelMs,t,i)}))}))})),r},e}(),cw=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,o,a){var i="number"==typeof r?Ox(r+"ms",9):r.error,s=Ox(e,25),u=t.rank,l=t.size,c=Ox(t.shape.toString(),14),d="";for(var f in o){var h=o[f].shape||t.shape,p=h.length;d+=f+": "+p+"D "+(p>0?h:"")+" "}console.log("%c"+s+"\t%c"+i+"\t%c"+u+"D "+c+"\t%c"+l+"\t%c"+d+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function dw(e,t,n){return Ox(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":Gx(e)?"'"+e+"'":"bool"===n?fw(e):parseFloat(e.toFixed(7)).toString(),t)}function fw(e){return 0===e?"false":"true"}function hw(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var pw=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Tx(e),null!=n){var o=n.length;Sx(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Bx(t,this.size),this.strides=Jx(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Sx(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var o=this.locToIndex(n);this.values[o]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,o=e;r<o.length;r++){var a=o[r];if(a<0||a>=this.shape[n]){var i="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return mw().makeTensor(this.values,this.shape,this.dtype)},e}(),mw=null,vw=null,gw=null,yw=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Tx(e),this.strides=Jx(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),Sx(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),this.reshape([e,t,n,r,o])},e.prototype.asType=function(e){return this.throwIfDisposed(),vw.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return sx(this,void 0,void 0,(function(){var e;return ux(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,vw.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return vw.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return sx(this,void 0,void 0,(function(){var e;return ux(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,ew(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return ew(this.shape,this.dataSync())},e.prototype.data=function(){return sx(this,void 0,void 0,(function(){var e,t;return ux(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=mw().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return iw(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=mw().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return iw(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return sx(this,void 0,void 0,(function(){var e;return ux(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,mw().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(mw().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),vw.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),vw.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),vw.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),vw.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),vw.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),vw.clone(this)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var o=Jx(t),a=function(e,t,n,r){var o=Tx(t),a=r[r.length-1],i=new Array(a).fill(0),s=t.length,u="complex64"===n?hw(e):e;if(s>1)for(var l=0;l<o/a;l++)for(var c=l*a,d=0;d<a;d++)i[d]=Math.max(i[d],dw(u[c+d],0,n).length);return i}(e,t,n,o),i=t.length,s=function e(t,n,r,o,a,i){void 0===i&&(i=!0);var s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[dw(hw(t)[0],0,r)]:"bool"===r?[fw(t[0])]:[t[0].toString()];if(1===l){if(u>20){var c=3*s,d=Array.from(t.slice(0,c)),f=Array.from(t.slice((u-3)*s,u*s));return"complex64"===r&&(d=hw(d),f=hw(f)),["["+d.map((function(e,t){return dw(e,a[t],r)})).join(", ")+", ..., "+f.map((function(e,t){return dw(e,a[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?hw(t):Array.from(t)).map((function(e,t){return dw(e,a[t],r)})).join(", ")+"]"]}var h=n.slice(1),p=o.slice(1),m=o[0]*s,v=[];if(u>20){for(var g=0;g<3;g++){var y=(b=g*m)+m;v.push.apply(v,e(t.slice(b,y),h,r,p,a,!1))}for(v.push("..."),g=u-3;g<u;g++)y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),h,r,p,a,g===u-1))}else for(g=0;g<u;g++){var b;y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),h,r,p,a,g===u-1))}var x=2===l?",":"";for(v[0]="["+v[0]+x,g=1;g<v.length-1;g++)v[g]=" "+v[g]+x;var w=",\n";for(g=2;g<l;g++)w+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(i?"":w),v}(e,t,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),vw.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),vw.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),vw.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),vw.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),vw.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),vw.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),vw.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),vw.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),vw.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),vw.unstack(this,e)},e.prototype.batchNormalization=function(e,t,n,r,o){return void 0===n&&(n=.001),gw("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,o,r,n)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),vw.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),vw.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),vw.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),vw.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),vw.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),vw.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),vw.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),vw.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),vw.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),vw.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),vw.cast(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),vw.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),vw.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),vw.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),vw.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),vw.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),vw.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),vw.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),vw.mulStrict(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),vw.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),vw.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),vw.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),vw.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),vw.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),vw.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),vw.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),vw.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),vw.squaredDifferenceStrict(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),vw.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),vw.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),vw.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),vw.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),vw.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),vw.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),vw.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),vw.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),vw.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),vw.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),vw.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),vw.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),vw.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),vw.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),vw.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),vw.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),vw.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),vw.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),vw.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),vw.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),vw.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),vw.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),vw.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),vw.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),vw.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),vw.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),vw.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),vw.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),vw.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),vw.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),vw.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),vw.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),vw.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),vw.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),vw.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),vw.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),vw.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),vw.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),vw.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),vw.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),vw.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),vw.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),vw.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),vw.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),vw.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),vw.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),vw.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),vw.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),vw.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),vw.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),vw.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),vw.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),vw.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),vw.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),vw.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),vw.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),vw.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),vw.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),vw.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),vw.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),vw.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),vw.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),vw.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),vw.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,o,a){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),vw.conv1d(this,e,t,n,r,o,a)},e.prototype.conv2d=function(e,t,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),vw.conv2d(this,e,t,n,r,o,a)},e.prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),vw.conv2dTranspose(this,e,t,n,r,o)},e.prototype.depthwiseConv2D=function(e,t,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),vw.depthwiseConv2d(this,e,t,n,r,o,a)},e.prototype.separableConv2d=function(e,t,n,r,o,a){return void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),vw.separableConv2d(this,e,t,n,r,o,a)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),vw.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),vw.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),vw.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,o){return this.throwIfDisposed(),vw.pool(this,e,t,n,r,o)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),mw().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),vw.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),vw.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),vw.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),vw.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,o,a,i,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),this.throwIfDisposed(),vw.stridedSlice(this,e,t,n,r,o,a,i,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),vw.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),vw.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),vw.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),vw.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),vw.spectral.irfft(this)},e}();Object.defineProperty(yw,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var bw,xw,ww,Cw,kw,Sw=function(e){function t(t,n,r,o){var a=e.call(this,t.shape,t.dtype,t.dataId,o)||this;return a.trainable=n,a.name=r,a}return ix(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Rx(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");mw().disposeTensor(this),this.dataId=e.dataId,mw().incRef(this,null)},t.prototype.dispose=function(){mw().disposeVariable(this),this.isDisposedInternal=!0},t}(yw);Object.defineProperty(Sw,Symbol.hasInstance,{value:function(e){return e instanceof yw&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(bw||(bw={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(xw||(xw={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(ww||(ww={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Cw||(Cw={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(kw||(kw={}));var Ew={float32:Cw,int32:xw,bool:ww,complex64:kw};function _w(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Ew[e][t]}function Nw(e){return _w(e,"int32")}function Tw(e,t){if(e.dtype===t.dtype)return[e,t];var n=_w(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Rw(e,t){Sx(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function Dw(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof yw)n.push(t);else if(o=t,Array.isArray(o)||"object"==typeof o){var o,a=t;for(var i in a){var s=a[i];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:Tw,assertTypesMatch:Rw,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:Dw});var Iw,Aw=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Ow=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Aw}return e.prototype.ready=function(){return sx(this,void 0,void 0,(function(){var e,t,n;return ux(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return sx(this,void 0,void 0,(function(){var t,n,r;return ux(this,(function(o){switch(o.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new lw(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;vx(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;vx(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,a=r.then((function(n){return!(o<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(o<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),o=r.success,a=r.asyncInit;if(a||o)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,o,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,o=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun((function(){return r.startScope(o)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[],{}),t},e.prototype.runKernel=function(e,t,n,r,o){return this.runKernelFunc(null,t,null,e,n,r,o)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),o=0;n.forEach((function(e){o+="complex64"===e.dtype?3:1}));var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-o-a;if(i>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+i+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,o,a,i){var s,u=this,l=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var d,f=this.state.numBytes,h=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var p,m=px(r,this.backendName);if(null!=m)d=function(){var e=u.backend.numDataIds();p=m.kernelFunc({inputs:t,attrs:o,backend:u.backend});var n=Array.isArray(p)?p:[p];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)}));if(c){var d=u.getTensorsForGradient(r,t,s);if(null==d){null==i&&(i=[]);var f=s.filter((function(e,t){return i[t]}));d=(a||[]).slice().concat(f)}l=u.saveTensorsForBackwardMode(d)}return s};else{var v=function(e){c&&(l=e.map((function(e){return u.keep(u.clone(e))})))};d=function(){var t=u.backend.numDataIds();p=u.tidy((function(){return e(u.backend,v)}));var n=Array.isArray(p)?p:[p];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n}}return this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,t,(function(){return d()})):d()})),c&&this.addTapeNode(r,t,s,n,l,o),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(p)?s:s[0]},e.prototype.saveTensorsForBackwardMode=function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))},e.prototype.getTensorsForGradient=function(e,t,n){var r=mx(e);if(null!=r){var o=r.inputsToSave||[],a=r.outputsToSave||[],i=void 0;r.saveAllInputs?(Sx(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),i=Object.keys(t).map((function(e){return t[e]}))):i=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return a[t]}));return i.concat(s)}return null},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var o=e;"string"===n&&Gx(e[0])&&(o=e.map((function(e){return aw(e)})));var a=r.write(o,t,n),i=new yw(t,n,a,this.nextTensorId());if(this.incRef(i,r),"string"===n){var s=this.state.tensorInfo.get(a),u=qx(o);this.state.numBytes+=u-s.bytes,s.bytes=u}return i},e.prototype.makeTensorFromDataId=function(e,t,n,r){var o=new yw(t,n=n||"float32",e,this.nextTensorId());return this.incRef(o,r),o},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var o=new Sw(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*Vx(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Sw||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return sx(this,void 0,void 0,(function(){var t,n;return ux(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,o,a){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},u=mx(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],o=nw(r.size,r.dtype);return i.makeTensor(o,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],o,a)}),this.state.activeTape.push(s)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Dw(e),r=new Set(n.map((function(e){return e.id}))),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||r.has(a.id)||a.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),Sx(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",e)}));Sx(a instanceof yw,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},o={},a=0;a<t.length;a++)r[t[a].id]=!0;for(a=0;a<e.length;a++){var i=(p=e[a]).inputs;for(var s in i){for(var u=i[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,o[p.id]=!0;break}if(l)break}}var d={};d[n.id]=!0;var f={};for(a=e.length-1;a>=0;a--)for(i=(p=e[a]).inputs,c=0;c<p.outputs.length;c++)if(d[p.outputs[c].id]){for(var s in i)d[i[s].id]=!0,f[p.id]=!0;break}var h=[];for(a=0;a<e.length;a++){var p;if(o[(p=e[a]).id]&&f[p.id]){var m={};for(var s in p.inputs){var v=p.inputs[s];r[v.id]&&(m[s]=v)}var g=Object.assign({},p);g.inputs=m,g.outputs=p.outputs,h.push(g)}}return h}(this.state.activeTape,t,a);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[a.id]=null==n?(r=tw(Tx(e=a.shape),"float32"),Mw.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var o=t[r],a=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?a.push(n):a.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.kernelName+".");var i=o.gradient(a),s=function(t){if(!(t in i))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(i)+".");var r=n((function(){return i[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=o.inputs[t];if(!Rx(r.shape,a.shape))throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==e[a.id])e[a.id]=r;else{var s=e[a.id];e[a.id]=s.add(r),s.dispose()}};for(var u in o.inputs)s(u)},o=t.length-1;o>=0;o--)r(o)}(s,i,(function(e){return o.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===o.state.gradientDepth&&(o.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),o.state.activeTape=null),{value:a,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return Sx(Xx(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];Sx(r.every((function(e){return e instanceof yw})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var a={};return r.forEach((function(e,t){a[t]=e})),t.runKernelFunc((function(t,o){return Sx((n=e.apply(void 0,r.concat([o]))).value instanceof yw,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Sx(Xx(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),a,(function(e,t){var o=n.gradFunc(e,t),a=Array.isArray(o)?o:[o];Sx(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Sx(a.every((function(e){return e instanceof yw})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return sx(this,void 0,void 0,(function(){var t,n;return ux(this,(function(r){switch(r.label){case 0:return t=rw(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=rw()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Aw,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Mw=function(){var e=function(){if(null==Iw){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Iw=e}return Iw}();if(null==e._tfengine){var t=new lx(e);e._tfengine=new Ow(t)}return function(e){dx=e}(e._tfengine.ENV),mw=function(){return e._tfengine},e._tfengine}();function Pw(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var jw=cx();jw.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),jw.registerFlag("IS_BROWSER",(function(){return Pw()})),jw.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),jw.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),jw.registerFlag("PROD",(function(){return!1})),jw.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return jw.getBool("DEBUG")})),jw.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),jw.registerFlag("IS_TEST",(function(){return!1}));var Fw,Lw,Bw,Ww={},Uw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function zw(e,t){Ww[e]=t}function Hw(e){e in Ww||(Ww[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Ww[e]}),!1),1===e?t.getContext("webgl",Uw)||t.getContext("experimental-webgl",Uw):t.getContext("webgl2",Uw)}(e));var t=Ww[e];return t.isContextLost()?(delete Ww[e],Hw(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Ww[e])}function Vw(e,t){return[t,e]}function qw(e){var t=Tx(e);return Ax(Math.ceil(t/4))}function Gw(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Yw(e,t){var n,r,o,a,i,s,u,l,c,d=e;return 2===cx().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,o=d.RGBA16F,a=d.RGBA32F,i=d.RED,s=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,a=d.RGBA,i=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function Kw(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+Xw(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Fw||(Fw={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Lw||(Lw={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Bw||(Bw={}));function $w(e){return!!(cx().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function Xw(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Qw(e,t,n){return xC(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function Jw(e,t,n){var r=xC(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Kw(e,t,(function(){return e.shaderSource(r,n)})),Kw(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Zw(e,t,n){var r=xC(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Kw(e,t,(function(){return e.shaderSource(r,n)})),Kw(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=nC.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map((function(e,t){return Ox((t+1).toString(),a)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),c=i.slice(r-1,r),d=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+Ox(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var eC,tC,nC=/ERROR: [0-9]+:([0-9]+):/g;function rC(e,t){return xC(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function oC(e,t,n){if(Kw(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function aC(e,t,n){if(Kw(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function iC(e,t,n){var r=xC(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Kw(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Kw(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function sC(e,t,n){var r=xC(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Kw(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),Kw(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function uC(e,t){return xC(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function lC(e,t){var n=cx().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function cC(e,t){return xC(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function dC(e,t,n,r,o,a,i,s){var u=e.getAttribLocation(n,r);return-1!==u&&(Kw(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,o)})),Kw(e,t,(function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,s)})),Kw(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function fC(e,t,n,r){wC(e,r),Kw(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),Kw(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function hC(e,t,n,r){return xC(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function pC(e,t,n){return e.getUniformLocation(t,n)}function mC(e,t,n,r,o,a){Kw(e,t,(function(){return fC(e,t,r,a)})),Kw(e,t,(function(){return e.uniform1i(o,a)}))}function vC(e,t,n,r){Kw(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),Kw(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function gC(e,t,n){Kw(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),Kw(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function yC(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+bC(e,t))}function bC(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function xC(e,t,n,r){var o=Kw(e,t,(function(){return n()}));if(null==o)throw new Error(r);return o}function wC(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function CC(e,t){return void 0===t&&(t=2),Tx(e.slice(0,e.length-t))}function kC(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function SC(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[CC(e)].concat(kC(e))),t}function EC(e,t){var n;void 0===t&&(t=!1);var r=cx().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Cx(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var o=Fx(e);e=o.newShape}var a=Tx(e);if(e.length<=1&&a<=r)return[1,a];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=CC(e),s=2,u=2;return e.length&&(s=(n=kC(e))[0],u=n[1]),Ax(a=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return Ax(a)}function _C(e){return e%2==0}function NC(e,t){if(Rx(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(_C(n)&&_C(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&_C(e[0])&&_C(t[0])}function TC(e){if(null==eC){var t=Hw(e);eC=t.getParameter(t.MAX_TEXTURE_SIZE)}return eC}function RC(e){if(null==tC){var t=Hw(e);tC=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,tC)}function DC(e){if(0===e)return 0;var t=Hw(e);return IC(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:IC(t,"EXT_disjoint_timer_query")?1:0}function IC(e,t){return null!=e.getExtension(t)}function AC(e){try{if(null!=Hw(e))return!0}catch(e){return!1}return!1}function OC(e){if(0===e)return!1;var t=Hw(e);if(1===e){if(!IC(t,"OES_texture_float"))return!1}else if(!IC(t,"EXT_color_buffer_float"))return!1;return PC(t)}function MC(e){if(0===e)return!1;var t=Hw(e);if(1!==e){if(IC(t,"EXT_color_buffer_float"))return PC(t);if(IC(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=Yw(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),a}(t,n)}return!1}return!!IC(t,"OES_texture_float")&&!!IC(t,"WEBGL_color_buffer_float")&&PC(t)}function PC(e){var t=Yw(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function jC(e){return 2===e&&null!=Hw(e).fenceSync}var FC=Object.freeze({callAndCheck:Kw,canBeRepresented:$w,getWebGLErrorMessage:Xw,getExtensionOrThrow:Qw,createVertexShader:Jw,createFragmentShader:Zw,createProgram:rC,linkProgram:oC,validateProgram:aC,createStaticVertexBuffer:iC,createStaticIndexBuffer:sC,getNumChannels:function(){return 2===cx().getNumber("WEBGL_VERSION")?1:4},createTexture:uC,validateTextureSize:lC,createFramebuffer:cC,bindVertexBufferToProgramAttribute:dC,bindTextureUnit:fC,unbindTextureUnit:function(e,t,n){wC(e,n),Kw(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),Kw(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:hC,getProgramUniformLocation:pC,bindTextureToProgramUniformSampler:mC,bindCanvasToFramebuffer:function(e,t){Kw(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),Kw(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),Kw(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:vC,unbindColorTextureFromFramebuffer:gC,validateFramebuffer:yC,getFramebufferErrorMessage:bC,getBatchDim:CC,getRowsCols:kC,getShapeAs3D:SC,getTextureShapeFromLogicalShape:EC,isReshapeFree:NC,getWebGLMaxTextureSize:TC,resetMaxTextureSize:function(){eC=null},resetMaxTexturesInShader:function(){tC=null},getMaxTexturesInShader:RC,getWebGLDisjointQueryTimerVersion:DC,hasExtension:IC,isWebGLVersionEnabled:AC,isCapableOfRenderingToFloatTexture:OC,isDownloadFloatTextureEnabled:MC,isWebGLFenceEnabled:jC}),LC=cx();function BC(e){cx().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function WC(e,t){return Mw.tidy(e,t)}function UC(e){Dw(e).forEach((function(e){return e.dispose()}))}function zC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];cx().getBool("IS_TEST")||console.warn.apply(console,e)}function HC(e,t){var n=e;if(Hx(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Hx(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&cx().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||Hx(t)){Sx(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),Sx(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var o=n.slice(1),a=0;a<t.length;++a)e(t[a],o,r.concat(a))}else Sx(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function VC(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function qC(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof yw)return VC(r,e.dtype,t,n),e;var o=$x(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),VC(r,o,t,n),null==e||!Hx(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var a=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=HC(e,o);Hx(e)||Array.isArray(e)||(e=[e]);var s="string"!==o?Zx(e,o,cx().getBool("DEBUG")):Nx(e,[],!0);return Mw.makeTensor(s,i,o)}function GC(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return qC(e,t+"["+r+"]",n)}),r)}function YC(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function KC(e,t,n){for(var r=e.length+t.length,o=[],a=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}function $C(e,t){for(var n=[],r=e.length,o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((function(t){return e[t]}))]}function XC(e,t){return KC(e,t.map((function(e){return 1})),t)}function QC(e,t,n){Sx(YC(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function JC(e,t){if(YC(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function ZC(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function ek(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function tk(e,t){var n=e[0].length;e.forEach((function(e,t){Sx(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),Sx(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,o){for(var a=0;a<n;a++)Sx(a===t||e[a]===r[a],(function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function nk(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function rk(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Mw.startScope(n);try{var o=r.apply(void 0,e);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Mw.endScope(o),o}catch(e){throw Mw.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}LC.registerFlag("HAS_WEBGL",(function(){return LC.getNumber("WEBGL_VERSION")>0})),LC.registerFlag("WEBGL_VERSION",(function(){return AC(2)?2:AC(1)?1:0})),LC.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===LC.get("WEBGL_VERSION")})),LC.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),LC.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),LC.registerFlag("WEBGL_PACK",(function(){return LC.getBool("HAS_WEBGL")})),LC.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_PACK_CLIP",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),LC.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_PACK_REDUCE",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_CONV_IM2COL",(function(){return LC.getBool("WEBGL_PACK")})),LC.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return TC(LC.getNumber("WEBGL_VERSION"))})),LC.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return RC(LC.getNumber("WEBGL_VERSION"))})),LC.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=LC.getNumber("WEBGL_VERSION");return 0===e?0:DC(e)})),LC.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return LC.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),LC.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return OC(LC.getNumber("WEBGL_VERSION"))})),LC.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!LC.getBool("WEBGL_FORCE_F16_TEXTURES")&&LC.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),LC.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return MC(LC.getNumber("WEBGL_VERSION"))})),LC.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return jC(LC.getNumber("WEBGL_VERSION"))})),LC.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return LC.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),gw=BC;var ok=rk({complex_:function(e,t){var n=qC(e,"real","complex"),r=qC(t,"imag","complex");return Ex(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Mw.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),ak=rk({real_:function(e){var t=qC(e,"input","real");return Mw.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),ik=rk({imag_:function(e){var t=qC(e,"input","imag");return Mw.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function sk(e,t,n){return uk(e,t,HC(e,n),n)}function uk(e,t,n,r){if(null==r&&(r=$x(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Hx(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){ow(t);var o=Tx(t),a=Tx(n);Sx(o===a,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+a}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==Tx(t.slice(i));Sx(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return Hx(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Zx(e,r,cx().getBool("DEBUG")):Nx(e,[],!0),Mw.makeTensor(e,t,r)}function lk(e,t){if((Hx(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Hx(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return uk(e,[],[],t)}function ck(e,t){_x(e);var n=HC(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return uk(e,null,n,t)}function dk(e,t,n){if(_x(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=HC(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return uk(e,t,r,n)}function fk(e,t,n){if(_x(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=HC(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return uk(e,t,r,n)}function hk(e,t,n){if(_x(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=HC(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return uk(e,t,r,n)}function pk(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=pk(e,"float32"),r=mk(e,"float32");return ok(n,r)}var o=tw(Tx(e),t);return Mw.makeTensor(o,e,t)}function mk(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=mk(e,"float32"),r=mk(e,"float32");return ok(n,r)}var o=nw(Tx(e),t);return Mw.makeTensor(o,e,t)}function vk(e,t,n){return Mw.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function gk(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return mk([0],r);var o=nw(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return ck(o,r)}var yk=rk({onesLike_:function(e){var t=qC(e,"x","onesLike");if("complex64"===t.dtype){var n=yk(ak(t)),r=bk(ik(t));return ok(n,r)}return Mw.runKernelFunc((function(e){return e.onesLike(t)}),{x:t},(function(e,t){return{x:function(){return bk(e)}}}),"OnesLike")}}),bk=rk({zerosLike_:function(e){var t=qC(e,"x","zerosLike");return Mw.runKernelFunc((function(e){return e.zerosLike(t)}),{x:t},(function(e,t){return{x:function(){return bk(e)}}}),"ZerosLike")}}),xk=rk({concat_:function(e,t){void 0===t&&(t=0),Sx(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=GC(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=jx(t,n[0].shape)[0];var r=nk(n.map((function(e){return e.shape})),t);if(0===Tx(r))return sk([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var o=n.map((function(e){return e.shape}));tk(o,t);var a=n,i={axis:t};return Mw.runKernelFunc((function(e){return e.concat(n,t)}),a,(function(e){var n=o.map((function(e){return e[t]}));return Ek(e,n,t).map((function(e){return function(){return e}}))}),"Concat",i)}}),wk=rk({concat1d_:function(e){return xk(e,0)}}),Ck=rk({concat2d_:function(e,t){return xk(e,t)}}),kk=rk({concat3d_:function(e,t){return xk(e,t)}}),Sk=rk({concat4d_:function(e,t){return xk(e,t)}}),Ek=rk({split_:function(e,t,n){void 0===n&&(n=0);var r,o=qC(e,"x","split");return n=jx(n,o.shape)[0],"number"==typeof t?(Sx(o.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(o.shape[n]/t)):(Sx(o.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),Mw.runKernelFunc((function(e){return e.split(o,r,n)}),{$x:o},(function(e){return{$x:function(){return xk(e,n)}}}))}});function _k(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",ow(e),new pw(e,t,n)}var Nk=rk({batchToSpaceND_:function(e,t,n){var r=qC(e,"x","batchToSpaceND"),o=t.reduce((function(e,t){return e*t}));return Sx(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),Sx(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),Sx(r.shape[0]%o==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o})),Mw.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),Tk=rk({cast_:function(e,t){var n=qC(e,"x","cast");if(!Ux(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return Mw.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),Rk=rk({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=qC(e,"x","cumsum"),a=JC([t|=0],o.rank),i=o;null!=a&&(i=o.transpose(a));var s=ek(1,o.rank)[0],u=Mw.runKernelFunc((function(e){return e.cumsum(i,s,n,r)}),{permutedX:i},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=a&&(u=u.transpose(a)),u}}),Dk=rk({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=qC(e,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return Sx(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),Sx(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),Sx(i%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape})),Mw.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),Ik=rk({expandDims_:function(e,t){void 0===t&&(t=0);var n=qC(e,"x","expandDims",null);Sx(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(Sx(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),Ak(n,r)}}),Ak=rk({reshape_:function(e,t){var n=qC(e,"x","reshape",null);t=Px(t,n.size),Sx(n.size===Tx(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return Mw.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),Ok=rk({spaceToBatchND_:function(e,t,n){var r=qC(e,"x","spaceToBatchND");return Sx(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),Sx(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),Sx(r.shape.reduce((function(e,r,o){return o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),Mw.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Mk=rk({squeeze_:function(e,t){var n=qC(e,"x","squeeze");return Ak(n,Fx(n.shape,t).newShape)}}),Pk=rk({stack_:function(e,t){void 0===t&&(t=0);var n=GC(e,"tensors","stack");if(Sx(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;Sx(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Ex(o,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){Sx(a===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(e){return e.expandDims(t)}));return xk(i,t)}}),jk=rk({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=qC(e,"x","unstack");Sx(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return Mw.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return Pk(e,t)}}}),"Unpack",r)}});function Fk(e,t,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var a=t.length,i=0;i<a;++i)o=o.concat([e[i+1]/t[i],t[i]]);o=o.concat(e.slice(a+1))}return o}function Lk(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function Bk(e,t,n,r){void 0===r&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var a=1;a<e.length;++a)a<=t.length?r?o.push(t[a-1]*e[a]):o.push(e[a]/t[a-1]):o.push(e[a]);return o}function Wk(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Uk(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}var zk="Div",Hk="SquaredDifference",Vk="BroadcastTo",qk="OneHot",Gk="Identity",Yk="Tile",Kk="PadV2",$k=rk({add_:function(e,t){var n,r=qC(e,"a","add"),o=qC(t,"b","add");n=Tw(r,o),r=n[0],o=n[1];var a={a:r,b:o};return Mw.runKernelFunc((function(e,t){var n=e.add(r,o);return t([r,o]),n}),a,null,"Add")}});function Xk(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var a=n-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function Qk(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function Jk(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var a=e[e.length-o-1];null==a&&(a=1);var i=t[t.length-o-1];if(null==i&&(i=1),1===a)n.unshift(i);else if(1===i)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(a)}}return n}var Zk=rk({abs_:function(e){var t=qC(e,"x","abs");return"complex64"===t.dtype?Mw.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):Mw.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),eS=rk({acos_:function(e){var t=qC(e,"x","acos");return Mw.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(lk(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),tS=rk({acosh_:function(e){var t=qC(e,"x","acosh");return Mw.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),nS=rk({asin_:function(e){var t=qC(e,"x","asin");return Mw.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(lk(1).sub(n.toFloat().square()).sqrt())}}}))}}),rS=rk({asinh_:function(e){var t=qC(e,"x","asinh");return Mw.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(lk(1).add(n.toFloat().square()).sqrt())}}}))}}),oS=rk({atan_:function(e){var t=qC(e,"x","atan");return Mw.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),aS=rk({atanh_:function(e){var t=qC(e,"x","atanh");return Mw.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(lk(1).sub(n.toFloat().square()))}}}))}}),iS=rk({ceil_:function(e){var t=qC(e,"x","ceil");return Mw.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return bk(e)}}}))}}),sS=rk({clipByValue_:function(e,t,n){var r=qC(e,"x","clipByValue");Sx(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var o=[r],a={min:t,max:n};return Mw.runKernelFunc((function(e,o){var a=e.clip(r,t,n);return o([r]),a}),{x:r},(function(e,r){var o=r[0];return{x:function(){return e.where(o.greaterEqual(t).logicalAnd(o.lessEqual(n)),bk(e))}}}),"ClipByValue",a,o)}}),uS=rk({cos_:function(e){var t=qC(e,"x","cos"),n=[t];return Mw.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),lS=rk({cosh_:function(e){var t=qC(e,"x","cosh");return Mw.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),cS=rk({erf_:function(e){var t=qC(e,"x","erf");return Sx("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),Mw.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),dS=rk({exp_:function(e){var t=qC(e,"x","exp");return Mw.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),fS=rk({expm1_:function(e){var t=qC(e,"x","expm1");return Mw.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),hS=rk({floor_:function(e){var t=qC(e,"x","floor");return Mw.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return bk(e)}}}))}}),pS=rk({log_:function(e){var t=qC(e,"x","log"),n=[t];return Mw.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),mS=rk({log1p_:function(e){var t=qC(e,"x","log1p");return Mw.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),vS=rk({logSigmoid_:function(e){var t=qC(e,"x","logSigmoid");return Mw.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),gS=rk({neg_:function(e){var t=qC(e,"x","neg"),n=[t];return Mw.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),yS=rk({reciprocal_:function(e){var t=qC(e,"x","reciprocal");return Mw.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),bS=rk({round_:function(e){var t=qC(e,"x","round");return Mw.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return bk(e)}}}))}}),xS=rk({rsqrt_:function(e){var t=qC(e,"x","rsqrt"),n=[t];return Mw.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),wS=rk({sigmoid_:function(e){var t=qC(e,"x","sigmoid");return Mw.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(lk(1).sub(n)))}}}),"Sigmoid")}}),CS=rk({sign_:function(e){var t=qC(e,"x","sign");return Mw.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return bk(e)}}}))}}),kS=rk({isNaN_:function(e){var t=qC(e,"x","isNaN");return Mw.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return bk(e)}}}))}}),SS=rk({isInf_:function(e){var t=qC(e,"x","isInf");return Mw.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return bk(e)}}}))}}),ES=rk({isFinite_:function(e){var t=qC(e,"x","isFinite");return Mw.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return bk(e)}}}))}}),_S=rk({sin_:function(e){var t=qC(e,"x","sin"),n=[t];return Mw.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),NS=rk({sinh_:function(e){var t=qC(e,"x","sinh");return Mw.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),TS=rk({softplus_:function(e){var t=qC(e,"x","softplus");return Mw.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),RS=rk({sqrt_:function(e){var t=qC(e,"x","sqrt");return Mw.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),DS=rk({step_:function(e,t){void 0===t&&(t=0);var n=qC(e,"x","step");return Mw.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return bk(e)}}}))}}),IS=rk({tan_:function(e){var t=qC(e,"x","tan");return Mw.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),AS=rk({tanh_:function(e){var t=qC(e,"x","tanh");return Mw.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return lk(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}}),OS=rk({addStrict_:function(e,t){var n=qC(e,"a","addStrict"),r=qC(t,"b","addStrict");return Ex(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),MS=rk({atan2_:function(e,t){var n,r=qC(e,"a","atan2"),o=qC(t,"b","atan2");n=Tw(r,o),r=n[0],o=n[1];var a=Jk(r.shape,o.shape);return Mw.runKernelFunc((function(e,t){var n=e.atan2(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=$k(n.square(),r.square()),o=e.mul(r.div(t)),i=Qk(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},$b:function(){var t=$k(n.square(),r.square()),o=gS(e.mul(n.div(t))),i=Qk(r.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(r.shape)}}}))}}),PS=rk({divStrict_:function(e,t){var n=qC(e,"a","div"),r=qC(t,"b","div");return Ex(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),jS=rk({floorDiv_:function(e,t){var n,r=qC(e,"a","floorDiv"),o=qC(t,"b","floorDiv");n=Tw(r,o),r=n[0],o=n[1];var a=Jk(r.shape,o.shape);return Mw.runKernelFunc((function(e,t){var n=e.floorDiv(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=Qk(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=Qk(r.shape,a);o.length>0&&(t=t.sum(o).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}}),"FloorDiv")}}),FS=rk({maximum_:function(e,t){var n,r=qC(e,"a","maximum"),o=qC(t,"b","maximum");return n=Tw(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),Jk(r.shape,o.shape),Mw.runKernelFunc((function(e,t){var n=e.maximum(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),LS=rk({maximumStrict_:function(e,t){var n=qC(e,"a","maximumStrict"),r=qC(t,"b","maximumStrict");return Ex(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),BS=rk({minimum_:function(e,t){var n,r=qC(e,"a","minimum"),o=qC(t,"b","minimum");return n=Tw(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),Jk(r.shape,o.shape),Mw.runKernelFunc((function(e,t){var n=e.minimum(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),WS=rk({minimumStrict_:function(e,t){var n=qC(e,"a","minimumStrict"),r=qC(t,"b","minimumStrict");return Ex(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),US=rk({mod_:function(e,t){var n,r=qC(e,"a","mod"),o=qC(t,"b","mod");n=Tw(r,o),r=n[0],o=n[1];var a=Jk(r.shape,o.shape);return Mw.runKernelFunc((function(e,t){var n=e.mod(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Qk(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),o=Qk(r.shape,a);return o.length>0?t.sum(o).reshape(r.shape):t}}}))}}),zS=rk({modStrict_:function(e,t){var n=qC(e,"a","modStrict"),r=qC(t,"b","modStrict");return Ex(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),HS=rk({mul_:function(e,t){var n,r=qC(e,"a","mul"),o=qC(t,"b","mul");n=Tw(r,o),r=n[0],o=n[1];var a=Jk(r.shape,o.shape);return Mw.runKernelFunc((function(e,t){var n=e.multiply(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),o=Qk(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=Qk(r.shape,a);return o.length>0?t.sum(o).reshape(r.shape):t}}}),"Mul")}}),VS=rk({mulStrict_:function(e,t){var n=qC(e,"a","mul"),r=qC(t,"b","mul");return Ex(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),qS=rk({pow_:function(e,t){var n,r=qC(e,"base","pow"),o=qC(t,"exp","pow");n=Tw(r,o),r=n[0],o=n[1];var a=Jk(r.shape,o.shape),i=[r,o];return Mw.runKernelFunc((function(e,t){var n=e.pow(r,o);return t([r,o,n]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1],o=t[2];return{a:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(lk(1))))),i=Qk(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},b:function(){var t=n.greater(0),i=n.log().where(t,bk(n)),s=e.mul(o.mul(i)),u=Qk(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}),"Pow",{},i,[!0])}}),GS=rk({powStrict_:function(e,t){return Ex(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),YS=rk({squaredDifferenceStrict_:function(e,t){var n=qC(e,"a","squaredDifferenceStrict"),r=qC(t,"b","squaredDifferenceStrict");return Ex(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),KS=rk({sub_:function(e,t){var n,r=qC(e,"a","sub"),o=qC(t,"b","sub");n=Tw(r,o),r=n[0],o=n[1];var a=Jk(r.shape,o.shape);return Mw.runKernelFunc((function(e){return e.subtract(r,o)}),{a:r,b:o},(function(e){return{a:function(){var t=e,n=Qk(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Qk(o.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(o.shape)}}}),"Sub")}}),$S=rk({subStrict_:function(e,t){var n=qC(e,"a","subStrict"),r=qC(t,"b","subStrict");return Ex(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),XS=rk({div_:function(e,t){var n,r=qC(e,"a","div"),o=qC(t,"b","div");if(n=Tw(r,o),r=n[0],o=n[1],"int32"===r.dtype&&"int32"===o.dtype)return jS(r,o);var a={a:r,b:o};return Mw.runKernelFunc((function(e,t){var n=e.realDivide(r,o);return t([r,o]),n}),a,null,zk,{})}});function QS(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=e.shape,s=n.slice();s.pop();var u=1;for(a=r;a<e.rank;++a)u*=i[a],s.push(i[a]);var l=Jx(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,o,u,l]}Object.freeze({prepareAndValidate:QS});function JS(e){return e<=30?e:Qx(e,Math.floor(Math.sqrt(e)))}function ZS(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != "+(o+e.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+e[i+o]+")")}function eE(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}ZS(n,t,e)}function tE(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,a=n.length,i=1,s=o;s<a;++s)i*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:Tx(t.shape)/u,sliceSize:i,strides:Jx(n.slice(0,o)).concat([1]),outputSize:Tx(n)}}Object.freeze({validateUpdateShape:ZS,validateInput:eE,calculateShapes:tE});function nE(e,t,n){Sx(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),Sx(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){Sx(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},o=0;o<e.rank;++o)r(o)}function rE(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function oE(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function aE(e,t,n,r,o){var a=t[o],i=n[o]||1;(e&1<<o||null==a)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),wx(0,a,s-1)}function iE(e,t,n,r,o){var a=t[o],i=n[o]||1;(e&1<<o||null==a)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),i>0?wx(0,a,s):wx(-1,a,s-1)}function sE(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function uE(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:nE,maskToAxes:rE,computeOutShape:oE,startForAxis:aE,stopForAxis:iE,isSliceContinous:sE,computeFlatOffset:uE});function lE(e){return Mw.customGrad(e)}var cE=rk({softmax_:function(e,t){void 0===t&&(t=-1);var n=qC(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return Mw.runKernelFunc((function(e,r){var o=e.softmax(n,t);return r([o]),o}),{logits:n},(function(e,n){var r=n[0],o=e.mul(r);return{logits:function(){return o.sub(o.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),dE=rk({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=qC(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return lE((function(e,n){var r=e.max(t,!0),o=e.sub(r),a=o.toFloat().sub(o.exp().sum(t,!0).log());return n([a]),{value:a,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),fE=rk({transpose_:function(e,t){var n=qC(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Sx(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){Sx(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return Mw.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},null,"Transpose",r)}}),hE=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),pE=function(){function e(){}return e.prototype.time=function(e){return mE("time")},e.prototype.read=function(e){return mE("read")},e.prototype.readSync=function(e){return mE("readSync")},e.prototype.numDataIds=function(){return mE("numDataIds")},e.prototype.disposeData=function(e){return mE("disposeData")},e.prototype.write=function(e,t,n){return mE("write")},e.prototype.move=function(e,t,n,r){return mE("move")},e.prototype.memory=function(){return mE("memory")},e.prototype.floatPrecision=function(){return mE("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return mE("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,mE("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return mE("slice")},e.prototype.stridedSlice=function(e,t,n,r){return mE("stridedSlice")},e.prototype.unstack=function(e,t){return mE("unstack")},e.prototype.reverse=function(e,t){return mE("reverse")},e.prototype.concat=function(e,t){return mE("concat")},e.prototype.neg=function(e){return mE("neg")},e.prototype.add=function(e,t){return mE("add")},e.prototype.addN=function(e){return mE("addN")},e.prototype.subtract=function(e,t){return mE("subtract")},e.prototype.multiply=function(e,t){return mE("multiply")},e.prototype.realDivide=function(e,t){return mE("realDivide")},e.prototype.floorDiv=function(e,t){return mE("floorDiv")},e.prototype.sum=function(e,t){return mE("sum")},e.prototype.prod=function(e,t){return mE("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return mE("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return mE("argMin")},e.prototype.argMax=function(e,t){return mE("argMax")},e.prototype.equal=function(e,t){return mE("equal")},e.prototype.notEqual=function(e,t){return mE("notEqual")},e.prototype.less=function(e,t){return mE("less")},e.prototype.lessEqual=function(e,t){return mE("lessEqual")},e.prototype.greater=function(e,t){return mE("greater")},e.prototype.greaterEqual=function(e,t){return mE("greaterEqual")},e.prototype.logicalNot=function(e){return mE("logicalNot")},e.prototype.logicalAnd=function(e,t){return mE("logicalAnd")},e.prototype.logicalOr=function(e,t){return mE("logicalOr")},e.prototype.where=function(e){return mE("where")},e.prototype.select=function(e,t,n){return mE("select")},e.prototype.topk=function(e,t,n){return mE("topk")},e.prototype.min=function(e,t){return mE("min")},e.prototype.minimum=function(e,t){return mE("minimum")},e.prototype.mod=function(e,t){return mE("mod")},e.prototype.max=function(e,t){return mE("max")},e.prototype.maximum=function(e,t){return mE("maximum")},e.prototype.all=function(e,t){return mE("all")},e.prototype.any=function(e,t){return mE("any")},e.prototype.squaredDifference=function(e,t){return mE("squaredDifference")},e.prototype.ceil=function(e){return mE("ceil")},e.prototype.floor=function(e){return mE("floor")},e.prototype.round=function(e){return mE("round")},e.prototype.sign=function(e){return mE("sign")},e.prototype.isNaN=function(e){return mE("isNaN")},e.prototype.isInf=function(e){return mE("isInf")},e.prototype.isFinite=function(e){return mE("isFinite")},e.prototype.pow=function(e,t){return mE("pow")},e.prototype.exp=function(e){return mE("exp")},e.prototype.expm1=function(e){return mE("expm1")},e.prototype.softmax=function(e,t){return mE("softmax")},e.prototype.log=function(e){return mE("log")},e.prototype.log1p=function(e){return mE("log1p")},e.prototype.sqrt=function(e){return mE("sqrt")},e.prototype.rsqrt=function(e){return mE("rsqrt")},e.prototype.square=function(e){return mE("square")},e.prototype.reciprocal=function(e){return mE("reciprocal")},e.prototype.relu=function(e){return mE("relu")},e.prototype.relu6=function(e){return mE("relu6")},e.prototype.prelu=function(e,t){return mE("prelu")},e.prototype.elu=function(e){return mE("elu")},e.prototype.eluDer=function(e,t){return mE("eluDer")},e.prototype.selu=function(e){return mE("selu")},e.prototype.int=function(e){return mE("int")},e.prototype.clip=function(e,t,n){return mE("clip")},e.prototype.abs=function(e){return mE("abs")},e.prototype.complexAbs=function(e){return mE("complexAbs")},e.prototype.sigmoid=function(e){return mE("sigmoid")},e.prototype.softplus=function(e){return mE("softplus")},e.prototype.sin=function(e){return mE("sin")},e.prototype.cos=function(e){return mE("cos")},e.prototype.tan=function(e){return mE("tan")},e.prototype.asin=function(e){return mE("asin")},e.prototype.acos=function(e){return mE("acos")},e.prototype.atan=function(e){return mE("atan")},e.prototype.atan2=function(e,t){return mE("atan2")},e.prototype.sinh=function(e){return mE("sinh")},e.prototype.cosh=function(e){return mE("cosh")},e.prototype.tanh=function(e){return mE("tanh")},e.prototype.asinh=function(e){return mE("asinh")},e.prototype.acosh=function(e){return mE("acosh")},e.prototype.atanh=function(e){return mE("atanh")},e.prototype.erf=function(e){return mE("erf")},e.prototype.step=function(e,t){return mE("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,mE("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return mE("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return mE("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return mE("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,mE("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return mE("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return mE("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return mE("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return mE("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return mE("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return mE("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return mE("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return mE("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return mE("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return mE("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return mE("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return mE("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return mE("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return mE("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return mE("reshape")},e.prototype.cast=function(e,t){return mE("cast")},e.prototype.tile=function(e,t){return mE("tile")},e.prototype.pad=function(e,t,n){return mE("pad")},e.prototype.transpose=function(e,t){return mE("transpose")},e.prototype.gather=function(e,t,n){return mE("gather")},e.prototype.gatherND=function(e,t){return mE("gatherND")},e.prototype.scatterND=function(e,t,n){return mE("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return mE("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return mE("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return mE("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return mE("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return mE("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return mE("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,o,a){return mE("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){return mE("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,o,a,i){return mE("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return mE("multinomial")},e.prototype.oneHot=function(e,t,n,r){return mE("oneHot")},e.prototype.cumsum=function(e,t,n,r){return mE("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return mE("nonMaxSuppression")},e.prototype.fft=function(e){return mE("fft")},e.prototype.ifft=function(e){return mE("ifft")},e.prototype.complex=function(e,t){return mE("complex")},e.prototype.real=function(e){return mE("real")},e.prototype.imag=function(e){return mE("imag")},e.prototype.cropAndResize=function(e,t,n,r,o,a){return mE("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return mE("depthToSpace")},e.prototype.split=function(e,t,n){return mE("split")},e.prototype.sparseToDense=function(e,t,n,r){return mE("sparseToDense")},e.prototype.diag=function(e){return mE("diag")},e.prototype.fill=function(e,t,n){return mE("fill")},e.prototype.onesLike=function(e){return mE("onesLike")},e.prototype.zerosLike=function(e){return mE("zerosLike")},e.prototype.linspace=function(e,t,n){return mE("linspace")},e.prototype.dispose=function(){return mE("dispose")},e}();function mE(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function vE(e,t,n,r,o,a,i){void 0===i&&(i="channelsLast");var s,u=wE(t),l=u[0],c=u[1];if("channelsLast"===i)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);s=[l,c,e[1],e[1]]}return yE(e,s,n,r,o,a,!1,i)}function gE(e,t,n,r,o,a,i){void 0===i&&(i="NDHWC");var s,u,l=CE(t),c=l[0],d=l[1],f=l[2];if("NDHWC"===i)u="channelsLast",s=[c,d,f,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[c,d,f,e[1],e[1]]}return bE(e,s,n,r,o,!1,u,a)}function yE(e,t,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3];if("channelsLast"===s)l=e[0],c=e[1],d=e[2],f=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],f=e[1],c=e[2],d=e[3]}var h,p=t[0],m=t[1],v=t[3],g=wE(n),y=g[0],b=g[1],x=wE(r),w=x[0],C=x[1],k=kE(p,w),S=kE(m,C),E=function(e,t,n,r,o,a,i,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,o){null==r&&(r=xE(e,t,n));var a=e[1],i=SE((e[0]-t+2*r)/n+1,o);Sx(Dx(i),(function(){return"The output # of rows ("+i+") must be an integer. Change the stride and/or zero pad parameters"}));var s=SE((a-t+2*r)/n+1,o);return Sx(Dx(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[i,s]}([t,n],a,r,e,s);l=d[0],c=d[1]}else if("same"===e){l=Math.ceil(t/r),c=Math.ceil(n/o);var f=Math.max(0,(l-1)*r+a-t),h=Math.max(0,(c-1)*o+i-n),p=Math.floor(f/2),m=f-p,v=Math.floor(h/2);u={top:p,bottom:m,left:v,right:h-v,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-a+1)/r),c=Math.ceil((n-i+1)/o)}return{padInfo:u,outHeight:l,outWidth:c}}(o,c,d,y,b,k,S,a),_=E.padInfo,N=E.outHeight,T=E.outWidth,R=i?v*f:v;return"channelsFirst"===s?h=[l,R,N,T]:"channelsLast"===s&&(h=[l,N,T,R]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:f,outHeight:N,outWidth:T,outChannels:R,padInfo:_,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:k,effectiveFilterWidth:S,dilationHeight:w,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function bE(e,t,n,r,o,a,i,s){void 0===a&&(a=!1),void 0===i&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3],h=u[4];if("channelsLast"===i)l=e[0],c=e[1],d=e[2],f=e[3],h=e[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);l=e[0],h=e[1],c=e[2],d=e[3],f=e[4]}var p,m=t[0],v=t[1],g=t[2],y=t[4],b=CE(n),x=b[0],w=b[1],C=b[2],k=CE(r),S=k[0],E=k[1],_=k[2],N=kE(m,S),T=kE(v,E),R=kE(g,_),D=function(e,t,n,r,o,a,i,s,u,l,c){var d,f,h,p;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,o,a){null==o&&(o=xE(e,t,r));var i=e[1],s=e[2],u=SE((e[0]-t+2*o)/r+1,a);Sx(Dx(u),(function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var l=SE((i-t+2*o)/r+1,a);Sx(Dx(l),(function(){return"The output # of rows ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var c=SE((s-t+2*o)/r+1,a);return Sx(Dx(c),(function(){return"The output # of columns ("+c+") must be an integer. Change the stride and/or zero pad parameters"})),[u,l,c,1]}([t,n,r,1],s,0,o,e,c);f=m[0],h=m[1],p=m[2]}else if("same"===e){var v=((f=Math.ceil(t/o))-1)*o+s-t,g=((h=Math.ceil(n/a))-1)*a+u-n,y=((p=Math.ceil(r/i))-1)*i+l-r,b=Math.floor(v/2),x=v-b,w=Math.floor(g/2),C=g-w,k=Math.floor(y/2);d={top:w,bottom:C,left:k,right:y-k,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/o),h=Math.ceil((n-u+1)/a),p=Math.ceil((r-l+1)/i)}return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}(o,c,d,f,x,w,C,N,T,R,s),I=D.padInfo,A=D.outDepth,O=D.outHeight,M=D.outWidth,P=a?y*h:y;return"channelsFirst"===i?p=[l,P,A,O,M]:"channelsLast"===i&&(p=[l,A,O,M,P]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:d,inWidth:f,inChannels:h,outDepth:A,outHeight:O,outWidth:M,outChannels:P,padInfo:I,strideDepth:x,strideHeight:w,strideWidth:C,filterDepth:m,filterHeight:v,filterWidth:g,effectiveFilterDepth:N,effectiveFilterHeight:T,effectiveFilterWidth:R,dilationDepth:S,dilationHeight:E,dilationWidth:_,inShape:e,outShape:p,filterShape:t}}function xE(e,t,n,r){void 0===r&&(r=1);var o=kE(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function wE(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function CE(e){return"number"==typeof e?[e,e,e]:e}function kE(e,t){return t<=1?e:e+(e-1)*(t-1)}function SE(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function EE(e){var t=wE(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function _E(e,t){return EE(e)||EE(t)}function NE(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function TE(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=mk(e.shape),o=e.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!zx(e.dtype,t))return Mw.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var i=n.real(e);return a=i.cast(t),i.dispose(),a}if("int32"===t)return n.int(e);if("bool"===t){var s=lk(0,e.dtype);return a=n.notEqual(e,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function RE(e,t){return Mw.makeTensorFromDataId(e.dataId,t,e.dtype)}function DE(e,t,n){var r=(t-e)/(n-1),o=nw(n,"float32");o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return ck(o,"float32")}Object.freeze({castTensor:TE,reshapeTensor:RE,linspaceImpl:DE,upcastType:_w,axesAreInnerMostDims:YC,combineLocations:KC,computeOutAndReduceShapes:$C,expandShapeToKeepDim:XC,assertAxesAreInnerMostDims:QC,getAxesPermutation:JC,getUndoAxesPermutation:ZC,getInnerMostAxes:ek,getBroadcastDims:Xk,getReductionAxes:Qk,assertAndGetBroadcastShape:Jk,assertParamsConsistent:tk,computeOutShape:nk,computePool2DInfo:vE,computePool3DInfo:gE,computeConv2DInfo:yE,computeConv3DInfo:bE,computeDefaultPad:xE,tupleValuesAreOne:EE,eitherStridesOrDilationsAreOne:_E,convertConv2DDataFormat:NE,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:JS});function IE(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function AE(e,t){return{real:e[2*t],imag:e[2*t+1]}}function OE(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function ME(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function PE(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,o=e.length,a=0,i=!1;r<o;){var s=n(t,e[a=r+(o-r>>>1)]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(e,t,n||jE)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function jE(e,t){return e>t?1:e<t?-1:0}function FE(e,t,n,r,o){return BE(e,t,n,r,o,0).selectedIndices}function LE(e,t,n,r,o,a){var i=BE(e,t,n,r,o,a,!0);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function BE(e,t,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1);for(var u=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>o})).sort(zE),l=a>0?-.5/a:0,c=[],d=[];c.length<n&&u.length>0;){var f=u.pop(),h=f.score,p=f.boxIndex,m=f.suppressBeginIndex;if(h<o)break;for(var v=!1,g=c.length-1;g>=m;--g){var y=WE(e,p,c[g]);if(y>=r){v=!0;break}if(f.score=f.score*UE(r,l,y),f.score<=o)break}f.suppressBeginIndex=c.length,v||(f.score===h?(c.push(p),d.push(f.score)):f.score>o&&PE(u,f,zE))}var b=c.length;return s&&(c.fill(0,b),d.fill(0,b)),{selectedIndices:ck(c,"int32"),selectedScores:ck(d,"float32"),numValidOutputs:lk(b,"int32")}}function WE(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(s-a)*(u-i),p=(d-l)*(f-c);if(h<=0||p<=0)return 0;var m=Math.max(a,l),v=Math.max(i,c),g=Math.min(s,d),y=Math.min(u,f),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(h+p-b)}function UE(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function zE(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function HE(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map((function(t){o[n]=t;var a=e.slice(r,o);return r[n]+=t,a}))}function VE(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=_k(n,e.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(e.rank),s=0;s<i.length;s++)i[s]=a[s]%e.shape[s];var u=e.locToIndex(i);o.values[r]=e.values[u]}return o.toTensor()}function qE(e,t,n,r,o){for(var a=t[t.length-1],i=[e.length/a,a],s=i[0],u=i[1],l=Lx(n,s*r),c=Lx("int32",s*r),d=0;d<s;d++){for(var f=d*u,h=e.subarray(f,f+u),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort((function(e,t){return t.value-e.value}));var v=d*r,g=l.subarray(v,v+r),y=c.subarray(v,v+r);for(m=0;m<r;m++)g[m]=p[m].value,y[m]=p[m].index}var b=t.slice();return b[b.length-1]=r,[sk(l,b,n),sk(c,b,"int32")]}function GE(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=_k(e,"int32"),a=_k([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*e.length;a.values.set(i,s)}return a.toTensor()}var YE=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},KE=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},$E=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,a=e.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function XE(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function QE(e,t){return 1===t?[e]:XE(e,t)}function JE(){var e,t,n,r,o,a,i,s,u,l;return 2===cx().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function ZE(e,t,n){void 0===n&&(n="index");var r=Jx(t);return r.map((function(t,o){return"int "+e[o]+" = "+n+" / "+t+"; "+(o===r.length-1?"int "+e[o+1]+" = "+n+" - "+e[o]+" * "+t:"index -= "+e[o]+" * "+t)+";"})).join("")}function e_(e){var t=Jx(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var t_="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function n_(e,t,n,r){var o=[];e.forEach((function(e){var t=Tx(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?o.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(o.push("uniform sampler2D "+e.name+";"),o.push("uniform int offset"+e.name+";"))}));var a,i,s=o.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?o_(e):r_(e);var o=e.shapeInfo.logicalShape,a=t.logicalShape;return o.length<=a.length&&(r+=n?function(e,t){var n,r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Xk(e.shapeInfo.logicalShape,t.logicalShape),l=d_(s),c=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+d[e+c]+" = 0;"})).join("\n");var f;f=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+c]})).join(", ");var h="return outputValue;",p=1===Tx(e.shapeInfo.logicalShape),m=1===Tx(t.logicalShape);if(1!==i||p||m){if(p&&!m)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=i-2,g=i-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?h="return vec4(outputValue.x);":u.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+f+");\n      "+h+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Rx(i,a))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l,c=d_(u),d=Xk(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,h=["x","y","z","w","u","v"];l=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords."+h[e+f]+" = 0;"})).join("\n");var p;return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+h[t+f]})).join(", "),"\n    float "+o+"() {\n      "+c+" coords = getOutputCoords();\n      "+l+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),l=t.texShape,c=JE(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),f=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+a_+"\n    "+i_+"\n    "+s_+"\n  "}(c);return t.isPacked?(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Rx(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2),a=o,i="",s="b, r, c",u=2;u<e.length-1;u++)i="\n      int b"+u+" = index / "+(a*=e[e.length-u-1])+";\n      index -= b"+u+" * "+a+";\n    "+i,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,o,a,i}(t.logicalShape,l),i=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return Rx(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=ZE(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=ZE(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=ZE(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=ZE(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),i=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(f+=u_),[f,d,i,s,a,u,n].join("\n")}function r_(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,o=r[0],a=r[1];if(1===o&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+l_(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+c_(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,o=r[0],a=r[1];if(1===a&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=l_(t);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+o+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+a+", index + "+i+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape;if(null!=o&&Rx(t,o)){var a=o[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var i=Fx(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length)return"\n      "+r_(f_(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+h_(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+c_(e)+"\n      }\n    ";var c=o[0],d=o[1],f=l_(n);return 1===d?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+f+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+f+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+f+";\n    vec2 uv = uvFromFlat("+c+", "+d+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[1]*t[2],a=t[2],i=Fx(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length)return"\n        "+r_(f_(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+h_(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+a+", 1)));\n        "+c_(e)+"\n      }\n    ";var c=e.shapeInfo.texShape,d=c[0],f=c[1],h=e.shapeInfo.flatOffset;return f===o&&null==h?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+f+".0, "+d+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":f===a&&null==h?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+f+".0, "+d+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+a+" + depth + "+l_(n)+";\n        vec2 uv = uvFromFlat("+d+", "+f+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[3],a=t[2]*o,i=t[1]*a,s=Fx(t),u=s.newShape,l=s.keptDims;if(u.length<t.length)return"\n      "+r_(f_(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+h_(["row","col","depth","depth2"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+a+", "+o+", 1)));\n        "+c_(e)+"\n      }\n    ";var c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1];return h===i&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===o&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+a+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+f+", "+h+", index + "+l_(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,s=t[1]*i,u=Fx(t),l=u.newShape,c=u.keptDims;if(l.length<t.length)return"\n      "+r_(f_(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+h_(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+i+", "+a+", "+o+")) +\n          depth3;\n        "+c_(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],p=f[1];return p===s&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===o&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+i+" + depth * "+a+" +\n          depth2 * "+o+" + depth3 + "+l_(n)+";\n      vec2 uv = uvFromFlat("+h+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Fx(t),a=o.newShape,i=o.keptDims;if(a.length<t.length)return"\n      "+r_(f_(e,a))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+h_(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    ";var s=t[5],u=t[4]*s,l=t[3]*u,c=t[2]*l,d=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+c+", "+l+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+c_(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],m=h[1];return m===d&&null==f?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+c+", "+l+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==f?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+c+" + depth * "+l+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+l_(n)+";\n      vec2 uv = uvFromFlat("+p+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function o_(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+JE().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=JE();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+a.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=o[0],i=o[1],s=JE();if(null!=o&&Rx(t,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+a+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===t[0])return"\n        "+o_(f_(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+h_(["b","row","col"],[1,2])+");\n        }\n      ";var i=a[0],s=a[1],u=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+i+", "+s+", "+u*Math.ceil(t[1]/2)+", "+u+", b, row, col);\n      return "+JE().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=i[0],u=i[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),d="int b, int row, int col",f="b * "+c+" + (row / 2) * "+l+" + (col / 2)",h=2;h<n-1;h++)d="int b"+h+", "+d,f="b"+h+" * "+(c*=t[n-h-1])+" + "+f;return"\n    vec4 "+o+"("+d+") {\n      int index = "+f+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+JE().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var a_="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",i_="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",s_="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",u_="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function l_(e){return"offset"+e}function c_(e){var t=e.name,n=Tx(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function d_(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function f_(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function h_(e,t){return t.map((function(t){return e[t]})).join(", ")}var p_=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Sx(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,c=d_(l),d=QE("coords",l);if(1===a){var f=d_(s=l+1);i="\n        "+f+" sourceLocR = "+f+"("+d.join()+", 0);\n        ++"+d[l-1]+";\n        "+f+" sourceLocG = "+f+"("+d.join()+", 0);\n        ++"+d[l-2]+";\n        "+f+" sourceLocA = "+f+"("+d.join()+", 0);\n        --"+d[l-1]+";\n        "+f+" sourceLocB = "+f+"("+d.join()+", 0);\n        --"+d[l-2]+";"}else s=l,i="\n        "+c+" sourceLocR = coords;\n        ++"+d[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+d[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+d[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+d[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],m=h.map((function(e){return"int "+e})),v=QE("sourceLocR",s-1).concat("inIdx.r"),g=QE("sourceLocG",s-1).concat("inIdx.g"),y=QE("sourceLocB",s-1).concat("inIdx.b"),b=QE("sourceLocA",s-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",C="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",k=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+h.join()+"),\n                                          vec2("+h.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+h.join()+"),\n                               vec2("+h.slice(-2).join()+"));\n      }\n      "+k+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+d[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+d[l-2]+" < "+(u[l-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},m_=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},v_=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=c-1-e.padInfo.front,p=d-1-e.padInfo.top,m=f-1-e.padInfo.left,v=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+h+", "+p+", "+m+");\n      const float avgMultiplier = float("+v+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+o+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+d+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+f+";\n                wC += "+l+") {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},g_=function(e,t,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Jk(e,t),Jk(e,n);var i="0.0";null!=r&&(Jk(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";null!=o&&(Jk(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},y_=function(e,t,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Jk(e,t),Jk(e,n);var i="vec4(0.0)";null!=r&&(Jk(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=o&&(Jk(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},b_=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Jk(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},x_="return a + b;",w_="return a - b;",C_="return a * b;",k_="return (a < 0.) ? b * a : a;",S_=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Jk(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},E_="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",__=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Jk(t,n);var o=this.outputShape.length,a="";if(r)if(0===o||1===Tx(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+d_(o)+" coords = getOutputCoords();\n        ",1===o)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=QE("coords",o);a+="\n            bool nextRowOutOfBounds =\n              ("+i[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+i[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},N_=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),T_=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),R_=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},D_=function(e){this.outputShape=[],this.outputShape=nk(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=t.length,i=t[t.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},I_=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=nk(e,t);var n=this.outputShape,r=n.length,o=d_(r),a=QE("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=i[t],c=i.slice(-2),d=i.join(),f="if ("+l+" < "+s[0]+") {\n        return getChannel(\n            getT0("+d+"), vec2("+c.join()+"));\n        }";for(u=1;u<s.length;u++){var h=s[u-1];f+="\n        if ("+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+A_(i,l,h)+"),\n            vec2("+A_(c,l,h)+"));\n        }"}var p=s.length,m=s[s.length-1];f+="\n        return getChannel(\n          getT"+p+"("+A_(i,l,m)+"),\n          vec2("+A_(c,l,m)+"));",this.userCode="\n      float getValue("+i.map((function(e){return"int "+e}))+") {\n        "+f+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function A_(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var O_=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+a+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},M_=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=a?1:2,l=a?2:3,c=a?3:1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+l+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+a+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},P_=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+o+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},j_=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+o+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},F_=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},L_=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},B_=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,a=e.padInfo.left,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=4*Math.floor(e.inChannels/4),h=e.inChannels%4,p="channelsLast"===e.dataFormat,m=p?1:2,v=p?2:3,g=p?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+v+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+l+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===h)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+f+") *\n                    getW(wR, wC, "+f+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+f+", xR, xC) *\n                    getW(wR, wC, "+f+", d2);\n              }\n\n            } else if ("+(2===h)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+f+", d2),\n                getW(wR, wC, "+f+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+f+"),\n                  getX(batch, xR, xC, "+f+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+f+", xR, xC),\n                  getX(batch, "+f+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===h)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+f+", d2),\n                getW(wR, wC, "+f+" + 1, d2),\n                getW(wR, wC, "+f+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+f+"),\n                  getX(batch, xR, xC, "+f+" + 1),\n                  getX(batch, xR, xC, "+f+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+f+", xR, xC),\n                  getX(batch, "+f+" + 1, xR, xC),\n                  getX(batch, "+f+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},W_=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+h+") *\n                  getW(wF, wR, wC, "+h+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1),\n                  getX(batch, xF, xR, xC, "+h+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2),\n                  getW(wF, wR, wC, "+h+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},U_=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,a=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=e.outChannels/e.inChannels,m="",v="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",v="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+f+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+o+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+d+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+v+"\n        setOutput(result);\n      }\n    "},z_=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,a=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=h,m="int xR; int xC; int xCOffset;",v=0;v<f;v++)for(var g=0;g<h;g++)m+="\n          vec4 xTexelR"+v+"C"+2*g+" = vec4(0.);\n          vec4 wR"+v+"C"+g+" = vec4(0.);\n          vec4 xR"+v+"C"+g+" = vec4(0.);";for(v=0;v<f;v++)for(var y=0;y<p;y++){if(m+="\n          xR = xRCorner + "+v*c+";\n          xC = xCCorner + "+(g=2*y)*d+";\n        ",1===l){if(g<h&&(m+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+v+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+v+"C"+g+" = vec4(previous.zw, xTexelR"+v+"C"+g+".xy);\n                } else {\n                  xR"+v+"C"+g+" = vec4(0, 0, xTexelR"+v+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+o+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = xTexelR"+v+"C"+g+";\n              ",g+1<h)){var b=s%2==0?Cx(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",d>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+o+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+v+"C"+g+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+v+"C"+(g+1)+" = vec4(\n                    xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+v+"C"+(g+1)+" = xTexelR"+v+"C"+(g+2)+";\n                "}}else g<h&&(m+="\n              if(xR >= 0 && xR < "+o+") {\n            ",s%2==1?(m+="\n                xCOffset = xC + 1 - "+l+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+v+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = vec4(\n                  xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".zw);\n              ",g+1<h&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+l+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+v+"C"+(g+1)+" = vec4(xTexelR"+v+"C"+(g+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+l+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+v+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = vec4(\n                  xTexelR"+v+"C"+g+".xy, xTexelR"+v+"C"+(g+2)+".xy);\n              ",g+1<h&&(m+="\n                  xR"+v+"C"+(g+1)+" = vec4(\n                    xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".zw);\n                ")),m+="}");g<h&&(m+="\n            vec4 wTexelR"+v+"C"+g+" = getW("+v+", "+g+", d1, q);\n            wR"+v+"C"+g+" = vec4(wTexelR"+v+"C"+g+".xz, wTexelR"+v+"C"+g+".xz);\n          ",g+1<h&&(m+="\n              vec4 wTexelR"+v+"C"+(g+1)+" = getW("+v+", "+(g+1)+", d1, q);\n              wR"+v+"C"+(g+1)+" =\n                vec4(wTexelR"+v+"C"+(g+1)+".xz, wTexelR"+v+"C"+(g+1)+".xz);"))}for(v=0;v<f;v++)for(g=0;g<h;g++)m+="dotProd += xR"+v+"C"+g+" * wR"+v+"C"+g+";";var x="",w="";n&&(x=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+C+"\n        "+w+"\n        setOutput(result);\n      }\n    "},H_=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],i=e[1],s=e[2],u=e[3],l=t[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var f="bilinear"===r?1:0,h=[i-1+".0",s-1+".0"],p=h[0],m=h[1],v=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=v[0],y=v[1],b=v[2],x=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=x[0],C=x[1],k=x[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+C+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+k+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+f+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},V_=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+d_(r)+" coords = getOutputCoords();\n        int end = "+q_(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+q_(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function q_(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var G_=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Fw.DENSE;var t=qw(e),n=JE();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+ZE(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Y_=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Fw.DENSE;var t=qw(e),n=JE();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+ZE(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},K_=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),$_=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},X_=function(e){this.variableNames=["A"],this.outTexUsage=Lw.DOWNLOAD;var t=JE();this.outputShape=e,this.userCode="\n      "+t_+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Q_=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Lw.DOWNLOAD;var t=JE();this.outputShape=e,this.userCode="\n      "+t_+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},J_=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=JE(),o=t[0],a=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+e_(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},Z_=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=JE(),o=t[0],a=t[1];this.outputShape=e;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+e_(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+i+"\n\n        "+r.output+" = "+s+";\n      }\n    "},eN=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},tN=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),nN=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=d_(this.rank),a=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<e.length;a++)a===t?o.push("int(getIndices("+r[a]+"))"):o.push(""+r[a]);return o.join()}(e,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},rN=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=d_(t.length),o=d_(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function oN(e,t){var n=JE();return Jw(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function aN(e,t){return iC(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function iN(e,t){return sC(e,t,new Uint16Array([0,1,2,2,1,3]))}function sN(e,t,n,r,o,a,i){lC(n,r);var s=uC(e,t),u=e.TEXTURE_2D;return Kw(e,t,(function(){return e.bindTexture(u,s)})),Kw(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),Kw(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),Kw(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),Kw(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),Kw(e,t,(function(){return e.texImage2D(u,0,o,n,r,0,a,i,null)})),Kw(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function uN(e,t,n,r,o){var a=Vw(n,r);return sN(e,t,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function lN(e,t,n,r,o){var a=Vw(n,r);return sN(e,t,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function cN(e,t,n,r,o){var a=Vw(n,r);return sN(e,t,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function dN(e,t,n,r,o){var a=Gw(n,r);return sN(e,t,a[0],a[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function fN(e,t,n,r,o){var a=Gw(n,r);return sN(e,t,a[0],a[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function hN(e,t,n,r){return Kw(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),dC(e,t,n,"clipSpacePos",r,3,20,0)&&dC(e,t,n,"uv",r,2,20,12)}function pN(e,t,n,r,o,a,i){var s,u,l;Kw(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*o*4),u=e.FLOAT,l=i.internalFormatPackedFloat),s.set(a),Kw(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,o,0,e.RGBA,u,s)})),Kw(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function mN(e,t,n,r){Kw(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?Kw(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):Kw(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),Kw(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function vN(e,t,n,r,o){var a=e.createBuffer();Kw(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*n*r;return Kw(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),Kw(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),Kw(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function gN(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function yN(e,t,n,r,o){var a=Vw(n,r),i=a[0],s=a[1],u=new Uint8Array(n*r*4);return Kw(e,t,(function(){return e.readPixels(0,0,i,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function bN(e,t,n,r,o,a,i,s){var u=e,l=new Float32Array(function(e,t){var n=Gw(e,t);return n[0]*n[1]*4}(a,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function xN(e,t,n,r){var o=new Float32Array(n*r*4);return Kw(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)})),o}var wN=Object.freeze({createVertexShader:oN,createVertexBuffer:aN,createIndexBuffer:iN,createFloat32MatrixTexture:uN,createFloat16MatrixTexture:lN,createUnsignedBytesMatrixTexture:cN,createPackedMatrixTexture:dN,createFloat16PackedMatrixTexture:fN,bindVertexProgramAttributeStreams:hN,uploadDenseMatrixToTexture:pN,uploadPixelDataToTexture:mN,createBufferFromOutputTexture:vN,downloadFloat32MatrixFromBuffer:gN,downloadByteEncodedFloatMatrixFromOutputTexture:yN,downloadPackedMatrixFromBuffer:bN,downloadMatrixFromPackedOutputTexture:xN}),CN=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=cx().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,zw(t,e)):this.gl=Hw(t);var n="WEBGL_color_buffer_float";if(1===cx().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=Qw(this.gl,this.debug,"OES_texture_float"),IC(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Qw(this.gl,this.debug,"OES_texture_half_float");else if(cx().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),IC(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Qw(this.gl,this.debug,"EXT_color_buffer_half_float");else if(cx().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",IC(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!IC(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=aN(this.gl,this.debug),this.indexBuffer=iN(this.gl,this.debug),this.framebuffer=cC(this.gl,this.debug),this.textureConfig=Yw(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return cx().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Kw(t,this.debug,(function(){return t.finish()})),Kw(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),Kw(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),Kw(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),Kw(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),Kw(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),uN(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),lN(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),cN(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),mN(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),pN(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),fN(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),dN(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(gC(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Kw(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return yN(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,o,a){return bN(this.gl,e,0,0,0,o,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return gN(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=vN(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(cx().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=o.clientWaitSync(a,0,0);return e===o.ALREADY_SIGNALED||e===o.CONDITION_SATISFIED},t=a}else cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return xN(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Zw(t,this.debug,e),r=oN(t,this.debug),o=rC(t,this.debug);return Kw(t,this.debug,(function(){return t.attachShader(o,r)})),Kw(t,this.debug,(function(){return t.attachShader(o,n)})),oC(t,this.debug,o),this.debug&&aC(t,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=hN(t,this.debug,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Kw(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&aC(this.gl,this.debug,this.program),Kw(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?hC(this.gl,this.debug,e,t):pC(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Kw(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),mC(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=Gw(t,n),o=r[0],a=r[1];this.setOutputMatrixTextureDriver(e,o,a)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&aC(this.gl,this.debug,this.program),yC(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Kw(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Kw(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Qw(this.gl,this.debug,2===cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return sx(this,void 0,void 0,(function(){var t=this;return ux(this,(function(n){switch(n.label){case 0:return[4,Mx((function(){return t.disposed||t.isQueryAvailable(e,cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Mx((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),vC(this.gl,this.debug,e,this.framebuffer),this.debug&&yC(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(vC(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&yC(this.gl)):gC(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;vC(r,this.debug,e,this.framebuffer),this.debug&&yC(r),this.outputTexture=e,Kw(r,this.debug,(function(){return r.viewport(0,0,t,n)})),Kw(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var o=this;this.throwIfDisposed(),Kw(this.gl,this.debug,(function(){return o.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function kN(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,o=t[n],a=o.shape;if(!Rx(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var i=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!Rx(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+s+" must match")}}))}var SN=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,f=s.left,h=s.top,p=o*r,m=JE(),v="channelsLast"===d,g=v?0:1,y=v?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+i+" - "+h+";\n            d0 = offsetY + "+c+" * (pos / "+p+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+a+". - "+f+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+p+".) / "+o+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+o+".));\n\n                if ("+v+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+m.output+" = result;\n      }\n    "},EN=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},_N=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},NN=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},TN=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,u=o*a-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},RN=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=u-1-e.padInfo.top,f=l-1-e.padInfo.left,h=s*u*l-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+d+", "+f+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+i+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+h+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+l+" +\n                  wR * "+l+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},DN=function(e,t,n,r,o,a,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===i&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";a&&(h=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",p="result = activation(result);");var m=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+h+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+l+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+d[0]+" * "+f[0]+");\n          result += ("+d[1]+" * "+f[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+m+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},IN=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),AN=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},ON=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=QE("rc",t),r=d_(t),o=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",o=e-2;o<e;o++)r+=n[o]+" >= "+t[o],o<e-1&&(r+="||");return r}(t,e,n),a=function(e,t,n,r){if(1===e)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var a=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),i=2;i<e;i++)a=t[t.length-1-i]+","+a;n.push(a)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},MN=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,o=d_(r),a=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+a+");\n      "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},PN=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,o=d_(r),a=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=QE("rc",r),u=QE("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",d=[o+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=1===r?2:4;p<m;p++)h+="\n        "+d[p]+"\n        if ("+f+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";h+=1===r?"} ":"}}",this.userCode="\n      const "+o+" start = "+o+"("+a+");\n      const "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+h+"\n        setOutput(result);\n      }\n    "},jN=function(e,t,n,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var a=e.filterWidth,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var p="avg"===t,m="((batch  * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + d",v="(xR * "+e.inWidth+" + xC) * "+e.inChannels+" + d",g="0.0";if(p||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+s+");\n        const ivec2 pads = ivec2("+f+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+c+";\n              wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+";\n                wC += "+l+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = "+(r?o?m:v:"wR * "+d+" + wC")+";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(a/4),x=a%4,w="\n      if ("+p+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+f+", "+h+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+c+";\n            wR += "+u+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+b+"; wC += 4) {\n            int xC = xCCorner + wC * "+l+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              getValue(batch, xR, xC + 2 * "+l+", d),\n              getValue(batch, xR, xC + 3 * "+l+", d)\n            );\n\n            "+w+"\n          }\n\n          int xC = xCCorner + "+b+";\n          if ("+(1===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+w+"\n          } else if ("+(2===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+w+"\n          } else if ("+(3===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              getValue(batch, xR, xC + 2 * "+l+", d),\n              initializationValue\n            );\n\n            "+w+"\n          }\n        }\n        setOutput("+y+");\n      }\n    "}},FN=function(e,t,n,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,u=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,f=e.effectiveFilterDepth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var y="avg"===t,b="0.0";if(y||(b="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+s+", "+u+");\n        const ivec3 pads = ivec3("+m+", "+v+", "+g+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+f+";\n              wD += "+l+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+h+";\n                wR += "+c+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+p+";\n                  wC += "+d+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = "+(r?o?"(((batch * "+e.inDepth+" + xD) * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + ch":"((xD * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + ch":"wD * "+h+" * "+p+" +\n                      wR * "+p+" + wC")+";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / count");var w=4*Math.floor(a/4),C=a%4,k="\n      if ("+y+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+s+", "+u+");\n      const ivec3 pads = ivec3("+m+", "+v+", "+g+");\n      const float initializationValue = "+b+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+b+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+f+";\n            wD += "+l+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+";\n            wR += "+c+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+w+"; wC += 4) {\n              int xC = xCCorner + wC * "+d+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+d+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+d+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+d+", ch)\n              );\n\n              "+k+"\n            }\n\n            int xC = xCCorner + "+w+";\n            if ("+(1===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+k+"\n            } else if ("+(2===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+d+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+k+"\n            } else if ("+(3===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+d+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+d+", ch),\n                initializationValue\n              );\n\n              "+k+"\n            }\n          }\n          setOutput("+x+");\n        }\n      }\n    "}},LN=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",f="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var h="";o%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(2===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(3===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+u+");\n      }\n    "},BN=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+ZE(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+e_(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},WN=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,p=1/f,m=2*Math.ceil(h)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},UN=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},zN=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+",\n          "+u[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},HN=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,p=1/f,m=2*Math.ceil(h)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+f+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},VN=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},qN=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),o=d_(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},GN=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=QE("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=d_(n);function s(n){var r=e.map((function(r,o){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+o+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+o+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+o+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},YN=function(e,t,n,r,o,a,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=d_(o.length),u=d_(a.length),l="";1===n?l="i":2===n&&(l="i, j");var c="getIndices("+l+")",d="";1===r?d="i":2===r&&(d="i, coords[1]");var f="getUpdates("+d+")",h=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+o+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+h+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+f+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},KN=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";o%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},$N=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<t.length;u++)s.push(""+a[u]),u<e&&i.push(""+a[u]);r=i.join(),o=s.join()}var l=d_(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},XN=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=d_(this.rank),r="uniform int start["+this.rank+"];",o=function(e){if(1===e)return"sourceLoc";if(e<=6)return QN.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+QN[t]+" = start["+t+"] + coords."+QN[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+o+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),QN=["x","y","z","w","u","v"],JN=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=d_(this.rank),n=QE("coords",this.rank),r=QE("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+o+")",i="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+i+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),ZN=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=d_(n.length),a=d_(n.length),i="";if(1===r)i="coords * strides + begin";else{var s=0;i=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+e+");\n      "+o+" strides = "+o+"("+t+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+i+"));\n      }\n    "},eT=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,o=tT(t,n),a=nT(e,o,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[a].shift();return this.usedTextures[a].push(i),i}return this.numUsedTextures++,this.log(),o===Bw.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===Bw.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===Bw.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===Bw.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===Bw.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var o=nT(t,tT(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],i=a.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(i,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function tT(e,t){if(e===Lw.UPLOAD)return Bw.PACKED_2X2_FLOAT32;if(e===Lw.RENDER||null==e)return function(e){return cx().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Bw.PACKED_2X2_FLOAT32:Bw.UNPACKED_FLOAT32:e?Bw.PACKED_2X2_FLOAT16:Bw.UNPACKED_FLOAT16}(t);if(e===Lw.DOWNLOAD||e===Lw.PIXELS)return Bw.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function nT(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var rT=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=d_(this.rank),a=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<e.length;o++)r.push("imod("+n[o]+", "+e[o]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},oT=1.7580993408473768,aT=1.0507009873554805,iT=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},sT="if (isnan(x)) return x;",uT="return abs(x);",lT=sT+"\n  return (x < 0.0) ? 0.0 : x;\n",cT=sT+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",dT="return (x >= 0.0) ? x : (exp(x) - 1.0);",fT="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+oT+";\n  float scale = "+aT+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",hT="return -x;",pT="return ceil(x);",mT="return floor(x);",vT="return exp(x);",gT="return exp(x) - 1.0;",yT=sT+"\n  return sin(x);\n",bT=sT+"\n  return cos(x);\n",xT=sT+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",wT=sT+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",CT=sT+"\n  return atan(x);\n",kT=sT+"return log(x + sqrt(x * x + 1.0));",ST=sT+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",ET=sT+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",_T="return x;",NT="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",TT="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",RT="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",DT=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},IT=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=QE("rc",t),r=d_(t),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},AT={};function OT(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?NT:lT;if("elu"===e)return t?RT:dT;if("relu6"===e)return t?TT:cT;if("prelu"===e)return t?E_:k_;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var MT=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!cx().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var o=Hw(cx().getNumber("WEBGL_VERSION"));r.binaryCache=((n=cx().getNumber("WEBGL_VERSION"))in AT||(AT[n]={}),AT[n]),r.gpgpu=new CN(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new eT(r.gpgpu),r.numMBBeforeWarning=null==cx().global.screen?1024:cx().global.screen.height*cx().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new hE(r,Mw),r}return ix(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(cx().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Lw.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(cx().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Lw.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,o=t.complexTensors,a=t.slice,i=t.shape,s=t.isPacked;if(null!=a){var u;u=s?new DT(i,_T):new iT(i,_T);var l=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeData(l.dataId),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,f,h=null!=this.activeTimers;return h&&(d=rw()),f="complex64"===r?IE(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(e),h&&(this.downloadWaitMs+=rw()-d),this.convertAndCacheOnCPU(e,f)},t.prototype.read=function(e){return sx(this,void 0,void 0,(function(){var t,n,r,o,a,i,s,u,l,c,d,f,h,p,m,v,g,y,b,x,w,C;return ux(this,(function(k){switch(k.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,o=n.shape,a=n.slice,i=n.dtype,s=n.complexTensors,u=n.isPacked,null!=a)return void 0,l=u?new DT(o,_T):new iT(o,_T),c=this.runWebGLProgram(l,[{dataId:e,shape:o,dtype:i}],i),d=this.read(c.dataId),this.disposeData(c.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!cx().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===cx().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return f=null,"complex64"!==i&&cx().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(e),p=this.texData.get(h.dataId),f=(C=this.gpgpu).createBufferFromTexture.apply(C,[p.texture].concat(qw(o)))),this.pendingRead.set(e,[]),"complex64"===i?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return"complex64"!==i?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return v=k.sent(),g=v[0],y=v[1],m=IE(g,y),[3,5];case 4:null==f?m=this.getValuesFromTexture(e):(b=Tx(o),m=this.gpgpu.downloadFloat32MatrixFromBuffer(f,b)),k.label=5;case 5:return null!=h&&this.disposeData(h.dataId),x=this.convertAndCacheOnCPU(e,m),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach((function(e){return e(x)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,x]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!$w(n)){if(cx().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,a=n.isPacked,i=Tx(r);if(cx().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),u=this.texData.get(s.dataId),l=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[u.texture].concat(qw(r))).subarray(0,i);return this.disposeData(s.dataId),l}var c=cx().getBool("WEBGL_PACK")&&!0===a,d=c?SC(r):r,f=c?new Q_(d):new X_(d),h=this.runWebGLProgram(f,[{shape:d,dtype:o,dataId:e}],"float32"),p=this.texData.get(h.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeData(h.dataId),m},t.prototype.time=function(e){return sx(this,void 0,void 0,(function(){var t,n,r,o,a,i,s;return ux(this,(function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),o=Nx(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),a=Nx(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return s=u.sent(),i.kernelMs=kx(s),i.getExtraProfileInfo=function(){return s.map((function(e,t){return{name:a[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:i.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,i]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:rw(),endMs:null}},t.prototype.endTimer=function(e){return cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=rw(),e)},t.prototype.getQueryTime=function(e){return sx(this,void 0,void 0,(function(){var t;return ux(this,(function(n){return cx().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,o=t.texShape,a=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,a,i)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return cx().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Mw.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&Tx(e.shape)<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Mw.keep(e.clone()),imag:Mw.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===Tx(n))return sk([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,o=sE(e.shape,t,n);if(r||!o){var a=cx().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JN(n):new XN(n),i=a.getCustomSetupFunc(t);return this.compileAndRun(a,[e],null,i)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),o=this.makeOutput(n,e.dtype),a=this.texData.get(o.dataId);Object.assign(a,r),a.shape=n,a.dtype=e.dtype;var i=uE(t,e.strides);r.slice&&(i+=r.slice.flatOffset),a.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),o},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var o=oE(t,n,r);if(o.some((function(e){return 0===e})))return sk([],o);var a=new ZN(t,r,o);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,t){var n=cx().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GN(e.shape,t):new qN(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return ak(e)})),r=e.map((function(e){return ik(e)}));return ok(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>cx().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(e.length/2),a=this.concat(e.slice(0,o),t),i=this.concat(e.slice(o),t);return this.concat([a,i],t)}if(cx().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new I_(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var u=nk(e.map((function(e){return e.shape})),t),l=e.map((function(e){return e.as2D(-1,Tx(e.shape.slice(t)))})),c=new D_(l.map((function(e){return e.shape})));return this.compileAndRun(c,l).reshape(u)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(cx().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,hT,e.dtype);var t=new iT(e.shape,hT);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var o=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],i=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===o||1===a)&&i>1e3){n&&(e=fE(e,[0,2,1])),r&&(t=fE(t,[0,2,1]));var u=1===a?e:e.as3D(s,i,1),l=1===a?2:1,c=1===a?t.as3D(s,1,i):t;return this.multiply(u,c).sum(l,!0)}var d=_w(e.dtype,t.dtype),f=new DN(e.shape,[s,o,a],n,r);return this.compileAndRun(f,[e,t],d)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,a=e.bias,i=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],l=o?n.shape[1]:n.shape[2],c=t.shape[0],d=_w(t.dtype,n.dtype),f=null!=a,h=null!=s,p=i?OT(i,!0):null,m=new DN(t.shape,[c,u,l],r,o,f,p,h),v=[t,n];return a&&v.push(a),s&&v.push(s),this.compileAndRun(m,v,d)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),o=new b_("return areal * breal - aimag * bimag;",e.shape,t.shape),a=new b_("return areal * bimag + aimag * breal;",e.shape,t.shape),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(o,i),u=this.compileAndRun(a,i),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,C_,e.dtype);var c=new S_(C_,e.shape,t.shape);return this.compileAndRun(c,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,a){var i=[e,t,n],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;if(null!=o&&(u=o.shape,i.push(o)),cx().getBool("WEBGL_PACK_NORMALIZATION")){var l=new y_(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,i)}var c=new g_(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,i)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){var a=cx().getBool("WEBGL_PACK_NORMALIZATION")?new NN(e.shape,t,n,r,o):new EN(e.shape,t,n,r,o);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,t,n,r,o,a,i){var s=new _N(t.shape,r,o,a,i);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return iw(e)}));return VE(_k(e.shape,e.dtype,n),t)}var r=new rT(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=cx().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PN(e.shape,t,n):new MN(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new nN(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){Sx(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=Fk(e.shape,t,r),a=Lk(o.length,t.length),i=Bk(e.shape,t,r),s=Wk(n,t.length),u=Uk(i,n,t.length);return fE(e.reshape(o),a).reshape(i).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){Sx(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var a=1+t.length;a<e.shape.length;++a)o.push([0,0]);var i=e.pad(o),s=Fk(i.shape,t,r,!1),u=Lk(s.length,t.length,!1),l=Bk(i.shape,t,r,!1);return fE(i.reshape(s),u).reshape(l)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],o=e.shape[1],a=JS(o),i=new LN({windowSize:a,inSize:o,batchSize:r},t),s=this.compileAndRun(i,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],o=e.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var a=JS(o),i=new $E({windowSize:a,inSize:o,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var u=this.compileAndRun(i,s,"int32");return 1===u.shape[1]?u:this.argReduce(e,t,u)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,o=JS(r[r.length-1]),a=new p_(r,o,t,null==n),i=null==n?[e]:[e,n],s=this.compileAndRun(a,i,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){QC("sum",t,e.rank);var n=$C(e.shape,t),r=n[0],o=Tx(n[1]),a=e.as2D(-1,o),i=Nw(e.dtype);return this.reduce(a,"sum",i).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=$C(e.shape,t),r=n[0],o=Tx(n[1]),a=e.as2D(-1,o),i=Nw(e.dtype);return this.reduce(a,"prod",i).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,o=JC([r],e.rank),a=e;null!=o&&(a=fE(e,o),r=ek(1,e.rank)[0]);var i=function(e,t,n){for(var r=[],o=e.length,a=0;a<o;a++)a!==t?r.push(e[a]):r.push(n);return r}(a.shape,r,n),s=Tx([a.shape[r]]),u=a.as2D(-1,s),l=Nw(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(i);return null!=o&&(c=fE(c,ZC(o))),c},t.prototype.segOpCompute=function(e,t,n,r,o){var a=e.shape[0],i=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=Qx(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Qx(e,n+1);return n}(i,o),u=new KN({windowSize:s,inSize:i,batchSize:a,numSegments:o},t),l=this.compileAndRun(u,[e,n],r);return l.shape[1]===o?l:(n=gk(0,o).tile([i/s]),this.segOpCompute(l,t,n,r,o))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(QC("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!cx().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var o=$C(e.shape,r),a=o[0],i=Tx(o[1]),s=e.as2D(-1,i);return this.argReduce(s,n).reshape(a)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var o=new V_(e.shape,n,r);return this.compileAndRun(o,[e])},t.prototype.equal=function(e,t){if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new S_("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new S_("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new S_("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new S_("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new S_("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new S_("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new iT(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new S_("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new S_("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new $N(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],_w(t.dtype,n.dtype))},t.prototype.where=function(e){zC("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return GE(e.shape,t)},t.prototype.topk=function(e,t,n){return qE(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){QC("min",t,e.rank);var n=$C(e.shape,t),r=n[0],o=Tx(n[1]),a=e.as2D(-1,o);return this.reduce(a,"min",a.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new __("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new S_("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new __("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new S_("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);QC("max",t,e.rank);var n=$C(e.shape,t),r=n[0],o=Tx(n[1]),a=e.as2D(-1,o);return this.reduce(a,"max",a.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new __("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new S_("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){QC("all",t,e.rank);var n=$C(e.shape,t),r=n[0],o=Tx(n[1]),a=e.as2D(-1,o);return this.reduce(a,"all",a.dtype).reshape(r)},t.prototype.any=function(e,t){QC("any",t,e.rank);var n=$C(e.shape,t),r=n[0],o=Tx(n[1]),a=e.as2D(-1,o);return this.reduce(a,"any",a.dtype).reshape(r)},t.prototype.floorDiv=function(e,t){if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new S_("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,x_);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=_w(e.dtype,t.dtype);if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,x_,n);var r=new S_(x_,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new DT(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,o){void 0===o&&(o=!1);var a=new __(n,e.shape,t.shape,o);return this.compileAndRun(a,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,o=this.texData.get(e.dataId),a=this.texData.get(t.dataId),i=[[o.complexTensors.real,a.complexTensors.real],[o.complexTensors.imag,a.complexTensors.imag]].map((function(o){var a=o[0],i=o[1],s=r.makeComplexComponentTensorInfo(e,a),u=r.makeComplexComponentTensorInfo(t,i),l=new S_(n,e.shape,t.shape);return r.compileAndRun(l,[s,u],_w(a.dtype,i.dtype))})),s=i[0],u=i[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>cx().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var o=e.map((function(e){return e.dtype})).reduce((function(e,t){return _w(e,t)})),a=e.map((function(e){return e.shape})),i=cx().getBool("WEBGL_PACK")?new KE(e[0].shape,a):new YE(e[0].shape,a);return this.compileAndRun(i,e,o)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,w_);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=_w(e.dtype,t.dtype);if(cx().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,w_,e.dtype);var r=new S_(w_,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new __("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new S_("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=_w(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(cx().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,pT,e.dtype);var t=new iT(e.shape,pT);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(cx().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,mT,e.dtype);var t=new iT(e.shape,mT);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new iT(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new iT(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new iT(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new iT(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new iT(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(cx().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,vT,e.dtype);var t=new iT(e.shape,vT);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(cx().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,gT,e.dtype);var t=new iT(e.shape,gT);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=jx([t],e.shape),r=this.max(e,n),o=XC(r.shape,n),a=this.subtract(e,r.reshape(o)),i=this.exp(a),s=this.sum(i,n).reshape(o);return XS(i,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(cx().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new iT(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new iT(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new iT(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new iT(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new iT(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=cx().getBool("WEBGL_PACK")?new DT(e.shape,NT):new iT(e.shape,lT),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=cx().getBool("WEBGL_PACK")?new DT(e.shape,TT):new iT(e.shape,cT),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new __(E_,e.shape,t.shape):new S_(k_,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(cx().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,RT,e.dtype);var t=new iT(e.shape,dT);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new __("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new S_("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new iT(e.shape,fT);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new iT(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,o=(r=cx().getBool("WEBGL_PACK_CLIP")?new T_(e.shape):new N_(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,o)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(cx().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,uT,e.dtype);var t=new iT(e.shape,uT);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new R_(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new iT(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new iT(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new iT(e.shape,yT);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new iT(e.shape,bT);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new iT(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new iT(e.shape,xT);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new iT(e.shape,wT);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new iT(e.shape,CT);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new __("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new S_("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new iT(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new iT(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new iT(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new iT(e.shape,kT);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new iT(e.shape,ST);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new iT(e.shape,ET);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new iT(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new iT(e.shape,function(e){return void 0===e&&(e=0),sT+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,o,a){var i=e.shape,s=this.texData.get(e.dataId),u=n.inChannels,l=i[0]*i[1]*i[2],c=n.outChannels,d="channelsLast"===n.dataFormat,f=(1===l||1===c)&&u>1e3,h=i[2]%2!=0&&!!s.isPacked;if(f||!cx().getBool("WEBGL_LAZILY_UNPACK")||!cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!h){var p=d?i[0]*i[1]*i[2]:i[0]*i[2]*i[3],m=this.reshape(e,[1,p,n.inChannels]),v=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:v,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:a}),n.outShape)}var g=d?i[0]*i[1]*(i[2]+1):i[0]*i[2]*(i[3]+1),y={dataId:e.dataId,shape:[1,g,n.inChannels],dtype:e.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,Sx(NC(s.shape,y.shape),(function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"}));var x=this.reshape(t,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:x,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:a}),C=this.texData.get(w.dataId);return Sx(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=b,C.shape=n.outShape,Mw.makeTensorFromDataId(w.dataId,n.outShape,w.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,o,a){var i=n.filterWidth,s=n.filterHeight,u=n.inChannels,l=n.outWidth,c=n.outHeight,d="channelsLast"===n.dataFormat,f=i*s*u,h=c*l,p=[f,h],m=e.squeeze([0]),v=t.reshape([1,f,-1]),g=new SN(p,m.shape,n),y=this.compileAndRun(g,[m]).reshape([1,p[0],p[1]]),b=null!=r,x=null!=a,w=o?OT(o,!0):null,C=new DN(y.shape,[1,h,n.outChannels],!0,!1,b,w,x),k=[y,v];r&&k.push(r),x&&k.push(a);var S=this.compileAndRun(C,k);return d?S.reshape([1,c,l,n.outChannels]):S.reshape([1,n.outChannels,c,l])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,a=e.activation,i=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,o,a,i);if(cx().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,o,a,i);var s=null!=o,u=null!=i,l=a?OT(a,!1):null,c=new B_(r,s,l,u),d=[t,n];return o&&d.push(o),i&&d.push(i),this.compileAndRun(c,d)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(cx().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new B_(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new M_(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new O_(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,o=e.convInfo,a=e.bias,i=e.activation,s=e.preluActivationWeights,u=cx().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,l=i?OT(i,u):null,c=[n,r],d=null!=a,f=null!=s;return d&&c.push(a),f&&c.push(s),u?(t=new z_(o,d,l,f),this.compileAndRun(t,c)):(t=new U_(o,d,l,f),this.compileAndRun(t,c))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return cx().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new z_(n),this.compileAndRun(r,[e,t])):(r=new U_(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new L_(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new F_(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new W_(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new j_(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new P_(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new jN(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new jN(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var o=new jN(r,"max",!0),a=this.compileAndRun(o,[t]),i=new TN(r),s=this.compileAndRun(i,[e,a],t.dtype);return a.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new m_(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return TE(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,a=0;a<e.rank;a++)a!==t&&(r[o++]=e.shape[a]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[t]=a,u[a]=this.slice(e,i,s).reshape(r);return u},t.prototype.avgPool3d=function(e,t){var n=new FN(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new v_(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new FN(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var o=new FN(r,"max",!0),a=this.compileAndRun(o,[t]),i=new RN(r),s=this.compileAndRun(i,[e,a],t.dtype);return a.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!NC(e.shape,t)&&(null===n.texture||!NC(n.shape,t))){var r=this.packedReshape(e,t);return Mw.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return RE(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var o=cx().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new zN(e.shape,t,n,r):new UN(e.shape,t,n,r);return this.compileAndRun(o,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new WN(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var o=new VN(e.shape,t,n,r);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new HN(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var o=t?e:cE(e),a=o.shape[0],i=o.shape[1],s=new IN(a,i,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[o],"int32",u)},t.prototype.oneHot=function(e,t,n,r){var o=new AN(e.size,t,n,r);return this.compileAndRun(o,[e])},t.prototype.diag=function(e){var t=new $_(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return zC("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),FE(e.dataSync(),t.dataSync(),n,r,o)},t.prototype.cropAndResize=function(e,t,n,r,o,a){var i=new H_(e.shape,t.shape,r,o,a);return this.compileAndRun(i,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){Sx(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],o="NHWC"===n?e.shape[1]:e.shape[2],a="NHWC"===n?e.shape[2]:e.shape[3],i="NHWC"===n?e.shape[3]:e.shape[1],s=o*t,u=a*t,l=i/(t*t),c=new K_("NHWC"===n?[r,s,u,l]:[r,l,s,u],t,n);return this.compileAndRun(c,[e])},t.prototype.split=function(e,t,n){return HE(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=tE(0,e,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=[u/i,i],c=e.reshape([a,o]),d=t.reshape([a,i]);if(0===u)return RE(sk([]),n);var f=lk(0),h=new YN(a,o,c.rank,d.rank,s,l);return this.compileAndRun(h,[d,c,f]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var o=tE(0,e,n),a=o.sliceRank,i=o.numUpdates,s=o.strides,u=o.outputSize,l=new YN(i,a,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new eN("return real * expR - imag * expI;",e.shape,t),o=new eN("return real * expI + imag * expR;",e.shape,t),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],i=this.compileAndRun(r,a),s=this.compileAndRun(o,a),u=this.complex(i,s).as2D(e.shape[0],e.shape[1]);return i.dispose(),s.dispose(),u},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=QS(e,t),a=o[0],i=o[1],s=o[2],u=o[3],l=t.reshape([i,r]),c=e.reshape([e.size/s,s]),d=new rN(r,u,[i,s]);return this.compileAndRun(d,[c,l]).reshape(a)},t.prototype.fill=function(e,t,n){if("string"===(n=n||$x(t))){var r=Bx(n,Tx(e));return r.fill(t),Mw.makeTensor(r,e,n,this)}var o=new tN(e,t),a=o.getCustomSetupFunc(t);return this.compileAndRun(o,[],n,a)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return DE(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return Mw.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new IT(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new ON(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[CC(e.shape)].concat(kC(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[CC(t)].concat(kC(t)),a=new BN(o,n),i=this.runWebGLProgram(a,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,o=n.shape,a=n.dtype,i=SC(o);return t=r?new Y_(i):new G_(i),{dtype:a,shape:o,dataId:this.runWebGLProgram(t,[{shape:i,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,o){var a=this;void 0===o&&(o=!1);var i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===Fw.DENSE){var u=qw(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===Tx(i.shape))return s.values=Lx(i.dtype,0),i;var l=[],c=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Tx(t.shape)<=cx().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!NC(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),l.push(t),n=a.texData.get(t.dataId),r.shape=o}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);var d,f={shape:i.shape,texData:s,isUniform:!1},h=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var o=e.userCode;return e.constructor.name+"_"+r+"_"+o}(e,c,f),p=this.getAndSaveBinary(h,(function(){return function(e,t,n,r){var o=t.userCode,a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=n_(a,s,o,t.packedInputs),l=e.createProgram(u),c=null,d=e.getUniformLocation(l,"NAN",!1);1===cx().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(l,"INFINITY",!1));for(var f={},h=0;h<t.variableNames.length;h++){var p=t.variableNames[h];f[p]=e.getUniformLocation(l,p,!1),f["offset"+p]=e.getUniformLocation(l,"offset"+p,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:f,inShapeInfos:i,outShapeInfo:s,infLoc:c,nanLoc:d}}(a.gpgpu,e,c,f)})),m=null!=this.activeTimers;if(m&&(d=this.startTimer()),function(e,t,n,r,o){kN(t.inShapeInfos,n),kN([t.outShapeInfo],[r]);var a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a,i[0],i[1]):e.setOutputMatrixTexture(a,i[0],i[1]),e.setProgram(t.webGLProgram),1===cx().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var o=t.program.variableNames[r],a=t.uniformLocations[o],i=t.uniformLocations["offset"+o];if(null!=a)if(n.isUniform)if(Tx(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(a,s)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,r)})),null!=o&&o(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,p,c,f,r),l.forEach((function(e){return a.disposeData(e.dataId)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)})),!cx().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var v=this.unpackTensor(i);return this.disposeData(i.dataId),v}return i},t.prototype.compileAndRun=function(e,t,n,r,o){void 0===o&&(o=!1),n=n||t[0].dtype;var a=this.runWebGLProgram(e,t,n,r,o);return Mw.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(cx().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=WC((function(){if(!cx().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=cx().getBool("DEBUG");cx().set("DEBUG",!1);var n=e.abs(lk(1e-8)).dataSync()[0];if(cx().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,a=n.values,i=n.texture,s=n.usage,u=n.isPacked;if(null==i){var l,c=null!=this.activeTimers;c&&(l=rw());var d=n.texShape;if(null==d&&(d=EC(r,u),n.texShape=d),null!=a){var f=SC(r),h=void 0,p=d[1],m=d[0],v=a instanceof Uint8Array;u?(p=(t=Gw(d[0],d[1]))[0],m=t[1],h=new Z_(f,[m,p],v)):h=new J_(f,[m,p],v);var g=this.makeTensorInfo([m,p],o);this.texData.get(g.dataId).usage=v?Lw.PIXELS:Lw.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,m,a);var y=this.runWebGLProgram(h,[g],o,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,c&&(this.uploadWaitMs+=rw()-l)}else{var x=this.acquireTexture(d,s,o,u);n.texture=x}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*Vx(t)},t}(pE);function PT(e,t){return e(t={exports:{}},t.exports),t.exports}Pw()&&Mw.registerBackend("webgl",(function(){return new MT}),2),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var jT=PT((function(e){!function(e,t){function n(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var o=new n(e),a=t&&t.state,i=o.next;return i.int32=function(){return 4294967296*o.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,a&&("object"==typeof a&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.alea=o}(0,e)})),FT=PT((function(e){!function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&("object"==typeof a&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.xor128=o}(0,e)})),LT=PT((function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&("object"==typeof a&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)})),BT=PT((function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&(a.x&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)})),WT=PT((function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),o=0,a=-32;a<u;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&(a.X&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)})),UT=PT((function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var o=new n(e),a=t&&t.state,i=function(){return(o.next()>>>0)/4294967296};return i.double=function(){do{var e=((o.next()>>>11)+(o.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=o.next,i.quick=i,a&&("object"==typeof a&&r(a,o),i.state=function(){return r(o,{})}),i}t&&t.exports?t.exports=o:this.tychei=o}(0,e)})),zT=PT((function(e){!function(t,r){var o,a=this,i=256,s="random",u=r.pow(i,6),l=r.pow(2,52),c=2*l,d=255;function f(e,n,d){var f=[],g=m(function e(t,n){var r,o=[],a=typeof t;if(n&&"object"==a)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==a?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,v(t)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(i):(e=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(e)),v(e)}catch(e){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,v(t)]}}():e,3),f),y=new h(f),b=function(){for(var e=y.g(6),t=u,n=0;e<l;)e=(e+n)*i,t*=i,n=y.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(v(y.S),t),(n.pass||d||function(e,t,n,o){return o&&(o.S&&p(o,y),e.state=function(){return p(y,{})}),n?(r[s]=e,t):e})(b,g,"global"in n?n.global:this==r,n.state)}function h(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<i;)s[o]=o++;for(o=0;o<i;o++)s[o]=s[a=d&a+e[o%n]+(t=s[o])],s[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,s=r.S;e--;)t=s[o=d&o+1],n=n*i+s[d&(s[o]=s[a=d&a+t])+(s[a]=t)];return r.i=o,r.j=a,n})(i)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",o=0;o<r.length;)t[d&o]=d&(n^=19*t[d&o])+r.charCodeAt(o++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=f,m(r.random(),t),e.exports){e.exports=f;try{o=n(3367)}catch(e){}}}([],Math)}));zT.alea=jT,zT.xor128=FT,zT.xorwow=LT,zT.xorshift7=BT,zT.xor4096=WT,zT.tychei=UT;var HT=zT.alea,VT=rk({addN_:function(e){Sx(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Sx(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return qC(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Rx(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Mw.runKernelFunc((function(e,n){return e.addN(t)}),r,null,"AddN")}});function qT(){BC("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function GT(e){return 0===e.rank||1===e.rank?e.as4D(1,1,1,e.size):2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function YT(e,t,n,r,o,a){null==a&&(a=.001);var i,s,u=qC(e,"x","batchNorm"),l=qC(t,"mean","batchNorm"),c=qC(n,"variance","batchNorm");null!=o&&(i=qC(o,"scale","batchNorm")),null!=r&&(s=qC(r,"offset","batchNorm")),Sx(l.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Sx(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Sx(null==i||l.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d={x:u,scale:i,offset:s,mean:l,variance:c},f={varianceEpsilon:a};return Mw.runKernelFunc((function(e,t){var n=GT(u),r=e.batchNormalization(n,KT(l),KT(c),a,KT(i),KT(s));return t([u,l,c,i]),r}),d,null,"FusedBatchNorm",f).reshape(u.shape)}function KT(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}var $T=rk({batchNormalization_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),qT(),YT(e,t,n,a,o,r)}}),XT=rk({batchNorm_:YT});function QT(e,t,n,r,o,a){var i,s,u=qC(e,"x","batchNorm"),l=qC(t,"mean","batchNorm"),c=qC(n,"variance","batchNorm");return null!=o&&(i=qC(o,"scale","batchNorm")),null!=r&&(s=qC(r,"offset","batchNorm")),Sx(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Sx(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),Sx(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=i&&Sx(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."})),null!=s&&Sx(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),XT(u,l,c,s,i,a)}var JT=rk({batchNormalization2d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),qT(),QT(e,t,n,a,o,r)}}),ZT=rk({batchNorm2d_:QT});function eR(e,t,n,r,o,a){var i,s,u=qC(e,"x","batchNorm"),l=qC(t,"mean","batchNorm"),c=qC(n,"variance","batchNorm");return null!=o&&(i=qC(o,"scale","batchNorm")),null!=r&&(s=qC(r,"offset","batchNorm")),Sx(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Sx(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),Sx(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=i&&Sx(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."})),null!=s&&Sx(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),XT(u,l,c,s,i,a)}var tR=rk({batchNormalization3d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),qT(),eR(e,t,n,a,o,r)}}),nR=rk({batchNorm3d_:eR});function rR(e,t,n,r,o,a){var i,s,u=qC(e,"x","batchNorm"),l=qC(t,"mean","batchNorm"),c=qC(n,"variance","batchNorm");return null!=o&&(i=qC(o,"scale","batchNorm")),null!=r&&(s=qC(r,"offset","batchNorm")),Sx(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),Sx(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),Sx(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=i&&Sx(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."})),null!=s&&Sx(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),XT(u,l,c,s,i,a)}var oR=rk({batchNormalization4d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),qT(),rR(e,t,n,a,o,r)}}),aR=rk({batchNorm4d_:rR}),iR=rk({broadcastTo_:function(e,t){var n=qC(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var a=n.shape,i=Array.from(t),s=t.length-1;s>=0;s--)if(a[s]===t[s])i[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var u=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return n.clone();var l={x:n},c={shape:t,inputShape:a};return Mw.runKernelFunc((function(e){return e.tile(n,i)}),l,(function(e){return{x:function(){return e.sum(u,!0)}}}),Vk,c)}}),sR=rk({clone_:function(e){var t=qC(e,"x","clone",null);return Mw.runKernelFunc((function(){return Mw.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{x:t},null,Gk)}}),uR=rk({logicalAnd_:function(e,t){var n=qC(e,"a","logicalAnd","bool"),r=qC(t,"b","logicalAnd","bool");return Jk(n.shape,r.shape),Mw.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),lR=rk({logicalNot_:function(e){var t=qC(e,"x","logicalNot","bool");return Mw.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),cR=rk({logicalOr_:function(e,t){var n=qC(e,"a","logicalOr","bool"),r=qC(t,"b","logicalOr","bool");return Jk(n.shape,r.shape),Mw.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),dR=rk({logicalXor_:function(e,t){var n=qC(e,"a","logicalXor","bool"),r=qC(t,"b","logicalXor","bool");return Jk(n.shape,r.shape),cR(e,t).logicalAnd(uR(e,t).logicalNot())}}),fR=rk({where_:function(e,t,n){var r=qC(t,"a","where"),o=qC(n,"b","where"),a=qC(e,"condition","where","bool");return Ex(r.shape,o.shape,"Error in where: "),1===a.rank?Sx(a.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Ex(a.shape,o.shape,"Error in where: "),Mw.runKernelFunc((function(e,t){var n=e.select(a,r,o);return t([a]),n}),{$condition:a,$a:r,$b:o},(function(e,t){var n=t[0];return{$condition:function(){return bk(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),hR=function(e){return sx(this,void 0,void 0,(function(){var t,n,r;return ux(this,(function(o){switch(o.label){case 0:return[4,(t=qC(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=GE(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},pR=rk({divNoNan_:function(e,t){var n,r=qC(e,"a","div"),o=qC(t,"b","div");r=(n=Tw(r,o))[0],o=n[1];var a=XS(r,o),i=bk(a),s=o.equal(i);return fR(s,i,a)}}),mR=rk({tile_:function(e,t){var n=qC(e,"x","tile",null);Sx(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],o={x:n},a={reps:t};return Mw.runKernelFunc((function(e,r){var o=e.tile(n,t);return r([n]),o}),o,null,Yk,a,r)}}),vR=rk({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var o=_k([e,t],r),a=e<=t?e:t,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return mR(Ik(s,0),[n[0],1,1]);if(2===n.length)return mR(Ik(Ik(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return mR(Ik(Ik(Ik(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),gR=rk({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var o=qC(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=1===i?o.as2D(1,-1):o,u=Mw.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===i?u.as1D():u}}),yR=rk({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=qC(e,"indices","oneHot","int32"),a=o.shape.concat([t]),i={indices:o=o.flatten()},s={depth:t,onValue:n,offValue:r};return Mw.runKernelFunc((function(e,a){return a([o]),e.oneHot(o,t,n,r)}),i,null,qk,s).reshape(a)}}),bR=rk({pad_:function(e,t,n){void 0===n&&(n=0);var r=qC(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n},a={x:r};return Mw.runKernelFunc((function(e,o){return o([r]),e.pad(r,t,n)}),a,null,Kk,o)}}),xR=rk({pad1d_:function(e,t,n){return void 0===n&&(n=0),Sx(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),bR(e,[t],n)}}),wR=rk({pad2d_:function(e,t,n){return void 0===n&&(n=0),Sx(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bR(e,t,n)}}),CR=rk({pad3d_:function(e,t,n){return void 0===n&&(n=0),Sx(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bR(e,t,n)}}),kR=rk({pad4d_:function(e,t,n){return void 0===n&&(n=0),Sx(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bR(e,t,n)}}),SR=rk({rand_:function(e,t,n){var r=Tx(e),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=t();return Mw.makeTensor(o,e,n)}});function ER(){return 32===Mw.backend.floatPrecision()?.001:.1}function _R(e,t,n){var r=!0;if((Hx(e)||Hx(t))&&(r=!1),Hx(e)&&Hx(t)&&(r=!0),r){var o=e.constructor.name,a=t.constructor.name;if(o!==a)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+a)}if(Array.isArray(e)&&Array.isArray(t)){var i=HC(e),s=HC(t);if(!Rx(i,s))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+s+"]")}var u=Hx(e)?e:Nx(e),l=Hx(t)?t:Nx(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var d=u[c],f=l[c];if(!n(d,f))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+f+".\nActual:   "+u+".\nExpected: "+l+".")}}function NR(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=ER()),_R(e,t,(function(e,t){return NR(e,t,n)}))},testEpsilon:ER,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Gx(e)||Gx(e[0])||Gx(t)||Gx(t[0])?_R(e,n,(function(e,t){return e==t})):_R(e,t,(function(e,t){return NR(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=ER()),!NR(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}});var TR=function(){function e(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=HT(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var o=void 0,a=void 0,i=void 0;do{i=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),RR=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var o=r||Math.random();this.randu=HT(o.toString()),this.randn=new TR(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,o,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-a+Math.log(a)),(o=this.randu())<t||Math.log(o)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),DR=function(){function e(e,t,n,r){var o=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=HT(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}(),IR=rk({randomGamma_:function(e,t,n,r,o){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new RR(t,n,r,o),i=_k(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),AR=rk({randomNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new TR(t,n,r,!1,o),i=_k(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),OR=rk({randomUniform_:function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=_k(e,r),i=new DR(t,n,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),MR=rk({square_:function(e){var t=qC(e,"x","square"),n=[t];return Mw.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),PR=rk({squaredDifference_:function(e,t){var n,r=qC(e,"a","squaredDifference"),o=qC(t,"b","squaredDifference");n=Tw(r,o),r=n[0],o=n[1],Jk(r.shape,o.shape);var a={a:r,b:o},i=[r,o];return Mw.runKernelFunc((function(e,t){var n=e.squaredDifference(r,o);return t([r,o]),n}),a,(function(e,t){var n=t[0],r=t[1],o=lk(2);return{a:function(){return e.mul(n.sub(r).mul(o))},b:function(){return e.mul(r.sub(n).mul(o))}}}),Hk,{},i,[])}}),jR=rk({truncatedNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var a=new TR(t,n,r,!0,o),i=_k(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),FR=rk({equal_:function(e,t){var n,r=qC(e,"a","equal"),o=qC(t,"b","equal");return n=Tw(r,o),r=n[0],o=n[1],Jk(r.shape,o.shape),Mw.runKernelFunc((function(e){return e.equal(r,o)}),{$a:r,$b:o})}}),LR=rk({equalStrict_:function(e,t){var n=qC(e,"a","equalStrict"),r=qC(t,"b","equalStrict");return Ex(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),BR=rk({greater_:function(e,t){var n,r=qC(e,"a","greater"),o=qC(t,"b","greater");return n=Tw(r,o),r=n[0],o=n[1],Jk(r.shape,o.shape),Mw.runKernelFunc((function(e){return e.greater(r,o)}),{a:r,b:o},null,"Greater")}}),WR=rk({greaterEqual_:function(e,t){var n,r=qC(e,"a","greaterEqual"),o=qC(t,"b","greaterEqual");return n=Tw(r,o),r=n[0],o=n[1],Jk(r.shape,o.shape),Mw.runKernelFunc((function(e,t){var n=e.greaterEqual(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return bk(n)},b:function(){return bk(r)}}}),"GreaterEqual")}}),UR=rk({greaterEqualStrict_:function(e,t){var n=qC(e,"a","greaterEqualStrict"),r=qC(t,"b","greaterEqualStrict");return Ex(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),zR=rk({greaterStrict_:function(e,t){var n=qC(e,"a","greaterStrict"),r=qC(t,"b","greaterStrict");return Ex(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),HR=rk({less_:function(e,t){var n,r=qC(e,"a","less"),o=qC(t,"b","less");return n=Tw(r,o),r=n[0],o=n[1],Jk(r.shape,o.shape),Mw.runKernelFunc((function(e){return e.less(r,o)}),{a:r,b:o},null,"Less")}}),VR=rk({lessEqual_:function(e,t){var n,r=qC(e,"a","lessEqual"),o=qC(t,"b","lessEqual");return n=Tw(r,o),r=n[0],o=n[1],Jk(r.shape,o.shape),Mw.runKernelFunc((function(e,t){var n=e.lessEqual(r,o);return t([r,o]),n}),{a:r,b:o},null,"LessEqual")}}),qR=rk({lessEqualStrict_:function(e,t){var n=qC(e,"a","lessEqualStrict"),r=qC(t,"b","lessEqualStrict");return Ex(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),GR=rk({lessStrict_:function(e,t){var n=qC(e,"a","lessStrict"),r=qC(t,"b","lessStrict");return Ex(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),YR=rk({notEqual_:function(e,t){var n,r=qC(e,"a","notEqual"),o=qC(t,"b","notEqual");return n=Tw(r,o),r=n[0],o=n[1],Jk(r.shape,o.shape),Mw.runKernelFunc((function(e){return e.notEqual(r,o)}),{a:r,b:o},null,"NotEqual")}}),KR=rk({notEqualStrict_:function(e,t){var n=qC(e,"a","notEqualStrict"),r=qC(t,"b","notEqualStrict");return Ex(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function $R(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function XR(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var QR=rk({gather_:function(e,t,n){void 0===n&&(n=0);var r=qC(e,"x","gather"),o=qC(t,"indices","gather","int32");n=jx(n,r.shape)[0];var a=function(e,t,n){for(var r=e.shape[n],o=[],a=1,i=1,s=0;s<n;s++)o.push(e.shape[s]),a*=e.shape[s];for(s=0;s<t.rank;s++)o.push(t.shape[s]);for(s=n+1;s<e.rank;s++)o.push(e.shape[s]),i*=e.shape[s];return{batchSize:a,sliceSize:i,dimSize:r,outputShape:o}}(r,o,n);return Mw.runKernelFunc((function(e,t){var a=e.gather(r,o.flatten(),n);return t([o]),a}),{x:r,indices:o},(function(e,t){var o=t[0];return{x:function(){var t=r.shape,a=o.size,i=t.slice(0,n),s=i.length,u=t.slice(n,t.length).slice(1),l=u.length,c=$R(0,s),d=$R(s+1,s+1+l),f=XR([i,[a],u]),h=e.reshape(f),p=o.reshape([a]),m=XR([[s],c,d]),v=h.transpose(m),g=JR(v,p,r.shape[n]),y=ZC(m);return g.transpose(y)},indices:function(){return o}}}),"Gather",{axis:n}).reshape(a.outputShape)}}),JR=rk({unsortedSegmentSum_:function(e,t,n){var r=qC(e,"x","unsortedSegmentSum"),o=qC(t,"segmentIds","unsortedSegmentSum","int32");return Sx(Dx(n),(function(){return"numSegments must be of dtype int"})),Mw.runKernelFunc((function(e,t){var a=e.unsortedSegmentSum(r,o,n);return t([o]),a}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=FS(t,bk(t)),r=QR(e,n),o=WR(t,lk(0,"int32")),a=r.rank-o.rank,i=0;i<a;++i)o=Ik(o,i+1);o=uR(o,pk(r.shape,"bool"));var s=bk(r);return fR(o,r,s)}(e,n)}}}))}});function ZR(e,t,n,r,o,a,i){void 0===a&&(a="NHWC"),Sx(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),Sx(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),Sx(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),Sx(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===a?s[3]:s[1],d="NHWC"===a?u.shape[3]:u.shape[1];Sx(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),Sx(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."})),null!=i&&Sx(Dx(o),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var f=NE(a),h=yE(s,n.shape,r,1,o,i,!1,f),p=Mw.runKernelFunc((function(e,t){var r=e.conv2dDerInput(u,n,h);return t([n,u]),r}),{dy4D:u,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return rD(e,n,r,o,a,1,i)},filter:function(){return aD(e,s,n.shape,r,o,a,i)}}}));return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function eD(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function tD(e,t,n,r,o){Sx(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var a=e,i=t,s=!1;4===t.rank&&(s=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var u=a[4],l=i.shape[4];Sx(5===a.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."})),Sx(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank})),Sx(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),Sx(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),Sx(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c=bE(a,n.shape,r,1,o),d=Mw.runKernelFunc((function(e){return e.conv3dDerInput(i,n,c)}),{dy5D:i});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var nD=rk({conv1d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NWC"),void 0===a&&(a=1);var s=qC(e,"x","conv1d"),u=qC(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),Sx(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),Sx(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=i&&Sx(Dx(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),Sx(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),Sx(_E(n,a),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"})),Sx("NWC"===o,(function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."}));var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=rD(f,d,[1,n],r,"NHWC",[1,a],i);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),rD=rk({conv2d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=qC(e,"x","conv2d"),u=qC(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Sx(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),Sx(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=i&&Sx(Dx(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var d="NHWC"===o?l.shape[3]:l.shape[1];Sx(d===u.shape[2],(function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."})),Sx(_E(n,a),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}));var f=NE(o),h=yE(l.shape,u.shape,n,a,r,i,!1,f),p=[u,l],m=Mw.runKernelFunc((function(e,t){var n=e.conv2d(l,u,h);return t([u,l]),n}),{x:l,filter:u},(function(e,t){var i=t,s=i[0],u=i[1];return Sx(EE(a),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"})),{x:function(){return iD(u.shape,e,s,n,r,o)},filter:function(){return aD(u,e,s.shape,n,r,o)}}}),"Conv2D",h,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),oD=rk({conv3d_:function(e,t,n,r,o,a){void 0===o&&(o="NDHWC"),void 0===a&&(a=[1,1,1]);var i=qC(e,"x","conv3d"),s=qC(t,"filter","conv3d"),u=i,l=!1;4===i.rank&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),Sx(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),Sx(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),Sx(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),Sx(function(e,t){return eD(e)||eD(t)}(n,a),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),Sx("NDHWC"===o,(function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."}));var c=bE(u.shape,s.shape,n,a,r),d=Mw.runKernelFunc((function(e,t){var n=e.conv3d(u,s,c);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){Sx(eD(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}));var o=t[0],i=t[1];return{x:function(){return tD(o.shape,e,i,n,r)},$filter:function(){return function(e,t,n,r,o){var a=e;4===e.rank&&(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var i=t;4===i.rank&&(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),Sx(5===a.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."})),Sx(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."})),Sx(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),Sx(a.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."})),Sx(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=bE(a.shape,n,r,1,o);return Mw.runKernelFunc((function(e){return e.conv3dDerFilter(a,i,s)}),{x5D:a,dy5D:i})}(o,e,i.shape,n,r)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),aD=rk({conv2dDerFilter_:function(e,t,n,r,o,a,i){void 0===a&&(a="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Sx(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),Sx(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),Sx(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l="NHWC"===a?s.shape[3]:s.shape[1],c="NHWC"===a?u.shape[3]:u.shape[1];Sx(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),Sx(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=i&&Sx(Dx(o),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var d=NE(a),f=yE(s.shape,n,r,1,o,i,!1,d);return Mw.runKernelFunc((function(e){return e.conv2dDerFilter(s,u,f)}),{x4D:s,dy4D:u})}}),iD=rk({conv2dDerInput_:ZR}),sD=rk({depthwiseConv2d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=qC(e,"x","depthwiseConv2d"),u=qC(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Sx(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),Sx(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),Sx(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==a&&(a=[1,1]),Sx(_E(n,a),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=i&&Sx(Dx(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var d=yE(l.shape,u.shape,n,a,r,i,!0),f=[l,u],h=Mw.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(l,u,d);return t([l,u]),n}),{x:l,filter:u},(function(e,t){Sx(EE(a),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var n=t[0],r=t[1];return{x:function(){return uD(n.shape,e,r,d)},filter:function(){return lD(n,e,r.shape,d)}}}),"DepthwiseConv2dNative",d,f);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),uD=rk({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,a=!1;3===t.rank&&(a=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=Mw.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(o,n,r)}),{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),lD=rk({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=t;return 3===a.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Mw.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(o,a,r)}),{x4D:o,dy4D:a})}}),cD=rk({separableConv2d_:function(e,t,n,r,o,a,i){void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC");var s=qC(e,"x","separableConv2d"),u=qC(t,"depthwiseFilter","separableConv2d"),l=qC(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Sx(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),Sx(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),Sx(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),Sx(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),Sx(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var f=u.shape[2],h=u.shape[3];Sx(l.shape[2]===f*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+l.shape[2]+"."}));var p=sD(c,u,r,o,i,a),m=rD(p,l,1,"valid",i);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),dD=rk({conv2dTranspose_:function(e,t,n,r,o,a){return ZR(n,qC(e,"x","conv2dTranspose"),qC(t,"filter","conv2dTranspose"),r,o,"NHWC",a)}}),fD=rk({conv3dTranspose_:function(e,t,n,r,o){return tD(n,qC(e,"x","conv3dTranspose"),qC(t,"filter","conv3dTranspose"),r,o)}}),hD=rk({matMul_:function(e,t,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=qC(e,"a","matMul"),i=qC(t,"b","matMul");o=Tw(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?i.shape[i.rank-2]:i.shape[i.rank-1],d=a.shape.slice(0,-2),f=i.shape.slice(0,-2),h=Tx(d),p=Tx(f);Sx(a.rank>=2&&i.rank>=2&&a.rank===i.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."})),Sx(Rx(d,f),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+f+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."})),Sx(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=a.shape.slice(0,-2).concat([l,c]),v=n?a.as3D(h,s,l):a.as3D(h,l,s),g=r?i.as3D(p,c,u):i.as3D(p,u,c),y={transposeA:n,transposeB:r};return Mw.runKernelFunc((function(e,t){var o=e.batchMatMul(v,g,n,r);return t([v,g]),o}),{a:v,b:g},(function(e,t){var o=t,a=o[0],i=o[1];return n||r?!n&&r?{a:function(){return e.matMul(i,!1,!1)},b:function(){return e.matMul(a,!0,!1)}}:n&&!r?{a:function(){return i.matMul(e,!1,!0)},b:function(){return a.matMul(e,!1,!1)}}:{a:function(){return i.matMul(e,!0,!0)},b:function(){return e.matMul(a,!0,!0)}}:{a:function(){return e.matMul(i,!1,!0)},b:function(){return a.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(m)}}),pD=rk({dot_:function(e,t){var n=qC(e,"t1","dot"),r=qC(t,"t2","dot");Sx(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return Sx(o===a,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),mD=rk({outerProduct_:function(e,t){var n=qC(e,"v1","outerProduct"),r=qC(t,"v2","outerProduct");return Sx(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),vD=rk({reverse_:function(e,t){var n=qC(e,"x","reverse");if(0===n.rank)return n.clone();var r=jx(t,n.shape);return Mw.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),gD=rk({reverse1d_:function(e){var t=qC(e,"x","reverse");return Sx(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),vD(t,0)}}),yD=rk({reverse2d_:function(e,t){var n=qC(e,"x","reverse");return Sx(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),vD(n,t)}}),bD=rk({reverse3d_:function(e,t){var n=qC(e,"x","reverse");return Sx(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),vD(n,t)}}),xD=rk({reverse4d_:function(e,t){var n=qC(e,"x","reverse");return Sx(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),vD(n,t)}});function wD(e,t,n,r,o,a){var i=qC(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),Sx(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),Sx(_E(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=a&&Sx(Dx(o),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=vE(s.shape,t,n,r,o,a);if(1===l.filterWidth&&1===l.filterHeight&&Rx(l.inShape,l.outShape))return i.clone();var c=[s],d=Mw.runKernelFunc((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,a){var i=a[0],s=a[1];return{x:function(){return function(e,t,n,r,o,a,i,s){var u=qC(e,"dy","maxPoolBackprop"),l=qC(t,"input","maxPoolBackprop"),c=qC(n,"output","maxPoolBackprop");Sx(l.rank===u.rank,(function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"})),null==a&&(a=[1,1]),Sx(_E(o,a),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"})),Sx(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),Sx(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var d=vE(l.shape,r,o,a,i,s);return Mw.runKernelFunc((function(e){return e.maxPoolBackprop(u,l,c,d)}),{$dy:u,$input:l})}(e,i,s,t,n,r,o)}}}),"MaxPool",l,c);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function CD(e,t,n,r,o,a){var i=qC(e,"x","avgPool","float32");null==r&&(r=[1,1]),Sx(_E(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Sx(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=a&&Sx(Dx(o),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=vE(s.shape,t,n,r,o,a);if(1===l.filterWidth&&1===l.filterHeight&&Rx(l.inShape,l.outShape))return i.clone();var c=Mw.runKernelFunc((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,o,a){var i=qC(e,"dy","avgPoolBackprop"),s=qC(t,"input","avgPoolBackprop");Sx(s.rank===i.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"})),null==o&&(o=[1,1]),Sx(_E(r,o),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}));var u=s,l=i,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Sx(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),Sx(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var d=vE(u.shape,n,r,o,a),f=Mw.runKernelFunc((function(e){return e.avgPoolBackprop(l,u,d)}),{dy4D:l,input4D:u});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}(e,s,t,n,r,o)}}}),"AvgPool",l);return c=c.cast(i.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var kD=rk({maxPool_:function(e,t,n,r,o){return wD(e,t,n,1,r,o)}}),SD=rk({avgPool_:function(e,t,n,r,o){return CD(e,t,n,1,r,o)}}),ED=rk({pool_:function(e,t,n,r,o,a){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");var i=qC(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Sx(_E(a,o),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"}));var l,c=vE(s.shape,t,a,o,r),d=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),o=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],o[t]]}))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var f=1===d[0]&&1===d[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),o=n.map((function(e){return e[1]})),a=e.concat(r,o),i=t.map((function(e,t){return(e-a[t]%e)%e})),s=o.map((function(e,t){return e+i[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,i[t]]}))]}([c.inHeight,c.inWidth],d,l),p=h[0],m=h[1],v=f?r:"valid",g=f?s:Ok(s,d,p),y=("avg"===n?function(){return CD(g,t,a,1,v)}:function(){return wD(g,t,a,1,v)})(),b=f?y:Nk(y,d,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),_D=rk({maxPool3d_:function(e,t,n,r,o,a,i){void 0===a&&(a="NDHWC");var s=qC(e,"x","maxPool3d"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),Sx(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),Sx("NDHWC"===a,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),Sx(_E(n,i),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=o&&Sx(Dx(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var c=gE(u.shape,t,n,i,r,o,a),d=Mw.runKernelFunc((function(e,t){var n=e.maxPool3d(u,c);return t([u,n]),n}),{x:u},(function(e,a){var s=a[0],u=a[1];return{x:function(){return function(e,t,n,r,o,a,i,s){var u=qC(e,"dy","maxPool3dBackprop"),l=qC(t,"input","maxPool3dBackprop"),c=qC(n,"output","maxPool3dBackprop"),d=u,f=l,h=c,p=!1;4===l.rank&&(p=!0,d=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),f=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),h=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),Sx(5===d.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+d.rank+"."})),Sx(5===f.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+f.rank+"."})),Sx(5===h.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+h.rank+"."})),null==a&&(a=[1,1,1]),Sx(_E(o,a),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"})),null!=s&&Sx(Dx(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."}));var m=gE(f.shape,r,o,a,i,s),v=Mw.runKernelFunc((function(e){return e.maxPool3dBackprop(d,f,h,m)}),{dy5D:d,input5D:f});return p?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}(e,s,u,t,n,i,r,o)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),ND=rk({avgPool3d_:function(e,t,n,r,o,a,i){void 0===a&&(a="NDHWC");var s=qC(e,"x","avgPool3d","float32"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),Sx(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),Sx("NDHWC"===a,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),Sx(_E(n,i),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=o&&Sx(Dx(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var c=gE(u.shape,t,n,i,r,o,a),d=Mw.runKernelFunc((function(e){return e.avgPool3d(u,c)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,o,a,i){var s=qC(e,"dy","avgPool3dBackprop"),u=qC(t,"input","avgPool3dBackprop"),l=s,c=u,d=!1;4===u.rank&&(d=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),Sx(5===l.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+l.rank+"."})),Sx(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."})),null==o&&(o=[1,1,1]),Sx(_E(r,o),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"})),null!=i&&Sx(Dx(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var f=gE(c.shape,n,r,o,a,i),h=Mw.runKernelFunc((function(e){return e.avgPool3dBackprop(l,c,f)}),{dy5D:l,input5D:c});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}(e,u,t,n,i,r,o)}}}));return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),TD=rk({maxPoolWithArgmax_:function(e,t,n,r,o){void 0===o&&(o=!1);var a=qC(e,"x","maxPoolWithArgmax"),i={filterSize:t,strides:n,pad:r,includeBatchInIndex:o},s=Mw.runKernel("MaxPoolWithArgmax",{x:a},i);return{result:s[0],indexes:s[1]}}}),RD=rk({slice_:function(e,t,n){var r,o,a=qC(e,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(a.rank-1).fill(0)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(0)):t.slice()).forEach((function(e){Sx(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(Sx(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),a.shape[t]-r[t])})),nE(a,r,o);var i=a.shape,s={begin:r,size:o};return Mw.runKernelFunc((function(e){return e.slice(a,r,o)}),{x:a},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],i[n]-r[n]-o[n]]);return{x:function(){return bR(e,t)}}}),"Slice",s)}}),DD=rk({slice1d_:function(e,t,n){var r=qC(e,"x","slice1d");return Sx(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),RD(r,[t],[n])}}),ID=rk({slice2d_:function(e,t,n){var r=qC(e,"x","slice2d");return Sx(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),RD(r,t,n)}}),AD=rk({slice3d_:function(e,t,n){var r=qC(e,"x","slice3d");return Sx(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),RD(r,t,n)}}),OD=rk({slice4d_:function(e,t,n){var r=qC(e,"x","slice4d");return Sx(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),RD(r,t,n)}});function MD(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(XC(t.shape,r))),e.rank<n.rank&&(e=e.reshape(XC(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==o?r:r.transpose(o)}}}var PD=rk({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qC(e,"x","all","bool"),o=jx(t,r.shape),a=o,i=JC(a,r.rank);null!=i&&(r=r.transpose(i),a=ek(a.length,r.rank));var s=Mw.runKernelFunc((function(e){return e.all(r,a)}),{$x:r});if(n){var u=XC(s.shape,o);return s.reshape(u)}return s}}),jD=rk({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qC(e,"x","any","bool"),o=jx(t,r.shape),a=o,i=JC(a,r.rank);null!=i&&(r=r.transpose(i),a=ek(a.length,r.rank));var s=Mw.runKernelFunc((function(e){return e.any(r,a)}),{$x:r});if(n){var u=XC(s.shape,o);return s.reshape(u)}return s}}),FD=rk({argMax_:function(e,t){void 0===t&&(t=0);var n=qC(e,"x","argMax");null==t&&(t=0);var r=jx(t,n.shape),o=JC(r,n.rank);null!=o&&(n=n.transpose(o),r=ek(r.length,n.rank));var a={axis:r[0]},i=[n];return Mw.runKernelFunc((function(e,t){var o=e.argMax(n,r[0]);return t([n]),o}),{x:n},(function(e,t){var n=t[0];return{x:function(){return bk(n)}}}),"ArgMax",a,i)}}),LD=rk({argMin_:function(e,t){void 0===t&&(t=0);var n=qC(e,"x","argMin");null==t&&(t=0);var r=jx(t,n.shape),o=JC(r,n.rank);return null!=o&&(n=n.transpose(o),r=ek(r.length,n.rank)),Mw.runKernelFunc((function(e,t){var o=e.argMin(n,r[0]);return t([n]),o}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return bk(n)}}}))}}),BD=rk({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qC(e,"x","logSumExp"),o=jx(t,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=XC(s.shape,o);return s.reshape(u)}return s}}),WD=rk({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qC(e,"x","max"),o=r,a=jx(t,r.shape),i=a,s=JC(i,r.rank);null!=s&&(r=r.transpose(s),i=ek(i.length,r.rank));var u=[r],l=Mw.runKernelFunc((function(e,t){var n=e.max(r,i);return t([o,n]),n}),{x:r},(function(e,t){return MD(e,t[1],t[0],a,s)}),"Max",{axes:i},u,[!0]);if(n){var c=XC(l.shape,a);l=l.reshape(c)}return l}}),UD=rk({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qC(e,"x","mean"),o=jx(t,r.shape),a=Tx($C(r.shape,o)[1]);return lE((function(e){var r=lk(a);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(pk(e.shape,"float32")).div(a)}}}))(r)}}),zD=rk({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qC(e,"x","min"),o=r,a=jx(t,r.shape),i=a,s=JC(i,r.rank);null!=s&&(r=r.transpose(s),i=ek(i.length,r.rank));var u=[r],l=Mw.runKernelFunc((function(e,t){var n=e.min(r,i);return t([o,n]),n}),{x:r},(function(e,t){return MD(e,t[1],t[0],a,s)}),"Min",{axes:i},u,[!0]);if(n){var c=XC(l.shape,a);l=l.reshape(c)}return l}}),HD=rk({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=jx(t,(e=qC(e,"x","moments")).shape),o=e.mean(r,n),a=o.shape;n||(a=XC(o.shape,r));var i=e.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,n)}}}),VD=rk({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qC(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=jx(t,r.shape);return lE((function(e){var t=JC(o,e.rank),r=o,a=e;null!=t&&(a=e.transpose(t),r=ek(r.length,e.rank));var i=function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(pk(e.shape,"float32"))},s={axes:r},u=Mw.runKernelFunc((function(e){return e.sum(a,r)}),{x:a},(function(e){return{x:function(){return i(e)}}}),"Sum",s);if(n){var l=XC(u.shape,o);u=u.reshape(l)}return{value:u,gradFunc:i}}))(r)}}),qD=rk({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qC(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=jx(t,r.shape),a=JC(o,r.rank),i=o,s=r;null!=a&&(s=r.transpose(a),i=ek(i.length,r.rank));var u=Mw.runKernelFunc((function(e){return e.prod(s,i)}),{permutedX:s});if(n){var l=XC(u.shape,o);u=u.reshape(l)}return u}}),GD=rk({elu_:function(e){var t=qC(e,"x","elu");return Mw.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return Mw.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),YD=rk({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=qC(e,"x","leakyRelu");return FS(lk(t).mul(n),n)}}),KD=rk({prelu_:function(e,t){var n=qC(e,"x","prelu"),r=qC(t,"alpha","prelu");return Mw.runKernelFunc((function(e,t){var o=e.prelu(n,r);return t([n,r]),o}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],o=n.greater(0);return{x:function(){return fR(o,e,e.mul(r))},alpha:function(){var t=fR(o,bk(e),e.mul(n)),a=Qk(r.shape,e.shape);return a.length>0&&(t=t.sum(a)),t.reshape(r.shape)}}}),"Prelu")}}),$D=rk({relu_:function(e){var t=qC(e,"x","relu");return"bool"===t.dtype?t.toInt():Mw.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),XD=rk({relu6_:function(e){var t=qC(e,"x","relu6");return"bool"===t.dtype?t.toInt():Mw.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),QD=rk({selu_:function(e){var t=qC(e,"x","selu");return Mw.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(lk(0)),r=lk(oT),o=lk(aT),a=e.mul(o),i=e.mul(r).mul(n.toFloat().exp());return fR(t,a,i)}}}))}}),JD=rk({localResponseNormalization_:function(e,t,n,r,o){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var a=qC(e,"x","localResponseNormalization");Sx(4===a.rank||3===a.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."})),Sx(Dx(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var i=a,s=!1;3===a.rank&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=Mw.runKernelFunc((function(e,a){var s=e.localResponseNormalization4D(i,t,n,r,o);return a([i,s]),s}),{x4D:i},(function(e,a){var i=a[0],s=a[1];return{x4D:function(){return Mw.runKernelFunc((function(a){return a.LRNGrad(e,i,s,t,n,r,o)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),ZD=rk({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(lk(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=qC(e,"x","norm"),t,n),a=o.shape;if(r){var i=jx(n,e.shape);a=XC(o.shape,i)}return o.reshape(a)}}),eI=rk({basicLSTMCell_:function(e,t,n,r,o,a){var i=qC(e,"forgetBias","basicLSTMCell"),s=qC(t,"lstmKernel","basicLSTMCell"),u=qC(n,"lstmBias","basicLSTMCell"),l=qC(r,"data","basicLSTMCell"),c=qC(o,"c","basicLSTMCell"),d=qC(a,"h","basicLSTMCell"),f=l.concat(d,1).matMul(s).add(u),h=f.shape[0],p=f.shape[1]/4,m=[h,p],v=f.slice([0,0],m),g=f.slice([0,p],m),y=f.slice([0,2*p],m),b=f.slice([0,3*p],m),x=v.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(i.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),tI=rk({multiRNNCell_:function(e,t,n,r){for(var o=qC(t,"data","multiRNNCell"),a=GC(n,"c","multiRNNCell"),i=GC(r,"h","multiRNNCell"),s=o,u=[],l=0;l<e.length;l++){var c=e[l](s,a[l],i[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],f=[];for(l=0;l<u.length;l+=2)d.push(u[l]),f.push(u[l+1]);return[d,f]}}),nI=rk({movingAverage_:function(e,t,n,r,o){void 0===o&&(o=!0);var a=qC(e,"v","movingAverage"),i=qC(t,"x","movingAverage"),s=qC(n,"decay","movingAverage");Rw(a,i),Sx(Rx(a.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=lk(1),l=u.sub(s),c=i.sub(a).mul(l);if(o){Sx(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=qC(r,"step","movingAverage");c=c.div(u.sub(qS(s,d)))}return a.add(c)}}),rI=rk({stridedSlice_:function(e,t,n,r,o,a,i,s,u){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==i)throw new Error("ellipsis mask is not yet supported");var l=qC(e,"x","stridedSlice"),c=rE(s),d=l.shape.slice();c.forEach((function(e){t[e]=0,n[e]=1,d.splice(e,0,1)})),l=l.reshape(d);for(var f=0;f<l.rank;f++)t[f]=aE(o,t,r,l.shape,f),n[f]=iE(a,n,r,l.shape,f),r[f]=r[f]||1;var h=rE(u);h.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var p=oE(t,n,r),m=p.filter((function(e,t){return-1===h.indexOf(t)}));return r.every((function(e){return 1===e}))?RD(l,t,p).reshape(m):Mw.runKernelFunc((function(e){return e.stridedSlice(l,t,n,r)}),{$x:l}).reshape(m)}}),oI=rk({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=qC(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var a=Mw.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:a[0],indices:a[1]}}}),aI=rk({scatterND_:function(e,t,n){var r=qC(e,"indices","scatterND","int32"),o=qC(t,"updates","scatterND");return eE(o,r,n),Mw.runKernelFunc((function(e){return e.scatterND(r,o,n)}),{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),iI=rk({fft_:function(e){Sx("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Mw.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),sI=rk({ifft_:function(e){Sx("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Mw.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),uI=rk({rfft_:function(e,t){Sx("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],o=e.size/r;if(null!=t&&t<r){var a=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=e.slice(a,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(mk(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=ok(n,u).as2D(o,r),c=iI(l),d=Math.floor(r/2)+1,f=ak(c),h=ik(c),p=f.split([d,r-d],f.shape.length-1),m=h.split([d,r-d],h.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,ok(p[0],m[0]).reshape(v)}}),lI=rk({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=sI(r);return ak(o)}var a=[n,2*(t-1)],i=ak(e).as2D(n,t),s=ik(e).as2D(n,t),u=i.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(lk(-1)),c=i.concat(u,1),d=s.concat(l,1);return r=ok(c,d).as2D(a[0],a[1]),o=sI(r),ak(o)}}),cI=Object.freeze({fft:iI,ifft:sI,rfft:uI,irfft:lI}),dI=rk({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var o=qC(e,"sparseIndices","sparseToDense","int32"),a=qC(t,"sparseValues","sparseToDense"),i=qC(r,"defaultValue","sparseToDense",a.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==o))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+o+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i),Mw.runKernelFunc((function(e){return e.sparseToDense(o,a,n,i)}),{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}}),fI=rk({gatherND_:function(e,t){var n=qC(t,"indices","gatherND","int32"),r=qC(e,"x","gatherND");return Mw.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),hI=rk({diag_:function(e){var t=qC(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return Mw.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),pI=rk({dropout_:function(e,t,n,r){var o=qC(e,"x","dropout");if(Sx("float32"===o.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."})),Sx(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof yw?o.clone():o;var a=function(e,t){if(null==t)return e.shape.slice();if(Rx(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),i=1-t,s=OR(a,0,1,"float32",r).add(i).floor().div(i);return o.mul(s)}});function mI(e,t,n){for(var r=1-e%2,o=new Float32Array(e),a=0;a<e;++a){var i=2*Math.PI*a/(e+r-1);o[a]=t-n*Math.cos(i)}return ck(o,"float32")}var vI,gI=rk({hannWindow_:function(e){return mI(e,.5,.5)}}),yI=rk({hammingWindow_:function(e){return mI(e,.54,.46)}}),bI=rk({frame_:function(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var a=0,i=[];a+t<=e.size;)i.push(RD(e,a,t)),a+=n;if(r)for(;a<e.size;){var s=a+t-e.size,u=xk([RD(e,a,t-s),vk([s],o)]);i.push(u),a+=n}return 0===i.length?dk([],[0,t]):xk(i).as2D(i.length,t)}}),xI=rk({stft_:function(e,t,n,r,o){var a;void 0===o&&(o=gI),null==r&&(a=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=bI(e,t,n),s=HS(i,o(t)),u=[],l=0;l<i.shape[0];l++)u.push(uI(s.slice([l,0],[1,t]),r));return xk(u)}}),wI=Object.freeze({hannWindow:gI,hammingWindow:yI,frame:bI,stft:xI});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(vI||(vI={}));var CI=rk({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=vI.SUM_BY_NONZERO_WEIGHTS);var o=qC(e,"labels","absoluteDifference"),a=qC(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=qC(n,"weights","absoluteDifference")),Ex(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return kI(s,i,r)}}),kI=rk({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=vI.SUM_BY_NONZERO_WEIGHTS);var r=qC(e,"losses","computeWeightedLoss"),o=null;null!=t&&(o=qC(t,"weights","computeWeightedLoss"));var a=null==o?r:r.mul(o);if(n===vI.NONE)return a;if(n===vI.SUM)return a.sum();if(n===vI.MEAN){if(null==o)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(lk(i)):s}if(n===vI.SUM_BY_NONZERO_WEIGHTS){if(null==o)return a.sum().div(lk(r.size));var u=o.mul(pk(r.shape)).notEqual(lk(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),SI=rk({cosineDistance_:function(e,t,n,r,o){void 0===o&&(o=vI.SUM_BY_NONZERO_WEIGHTS);var a=qC(e,"labels","cosineDistance"),i=qC(t,"predictions","cosineDistance"),s=null;null!=r&&(s=qC(r,"weights","cosineDistance")),Ex(a.shape,i.shape,"Error in cosineDistance: ");var u=lk(1).sub(a.mul(i).sum(n,!0));return kI(u,s,o)}}),EI=rk({hingeLoss_:function(e,t,n,r){void 0===r&&(r=vI.SUM_BY_NONZERO_WEIGHTS);var o=qC(e,"labels","hingeLoss"),a=qC(t,"predictions","hingeLoss"),i=null;null!=n&&(i=qC(n,"weights","hingeLoss")),Ex(o.shape,a.shape,"Error in hingeLoss: ");var s=lk(1);o=lk(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return kI(u,i,r)}}),_I=rk({huberLoss_:function(e,t,n,r,o){void 0===r&&(r=1),void 0===o&&(o=vI.SUM_BY_NONZERO_WEIGHTS);var a=qC(e,"labels","huberLoss"),i=qC(t,"predictions","huberLoss"),s=null;null!=n&&(s=qC(n,"weights","huberLoss")),Ex(a.shape,i.shape,"Error in huberLoss: ");var u=lk(r),l=i.sub(a).abs(),c=BS(l,u),d=l.sub(c),f=lk(.5).mul(c.square()).add(u.mul(d));return kI(f,s,o)}}),NI=rk({logLoss_:function(e,t,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=vI.SUM_BY_NONZERO_WEIGHTS);var a=qC(e,"labels","logLoss"),i=qC(t,"predictions","logLoss"),s=null;null!=n&&(s=qC(n,"weights","logLoss")),Ex(a.shape,i.shape,"Error in logLoss: ");var u=lk(1),l=lk(r),c=a.mul(i.add(l).log()).neg().sub(u.sub(a).mul(u.sub(i).add(l).log()));return kI(c,s,o)}}),TI=rk({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=vI.SUM_BY_NONZERO_WEIGHTS);var o=qC(e,"labels","meanSquaredError"),a=qC(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=qC(n,"weights","meanSquaredError")),Ex(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return kI(s,i,r)}}),RI=rk({sigmoidCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=vI.SUM_BY_NONZERO_WEIGHTS);var a=qC(e,"multiClassLabels","sigmoidCrossEntropy"),i=qC(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=qC(n,"weights","sigmoidCrossEntropy")),Ex(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=lk(r),l=lk(1),c=lk(.5);a=a.mul(l.sub(u)).add(c.mul(u))}var d=function(e,t){var n=qC(e,"labels","sigmoidCrossEntropyWithLogits"),r=qC(t,"logits","sigmoidCrossEntropyWithLogits");Ex(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),a=r.mul(n),i=r.abs().neg().exp().log1p();return o.sub(a).add(i)}(a,i);return kI(d,s,o)}}),DI=rk({softmaxCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=vI.SUM_BY_NONZERO_WEIGHTS);var a=qC(e,"onehotLabels","softmaxCrossEntropy"),i=qC(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=qC(n,"weights","softmaxCrossEntropy")),Ex(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=lk(r),l=lk(1),c=lk(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(c))}var d=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return lE((function(e,t,r){var o=t.logSumExp([n],!0),a=t.toFloat().sub(o);return r([e,a]),{value:a.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],o=t[1],a=XC(e.shape,[n]);return[e.reshape(a).mul(r.toFloat().sub(o.exp())),e.reshape(a).mul(o.exp().sub(r.toFloat()))]}}}))(e,t)}(a,i);return kI(d,s,o)}}),II=Object.freeze({get Reduction(){return vI},absoluteDifference:CI,computeWeightedLoss:kI,cosineDistance:SI,hingeLoss:EI,huberLoss:_I,logLoss:NI,meanSquaredError:TI,sigmoidCrossEntropy:RI,softmaxCrossEntropy:DI});function AI(e,t){return void 0===t&&(t=!1),Mw.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=vR(n),a=e.clone(),i=dk([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(e){var t,u=a,l=s,c=o;t=Mw.tidy((function(){var t=a.slice([e,e],[n-e,1]),u=t.norm(),l=a.slice([e,e],[1,1]),c=dk([[-1]]).where(l.greater(0),dk([[1]])),d=l.sub(c.mul(u)),f=t.div(d);s=1===f.shape[0]?i.clone():i.concat(f.slice([1,0],[f.shape[0]-1,f.shape[1]]),0);var h=c.matMul(d).div(u).neg(),p=a.slice([e,0],[n-e,r]),m=h.mul(s),v=s.transpose();if(0===e)a=p.sub(m.matMul(v.matMul(p)));else{var g=p.sub(m.matMul(v.matMul(p)));a=a.slice([0,0],[e,r]).concat(g,0)}var y=m.transpose(),b=o.slice([0,e],[n,o.shape[1]-e]);if(0===e)o=b.sub(b.matMul(s).matMul(y));else{var x=b.sub(b.matMul(s).matMul(y));o=o.slice([0,0],[n,e]).concat(x,1)}return[s,a,o]})),s=t[0],a=t[1],o=t[2],UC([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]}))}var OI=rk({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=qC(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,a=r.shape.slice(-2),i=a[0],s=a[1];if(!(t<=i))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=i),n<0&&(n=s);var u=gk(0,i,1,"int32").reshape([-1,1]),l=gk(0,s,1,"int32"),c=KS(u,l),d=uR(c.lessEqual(lk(+t,"int32")),c.greaterEqual(lk(-n,"int32"))),f=mk([i,s],r.dtype);return Pk(jk(r.reshape([-1,i,s])).map((function(e){return fR(d,e,f)}))).reshape(o)}}),MI=rk({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Sx(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Sx(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},o=1;o<e.length;++o)r(o)}else t=!0,e=Ek(e,e.shape[0],0).map((function(e){return Mk(e,[0])}));Sx(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var a=[],i=e,s=function(e){a.push(Mw.tidy((function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=VD(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(ZD(t,"euclidean"))})))};for(o=0;o<e.length;++o)s(o);return t?Pk(a,0):a}}),PI=rk({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return AI(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=jk(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];return r.forEach((function(e){var n=AI(e,t),r=n[0],i=n[1];o.push(r),a.push(i)})),[Pk(o,0).reshape(e.shape),Pk(a,0).reshape(e.shape)]}}),jI=Object.freeze({bandPart:OI,gramSchmidt:MI,qr:PI});function FI(e,t,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);var i=e.shape[0];return n=Math.min(n,i),Sx(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),Sx(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),Sx(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),Sx(1===t.rank,(function(){return"scores must be a 1D tensor"})),Sx(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]})),Sx(0<=a&&a<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}var LI=rk({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=qC(e,"images","resizeBilinear");Sx(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),Sx(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Mw.runKernelFunc((function(e,t){return t([o]),e.resizeBilinear(o,i,s,n)}),{x:o},(function(e,t){return{x:function(){return Mw.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),BI=rk({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=qC(e,"images","resizeNearestNeighbor");Sx(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),Sx(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),Sx("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Mw.runKernelFunc((function(e,t){return t([o]),e.resizeNearestNeighbor(o,i,s,n)}),{batchImages:o},(function(e,t){return{batchImages:function(){return Mw.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),WI=rk({nonMaxSuppression_:function(e,t,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var a=qC(e,"boxes","nonMaxSuppression"),i=qC(t,"scores","nonMaxSuppression"),s=FI(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return Mw.runKernelFunc((function(e){return e.nonMaxSuppression(a,i,n,r,o)}),{boxes:a,scores:i},null,"NonMaxSuppressionV3",u)}}),UI=rk({nonMaxSuppressionWithScore_:function(e,t,n,r,o,a){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var i=qC(e,"boxes","nonMaxSuppression"),s=qC(t,"scores","nonMaxSuppression"),u=FI(i,s,n,r,o,a),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},c=Mw.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),zI=rk({cropAndResize_:function(e,t,n,r,o,a){var i=qC(e,"image","cropAndResize"),s=qC(t,"boxes","cropAndResize","float32"),u=qC(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var l=s.shape[0];return Sx(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."})),Sx(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),Sx(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),Sx(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),Sx(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),Sx("bilinear"===o||"nearest"===o,(function(){return"method must be bilinear or nearest, but was "+o})),Mw.runKernelFunc((function(e,t){return e.cropAndResize(i,s,u,r,o,a)}),{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:a,cropSize:r})}}),HI=Object.freeze({resizeBilinear:LI,resizeNearestNeighbor:BI,nonMaxSuppression:WI,nonMaxSuppressionAsync:function(e,t,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),sx(this,void 0,void 0,(function(){var a,i,s,u,l,c,d;return ux(this,(function(f){switch(f.label){case 0:return a=qC(e,"boxes","nonMaxSuppressionAsync"),i=qC(t,"scores","nonMaxSuppressionAsync"),s=FI(a,i,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([a.data(),i.data()])];case 1:return u=f.sent(),l=u[0],c=u[1],d=FE(l,c,n,r,o),a!==e&&a.dispose(),i!==t&&i.dispose(),[2,d]}}))}))},nonMaxSuppressionWithScore:UI,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,o,a){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===a&&(a=0),sx(this,void 0,void 0,(function(){var i,s,u,l,c,d,f;return ux(this,(function(h){switch(h.label){case 0:return i=qC(e,"boxes","nonMaxSuppressionAsync"),s=qC(t,"scores","nonMaxSuppressionAsync"),u=FI(i,s,n,r,o,a),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([i.data(),s.data()])];case 1:return l=h.sent(),c=l[0],d=l[1],f=LE(c,d,n,r,o,a),i!==e&&i.dispose(),s!==t&&s.dispose(),[2,f]}}))}))},cropAndResize:zI}),VI=function(e,t){return!(e>0)||"linear"===t},qI=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},GI=function(e,t){var n=t,r=Qk(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},YI=function(e,t,n){if("linear"===t)return e;if("relu"===t)return $D(e);if("elu"===t)return GD(e);if("relu6"===t)return XD(e);if("prelu"===t)return KD(e,n);throw new Error("Unknown fused activation "+t+".")},KI=rk({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,a=void 0!==o&&o,i=e.transposeB,s=void 0!==i&&i,u=e.bias,l=e.activation,c=void 0===l?"linear":l,d=e.preluActivationWeights;if(!1===VI(Mw.state.gradientDepth,c)){var f=hD(n,r,a,s);return null!=u&&(f=$k(f,u)),YI(f,c,d)}var h=qC(n,"a","fused matMul"),p=qC(r,"b","fused matMul");t=Tw(h,p),h=t[0],p=t[1];var m=a?h.shape[h.rank-2]:h.shape[h.rank-1],v=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=a?h.shape[h.rank-1]:h.shape[h.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=h.shape.slice(0,-2),x=p.shape.slice(0,-2),w=Tx(b),C=Tx(x);Sx(h.rank>=2&&p.rank>=2&&h.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."})),Sx(Rx(b,x),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+x+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."})),Sx(m===v,(function(){return"Error in fused matMul: inner shapes ("+m+") and ("+v+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+a+" and transposeB="+s+" must match."}));var k,S,E=h.shape.slice(0,-2).concat([g,y]),_=a?h.as3D(w,m,g):h.as3D(w,g,m),N=s?p.as3D(C,y,v):p.as3D(C,v,y);null!=u&&Jk(E,(k=Tw(k=qC(u,"bias","fused matMul"),h)[0]).shape),null!=d&&(S=qC(d,"prelu weights","fused matMul"));var T={a:_,b:N};null!=u&&(T.bias=k),null!=d&&(T.preluActivationWeights=S);var R=[_,N];return Mw.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:_,b:N,transposeA:a,transposeB:s,bias:k,activation:c,preluActivationWeights:S});return t([_,N,n]),n}),T,(function(e,t){var n=t[0],r=t[1],o=t[2],i=qI(e,o,c),l={};return null!=u&&(l={bias:function(){return GI(k,i)}}),a||s?!a&&s?Object.assign({a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}},l):a&&!s?Object.assign({a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}},l):Object.assign({a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}},l):Object.assign({a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},l)}),"_FusedMatMul",{transposeA:a,transposeB:s,activation:c},R,[!0]).reshape(E)}}),$I=rk({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,a=e.dataFormat,i=void 0===a?"NHWC":a,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,f=void 0===d?"linear":d,h=e.preluActivationWeights;if(f=f||"linear",!1===VI(Mw.state.gradientDepth,f)){var p=rD(t,n,r,o,i,u,l);return null!=c&&(p=$k(p,c)),YI(p,f,h)}var m=qC(t,"x","conv2d"),v=qC(n,"filter","conv2d"),g=m,y=!1;3===m.rank&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Sx(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."})),Sx(4===v.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+v.rank+"."})),null!=l&&Sx(Dx(o),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."})),Sx(g.shape[3]===v.shape[2],(function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+v.shape[2]+"."})),Sx(_E(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),Sx("NHWC"===i,(function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."}));var b,x,w=yE(g.shape,v.shape,r,u,o,l);null!=c&&(b=Tw(b=qC(c,"bias","fused conv2d"),m)[0],Jk(w.outShape,b.shape)),null!=h&&(x=qC(h,"prelu weights","fused conv2d"));var C={x:g,filter:v};null!=c&&(C.bias=b),null!=h&&(C.preluActivationWeights=x);var k=[v,g],S=Mw.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:g,filter:v,convInfo:w,bias:b,activation:f,preluActivationWeights:x});return t([v,g,n]),n}),C,(function(e,t){var n=t,a=n[0],i=n[1],s=n[2],l=qI(e,s,f);Sx(EE(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var d={};return null!=c&&(d={bias:function(){return GI(b,l)}}),Object.assign({x:function(){return iD(i.shape,l,a,r,o)},filter:function(){return aD(i,l,a.shape,r,o)}},d)}),"FusedConv2D",{convInfo:w,activation:f},k,[!0]);return y?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),XI=rk({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,a=e.dataFormat,i=void 0===a?"NHWC":a,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,f=void 0===d?"linear":d,h=e.preluActivationWeights;if(!1===VI(Mw.state.gradientDepth,f)){var p=sD(t,n,r,o,i,u,l);return null!=c&&(p=$k(p,c)),YI(p,f,h)}var m=qC(t,"x","depthwiseConv2d"),v=qC(n,"filter","depthwiseConv2d"),g=m,y=!1;3===m.rank&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Sx(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."})),Sx(4===v.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+v.rank+"."})),Sx(g.shape[3]===v.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+v.shape[2]+"."})),null==u&&(u=[1,1]),Sx(_E(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),null!=l&&Sx(Dx(o),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."}));var b,x,w=yE(g.shape,v.shape,r,u,o,l,!0);null!=c&&(b=Tw(b=qC(c,"bias","fused conv2d"),m)[0],Jk(w.outShape,b.shape)),null!=h&&(x=qC(h,"prelu weights","fused depthwiseConv2d"));var C={x:g,filter:v};null!=c&&(C.bias=b),null!=h&&(C.preluActivationWeights=x);var k=[v,g],S=Mw.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:v,convInfo:w,bias:b,activation:f,preluActivationWeights:x});return t([v,g,n]),n}),C,(function(e,t){Sx(EE(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var n=t[0],r=t[1],o=t[2],a=qI(e,o,f),i={};return null!=c&&(i={bias:function(){return GI(b,a)}}),Object.assign({x:function(){return uD(r.shape,a,n,w)},filter:function(){return lD(r,a,n.shape,w)}},i)}),"FusedDepthwiseConv2D",{convInfo:w,activation:f},k,[!0]);return y?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),QI=Object.freeze({matMul:KI,conv2d:$I,depthwiseConv2d:XI}),JI=Object.freeze({image:HI,linalg:jI,losses:II,spectral:cI,fused:QI,signal:wI,add:$k,addN:VT,batchNorm:XT,batchNormalization:$T,batchNorm2d:ZT,batchNormalization2d:JT,batchNorm3d:nR,batchNormalization3d:tR,batchNorm4d:aR,batchNormalization4d:oR,broadcastTo:iR,clone:sR,div:XS,divNoNan:pR,eye:vR,multinomial:gR,oneHot:yR,pad:bR,pad1d:xR,pad2d:wR,pad3d:CR,pad4d:kR,rand:SR,randomGamma:IR,randomNormal:AR,randomUniform:OR,square:MR,squaredDifference:PR,tile:mR,truncatedNormal:jR,conv1d:nD,conv2d:rD,conv3d:oD,depthwiseConv2d:sD,separableConv2d:cD,conv2dTranspose:dD,conv3dTranspose:fD,op:rk,booleanMaskAsync:function(e,t,n){return sx(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,c,d,f,h,p,m;return ux(this,(function(v){switch(v.label){case 0:for(r=qC(e,"tensor","boolMask"),o=qC(t,"mask","boolMask","bool"),a=null==n?0:n,i=o.rank,s=r.shape,Sx(i>0,(function(){return"mask cannot be scalar"})),Ex(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=a;l<a+i;l++)u*=s[l];return c=s.slice(0,a).concat([u],s.slice(a+i)),d=r.reshape(c),f=o.reshape([-1]),[4,hR(f)];case 1:return h=v.sent(),p=h.squeeze([1]),m=QR(d,p,a),e!==r&&r.dispose(),t!==o&&o.dispose(),p.dispose(),d.dispose(),f.dispose(),h.dispose(),[2,m]}}))}))},complex:ok,real:ak,imag:ik,concat:xk,concat1d:wk,concat2d:Ck,concat3d:kk,concat4d:Sk,split:Ek,matMul:hD,dot:pD,outerProduct:mD,reverse:vD,reverse1d:gD,reverse2d:yD,reverse3d:bD,reverse4d:xD,maxPool:kD,avgPool:SD,pool:ED,maxPool3d:_D,avgPool3d:ND,maxPoolWithArgmax:TD,slice:RD,slice1d:DD,slice2d:ID,slice3d:AD,slice4d:OD,abs:Zk,acos:eS,acosh:tS,asin:nS,asinh:rS,atan:oS,atanh:aS,ceil:iS,clipByValue:sS,cos:uS,cosh:lS,erf:cS,exp:dS,expm1:fS,floor:hS,log:pS,log1p:mS,logSigmoid:vS,neg:gS,reciprocal:yS,round:bS,rsqrt:xS,sigmoid:wS,sign:CS,isNaN:kS,isInf:SS,isFinite:ES,sin:_S,sinh:NS,softplus:TS,sqrt:RS,step:DS,tan:IS,tanh:AS,all:PD,any:jD,argMax:FD,argMin:LD,logSumExp:BD,max:WD,mean:UD,min:zD,moments:HD,sum:VD,prod:qD,equal:FR,equalStrict:LR,greater:BR,greaterEqual:WR,greaterEqualStrict:UR,greaterStrict:zR,less:HR,lessEqual:VR,lessEqualStrict:qR,lessStrict:GR,notEqual:YR,notEqualStrict:KR,addStrict:OS,atan2:MS,divStrict:PS,floorDiv:jS,maximum:FS,maximumStrict:LS,minimum:BS,minimumStrict:WS,mod:US,modStrict:zS,mul:HS,mulStrict:VS,pow:qS,powStrict:GS,squaredDifferenceStrict:YS,sub:KS,subStrict:$S,elu:GD,leakyRelu:YD,prelu:KD,relu:$D,relu6:XD,selu:QD,logicalAnd:uR,logicalNot:lR,logicalOr:cR,logicalXor:dR,where:fR,whereAsync:hR,buffer:_k,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:Nk,cast:Tk,cumsum:Rk,depthToSpace:Dk,expandDims:Ik,reshape:Ak,spaceToBatchND:Ok,squeeze:Mk,stack:Pk,unstack:jk,setdiff1dAsync:function(e,t){return sx(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d;return ux(this,(function(f){switch(f.label){case 0:return n=qC(e,"x","setdiff1d"),r=qC(t,"y","setdiff1d"),Sx(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),Sx(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),Sx(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return o=f.sent(),[4,r.data()];case 2:for(a=f.sent(),i=new Set(a),s=0,c=0;c<o.length;c++)i.has(o[c])||s++;for(u=new pw([s],n.dtype),l=new pw([s],"int32"),c=0,d=0;c<o.length;c++)i.has(o[c])||(u.values[d]=o[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}}))}))},fill:vk,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Mw.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:pk,range:gk,scalar:lk,tensor:sk,tensor1d:ck,tensor2d:dk,tensor3d:fk,tensor4d:hk,tensor5d:function(e,t,n){if(_x(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=HC(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return uk(e,t,r,n)},tensor6d:function(e,t,n){if(_x(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=HC(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return uk(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),Mw.makeVariable(e,t,n,r)},zeros:mk,onesLike:yk,zerosLike:bk,transpose:fE,softmax:cE,logSoftmax:dE,localResponseNormalization:JD,norm:ZD,gather:QR,unsortedSegmentSum:JR,basicLSTMCell:eI,multiRNNCell:tI,movingAverage:nI,stridedSlice:rI,topk:oI,scatterND:aI,fft:iI,ifft:sI,rfft:uI,irfft:lI,sparseToDense:dI,gatherND:fI,diag:hI,dropout:pI,hannWindow:gI,hammingWindow:yI,frame:bI,stft:xI,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),sx(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,c,d,f,h,p,m,v;return ux(this,(function(g){switch(g.label){case 0:return r=qC(e,"predictions","inTopK"),o=qC(t,"targets","inTopK"),Sx(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),Sx(r.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank})),Ex(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],Sx(n>0&&n<=a,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n})),[4,r.data()];case 1:return i=g.sent(),[4,o.data()];case 2:for(s=g.sent(),u=[i.length/a,a],c=u[1],d=Lx("bool",l=u[0]),f=0;f<l;f++){for(h=f*c,p=i.subarray(h,h+c),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});for(m.sort((function(e,t){return t.value-e.value})),d[f]=0,v=0;v<n;v++)if(m[v].index===s[f]){d[f]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,sk(d,o.shape,"bool")]}}))}))}});function ZI(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Sx("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function eA(e,t,n,r,o,a){for(var i=o.strideHeight,s=o.strideWidth,u=o.dilationHeight,l=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=_k(o.outShape,n),v=m.values,g=o.outShape[1]*o.outShape[2]*o.outShape[3],y=o.outShape[2]*o.outShape[3],b=o.outShape[3],x=0;x<o.batchSize;++x)for(var w=x*g,C=x*r[0],k=0;k<o.inChannels;++k)for(var S=0;S<o.outHeight;++S)for(var E=S*i-f,_=Math.max(0,E),N=Math.min(o.inHeight,c+E),T=w+S*y,R=0;R<o.outWidth;++R){for(var D=R*s-h,I=Math.max(0,D),A=Math.min(o.inWidth,d+D),O=p,M=0,P=0,j=_;j<N;j+=u){for(var F=C+j*r[1],L=I;L<A;L+=l){var B=e[F+L*r[2]+k];"max"===a&&B>O?O=B:"avg"===a&&(M+=B,P++)}if(isNaN(O))break}v[T+R*b+k]="avg"===a?M/P:O}return m}function tA(e,t,n,r,o,a){void 0===o&&(o=!1),void 0===a&&(a=!1);for(var i=_k(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=_k(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-h,x=b;x<0;)x+=l;for(var w=Math.min(r.inHeight,d+b),C=0;C<r.outWidth;++C){for(var k=C*u-p,S=k;S<0;)S+=c;for(var E=Math.min(r.inWidth,f+k),_=Number.NEGATIVE_INFINITY,N=-1,T=x;T<w;T+=l)for(var R=T-b,D=S;D<E;D+=c){var I=D-k,A=m.get(v,T,D,g);A>_&&(_=A,N=o?a?((v*r.inHeight+T)*r.inWidth+D)*r.inChannels+g:(T*r.inWidth+D)*r.inChannels+g:R*f+I)}i.set(N,v,y,C,g)}}return i}function nA(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var rA=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new hE(t,Mw),t}return ix(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,cx().get("IS_NODE")&&zC("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return sx(this,void 0,void 0,(function(){return ux(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?IE(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return iw(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return _k(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return Mw.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return sx(this,void 0,void 0,(function(){var t;return ux(this,(function(n){return t=rw(),e(),[2,{kernelMs:rw()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Mw.keep(e.clone()),imag:Mw.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(ZI(e,"slice"),sE(e.shape,t,n)){var r=uE(t,e.strides),o=Tx(n);return sk(this.readSync(e.dataId).subarray(r,r+o),n,e.dtype)}for(var a=_k(n,e.dtype),i=this.bufferSync(e),s=0;s<a.size;++s){var u=a.indexToLoc(s).map((function(e,n){return e+t[n]}));a.values[s]=i.get.apply(i,u)}return a.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){ZI(e,"stridedSlice");var o=oE(t,n,r);if(o.some((function(e){return 0===e})))return sk([],o);for(var a=_k(o,e.dtype),i=this.bufferSync(e),s=0;s<a.size;s++){for(var u=a.indexToLoc(s),l=new Array(u.length),c=0;c<l.length;c++)l[c]=u[c]*r[c]+t[c];a.set.apply(a,[i.get.apply(i,l)].concat(u))}return a.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=_k([e.size,e.size],e.dtype),r=n.values,o=0;o<t.length;o++)r[o*e.size+o]=t[o];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,a=0;a<e.rank;a++)a!==t&&(r[o++]=e.shape[a]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[t]=a,u[a]=this.slice(e,i,s).reshape(r);return u},t.prototype.reverse=function(e,t){ZI(e,"reverse");for(var n=_k(e.shape,e.dtype),r=this.bufferSync(e),o=function(o){var a=n.indexToLoc(o),i=a.slice();t.forEach((function(t){return i[t]=e.shape[t]-1-i[t]})),n.set.apply(n,[r.get.apply(r,i)].concat(a))},a=0;a<n.size;a++)o(a);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return ak(e)})),o=e.map((function(e){return ik(e)}));return ok(this.concat(r,t),this.concat(o,t))}var a=e.map((function(e){var n=Tx(e.shape.slice(t));return e.as2D(-1,n)})),i=nk(a.map((function(e){return e.shape})),1),s=_k(i,e[0].dtype).values;if(1===a[0].shape[0]){var u=0;a.forEach((function(e){s.set(n.readSync(e.dataId),u),u+=e.size}))}else{var l=0;a.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,o=0;o<e.shape[0];++o)for(var a=o*i[1]+l,u=0;u<e.shape[1];++u)s[a+u]=t[r++];l+=e.shape[1]}))}var c=nk(e.map((function(e){return e.shape})),t);return sk(s,c,e[0].dtype)},t.prototype.neg=function(e){return ZI(e,"neg"),this.multiply(lk(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,_w(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;ZI(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=_k(e[0].shape,e[0].dtype),o=r.values,a=0;a<e.length;a++)for(var i=n[a],s=0;s<o.length;s++)o[s]+=i[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=jx([t],e.shape),r=this.max(e,n),o=XC(r.shape,n),a=this.subtract(e,r.reshape(o)),i=this.exp(a),s=this.sum(i,n).reshape(o);return XS(i,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,_w(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return ZI([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){ZI([e,t],"matMul");for(var o=n?e.shape[1]:e.shape[2],a=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],d=c[0],f=c[1],h=c[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=p[0],v=p[1],g=p[2],y=a*i,b=_k([s,a,i],e.dtype),x=b.values,w=this.blockSize,C=0;C<s;C++)for(var k=0;k<a;k+=w)for(var S=0;S<i;S+=w)for(var E=0;E<o;E+=w)for(var _=Math.min(k+w,a),N=Math.min(S+w,i),T=Math.min(E+w,o),R=k;R<_;R++)for(var D=S;D<N;D++){for(var I=0,A=E;A<T;A++)I+=u[C*d+R*f+A*h]*l[A*m+D*v+C*g];x[C*y+(R*i+D)]+=I}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,a=e.bias,i=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,o);return a&&(u=this.add(u,a)),i&&(u=nA(this,u,i,s)),u},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,_w(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.floorDiv=function(e,t){return ZI([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){ZI(e,"sum"),QC("sum",t,e.rank);for(var n=$C(e.shape,t),r=n[0],o=n[1],a=mk(r,_w(e.dtype,"int32")),i=Tx(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=0,f=0;f<i;++f)d+=u[c+f];s[l]=d}return a},t.prototype.prod=function(e,t){ZI(e,"sum");for(var n=$C(e.shape,t),r=n[0],o=n[1],a=mk(r,_w(e.dtype,"int32")),i=Tx(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=1,f=0;f<i;++f)d*=u[c+f];s[l]=d}return a},t.prototype.unsortedSegmentSum=function(e,t,n){ZI(e,"unsortedSegmentSum");for(var r=[],o=e.rank-t.rank,a=0;a<o;++a)t=t.expandDims(a+1);for(a=0;a<n;++a){var i=lk(a,"int32"),s=FR(i,t).asType("float32").mul(e).sum(0);r.push(s)}return Pk(r)},t.prototype.argMin=function(e,t){ZI(e,"argMin");var n=[t];QC("argMin",n,e.rank);for(var r=$C(e.shape,n),o=r[0],a=r[1],i=mk(o,"int32"),s=Tx(a),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,f=l[d],h=0,p=0;p<s;++p){var m=l[d+p];m<f&&(f=m,h=p)}u[c]=h}return i},t.prototype.argMax=function(e,t){ZI(e,"argMax");var n=[t];QC("argMax",n,e.rank);for(var r=$C(e.shape,n),o=r[0],a=r[1],i=mk(o,"int32"),s=Tx(a),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,f=l[d],h=0,p=0;p<s;++p){var m=l[d+p];m>f&&(f=m,h=p)}u[c]=h}return i},t.prototype.cumsum=function(e,t,n,r){if(ZI(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var o=_w(e.dtype,"int32"),a=mk(e.shape,o),i=this.readSync(a.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var d=0;d<u;d++){var f=l(c,d);if(0===d)i[f]=n?0:s[f];else{var h=l(c,d-1);i[f]=n?s[h]+i[h]:s[f]+i[h]}}return a},t.prototype.equal=function(e,t){return ZI([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return ZI([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return ZI([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return ZI([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return ZI([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return ZI([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){ZI(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return ZI([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return ZI([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){ZI([e,t,n],"select");for(var r=this.readSync(e.dataId),o=this.readSync(t.dataId),a=this.readSync(n.dataId),i=mk(t.shape,_w(t.dtype,n.dtype)),s=this.readSync(i.dataId),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:Tx(t.shape.slice(1)),c=0;c<r.length;c++)for(var d=0;d<l;d++)1===r[c]?s[u++]=o[c]:s[u++]=a[c];return i},t.prototype.where=function(e){ZI([e],"where");var t=this.readSync(e.dataId);return GE(e.shape,t)},t.prototype.topk=function(e,t,n){return ZI(e,"topk"),qE(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){ZI(e,"min"),QC("min",t,e.rank);for(var n=$C(e.shape,t),r=n[0],o=n[1],a=mk(r,e.dtype),i=Tx(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],f=0;f<i;++f){var h=u[c+f];h<d&&(d=h)}s[l]=d}return a},t.prototype.minimum=function(e,t){return ZI([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return ZI([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){ZI(e,"max"),QC("max",t,e.rank);for(var n=$C(e.shape,t),r=n[0],o=n[1],a=mk(r,e.dtype),i=Tx(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],f=0;f<i;++f){var h=u[c+f];h>d&&(d=h)}s[l]=d}return a},t.prototype.maximum=function(e,t){return ZI([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){ZI(e,"all"),QC("all",t,e.rank);for(var n=$C(e.shape,t),r=n[0],o=n[1],a=mk(r,e.dtype),i=Tx(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],f=0;f<i;++f){var h=u[c+f];d=d&&h}s[l]=d}return a},t.prototype.any=function(e,t){ZI(e,"any"),QC("any",t,e.rank);for(var n=$C(e.shape,t),r=n[0],o=n[1],a=mk(r,e.dtype),i=Tx(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],f=0;f<i;++f){var h=u[c+f];d=d||h}s[l]=d}return a},t.prototype.squaredDifference=function(e,t){return ZI([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){ZI(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){ZI(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){ZI(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){ZI(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){ZI(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){ZI(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){ZI(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=Math.floor(t[r]);t[r]-o<.5?n[r]=Math.floor(t[r]):t[r]-o>.5?n[r]=Math.ceil(t[r]):n[r]=o%2==0?o:o+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){ZI(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){ZI(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){ZI(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){ZI(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log1p(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){ZI(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){ZI(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=1/Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){ZI(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){ZI(e,"relu");for(var t=mk(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return t},t.prototype.relu6=function(e){ZI(e,"relu");for(var t=mk(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.min(Math.max(0,r[o]),6);return t},t.prototype.prelu=function(e,t){return ZI([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){ZI(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?o:Math.exp(o)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){ZI([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=this.readSync(e.dataId),a=0;a<r.length;++a){var i=r[a];n[a]=i>=1?o[a]:o[a]*(i+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){ZI(e,"selu");for(var t=oT,n=aT,r=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?n*i:t*(Math.exp(i)-1)}return this.makeOutput(r,e.shape,"float32")},t.prototype.clip=function(e,t,n){ZI(e,"clip");for(var r=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>n?n:i<t?t:i}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var o=n[2*r],a=n[2*r+1];t[r]=Math.hypot(o,a)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){ZI(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){ZI(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){ZI(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var a,i=r[o]>-t,s=r[o]<t,u=Math.exp(r[o]);a=s?u:i?r[o]:Math.log(1+u),n[o]=a}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){ZI(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){ZI(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){ZI(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){ZI(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){ZI(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){ZI(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return ZI([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){ZI(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){ZI(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){ZI(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Ix(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){ZI(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){ZI(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){ZI(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){ZI(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=Math.sign(n[r]),a=Math.abs(n[r]),i=1/(1+.3275911*a);t[r]=o*(1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-a*a))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),ZI(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var a=r[o];isNaN(a)?n[o]=NaN:n[o]=a>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,a=e.activation,i=e.preluActivationWeights,s=this.conv2d(t,n,r);return o&&(s=this.add(s,o)),a&&(s=nA(this,s,a,i)),s},t.prototype.conv2d=function(e,t,n){ZI([e,t],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l="channelsLast"===n.dataFormat,c=_k(n.outShape,e.dtype),d=e.strides[0],f=l?e.strides[1]:e.strides[2],h=l?e.strides[2]:1,p=l?1:e.strides[1],m=c.strides[0],v=l?c.strides[1]:c.strides[2],g=l?c.strides[2]:1,y=l?1:c.strides[1],b=this.readSync(e.dataId),x=this.readSync(t.dataId),w=c.values,C=0;C<n.batchSize;++C)for(var k=C*d,S=C*m,E=0;E<n.outHeight;++E)for(var _=S+E*v,N=E*n.strideHeight-u,T=0;T<r;T++){var R=N+T*a;if(!(R<0||R>=n.inHeight))for(var D=T*t.strides[0],I=k+R*f,A=0;A<n.outWidth;++A)for(var O=_+A*g,M=A*n.strideWidth-s,P=0;P<o;P++){var j=M+P*i;if(!(j<0||j>=n.inWidth))for(var F=I+j*h,L=D+P*t.strides[1],B=0;B<n.inChannels;++B){for(var W=b[F+B*p],U=0;U<n.outChannels;++U)w[O+U*y]+=W*x[L+U];L+=n.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,o=n.filterHeight,a=n.filterWidth,i=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,l=n.padInfo.front,c=n.padInfo.left,d=n.padInfo.top,f=_k(n.outShape,e.dtype),h=this.readSync(e.dataId),p=this.readSync(t.dataId),m=f.values,v=0;v<n.batchSize;++v)for(var g=v*e.strides[0],y=v*f.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*f.strides[1],w=b*n.strideDepth-l,C=0;C<r;C++){var k=w+C*i;if(!(k<0||k>=n.inDepth))for(var S=C*t.strides[0],E=g+k*e.strides[1],_=0;_<n.outHeight;++_)for(var N=x+_*f.strides[2],T=_*n.strideHeight-d,R=0;R<o;R++){var D=T+R*s;if(!(D<0||D>=n.inHeight))for(var I=S+R*t.strides[1],A=E+D*e.strides[2],O=0;O<n.outWidth;++O)for(var M=N+O*n.outChannels,P=O*n.strideWidth-c,j=0;j<a;j++){var F=P+j*u;if(!(F<0||F>=n.inWidth))for(var L=I+j*t.strides[2],B=A+F*n.inChannels,W=L,U=0;U<n.inChannels;++U){for(var z=h[B+U],H=0;H<n.outChannels;++H)m[M+H]+=z*p[W+H];W+=n.outChannels}}}}return f.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){ZI([e,t],"conv2dDerInput");for(var r=_k(n.inShape,"float32"),o=r.values,a=this.readSync(e.dataId),i=this.readSync(t.dataId),s=t.strides,u=s[0],l=s[1],c=s[2],d=n.batchSize,f=n.filterHeight,h=n.filterWidth,p=n.inChannels,m=n.inHeight,v=n.inWidth,g=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,C=n.dataFormat,k=f-1-n.padInfo.top,S=h-1-n.padInfo.left,E="channelsLast"===C,_=r.strides[0],N=E?r.strides[1]:r.strides[2],T=E?r.strides[2]:1,R=E?1:r.strides[1],D=e.strides[0],I=E?e.strides[1]:e.strides[2],A=E?e.strides[2]:1,O=E?1:e.strides[1],M=0;M<d;++M)for(var P=0;P<p;++P)for(var j=0;j<m;++j)for(var F=j-k,L=Math.max(0,Math.ceil(F/x)),B=Math.min(y,(f+F)/x),W=0;W<v;++W){for(var U=W-S,z=Math.max(0,Math.ceil(U/w)),H=Math.min(b,(h+U)/w),V=0,q=L;q<B;++q)for(var G=q*x-F,Y=z;Y<H;++Y)for(var K=D*M+I*q+A*Y,$=u*(f-1-G)+l*(h-1-(Y*w-U))+c*P,X=0;X<g;++X)V+=a[K+O*X]*i[$+X];o[_*M+N*j+T*W+R*P]=V}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=_k(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],l=a[3],c=this.readSync(e.dataId),d=e.strides,f=d[0],h=d[1],p=d[2],m=d[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],C=n.batchSize,k=n.filterDepth,S=n.filterHeight,E=n.filterWidth,_=n.inChannels,N=n.inDepth,T=n.inHeight,R=n.inWidth,D=n.outChannels,I=n.outDepth,A=n.outHeight,O=n.outWidth,M=n.strideDepth,P=n.strideHeight,j=n.strideWidth,F=k-1-n.padInfo.front,L=S-1-n.padInfo.top,B=E-1-n.padInfo.left,W=0;W<C;++W)for(var U=0;U<_;++U)for(var z=0;z<N;++z)for(var H=z-F,V=Math.max(0,Math.ceil(H/M)),q=Math.min(I,(k+H)/M),G=0;G<T;++G)for(var Y=G-L,K=Math.max(0,Math.ceil(Y/P)),$=Math.min(A,(S+Y)/P),X=0;X<R;++X){for(var Q=X-B,J=Math.max(0,Math.ceil(Q/j)),Z=Math.min(O,(E+Q)/j),ee=0,te=V;te<q;++te)for(var ne=te*M-H,re=K;re<$;++re)for(var oe=re*P-Y,ae=J;ae<Z;++ae)for(var ie=f*W+h*te+p*re+m*ae,se=y*(k-1-ne)+b*(S-1-oe)+x*(E-1-(ae*j-Q))+w*U,ue=0;ue<D;++ue)ee+=c[ie+ue]*v[se+ue];o[i*W+s*z+u*G+l*X+U]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){ZI([e,t],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s="channelsLast"===n.dataFormat,u=_k(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,d=this.bufferSync(e),f=this.bufferSync(t),h=0;h<a;++h)for(var p=Math.max(0,Math.ceil((c-h)/r)),m=Math.min(n.outHeight,(n.inHeight+c-h)/r),v=0;v<i;++v)for(var g=Math.max(0,Math.ceil((l-v)/o)),y=Math.min(n.outWidth,(n.inWidth+l-v)/o),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,C=0;C<n.batchSize;++C)for(var k=p;k<m;++k)for(var S=h+k*r-c,E=g;E<y;++E){var _=v+E*o-l;w+=s?d.get(C,S,_,b)*f.get(C,k,E,x):d.get(C,b,S,_)*f.get(C,x,k,E)}u.set(w,h,v,b,x)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=_k(n.filterShape,"float32"),c=l.values,d=l.strides,f=d[0],h=d[1],p=d[2],m=d[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],C=this.readSync(e.dataId),k=e.strides,S=k[0],E=k[1],_=k[2],N=k[3],T=n.padInfo.front,R=n.padInfo.left,D=n.padInfo.top,I=0;I<i;++I)for(var A=Math.max(0,Math.ceil((T-I)/r)),O=Math.min(n.outDepth,(n.inDepth+T-I)/r),M=I*f,P=0;P<s;++P)for(var j=Math.max(0,Math.ceil((D-P)/o)),F=Math.min(n.outHeight,(n.inHeight+D-P)/o),L=P*h+M,B=0;B<u;++B)for(var W=Math.max(0,Math.ceil((R-B)/a)),U=Math.min(n.outWidth,(n.inWidth+R-B)/a),z=B*p+L,H=0;H<n.inChannels;++H)for(var V=H*m+z,q=0;q<n.outChannels;++q){for(var G=0,Y=0;Y<n.batchSize;++Y)for(var K=Y*S,$=Y*y,X=A;X<O;++X)for(var Q=(I+X*r-T)*E+K,J=X*b+$,Z=j;Z<F;++Z)for(var ee=(P+Z*o-D)*_+Q,te=Z*x+J,ne=W;ne<U;++ne){var re=ne*w+te;G+=C[(B+ne*a-R)*N+ee+H]*v[re+q]}c[V+q]=G}return l.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,a=e.activation,i=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return o&&(s=this.add(s,o)),a&&(s=nA(this,s,a,i)),s},t.prototype.depthwiseConv2D=function(e,t,n){ZI([e,t],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=_k(n.outShape,e.dtype),d=this.readSync(e.dataId),f=this.readSync(t.dataId),h=c.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],v=p*c.strides[0],g=0;g<n.outHeight;++g)for(var y=v+g*c.strides[1],b=g*n.strideHeight-s,x=0;x<r;++x){var w=b+x*a;if(!(w<0||w>=n.inHeight))for(var C=x*t.strides[0],k=m+w*e.strides[1],S=0;S<n.outWidth;++S)for(var E=y+S*c.strides[2],_=S*n.strideWidth-u,N=0;N<o;++N){var T=_+N*i;if(!(T<0||T>=n.inWidth))for(var R=C+N*t.strides[1],D=k+T*n.inChannels,I=E,A=R,O=0;O<n.inChannels;++O){for(var M=d[D+O],P=0;P<l;++P)h[I+P]+=M*f[A+P];I+=l,A+=l}}}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){ZI([e,t],"depthwiseConv2DDerInput");for(var r=_k(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],l=this.readSync(e.dataId),c=e.strides,d=c[0],f=c[1],h=c[2],p=this.readSync(t.dataId),m=t.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,C=n.inChannels,k=n.inHeight,S=n.inWidth,E=n.outChannels,_=n.outHeight,N=n.outWidth,T=n.strideHeight,R=n.strideWidth,D=x-1-n.padInfo.top,I=w-1-n.padInfo.left,A=E/C,O=0;O<b;++O)for(var M=0;M<C;++M)for(var P=0;P<k;++P)for(var j=P-D,F=Math.max(0,Math.ceil(j/T)),L=Math.min(_,(x+j)/T),B=0;B<S;++B){for(var W=B-I,U=Math.max(0,Math.ceil(W/R)),z=Math.min(N,(w+W)/R),H=0,V=F;V<L;++V)for(var q=V*T-j,G=U;G<z;++G)for(var Y=d*O+f*V+h*G,K=v*(x-1-q)+g*(w-1-(G*R-W))+y*M,$=0;$<A;++$)H+=l[Y+(M*A+$)]*p[K+$];o[i*O+s*P+u*B+M]=H}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){ZI([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=_k(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,d=this.bufferSync(e),f=this.bufferSync(t),h=0;h<a;++h)for(var p=Math.max(0,Math.ceil((l-h)/r)),m=Math.min(n.outHeight,(n.inHeight+l-h)/r),v=0;v<i;++v)for(var g=Math.max(0,Math.ceil((u-v)/o)),y=Math.min(n.outWidth,(n.inWidth+u-v)/o),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/c),w=b%c,C=0,k=0;k<n.batchSize;++k)for(var S=p;S<m;++S)for(var E=h+S*r-l,_=g;_<y;++_){var N=v+_*o-u;C+=d.get(k,E,N,x)*f.get(k,S,_,b)}s.set(C,h,v,x,w)}return s.toTensor()},t.prototype.tile=function(e,t){return ZI(e,"tile"),VE(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){ZI(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),o=t.map((function(e){return e[0]})),a=this.bufferSync(e),i=_k(r,e.dtype);0!==n&&i.values.fill(n);for(var s=0;s<e.size;s++){var u=a.indexToLoc(s),l=u.map((function(e,t){return e+o[t]}));i.set.apply(i,[a.get.apply(a,u)].concat(l))}return i.toTensor()},t.prototype.gather=function(e,t,n){ZI([e,t],"gather");var r=e.shape.slice(),o=this.readSync(t.dataId);r[n]=o.length;for(var a=_k(r,e.dtype),i=this.bufferSync(e),s=0;s<a.size;++s){var u=a.indexToLoc(s),l=u.slice();l[n]=o[u[n]];var c=i.locToIndex(l);a.values[s]=i.values[c]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){ZI([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),o=Fk(e.shape,t,r),a=Lk(o.length,t.length),i=Bk(e.shape,t,r),s=Wk(n,t.length),u=Uk(i,n,t.length);return fE(e.reshape(o),a).reshape(i).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){ZI([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var a=1+t.length;a<e.shape.length;++a)o.push([0,0]);var i=e.pad(o),s=Fk(i.shape,t,r,!1),u=Lk(s.length,t.length,!1),l=Bk(i.shape,t,r,!1);return fE(i.reshape(s),u).reshape(l)},t.prototype.maxPool=function(e,t){return ZI(e,"maxPool"),eA(this.readSync(e.dataId),e.shape,e.dtype,e.strides,t,"max").toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){ZI([t,n],"maxPoolBackprop");for(var o=this.readSync(t.dataId),a=_k(r.outShape,t.dtype,tA(o,t.shape,t.dtype,r).values),i=r.strideHeight,s=r.strideWidth,u=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=d-1-r.padInfo.left,h=c-1-r.padInfo.top,p=_k(t.shape,"float32"),m=this.bufferSync(e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-h,w=b-f,C=0,k=0;k<c;k+=u){var S=(x+k)/i;if(!(S<0||S>=r.outHeight||Math.floor(S)!==S))for(var E=0;E<d;E+=l){var _=(w+E)/s;if(!(_<0||_>=r.outWidth||Math.floor(_)!==_)){var N=c*d-1-a.get(v,S,_,g)===k*d+E?1:0;0!==N&&(C+=m.get(v,S,_,g)*N)}}}p.set(C,v,y,b,g)}return p.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){ZI([e,t],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=c-1-n.padInfo.left,f=l-1-n.padInfo.top,h=_k(t.shape,"float32"),p=1/(a*i),m=this.bufferSync(e),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-f,w=b-d,C=0,k=0;k<l;k+=s){var S=(x+k)/r;if(!(S<0||S>=n.outHeight||Math.floor(S)!==S))for(var E=0;E<c;E+=u){var _=(w+E)/o;_<0||_>=n.outWidth||Math.floor(_)!==_||(C+=m.get(v,S,_,g))}}h.set(C*p,v,y,b,g)}return h.toTensor()},t.prototype.pool3d=function(e,t,n){ZI(e,"pool3d");for(var r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(e.dataId),g=_k(t.outShape,e.dtype),y=g.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],C=t.outShape[4],k=0;k<t.batchSize;++k)for(var S=k*b,E=k*e.strides[0],_=0;_<t.inChannels;++_)for(var N=0;N<t.outDepth;++N){for(var T=N*r-f,R=T;R<0;)R+=i;for(var D=Math.min(t.inDepth,l+T),I=S+N*x,A=0;A<t.outHeight;++A){for(var O=A*o-h,M=O;M<0;)M+=s;for(var P=Math.min(t.inHeight,c+O),j=I+A*w,F=0;F<t.outWidth;++F){for(var L=F*a-p,B=L;B<0;)B+=u;for(var W=Math.min(t.inWidth,d+L),U=j+F*C,z=m,H=0,V=0,q=R;q<D;q+=i){for(var G=E+q*e.strides[1],Y=M;Y<P;Y+=s){for(var K=G+Y*e.strides[2],$=B;$<W;$+=u){var X=v[K+$*e.strides[3]+_];if("max"===n&&X>z?z=X:"avg"===n&&(H+=X,V++),isNaN(z))break}if(isNaN(z))break}if(isNaN(z))break}y[U+_]="avg"===n?H/V:z}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return ZI(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){ZI([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,f=n.effectiveFilterDepth,h=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=f-1-n.padInfo.front,v=p-1-n.padInfo.left,g=h-1-n.padInfo.top,y=_k(t.shape,"float32"),b=1/(i*s*u),x=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var C=0;C<n.inChannels;++C)for(var k=0;k<n.inDepth;++k)for(var S=0;S<n.inHeight;++S)for(var E=0;E<n.inWidth;++E){for(var _=k-m,N=S-g,T=E-v,R=0,D=0;D<f;D+=l){var I=(_+D)/r;if(!(I<0||I>=n.outDepth||Math.floor(I)!==I))for(var A=0;A<h;A+=c){var O=(N+A)/o;if(!(O<0||O>=n.outHeight||Math.floor(O)!==O))for(var M=0;M<p;M+=d){var P=(T+M)/a;P<0||P>=n.outWidth||Math.floor(P)!==P||(R+=x.get(w,I,O,P,C))}}}y.set(R*b,w,k,S,E,C)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return ZI(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=_k(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left,m=this.bufferSync(e),v=0;v<t.batchSize;++v)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-f,x=b;x<0;)x+=i;for(var w=Math.min(t.inDepth,l+b),C=0;C<t.outHeight;++C){for(var k=C*o-h,S=k;S<0;)S+=s;for(var E=Math.min(t.inHeight,c+k),_=0;_<t.outWidth;++_){for(var N=_*a-p,T=N;T<0;)T+=u;for(var R=Math.min(t.inWidth,d+N),D=Number.NEGATIVE_INFINITY,I=-1,A=x;A<w;A+=i)for(var O=A-b,M=S;M<E;M+=s)for(var P=M-k,j=T;j<R;j+=u){var F=j-N,L=m.get(v,A,M,j,g);L>=D&&(D=L,I=O*c*d+P*c+F)}n.set(I,v,y,C,_,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){ZI([t,n],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(t,r),a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=d-1-r.padInfo.front,m=h-1-r.padInfo.left,v=f-1-r.padInfo.top,g=_k(t.shape,"float32"),y=this.bufferSync(o),b=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var C=0;C<r.inDepth;++C)for(var k=0;k<r.inHeight;++k)for(var S=0;S<r.inWidth;++S){for(var E=C-p,_=k-v,N=S-m,T=0,R=0;R<d;R+=u){var D=(E+R)/a;if(!(D<0||D>=r.outDepth||Math.floor(D)!==D))for(var I=0;I<f;I+=l){var A=(_+I)/i;if(!(A<0||A>=r.outHeight||Math.floor(A)!==A))for(var O=0;O<h;O+=c){var M=(N+O)/s;if(!(M<0||M>=r.outWidth||Math.floor(M)!==M)){var P=d*f*h-1-y.get(x,D,A,M,w)===R*f*h+I*h+O?1:0;0!==P&&(T+=b.get(x,D,A,M,w)*P)}}}}g.set(T,x,C,k,S,w)}return g.toTensor()},t.prototype.cast=function(e,t){return TE(e,t,this)},t.prototype.reshape=function(e,t){return RE(e,t)},t.prototype.avgPool=function(e,t){return ZI(e,"avgPool"),ZI(e,"maxPool"),eA(this.readSync(e.dataId),e.shape,e.dtype,e.strides,t,"avg").toTensor().toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){ZI(e,"resizeBilinear");for(var o=e.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=this.readSync(e.dataId),c=new Float32Array(Tx([a,t,n,u])),d=[r&&t>1?i-1:i,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=0,p=d[0]/f[0],m=d[1]/f[1],v=0;v<a;v++)for(var g=0;g<t;g++)for(var y=p*g,b=Math.floor(y),x=y-b,w=Math.min(i-1,Math.ceil(y)),C=v*e.strides[0]+b*e.strides[1],k=v*e.strides[0]+w*e.strides[1],S=0;S<n;S++)for(var E=m*S,_=Math.floor(E),N=E-_,T=Math.min(s-1,Math.ceil(E)),R=C+_*e.strides[2],D=k+_*e.strides[2],I=C+T*e.strides[2],A=k+T*e.strides[2],O=0;O<u;O++){var M=l[R+O],P=l[D+O],j=M+(l[I+O]-M)*N,F=j+(P+(l[A+O]-P)*N-j)*x;c[h++]=F}return sk(c,[a,t,n,u])},t.prototype.resizeBilinearBackprop=function(e,t,n){ZI([e,t],"resizeBilinearBackprop");for(var r=t.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(o*a*i*s),f=[n&&l>1?a-1:a,n&&c>1?i-1:i],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],p=f[0]/h[0],m=f[1]/h[1],v=this.readSync(e.dataId),g=0,y=0;y<o;y++)for(var b=y*t.strides[0],x=0;x<l;x++)for(var w=x*p,C=Math.floor(w),k=Math.min(Math.ceil(w),a-1),S=b+C*t.strides[1],E=b+k*t.strides[1],_=w-C,N=1-_,T=0;T<c;T++)for(var R=T*m,D=Math.floor(R),I=Math.min(Math.ceil(R),i-1),A=R-D,O=1-A,M=S+D*t.strides[2],P=S+I*t.strides[2],j=E+D*t.strides[2],F=E+I*t.strides[2],L=N*O,B=N*A,W=_*O,U=_*A,z=0;z<s;z++){var H=v[g++];d[M+z]+=H*L,d[P+z]+=H*B,d[j+z]+=H*W,d[F+z]+=H*U}return hk(d,[o,i,a,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){ZI(e,"resizeNearestNeighbor");for(var o=e.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=this.readSync(e.dataId),c=new Float32Array(a*t*n*u),d=[r&&t>1?i-1:i,r&&n>1?s-1:s],f=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=d[0]/f[0],p=d[1]/f[1],m=0,v=0;v<a;v++)for(var g=v*e.strides[0],y=0;y<t;y++)for(var b=h*y,x=g+Math.min(i-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var C=p*w,k=x+Math.min(s-1,r?Math.round(C):Math.floor(C))*e.strides[2],S=0;S<u;S++){var E=l[k+S];c[m++]=E}return sk(c,[a,t,n,u],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){ZI([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(o*a*i*s),f=this.readSync(e.dataId),h=[n&&l>1?a-1:a,n&&c>1?i-1:i],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=h[0]/p[0],v=h[1]/p[1],g=1/m,y=1/v,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2,w=0;w<o;w++)for(var C=w*t.strides[0],k=0;k<a;k++)for(var S=C+k*t.strides[1],E=Math.floor(k*g),_=Math.floor(E-b/2),N=0;N<i;N++)for(var T=S+N*t.strides[2],R=Math.floor(N*y),D=Math.floor(R-x/2),I=0;I<s;I++){for(var A=0,O=0;O<b;O++){var M=O+_;if(!(M<0||M>=l)){var P=C+M*e.strides[1],j=M*m;if(k===Math.min(a-1,n?Math.round(j):Math.floor(j)))for(var F=0;F<x;F++){var L=F+D;if(!(L<0||L>=c)){var B=P+L*e.strides[2],W=L*v;N===Math.min(i-1,n?Math.round(W):Math.floor(W))&&(A+=f[B+I])}}}}d[T+I]=A}return hk(d,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,a){ZI([e,t,n,o,a],"batchNorm");for(var i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),l=o?this.readSync(o.dataId):new Float32Array([1]),c=a?this.readSync(a.dataId):new Float32Array([0]),d=new Float32Array(i.length),f=c.length,h=l.length,p=u.length,m=s.length,v=0,g=0,y=0,b=0,x=0;x<i.length;++x)d[x]=c[v++]+(i[x]-s[g++])*l[y++]/Math.sqrt(u[b++]+r),v>=f&&(v=0),g>=m&&(g=0),y>=h&&(y=0),b>=p&&(b=0);return hk(d,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){ZI(e,"localResponseNormalization4D");var a=e.shape[3],i=a-1,s=this.readSync(e.dataId),u=e.size,l=new Float32Array(u);function c(e){for(var n=e%a,r=e-n+Math.max(0,n-t),o=e-n+Math.min(n+t,i),u=0;r<=o;r++){var l=s[r];u+=l*l}return u}for(var d=0;d<u;d++){var f=c(d),h=s[d]*Math.pow(n+r*f,-o);l[d]=h}return hk(l,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,o,a,i){ZI(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=this.readSync(n.dataId),d=new Float32Array(e.size),f=e.size,h=0;h<f;h++){for(var p=h%s,m=h-p+Math.max(0,p-r),v=h-p+Math.min(s,p+r+1),g=0,y=m;y<v;y++)g+=Math.pow(l[y],2);for(g=a*g+o,y=m;y<v;y++){var b=-2*a*i*l[y]*c[h]/g;h===y&&(b+=Math.pow(g,-i)),b*=u[h],d[y]+=b}}return hk(d,e.shape)},t.prototype.multinomial=function(e,t,n,r){ZI(e,"multinomial");for(var o=t?e:cE(e),a=o.shape[0],i=o.shape[1],s=mk([a,n],"int32"),u=this.readSync(s.dataId),l=this.readSync(o.dataId),c=0;c<a;++c){var d=c*i,f=new Float32Array(i-1);f[0]=l[d];for(var h=1;h<f.length;++h)f[h]=f[h-1]+l[d+h];for(var p=HT(r.toString()),m=c*n,v=0;v<n;++v){var g=p();u[m+v]=f.length;for(var y=0;y<f.length;y++)if(g<f[y]){u[m+v]=y;break}}}return s},t.prototype.oneHot=function(e,t,n,r){ZI(e,"oneHot");var o=new Float32Array(e.size*t);o.fill(r);for(var a=this.readSync(e.dataId),i=0;i<e.size;++i)a[i]>=0&&a[i]<t&&(o[i*t+a[i]]=n);return dk(o,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return ZI(e,"nonMaxSuppression"),FE(this.readSync(e.dataId),this.readSync(t.dataId),n,r,o)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],o=_k(e.shape,"float32"),a=_k(e.shape,"float32"),i=ak(e).as2D(n,r),s=ik(e).as2D(n,r),u=0;u<n;u++)for(var l=i.slice([u,0],[1,r]),c=s.slice([u,0],[1,r]),d=ok(l,c),f=this.readSync(this.fftImpl(d,t).dataId),h=0;h<r;h++){var p=AE(f,h);o.values[u*r+h]=p.real,a.values[u*r+h]=p.imag}return ok(o.toTensor(),a.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(o=ok(ak(o).div(lk(r)),ik(o).div(lk(r)))),o}var a=this.readSync(e.dataId),i=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(a,r,t));return ok(i.real,i.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),o=t/2,a=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),i=ok(a.real,a.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),u=ok(s.real,s.imag).as1D();i=this.fftRadix2(i,o,n),u=this.fftRadix2(u,o,n);var l=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),o=0;o<Math.ceil(e/2);o++){var a=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}(t,n),c=ok(l.real,l.imag).mul(u),d=i.add(c),f=i.sub(c),h=ak(d).concat(ak(f)),p=ik(d).concat(ik(f));return ok(h,p).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),o=0;o<t;o++){for(var a=0,i=0,s=0;s<t;s++){var u=ME(o*s,t,n),l=AE(e,s);a+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(a/=t,i/=t),OE(r,a,i,o)}return r},t.prototype.depthToSpace=function(e,t,n){Sx("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),Sx(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],o=e.shape[1],a=e.shape[2],i=e.shape[3],s=o*t,u=a*t,l=i/(t*t),c=this.readSync(e.dataId),d=new Float32Array(r*s*u*l),f=0,h=0;h<r;++h)for(var p=0;p<s;++p)for(var m=Math.floor(p/t),v=p%t,g=0;g<u;++g)for(var y=Math.floor(g/t),b=(v*t+g%t)*l,x=0;x<l;++x){var w=x+b+i*(y+a*(m+o*h));d[f++]=c[w]}return hk(d,[r,s,u,l])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var o=Jk(e.shape,t.shape),a=_k(o,n),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Xk(e.shape,o),l=Xk(t.shape,o),c=a.values;if(u.length+l.length===0)for(var d=0;d<c.length;++d)c[d]=r(i[d%i.length],s[d%s.length]);else{var f=this.bufferSync(e),h=this.bufferSync(t),p=function(n){var o=a.indexToLoc(n),d=o.slice(-e.rank);u.forEach((function(e){return d[e]=0}));var p=f.locToIndex(d),m=o.slice(-t.rank);l.forEach((function(e){return m[e]=0}));var v=h.locToIndex(m);c[n]=r(i[p],s[v])};for(d=0;d<c.length;++d)p(d)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=Jk(e.shape,t.shape),o=_k(r,"float32"),a=_k(r,"float32"),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Xk(e.shape,r),l=Xk(t.shape,r),c=o.values,d=a.values;if(u.length+l.length===0)for(var f=0;f<c.length;f++){var h=f%i.length,p=f%s.length,m=n(i[2*h],i[2*h+1],s[2*p],s[2*p+1]);c[f]=m.real,d[f]=m.imag}else{var v=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var a=o.indexToLoc(r),f=a.slice(-e.rank);u.forEach((function(e){return f[e]=0}));var h=v.locToIndex(f),p=a.slice(-t.rank);l.forEach((function(e){return p[e]=0}));var m=g.locToIndex(p),y=n(i[2*h],i[2*h+1],s[2*m],s[2*m+1]);c[r]=y.real,d[r]=y.imag};for(f=0;f<c.length;f++)y(f)}return this.complex(o.toTensor(),a.toTensor())},t.prototype.split=function(e,t,n){return HE(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,o,a){for(var i=e.shape,s=i[0],u=i[1],l=i[2],c=i[3],d=t.shape[0],f=r[0],h=r[1],p=_k([d,f,h,c],"float32"),m=this.readSync(t.dataId),v=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=p.strides,x=0;x<d;x++){var w=4*x,C=m[w],k=m[w+1],S=m[w+2],E=m[w+3],_=v[x];if(!(_>=s))for(var N=f>1?(S-C)*(u-1)/(f-1):0,T=h>1?(E-k)*(l-1)/(h-1):0,R=0;R<f;R++){var D=f>1?C*(u-1)+R*N:.5*(C+S)*(u-1);if(D<0||D>u-1)for(var I=0;I<h;I++)for(var A=0;A<c;A++){var O=A+I*b[2]+R*b[1]+x*b[0];p.values[O]=a}else if("bilinear"===o){var M=Math.floor(D),P=Math.ceil(D),j=D-M;for(I=0;I<h;I++)if((q=h>1?k*(l-1)+I*T:.5*(k+E)*(l-1))<0||q>l-1)for(A=0;A<c;A++)O=A+I*b[2]+R*b[1]+x*b[0],p.values[O]=a;else{var F=Math.floor(q),L=Math.ceil(q),B=q-F;for(A=0;A<c;A++){var W=g[O=A+F*y[2]+M*y[1]+_*y[0]],U=g[O=A+L*y[2]+M*y[1]+_*y[0]],z=g[O=A+F*y[2]+P*y[1]+_*y[0]],H=W+(U-W)*B,V=z+(g[O=A+L*y[2]+P*y[1]+_*y[0]]-z)*B;O=A+I*b[2]+R*b[1]+x*b[0],p.values[O]=H+(V-H)*j}}}else for(I=0;I<h;++I){var q;if((q=h>1?k*(l-1)+I*T:.5*(k+E)*(l-1))<0||q>l-1)for(A=0;A<c;A++)O=A+I*b[2]+R*b[1]+x*b[0],p.values[O]=a;else{var G=Math.round(q),Y=Math.round(D);for(A=0;A<c;A++){var K=A+G*y[2]+Y*y[1]+_*y[0],$=A+I*b[2]+R*b[1]+x*b[0];p.values[$]=g[K]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var o=tE(0,e,n),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize;return this.scatter(e,t,n,l,s,i,a,u,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=QS(e,t),a=o[0],i=o[1],s=o[2],u=o[3];if(0===i)return sk([],a,e.dtype);for(var l=new pw([i,s],e.dtype),c=this.readSync(t.dataId),d=this.readSync(e.dataId),f=0;f<i;f++){for(var h=[],p=0,m=0;m<r;m++){var v=c[f*r+m];p+=v*u[m],h.push(v)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+h+" does not index into "+e.shape);for(var g=0;g<s;g++)l.values[f*s+g]=d[p*s+g]}return l.toTensor().reshape(a)},t.prototype.scatterND=function(e,t,n){var r=tE(0,e,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=lk(0);return this.scatter(e,t,n,u,i,a,o,s,l,!0)},t.prototype.fill=function(e,t,n){var r=Bx(n=n||$x(t),Tx(e));return r.fill(t),Mw.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=Bx(e.dtype,Tx(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return DE(e,t,n)},t.prototype.scatter=function(e,t,n,r,o,a,i,s,u,l){var c=[r/o,o],d=this.readSync(e.dataId),f=this.readSync(t.dataId);if(0===r)return sk([],n,t.dtype);var h=new pw(c,t.dtype);h.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<a;p++){for(var m=[],v=0,g=0;g<i;g++){var y=d[p*i+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/o)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<o;b++)l?h.values[v*o+b]+=f[p*o+b]:h.values[v*o+b]=0===t.rank?f[0]:f[p*o+b]}return h.toTensor().reshape(n)},t}(pE);function oA(e,t){return{kernelName:e,backendName:"cpu",kernelFunc:function(n){var r=n.inputs,o=n.backend,a=r,i=a.a,s=a.b,u=o;ZI([i,s],e);var l=u.data.get(i.dataId).values,c=u.data.get(s.dataId).values,d=t(i.shape,s.shape,l,c,i.dtype),f=d[0],h=d[1];return{dataId:u.write(f,h,i.dtype),shape:h,dtype:i.dtype}}}}function aA(e){return function(t,n,r,o,a){var i=Jk(t,n),s=i.length,u=Jx(i),l=Lx(a,Tx(i)),c=t.length,d=n.length,f=Jx(t),h=Jx(n),p=Xk(t,i),m=Xk(n,i);if(p.length+m.length===0)for(var v=0;v<l.length;++v)l[v]=e(r[v%r.length],o[v%o.length]);else{var g=function(t){var n=uw(t,s,u),a=n.slice(-c);p.forEach((function(e){return a[e]=0}));var i=sw(a,c,f),v=n.slice(-d);m.forEach((function(e){return v[e]=0}));var g=sw(v,d,h);l[t]=e(r[i],o[g])};for(v=0;v<l.length;++v)g(v)}return[l,i]}}Mw.registerBackend("cpu",(function(){return new rA}),1);var iA=aA((function(e,t){return e/t})),sA=oA(zk,iA),uA={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,a=n,i=a.filterSize,s=a.strides,u=a.pad,l=a.includeBatchInIndex,c=r;ZI(o,"MaxPoolWithArgmax");var d=c.data.get(o.dataId).values,f=vE(o.shape,i,s,[1,1],u),h=function(e,t,n,r,o){var a=eA(e,0,n,Jx(t),o,"max"),i=tA(e,t,n,o,!0,r);return[a.values,i.values]}(d,o.shape,o.dtype,l,f),p=h[0],m=h[1],v=c.write(p,f.outShape,o.dtype),g=c.write(m,f.outShape,o.dtype);return[{dataId:v,shape:f.outShape,dtype:o.dtype},{dataId:g,shape:f.outShape,dtype:"int32"}]}},lA={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,f=n;ZI(a,"NonMaxSuppressionWithScore");var h=LE(f.data.get(a.dataId).values,f.data.get(i.dataId).values,u,l,c,d);return[h.selectedIndices,h.selectedScores]}},cA={kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;ZI(r,"square");for(var a=o.data.get(r.dataId).values,i=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];i[s]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},dA=aA((function(e,t){var n=e-t;return n*n}));function fA(e,t,n,r,o){for(var a=Tx(t),i=t.length,s=Jx(t),u=Jx(o),l=Lx(n,Tx(o)),c=0;c<a;++c){for(var d=uw(c,i,s),f=new Array(d.length),h=0;h<f.length;h++)f[h]=d[r[h]];l[sw(f,i,u)]=e[c]}return l}for(var hA=0,pA=[lA,cA,oA(Hk,dA),sA,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,a=n.perm,i=r;ZI(o,"transpose");for(var s=o.shape.length,u=new Array(s),l=0;l<u.length;l++)u[l]=o.shape[a[l]];var c=fA(i.data.get(o.dataId).values,o.shape,o.dtype,a,u);return{dataId:i.write(c,u,o.dtype),shape:u,dtype:o.dtype}}},uA];hA<pA.length;hA++)gx(pA[hA]);for(var mA,vA=function(e){this.variableNames=["A"];var t=JE(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},gA=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=JE(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},yA=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=d_(this.rank),a=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},bA=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=d_(this.rank),a=XE("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+u+") {\n        result[1] = "+l+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+u+") {\n          result[3] = "+l+";\n        }\n      }\n      setOutput(result);\n    }\n    "},xA=0,wA=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,a=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],c=u[1],d=[c,l],f=[c,l,a];(s||i)&&(null==mA&&(mA=document.createElement("canvas").getContext("2d")),mA.canvas.width=l,mA.canvas.height=c,mA.drawImage(o,0,0,l,c),o=mA.canvas);var h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=Lw.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);var p=cx().getBool("WEBGL_PACK")?new gA(f):new vA(f),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:zk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;return function(e,t,n){var r=new S_("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new __("\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",e.shape,t.shape,!0)),n.runWebGLProgram(r,[e,t],"float32")}(r.a,r.b,n)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;zC("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,f=n,h=LE(f.readSync(a.dataId),f.readSync(i.dataId),u,l,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,a=new iT(r.shape,"return x * x;");return o.runWebGLProgram(a,[r],r.dtype)}},{kernelName:Hk,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,a=r.b,i=n,s=cx().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new __("return (a - b) * (a - b);",o.shape,a.shape):new S_("return (a - b) * (a - b);",o.shape,a.shape);return i.compileAndRun(s,[o,a])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(e){for(var t,n=e.inputs,r=e.attrs,o=e.backend,a=n.x,i=r.perm,s=o,u=a.shape.length,l=new Array(u),c=0;c<l.length;c++)l[c]=a.shape[i[c]];if(s.shouldExecuteOnCPU([a])){var d=fA(s.texData.get(a.dataId).values,a.shape,a.dtype,i,l);t=s.makeTensorInfo(l,a.dtype),s.texData.get(t.dataId).values=d}else t=function(e,t,n){var r=cx().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bA(e.shape,t):new yA(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}(a,i,s);return t}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,a=n,i=a.filterSize,s=a.strides,u=a.pad,l=a.includeBatchInIndex,c=r;Sx(4===o.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank "+o.shape.length+"."}));var d=[1,1];Sx(_E(s,d),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+d+"'"}));var f=vE(o.shape,i,s,d,u),h=function(e,t,n,r){var o=new jN(n,"max",!1),a=r.runWebGLProgram(o,[e],"float32");return o=new jN(n,"max",!0,!0,t),[a,r.runWebGLProgram(o,[e],"float32")]}(o,l,f,c);return[h[0],h[1]]}}];xA<wA.length;xA++)gx(wA[xA]);for(var CA=0,kA=[{kernelName:"Add",inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],o=Jk(n.shape,r.shape);return{a:function(){var t=e,r=Qk(n.shape,o);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},b:function(){var t=e,n=Qk(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},{kernelName:Vk,gradFunc:function(e,t,n){for(var r=n,o=r.inputShape,a=r.shape,i=Array.from(a),s=o.length-1;s>=0;s--)if(o[s]===a[s])i[s]=1;else if(1!==o[s])throw new Error("broadcastTo(): ["+o+"] cannot be broadcast to ["+a+"].");var u=[];for(s=0;s<i.length;s++)i[s]>1&&u.push(s);return{x:function(){return e.sum(u,!0)}}}},{kernelName:zk,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],o=Jk(n.shape,r.shape);return{a:function(){var t=XS(e,r.toFloat()),a=Qk(n.shape,o);return a.length>0?VD(t,a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=Qk(r.shape,o);a.length>0&&(t=VD(t,a).reshape(r.shape));var i=MR(r);return gS(XS(t,i.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,o=t[0],a=t[1],i=t[2],s=t[3],u=GT(o),l=null==s?lk(1):s,c=Qk(a.shape,u.shape),d=[];if(1===a.rank){for(var f=0;f<u.shape.length-1;++f)d.push(u.shape[f]);d.push(1)}var h=KS(o,a),p=HS(e,l),m=xS($k(i,lk(r))),v=HS(HS(HS(m,m),m),lk(-.5));return{x:function(){return 1===a.rank?Ak(HS(HS(e,mR(m.as4D(1,1,1,a.shape[0]),d)),l),o.shape):Ak(HS(HS(e,m),l),o.shape)},mean:function(){var e=HS(HS(m,lk(-1)),p);return 1===a.rank&&(e=VD(e,c)),Ak(e,a.shape)},variance:function(){var e=HS(HS(v,h),p);return 1===a.rank&&(e=VD(e,c)),Ak(e,a.shape)},scale:function(){var t=HS(h,m),n=HS(e,t);return 1===a.rank&&(n=VD(n,c)),Ak(n,a.shape)},offset:function(){var t=e;return 1===a.rank&&(t=VD(t,c)),Ak(t,a.shape)}}}},{kernelName:Gk,gradFunc:function(e){return{x:function(){return e.toFloat()}}}},{kernelName:qk,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return mk(n.shape,"float32")}}}},{kernelName:Kk,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],o=n.paddings.map((function(e){return e[0]}));return{x:function(){return e.slice(o,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Hk,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],o=lk(2);return{a:function(){return HS(e,HS(o,KS(n,r)))},b:function(){return HS(e,HS(o,KS(r,n)))}}}},{kernelName:Yk,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],o=n.reps;return{x:function(){var t=bk(r);if(1===r.rank)for(var n=0;n<o[0];++n)t=t.add(e.slice([n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(n=0;n<o[0];++n)for(var a=0;a<o[1];++a)t=t.add(e.slice([n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(n=0;n<o[0];++n)for(a=0;a<o[1];++a)for(var i=0;i<o[2];++i)t=t.add(e.slice([n*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(n=0;n<o[0];++n)for(a=0;a<o[1];++a)for(i=0;i<o[2];++i)for(var s=0;s<o[3];++s)t=t.add(e.slice([n*r.shape[0],a*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:"Transpose",gradFunc:function(e,t,n){var r=ZC(n.perm);return{x:function(){return fE(e,r)}}}}];CA<kA.length;CA++)yx(kA[CA]);var SA=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();cx().get("IS_BROWSER")&&cx().setPlatform("browser",new SA);var EA,_A=function(){function e(){this.util=n(7184),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=cx().global.fetch?cx().global.fetch(e,t):(null==EA&&(EA=n(7531)),EA(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();cx().get("IS_NODE")&&cx().setPlatform("node",new _A);var NA={float32:4,int32:4,uint16:2,uint8:1,bool:1};function TA(e,t){for(var n={},r=0,o=function(t){var o=t.name,a=t.dtype,i=t.shape,s=Tx(i),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=NA[l.dtype],d=e.slice(r,r+s*c),f="uint8"===l.dtype?new Uint8Array(d):new Uint16Array(d);if("float32"===a)u=Float32Array.from(f,(function(e){return e*l.scale+l.min}));else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=Int32Array.from(f,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*c}else if("string"===a){var h=Tx(t.shape);u=[];for(var p=0;p<h;p++){var m=new Uint32Array(e.slice(r,r+4))[0];r+=4;var v=new Uint8Array(e.slice(r,r+m));u.push(v),r+=m}}else{var g=NA[a];if(d=e.slice(r,r+s*g),"float32"===a)u=new Float32Array(d);else if("int32"===a)u=new Int32Array(d);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=new Uint8Array(d)}r+=s*g}n[o]=sk(u,i,a)},a=0,i=t;a<i.length;a++)o(i[a]);return n}function RA(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),o=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}var DA="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function IA(e){return DA?Buffer.byteLength(e):new Blob([e]).size}function AA(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function OA(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function MA(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:IA(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:IA(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var PA=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&o.push(n)})),o},e}(),jA="://",FA=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){Sx(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(jA)&&(t=t.slice(0,t.indexOf(jA))),Sx(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Sx(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function LA(e){if(-1===e.indexOf(jA))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+FA.getSchemes().join(","));return{scheme:e.split(jA)[0],path:e.split(jA)[1]}}function BA(e,t,n){return void 0===n&&(n=!1),sx(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,c,d;return ux(this,(function(f){switch(f.label){case 0:return Sx(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),Sx((r=PA.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),Sx(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),o=r[0],Sx((a=PA.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),Sx(a.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),i=a[0],s=LA(e).scheme,u=LA(e).path,l=s===LA(e).scheme,[4,o.load()];case 1:return c=f.sent(),n&&l?[4,FA.getManager(s).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,i.save(c)];case 4:return d=f.sent(),!n||l?[3,6]:[4,FA.getManager(s).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var WA="models_store",UA="model_info_store";function zA(){if(!cx().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function HA(e){var t=e.result;t.createObjectStore(WA,{keyPath:"modelPath"}),t.createObjectStore(UA,{keyPath:"modelPath"})}var VA=function(){function e(e){if(this.indexedDB=zA(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return sx(this,void 0,void 0,(function(){return ux(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return HA(o)},o.onsuccess=function(){var a=o.result;if(null==t){var i=a.transaction(WA,"readonly"),s=i.objectStore(WA).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return a.close(),r(s.error)},i.oncomplete=function(){return a.close()}}else{var u,l=MA(t),c=a.transaction(UA,"readwrite"),d=c.objectStore(UA),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:l});f.onsuccess=function(){var o=(u=a.transaction(WA,"readwrite")).objectStore(WA).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});o.onsuccess=function(){return e({modelArtifactsInfo:l})},o.onerror=function(e){var t=(d=c.objectStore(UA)).delete(n.modelPath);t.onsuccess=function(){return a.close(),r(o.error)},t.onerror=function(e){return a.close(),r(o.error)}}},f.onerror=function(e){return a.close(),r(f.error)},c.oncomplete=function(){null==u?a.close():u.oncomplete=function(){return a.close()}}}},o.onerror=function(e){return r(o.error)}}))},e.URL_SCHEME="indexeddb://",e}(),qA=function(e){return cx().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(VA.URL_SCHEME)?(t=e.slice(VA.URL_SCHEME.length),new VA(t)):null;var t};PA.registerSaveRouter(qA),PA.registerLoadRouter(qA);var GA=function(){function e(){this.indexedDB=zA()}return e.prototype.listModels=function(){return sx(this,void 0,void 0,(function(){var e=this;return ux(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return HA(r)},r.onsuccess=function(){var e=r.result,o=e.transaction(UA,"readonly"),a=o.objectStore(UA).getAll();a.onsuccess=function(){for(var e={},n=0,r=a.result;n<r.length;n++){var o=r[n];e[o.modelPath]=o.modelArtifactsInfo}t(e)},a.onerror=function(t){return e.close(),n(a.error)},o.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return sx(this,void 0,void 0,(function(){var t=this;return ux(this,(function(n){var r;return e=(r=e).startsWith(VA.URL_SCHEME)?r.slice(VA.URL_SCHEME.length):r,[2,new Promise((function(n,r){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return HA(o)},o.onsuccess=function(){var t,a=o.result,i=a.transaction(UA,"readwrite"),s=i.objectStore(UA),u=s.get(e);u.onsuccess=function(){if(null==u.result)return a.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var o=s.delete(e),i=function(){var o=(t=a.transaction(WA,"readwrite")).objectStore(WA).delete(e);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(e){return r(u.error)}};o.onsuccess=i,o.onerror=function(e){return i(),a.close(),r(u.error)}},u.onerror=function(e){return a.close(),r(u.error)},i.oncomplete=function(){null==t?a.close():t.oncomplete=function(){return a.close()}}},o.onerror=function(e){return r(o.error)}}))]}))}))},e}();if(cx().getBool("IS_BROWSER"))try{FA.registerManager(VA.URL_SCHEME,new GA)}catch(os){}var YA="/",KA="tensorflowjs_models",$A="info",XA="model_topology",QA="weight_specs",JA="weight_data",ZA="model_metadata";function eO(e){return{info:[KA,e,$A].join(YA),topology:[KA,e,XA].join(YA),weightSpecs:[KA,e,QA].join(YA),weightData:[KA,e,JA].join(YA),modelMetadata:[KA,e,ZA].join(YA)}}function tO(e){var t=e.split(YA);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(YA)}var nO=function(){function e(e){if(!cx().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=eO(this.modelPath)}return e.prototype.save=function(e){return sx(this,void 0,void 0,(function(){var t,n,r;return ux(this,(function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=MA(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(DA)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}}))}))},e.prototype.load=function(){return sx(this,void 0,void 0,(function(){var e,t,n,r,o,a,i;return ux(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(a=JSON.parse(o),t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy,t.userDefinedMetadata=a.userDefinedMetadata),null==(i=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(DA){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(i),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),rO=function(e){return cx().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(nO.URL_SCHEME)?(t=e.slice(nO.URL_SCHEME.length),new nO(t)):null;var t};PA.registerSaveRouter(rO),PA.registerLoadRouter(rO);var oO=function(){function e(){Sx(cx().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Sx("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return sx(this,void 0,void 0,(function(){var e,t,n,r,o,a;return ux(this,(function(i){for(e={},t=KA+YA,n=YA+$A,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(t)&&o.endsWith(n)&&(a=tO(o),e[a]=JSON.parse(this.LS.getItem(o)));return[2,e]}))}))},e.prototype.removeModel=function(e){return sx(this,void 0,void 0,(function(){var t,n;return ux(this,(function(r){var o;if(e=(o=e).startsWith(nO.URL_SCHEME)?o.slice(nO.URL_SCHEME.length):o,t=eO(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(cx().getBool("IS_BROWSER"))try{FA.registerManager(nO.URL_SCHEME,new oO)}catch(os){}function aO(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var iO=function(){function e(t){if(!cx().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return sx(this,void 0,void 0,(function(){var t,n,r,o,a,i;return ux(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,aO((function(){return a.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=t,[4,aO((function(){return i.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:MA(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),sO=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return sx(this,void 0,void 0,(function(){var e,t,n=this;return ux(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,o){var a=new FileReader;a.onload=function(a){var i=JSON.parse(a.target.result),s=i.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=i.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void o(e)}var c=[],d=[],f=[];u.forEach((function(e){e.paths.forEach((function(e){d.push(e),f.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,o=d.indexOf(e);f[o]=n,-1===f.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:AA(f),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})},t.onerror=function(t){return o("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(t){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return OA(e.name)})),o={},a=0,i=e;a<i.length;a++)i[a].paths.forEach((function(e){var a=OA(e);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");o[e]=t[r.indexOf(a)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return o},e}();function uO(e,t,n,r){!function(e){Sx(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Sx(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),Sx(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),Sx(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(e.map((function(a){return a.then((function(a){var i=n+ ++o/e.length*(r-n);return t(i),a})),a})))}function lO(e,t){return sx(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c;return ux(this,(function(d){switch(d.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?cx().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),o=0,a=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return i=d.sent(),[3,4];case 2:return[4,uO(r,t.onProgress,o,a)];case 3:i=d.sent(),d.label=4;case 4:return s=i.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,uO(s,t.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}}))}))}function cO(e){var t=this;return function(n,r,o){return void 0===r&&(r=""),sx(t,void 0,void 0,(function(){var t,a,i,s,u,l,c,d,f,h;return ux(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),a={},i=null!=o?o.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,l=NA[u]*Tx(e.shape),c=function(){t[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=o?o.forEach((function(t,n){t===e.name&&(c(),i[n]=!0)})):c(),s.push(e.name),r+=l}))})),!i.every((function(e){return e})))throw u=o.filter((function(e,t){return!i[t]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return l=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),[4,e(c)];case 1:return d=p.sent(),f={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,o=0;o<t;o++)r+=d[h+o].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(d[h+l]);s.set(c,u),u+=c.byteLength}a[e].forEach((function(e){var t=TA(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)f[n]=t[n]})),h+=t})),[2,f]}}))}))}}PA.registerSaveRouter((function(e){return cx().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(iO.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new iO(e)}(e.slice(iO.URL_SCHEME.length)):null}));var dO=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(Sx("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=cx().platform.fetch,Sx(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Sx(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return sx(this,void 0,void 0,(function(){var t,n,r,o;return ux(this,(function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:MA(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},e.prototype.load=function(){return sx(this,void 0,void 0,(function(){var e,t,n,r,o,a,i,s,u,l,c,d;return ux(this,(function(f){switch(f.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=f.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");f.label=2;case 2:return f.trys.push([2,4,,5]),[4,e.json()];case 3:return t=f.sent(),[3,5];case 4:throw f.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,o=t.weightsManifest,a=t.generatedBy,i=t.convertedBy,s=t.format,u=t.userDefinedMetadata,null==r&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:d=f.sent(),l=d[0],c=d[1],f.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:c,userDefinedMetadata:u,generatedBy:a,convertedBy:i,format:s}]}}))}))},e.prototype.loadWeights=function(e){return sx(this,void 0,void 0,(function(){var t,n,r,o,a,i,s,u,l,c,d;return ux(this,(function(f){switch(f.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],o=n[1],a=this.weightPathPrefix||r,i=[],s=0,u=e;s<u.length;s++)l=u[s],i.push.apply(i,l.weights);return c=[],e.forEach((function(e){e.paths.forEach((function(e){c.push(a+e+o)}))})),[4,lO(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=f.sent(),[2,[i,AA(d)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function fO(e){return null!=e.match(dO.URL_SCHEME_REGEX)}var hO=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return fO(e)})):fO(e))?pO(e,{onProgress:t}):null};function pO(e,t){return new dO(e,t)}PA.registerSaveRouter(hO),PA.registerLoadRouter(hO);var mO,vO=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),gO=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return sx(this,void 0,void 0,(function(){return ux(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),yO=Object.freeze({browserFiles:function(e){return new sO(e)},browserHTTPRequest:function(e,t){return pO(e,t)},concatenateArrayBuffers:AA,decodeWeights:TA,encodeWeights:function(e,t){return sx(this,void 0,void 0,(function(){var n,r,o,a,i,s=this;return ux(this,(function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),a=function(a){var i=o[a],u=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+i+"': "+u.dtype);var l={name:i,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var c=new Promise((function(e){return sx(s,void 0,void 0,(function(){var t,n,r,o,a,i,s;return ux(this,(function(l){switch(l.label){case 0:return[4,u.bytes()];case 1:for(t=l.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+4*t.length,r=new Uint8Array(n),o=0,a=0;a<t.length;a++)i=t[a],s=new Uint8Array(new Uint32Array([i.length]).buffer),r.set(s,o),o+=4,r.set(i,o),o+=i.length;return e(r),[2]}}))}))}));r.push(c)}else r.push(u.data());null!=t&&(l.group=t),n.push(l)},i=0;i<o.length;++i)a(i);return[4,Promise.all(r)];case 1:return[2,{data:RA(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new vO(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new vO({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new vO({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return PA.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:MA,getSaveHandlers:function(e){return PA.getSaveHandlers(e)},http:pO,isHTTPScheme:fO,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),sx(this,void 0,void 0,(function(){return ux(this,(function(o){return[2,cO((function(e){return lO(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return PA.registerLoadRouter(e)},registerSaveRouter:function(e){return PA.registerSaveRouter(e)},weightsLoaderFactory:cO,withSaveHandler:function(e){return new gO(e)},copyModel:function(e,t){return sx(this,void 0,void 0,(function(){return ux(this,(function(n){return[2,BA(e,t,!1)]}))}))},listModels:function(){return sx(this,void 0,void 0,(function(){var e,t,n,r,o,a,i;return ux(this,(function(s){switch(s.label){case 0:e=FA.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(o=r[n],[4,FA.getManager(o).listModels()]):[3,4];case 2:for(i in a=s.sent())t[o+jA+i]=a[i];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return sx(this,void 0,void 0,(function(){return ux(this,(function(n){return[2,BA(e,t,!0)]}))}))},removeModel:function(e){return sx(this,void 0,void 0,(function(){var t;return ux(this,(function(n){return t=LA(e),[2,FA.getManager(t.scheme).removeModel(t.path)]}))}))}}),bO=rk({confusionMatrix_:function(e,t,n){var r=qC(e,"labels","confusionMatrix"),o=qC(t,"predictions","confusionMatrix");Sx(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),Sx(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),Sx(1===o.rank,(function(){return"Expected the rank of predictions to be 1, but got "+o.rank})),Sx(r.shape[0]===o.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."})),Sx(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var a=yR(r.asType("int32"),n),i=yR(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}}),xO=(Object.freeze({confusionMatrix:bO}),rk({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,a=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=px("FromPixels",Mw.backendName))return Mw.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,l=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],d=l[1];if(i?s=e.getContext("2d").getImageData(0,0,c,d).data:r||n?s=e.data:(a||o)&&(null==mO&&(mO=document.createElement("canvas").getContext("2d")),mO.canvas.width=c,mO.canvas.height=d,mO.drawImage(e,0,0,c,d),s=mO.getImageData(0,0,c,d).data),4===t)u=new Int32Array(s);else{var f=c*d;u=new Int32Array(f*t);for(var h=0;h<f;h++)for(var p=0;p<t;++p)u[h*t+p]=s[4*h+p]}return fk(u,[d,c,t],"int32")}})),wO=Object.freeze({toPixels:function(e,t){return sx(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d,f,h,p,m,v,g,y,b,x,w,C,k,S;return ux(this,(function(E){switch(E.label){case 0:if(n=qC(e,"img","toPixels"),e instanceof yw||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(i=2===n.rank?1:n.shape[2])>4||2===i)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return s=E.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=E.sent(),d=c[0],f=c[1],h=d[0],p=f[0],u.dispose(),l.dispose(),"float32"===n.dtype){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m="float32"===n.dtype?255:1,v=new Uint8ClampedArray(a*o*4),g=0;g<o*a;++g)y=void 0,b=void 0,x=void 0,w=void 0,1===i?(y=s[g]*m,b=s[g]*m,x=s[g]*m,w=255):3===i?(y=s[3*g]*m,b=s[3*g+1]*m,x=s[3*g+2]*m,w=255):4===i&&(y=s[4*g]*m,b=s[4*g+1]*m,x=s[4*g+2]*m,w=s[4*g+3]*m),v[0+(C=4*g)]=Math.round(y),v[C+1]=Math.round(b),v[C+2]=Math.round(x),v[C+3]=Math.round(w);return null!=t&&(t.width=a,t.height=o,k=t.getContext("2d"),S=new ImageData(v,a,o),k.putImageData(S,0,0)),n!==e&&n.dispose(),[2,v]}}))}))},fromPixels:xO}),CO=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),kO=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function SO(e){Sx(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Sx("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Sx(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),kO.register(e)}Object.freeze({Serializable:CO,SerializationMap:kO,registerClass:SO}),Object.freeze({gpgpu_util:wN,webgl_util:FC,forceHalfFloat:function(){cx().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:MT,setWebGLContext:zw,GPGPUContext:CN});var EO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ix(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),o=r.value,a=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:a[e.name]}}));this.applyGradients(i)}else this.applyGradients(a);return UC(a),t?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){Sx(Xx(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Sx(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Sw})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Mw.registeredVariables)t.push(Mw.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,a=t.length;Sx((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."}));var i=Mw.gradients(e,t,null,!0),s=i.value,u=i.grads;Sx(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Sx(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=o&&o.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&UC(this.iterations_)},t.prototype.saveIterations=function(){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:lk(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return sx(this,void 0,void 0,(function(){var t;return ux(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(CO);Object.defineProperty(EO,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var _O=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this)||this;return o.learningRate=t,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=Mw.backend.epsilon()),o}return ix(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Mw.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:WC((function(){return bk(o).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:WC((function(){return bk(o).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;WC((function(){var e=i.mul(t.rho).add(a.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(i.add(t.epsilon).sqrt()).mul(a),r=s.mul(t.rho).add(n.square().mul(1-t.rho));i.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(o);o.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(UC(this.accumulatedGrads.map((function(e){return e.variable}))),UC(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return sx(this,void 0,void 0,(function(){var e;return ux(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return sx(this,void 0,void 0,(function(){var t;return ux(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(EO);SO(_O);var NO=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return ix(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Mw.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:WC((function(){return vk(o.shape,t.initialAccumulatorValue).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedGrads[r].variable;WC((function(){var e=i.add(a.square());i.assign(e);var n=a.div(e.add(Mw.backend.epsilon()).sqrt()).mul(-t.learningRate).add(o);o.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&UC(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return sx(this,void 0,void 0,(function(){return ux(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(EO);SO(NO);var TO=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],WC((function(){a.accBeta1=lk(n).variable(),a.accBeta2=lk(r).variable()})),null==o&&(a.epsilon=Mw.backend.epsilon()),a}return ix(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);WC((function(){var r=KS(1,t.accBeta1),o=KS(1,t.accBeta2);n.forEach((function(n,a){var i=Mw.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:WC((function(){return bk(i).variable(!1)}))}),null==t.accumulatedSecondMoment[a]&&(t.accumulatedSecondMoment[a]={originalName:n+"/v",variable:WC((function(){return bk(i).variable(!1)}))});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[a].variable,l=t.accumulatedSecondMoment[a].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),f=c.div(r),h=d.div(o);u.assign(c),l.assign(d);var p=f.div(h.sqrt().add(t.epsilon)).mul(-t.learningRate).add(i);i.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&UC(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&UC(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return sx(this,void 0,void 0,(function(){var e;return ux(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return sx(this,void 0,void 0,(function(){var t,n=this;return ux(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),WC((function(){n.accBeta1.assign(qS(n.beta1,n.iterations_+1)),n.accBeta2.assign(qS(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(EO);SO(TO);var RO=function(e){function t(t,n,r,o,a){void 0===o&&(o=null),void 0===a&&(a=0);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=o,i.decay=a,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],WC((function(){i.iteration=lk(0).variable(),i.accBeta1=lk(n).variable()})),null==o&&(i.epsilon=Mw.backend.epsilon()),i}return ix(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);WC((function(){var r=KS(1,t.accBeta1),o=XS(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,a){var i=Mw.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:bk(i).variable(!1)}),null==t.accumulatedWeightedInfNorm[a]&&(t.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:bk(i).variable(!1)});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[a].variable,l=t.accumulatedWeightedInfNorm[a].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2),f=s.abs(),h=d.maximum(f);u.assign(c),l.assign(h);var p=o.div(r).mul(c.div(h.add(t.epsilon))).add(i);i.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&UC(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&UC(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(EO);SO(RO);var DO=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return ix(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=Mw.registeredVariables[n];WC((function(){var e=t.c.mul(o).add(a);a.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return Mw.keep(e)}(lk(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return sx(this,void 0,void 0,(function(){return ux(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(EO);SO(DO);var IO=function(e){function t(t,n,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.learningRate=t,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=lk(o.momentum),o}return ix(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Mw.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:WC((function(){return bk(o).variable(!1)}))});var a=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&WC((function(){var e,n=t.m.mul(a).add(i);e=t.useNesterov?t.c.mul(i.add(n.mul(t.m))).add(o):t.c.mul(n).add(o),a.assign(n),o.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&UC(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return sx(this,void 0,void 0,(function(){return ux(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return sx(this,void 0,void 0,(function(){return ux(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(DO);SO(IO);var AO=function(e){function t(t,n,r,o,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===a&&(a=!1);var i=e.call(this)||this;if(i.learningRate=t,i.decay=n,i.momentum=r,i.epsilon=o,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=a,null==o&&(i.epsilon=Mw.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return i}return ix(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Mw.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:WC((function(){return bk(o).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:WC((function(){return bk(o).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:WC((function(){return bk(o).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;WC((function(){var e=i.mul(t.decay).add(a.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(a.mul(1-t.decay)),l=s.mul(t.momentum).add(a.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));i.assign(e),n.assign(u),s.assign(l);var c=o.sub(l);o.assign(c)}else{var d=i.mul(t.decay).add(a.square().mul(1-t.decay));l=s.mul(t.momentum).add(a.mul(t.learningRate).div(d.add(t.epsilon).sqrt())),i.assign(d),s.assign(l),c=o.sub(l),o.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&UC(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&UC(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&UC(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return sx(this,void 0,void 0,(function(){var e;return ux(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return sx(this,void 0,void 0,(function(){var t;return ux(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(EO);SO(AO);var OO=function(){function e(){}return e.sgd=function(e){return new DO(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new IO(e,t,n)},e.rmsprop=function(e,t,n,r,o){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new AO(e,t,n,r,o)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new TO(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new _O(e,t,n)},e.adamax=function(e,t,n,r,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new RO(e,t,n,r,o)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new NO(e,t)},e}();OO.sgd,OO.momentum,OO.adadelta,OO.adagrad,OO.rmsprop,OO.adamax,OO.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;yw.prototype.add=function(e){return $k(this,e)},yw.prototype.broadcastTo=function(e){return iR(this,e)},yw.prototype.div=function(e){return XS(this,e)},yw.prototype.divNoNan=function(e){return pR(this,e)},yw.prototype.squaredDifference=function(e){return PR(this,e)},yw.prototype.tile=function(e){return mR(this,e)},yw.prototype.oneHot=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=0),yR(this,e,t,n)},yw.prototype.transpose=function(e){return fE(this,e)},yw.prototype.pad=function(e,t){return bR(this,e,t)},yw.prototype.batchNorm=function(e,t,n,r,o){return XT(this,e,t,n,r,o)},vw=JI;var MO=function(){function e(e,t){if(!VO(e)||!VO(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}(),PO=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}();function jO(e,t){return e instanceof yw&&e.shape.length===t}function FO(e){return jO(e,3)}function LO(e){return jO(e,4)}function BO(e){return e%2===0}function WO(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function UO(e){return e&&e.width&&e.height}function zO(e){return e.reduce((function(e,t){return e.add(t)}),new PO(0,0)).div(new PO(e.length,e.length))}function HO(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function VO(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function qO(e){return VO(e)&&0<=e&&e<=1}var GO,YO=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(VO),a=[r.x,r.y,r.width,r.height].every(VO);if(!a&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=i[0],u=i[1],l=i[2],c=i[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(VO)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new PO(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new PO(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new PO(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new PO(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,o=t.width,a=t.height,i=Math.abs(o-a);return o<a&&(n-=i/2,o+=i),a<o&&(r-=i/2,a+=i),new e({x:n,y:r,width:o,height:a})},e.prototype.rescale=function(t){var n=UO(t)?t.width:t,r=UO(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,o=r.x,a=r.y,i=r.right,s=r.bottom,u=Math.max(o,0),l=Math.max(a,0),c=i-u,d=s-l;return new e({x:u,y:l,width:Math.min(c,t-u),height:Math.min(d,n-l)}).floor()},e.prototype.shift=function(t,n){var r=this.width,o=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:o})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,o=n,a=r,i=this.left,s=this.top,u=this.right,l=this.bottom;return u>t&&(o=-u+t+n,u=t),l>e&&(a=-l+e+r,l=e),i<1&&(a=2-i,i=1),s<1&&(a=2-s,s=1),{dy:1,edy:a,dx:1,edx:o,y:s,ey:l,x:i,ex:u,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),KO=function(e){function t(t,n,r,o,a){return void 0===a&&(a=!1),e.call(this,{left:t,top:n,right:r,bottom:o},a)||this}return mu(t,e),t}(YO),$O=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return mu(t,e),t.assertIsValidLabeledBox=function(e,t){if(YO.assertIsValidBox(e,t),!VO(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(YO),XO=function(){function e(e,t,n,r,o){this._imageDims=new MO(o.width,o.height),this._score=e,this._classScore=t,this._className=n,this._box=new YO(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new YO(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),QO=(function(e){function t(t,n,r,o){var a=e.call(this,t,n)||this;return a._score=r,a._classScore=o,a}mu(t,e),t.assertIsValidPredictedBox=function(e,t){if($O.assertIsValidLabeledBox(e,t),!qO(e.score)||!qO(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}($O),function(e){function t(t,n,r,o,a){return void 0===a&&(a=!1),e.call(this,{x:t,y:n,width:r,height:o},a)||this}return mu(t,e),t}(YO));function JO(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function ZO(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(QB){t=QB.toString()}var r=e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function eM(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=ZO();return vu({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},o)}function tM(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function nM(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function rM(e){GO=e}function oM(){tM()&&rM(JO()),nM()&&rM(eM())}var aM,iM={getEnv:function(){if(!GO)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return GO},setEnv:rM,initialize:oM,createBrowserEnv:JO,createFileSystem:ZO,createNodejsEnv:eM,monkeyPatch:function(e){if(GO||oM(),!GO)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?GO.Canvas:t,r=e.Image,o=void 0===r?GO.Image:r;GO.Canvas=n,GO.Image=o,GO.createCanvasElement=e.createCanvasElement||function(){return new n},GO.createImageElement=e.createImageElement||function(){return new o},GO.ImageData=e.ImageData||GO.ImageData,GO.Video=e.Video||GO.Video,GO.fetch=e.fetch||GO.fetch,GO.readFile=e.readFile||GO.readFile},isBrowser:tM,isNodejs:nM};function sM(e){return iM.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function uM(e){var t=iM.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=sM(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=r.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}oM(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(aM||(aM={}));var lM=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,o=e.fontSize,a=e.fontStyle,i=e.padding;this.anchorPosition=t||aM.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=a||"Georgia",this.padding=i||4},cM=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new lM(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===aM.BOTTOM_RIGHT||n===aM.TOP_RIGHT,o=n===aM.BOTTOM_LEFT||n===aM.BOTTOM_RIGHT,a=this.measureWidth(e),i=this.measureHeight(),s=r?this.anchor.x-a:this.anchor.x,u=o?this.anchor.y-i:this.anchor.y;if(t){var l=t.width,c=t.height;return{x:Math.max(Math.min(s,l-a),0),y:Math.max(Math.min(u,c-i),0)}}return{x:s,y:u}},e.prototype.draw=function(e){var t=sM(e),n=uM(t),r=this.options,o=r.backgroundColor,a=r.fontColor,i=r.fontSize,s=r.fontStyle,u=r.padding;n.font=i+"px "+s;var l=this.measureWidth(n),c=this.measureHeight();n.fillStyle=o;var d=this.getUpperLeft(n,t);n.fillRect(d.x,d.y,l,c),n.fillStyle=a,this.text.forEach((function(e,t){var r=u+d.x,o=u+d.y+(t+1)*i;n.fillText(e,r,o)}))},e}(),dM=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,o=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var a={anchorPosition:aM.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new lM(Object.assign({},a,o))},fM=function(){function e(e,t){void 0===t&&(t={}),this.box=new YO(e),this.options=new dM(t)}return e.prototype.draw=function(e){var t=uM(e),n=this.options,r=n.boxColor,o=n.lineWidth,a=this.box,i=a.x,s=a.y,u=a.width,l=a.height;t.strokeStyle=r,t.lineWidth=o,t.strokeRect(i,s,u,l);var c=this.options.label;c&&new cM([c],{x:i-o/2,y:s},this.options.drawLabelOptions).draw(e)},e}();function hM(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),WC((function(){var o=$k(rD(e,t.filters,[1,1],n),t.bias);return r?$D(o):o}))}function pM(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function mM(e,t){return function(n,r,o,a){var i=hk(e(n*r*o*o),[o,o,n,r]),s=ck(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:s}}}function vM(e,t){return function(n,r,o){var a=dk(e(n*r),[n,r]),i=ck(e(r));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:a,bias:i}}}var gM=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function yM(e,t){return function(n,r,o){var a=hk(e(9*n),[3,3,n,1]),i=hk(e(n*r),[1,1,n,r]),s=ck(e(r));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new gM(a,i,s)}}function bM(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new gM(n,r,o)}}function xM(e,t){return function(n,r,o){var a=e[n];if(!jO(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return t.push({originalPath:n,paramPath:o||n}),a}}function wM(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function CM(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",o=(e=e.replace(r,"")).split("/").filter((function(e){return e})),a=e.endsWith(".json")?o[o.length-1]:n,i=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return{modelBaseUri:i=e.startsWith("/")?"/"+i:i,manifestUri:"/"===i?"/"+a:i+"/"+a}}function kM(e){var t=iM.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function SM(e){var t=iM.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new MO(e.naturalWidth,e.naturalHeight):e instanceof r?new MO(e.videoWidth,e.videoHeight):new MO(e.width,e.height)}function EM(e){var t=e.width,n=e.height,r=(0,iM.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function _M(e,t){var n=iM.getEnv().ImageData;if(!(e instanceof n)&&!kM(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||SM(e),o=r.width,a=r.height,i=EM({width:o,height:a});return e instanceof n?uM(i).putImageData(e,0,0):uM(i).drawImage(e,0,0,o,a),i}function NM(e,t){return gu(this,void 0,void 0,(function(){var n;return yu(this,(function(r){switch(r.label){case 0:return[4,(0,iM.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function TM(e){return gu(this,void 0,void 0,(function(){return yu(this,(function(t){switch(t.label){case 0:return[4,NM(e)];case 1:return[2,t.sent().json()]}}))}))}function RM(e,t){return gu(this,void 0,void 0,(function(){var n,r,o,a,i,s;return yu(this,(function(u){switch(u.label){case 0:return n=t||iM.getEnv().createCanvasElement(),r=e.shape.slice(LO(e)?1:0),o=r[0],a=r[1],i=r[2],s=WC((function(){return e.as3D(o,a,i).toInt()})),[4,wO.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}}))}))}function DM(e){var t=iM.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}function IM(e,t){return gu(this,void 0,void 0,(function(){var n,r,o,a;return yu(this,(function(i){switch(i.label){case 0:return n=CM(e,t),r=n.manifestUri,o=n.modelBaseUri,[4,TM(r)];case 1:return a=i.sent(),[2,yO.loadWeights(a,o)]}}))}))}var AM=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(FO(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(LO(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var o=e instanceof iM.getEnv().Canvas?e:_M(e);n._canvases[t]=o,n._inputDimensions[t]=[o.height,o.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return HO(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new MO(Math.round(n*o),Math.round(r*o))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,WC((function(){var r=HO(n.batchSize,0,1).map((function(r){var o=n.getInput(r);if(o instanceof yw){var a=LO(o)?o:o.expandDims();return a=function(e,t){return void 0===t&&(t=!1),WC((function(){var n=e.shape.slice(1),r=n[0],o=n[1];if(r===o)return e;var a=Math.abs(r-o),i=Math.round(a*(t?.5:1)),s=r>o?2:1,u=function(t){var n=e.shape.slice();return n[s]=t,vk(n,0)},l=u(i),c=a-l.shape[s],d=[t&&c?u(c):null,e,l].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return xk(d,s)}))}(a,t),a.shape[1]===e&&a.shape[2]===e||(a=HI.resizeBilinear(a,[e,e])),a.as3D(e,e,3)}if(o instanceof iM.getEnv().Canvas)return wO.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=iM.getEnv(),o=r.Image,a=r.Canvas;if(!(e instanceof o||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=SM(e),s=t/Math.max(i.height,i.width),u=s*i.width,l=s*i.height,c=EM({width:t,height:t}),d=e instanceof a?e:_M(e),f=Math.abs(u-l)/2,h=n&&u<l?f:0,p=n&&l<u?f:0;return uM(c).drawImage(d,h,p,u,l),c}(o,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+o)})),o=Pk(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return o}))},e}();function OM(e){return gu(this,void 0,void 0,(function(){var t,n,r;return yu(this,(function(o){switch(o.label){case 0:if(e instanceof AM)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(sM)).forEach((function(e,r){if(!DM(e)&&!FO(e)&&!LO(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(LO(e)){var o=e.shape[0];if(1!==o)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+o+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return DM(e)&&(t=e,new Promise((function(e,n){if(t instanceof iM.getEnv().Canvas||kM(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",o),e(t))}function o(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",o),n(e))}t.addEventListener("load",r),t.addEventListener("error",o)})));var t})))];case 1:return o.sent(),[2,new AM(r,Array.isArray(e))]}}))}))}var MM=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;r[o].dispose(),r[o]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof Sw}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof Sw)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,o=sk(r.dataSync());r.dispose(),e.reassignParamFromPath(n,o)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return gu(this,void 0,void 0,(function(){return yu(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,IM(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return gu(this,void 0,void 0,(function(){var t,n,r,o,a,i,s,u,l,c;return yu(this,(function(d){switch(d.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=iM.getEnv().readFile,n=CM(e,this.getDefaultModelName()),r=n.manifestUri,o=n.modelBaseUri,a=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},i=yO.weightsLoaderFactory(a),l=(u=JSON).parse,[4,t(r)];case 1:return s=l.apply(u,[d.sent().toString()]),[4,i(s,o)];case 2:return c=d.sent(),this.loadFromWeightMap(c),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof yw))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function PM(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function jM(e,t,n,r){void 0===r&&(r=!0);for(var o=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),a=[],i=function(){var t=o.pop();a.push(t);for(var i=o,s=[],u=0;u<i.length;u++){var l=i[u],c=e[t],d=e[l];s.push(PM(c,d,r))}o=o.filter((function(e,t){return s[t]<=n}))};o.length>0;)i();return a}function FM(e,t){return WC((function(){var n=t[0],r=t[1],o=t[2],a=vk(bu(e.shape.slice(0,3),[1]),n),i=vk(bu(e.shape.slice(0,3),[1]),r),s=vk(bu(e.shape.slice(0,3),[1]),o),u=xk([a,i,s],3);return KS(e,u)}))}function LM(e){return 1/(1+Math.exp(-e))}var BM,WM=function(e){return"number"===typeof e};function UM(e){return WC((function(){var t=HS(e,lk(.10000000149011612));return $k($D(KS(e,t)),t)}))}function zM(e,t){return WC((function(){var n=bR(e,[[0,0],[1,1],[1,1],[0,0]]);return n=rD(n,t.conv.filters,[1,1],"valid"),n=KS(n,t.bn.sub),n=HS(n,t.bn.truediv),UM(n=$k(n,t.conv.bias))}))}function HM(e,t){return WC((function(){var n=bR(e,[[0,0],[1,1],[1,1],[0,0]]);return n=cD(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),UM(n=$k(n,t.bias))}))}function VM(e,t){var n=mM(e,t);var r=yM(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,o,a){var i=n(r,o,3,a+"/conv"),s=function(n,r){var o=ck(e(n)),a=ck(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:o,truediv:a}}(o,a+"/bn");return{conv:i,bn:s}},extractSeparableConvParams:r}}function qM(e,t){var n=xM(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),o=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:o}},extractSeparableConvParams:bM(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(BM||(BM={}));var GM=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),YM=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!WM(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return WM(e.x)&&WM(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(WM)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return mu(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=zM(e,t.conv0);return n=zM(n=kD(n,[2,2],[2,2],"same"),t.conv1),n=zM(n=kD(n,[2,2],[2,2],"same"),t.conv2),n=zM(n=kD(n,[2,2],[2,2],"same"),t.conv3),n=zM(n=kD(n,[2,2],[2,2],"same"),t.conv4),n=zM(n=kD(n,[2,2],[2,2],"same"),t.conv5),n=zM(n=kD(n,[2,2],[1,1],"same"),t.conv6),hM(n=zM(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?UM(hM(e,t.conv0,"valid",!1)):HM(e,t.conv0);return n=HM(n=kD(n,[2,2],[2,2],"same"),t.conv1),n=HM(n=kD(n,[2,2],[2,2],"same"),t.conv2),n=HM(n=kD(n,[2,2],[2,2],"same"),t.conv3),n=HM(n=kD(n,[2,2],[2,2],"same"),t.conv4),n=HM(n=kD(n,[2,2],[2,2],"same"),t.conv5),n=kD(n,[2,2],[1,1],"same"),n=t.conv6?HM(n,t.conv6):n,hM(n=t.conv7?HM(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return WC((function(){var o=e.toBatchTensor(t,!1).toFloat();return o=(o=n.config.meanRgb?FM(o,n.config.meanRgb):o).div(lk(256)),n.config.withSeparableConvs?n.runMobilenet(o,r):n.runTinyYolov2(o,r)}))},t.prototype.forward=function(e,t){return gu(this,void 0,void 0,(function(){var n;return yu(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,OM(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),gu(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d,f,h,p,m=this;return yu(this,(function(v){switch(v.label){case 0:return n=new GM(t),r=n.inputSize,o=n.scoreThreshold,[4,OM(e)];case 1:return a=v.sent(),[4,this.forwardInput(a,r)];case 2:return i=v.sent(),s=WC((function(){return jk(i)[0].expandDims()})),u={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(s,a.getReshapedInputDimensions(0),o)];case 3:return l=v.sent(),i.dispose(),s.dispose(),c=l.map((function(e){return e.box})),d=l.map((function(e){return e.score})),f=l.map((function(e){return e.classScore})),h=l.map((function(e){return m.config.classes[e.label]})),p=jM(c.map((function(e){return e.rescale(r)})),d,this.config.iouThreshold,!0),[2,p.map((function(e){return new XO(d[e],f[e],h[e],c[e],u)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],o=qM(e,r),a=o.extractConvParams,i=o.extractConvWithBatchNormParams,s=o.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?a("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:a("conv8")}}else n={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return pM(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var o,a=wM(e),i=a.extractWeights,s=a.getRemainingWeights,u=[],l=VM(i,u),c=l.extractConvParams,d=l.extractConvWithBatchNormParams,f=l.extractSeparableConvParams;if(t.withSeparableConvs){var h=r[0],p=r[1],m=r[2],v=r[3],g=r[4],y=r[5],b=r[6],x=r[7],w=r[8];o={conv0:t.isFirstLayerConv2d?c(h,p,3,"conv0"):f(h,p,"conv0"),conv1:f(p,m,"conv1"),conv2:f(m,v,"conv2"),conv3:f(v,g,"conv3"),conv4:f(g,y,"conv4"),conv5:f(y,b,"conv5"),conv6:x?f(b,x,"conv6"):void 0,conv7:w?f(x,w,"conv7"):void 0,conv8:c(w||x||b,5*n,1,"conv8")}}else h=r[0],p=r[1],m=r[2],v=r[3],g=r[4],y=r[5],b=r[6],x=r[7],w=r[8],o={conv0:d(h,p,"conv0"),conv1:d(p,m,"conv1"),conv2:d(m,v,"conv2"),conv3:d(v,g,"conv3"),conv4:d(g,y,"conv4"),conv5:d(y,b,"conv5"),conv6:d(b,x,"conv6"),conv7:d(x,w,"conv7"),conv8:c(w,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:o,paramMappings:u}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return gu(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,c,d,f,h,p,m,v,g,y,b,x,w,C,k,S,E,_,N,T,R,D,I,A=this;return yu(this,(function(O){switch(O.label){case 0:return r=t.width,o=t.height,a=Math.max(r,o),i=a/r,s=a/o,u=e.shape[1],l=this.config.anchors.length,c=WC((function(){var t=e.reshape([u,u,l,A.boxEncodingSize]);return[t.slice([0,0,0,0],[u,u,l,4]),t.slice([0,0,0,4],[u,u,l,1]),A.withClassScores?cE(t.slice([0,0,0,5],[u,u,l,A.config.classes.length]),3):lk(0)]})),d=c[0],f=c[1],h=c[2],p=[],[4,f.array()];case 1:return m=O.sent(),[4,d.array()];case 2:v=O.sent(),g=0,O.label=3;case 3:if(!(g<u))return[3,12];y=0,O.label=4;case 4:if(!(y<u))return[3,11];b=0,O.label=5;case 5:return b<l?(x=LM(m[g][y][b][0]),!n||x>n?(w=(y+LM(v[g][y][b][0]))/u*i,C=(g+LM(v[g][y][b][1]))/u*s,k=Math.exp(v[g][y][b][2])*this.config.anchors[b].x/u*i,S=Math.exp(v[g][y][b][3])*this.config.anchors[b].y/u*s,E=w-k/2,_=C-S/2,N={row:g,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(h,N)]:[3,7]):[3,9]):[3,10];case 6:return I=O.sent(),[3,8];case 7:I={classScore:1,label:0},O.label=8;case 8:R=(T=I).classScore,D=T.label,p.push(vu({box:new KO(E,_,E+k,_+S),score:x,classScore:x*R,label:D},N)),O.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return g++,[3,3];case 12:return d.dispose(),f.dispose(),h.dispose(),[2,p]}}))}))},t.prototype.extractPredictedClass=function(e,t){return gu(this,void 0,void 0,(function(){var n,r,o,a;return yu(this,(function(i){switch(i.label){case 0:return n=t.row,r=t.col,o=t.anchor,[4,e.array()];case 1:return a=i.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return a[n][r][o][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(MM);function KM(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var o=n.x,a=n.y,i=t[r];e.moveTo(i.x,i.y),e.lineTo(o,a)})),n){var r=t[t.length-1],o=t[0];if(!r||!o)return;e.moveTo(r.x,r.y),e.lineTo(o.x,o.y)}e.stroke()}var $M=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return mu(t,e),t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r);return new t(o.score,o.relativeBox,o.imageDims)},t}(XO);function XM(e){return e.detection instanceof $M}function QM(e,t){var n={detection:t};return Object.assign({},e,n)}function JM(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){var n=t instanceof $M?t.score:XM(t)?t.detection.score:void 0,r=t instanceof $M?t.box:XM(t)?t.detection.box:new YO(t),o=n?""+WO(n):void 0;new fM(r,{label:o}).draw(e)}))}function ZM(e,t,n){return Lc((function(){var r=Dv(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=xg(r,t.bias)}))}function eP(e,t,n){return void 0===n&&(n=!1),Lc((function(){var r=$g(n?xg(_v(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):ZM(e,t.conv0,[2,2])),o=ZM(r,t.conv1,[1,1]),a=ZM($g(xg(r,o)),t.conv2,[1,1]);return $g(xg(r,xg(o,a)))}))}function tP(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),Lc((function(){var o=$g(n?xg(_v(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):ZM(e,t.conv0,r?[2,2]:[1,1])),a=ZM(o,t.conv1,[1,1]),i=ZM($g(xg(o,a)),t.conv2,[1,1]),s=ZM($g(xg(o,xg(a,i))),t.conv3,[1,1]);return $g(xg(o,xg(a,xg(i,s))))}))}function nP(e,t){var n=mM(e,t),r=yM(e,t);function o(e,t,o,a){return void 0===a&&(a=!1),{conv0:a?n(e,t,3,o+"/conv0"):r(e,t,o+"/conv0"),conv1:r(t,t,o+"/conv1"),conv2:r(t,t,o+"/conv2")}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:function(e,t,n,a){void 0===a&&(a=!1);var i=o(e,t,n,a);return{conv0:i.conv0,conv1:i.conv1,conv2:i.conv2,conv3:r(t,t,n+"/conv3")}}}}function rP(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function oP(e,t){var n=xM(e,t),r=rP(n),o=bM(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2"),conv3:o(e+"/conv3")}}}}var aP=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return mu(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return Lc((function(){var n=tP(FM(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(sd(255)),t.dense0,!0);return n=tP(n,t.dense1),n=tP(n,t.dense2),n=tP(n,t.dense3),n=Hv(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,OM(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=oP(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return pM(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=wM(e),r=n.extractWeights,o=n.getRemainingWeights,a=nP(r,t).extractDenseBlock4Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u,dense3:l}}}(e)},t}(MM);function iP(e,t){return Lc((function(){return xg(Av(e,t.weights),t.bias)}))}function sP(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var uP=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return mu(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Lc((function(){var r=e instanceof AM?t.faceFeatureExtractor.forwardInput(e):e;return iP(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],o=wM(e),a=o.extractWeights,i=o.getRemainingWeights,s=vM(a,r)(t,n,"fc");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=sP(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t,n=[],r=xM(e,n),o={fc:(t="fc",{weights:r(t+"/weights",2),bias:r(t+"/bias",1)})};return pM(e,n),{params:o,paramMappings:n}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,o=e.slice(0,e.length-r),a=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(a)},t}(MM),lP=["neutral","happy","sad","angry","fearful","disgusted","surprised"],cP=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);lP.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return lP.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),dP=function(e){function t(t){return void 0===t&&(t=new aP),e.call(this,"FaceExpressionNet",t)||this}return mu(t,e),t.prototype.forwardInput=function(e){var t=this;return Lc((function(){return wf(t.runNet(e))}))},t.prototype.forward=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,OM(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return gu(this,void 0,void 0,(function(){var t,n,r,o,a=this;return yu(this,(function(i){switch(i.label){case 0:return[4,OM(e)];case 1:return t=i.sent(),[4,this.forwardInput(t)];case 2:return n=i.sent(),[4,Promise.all(af(n).map((function(e){return gu(a,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=i.sent(),n.dispose(),o=r.map((function(e){return new cP(e)})),[2,t.isBatchInput?o:o[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(uP);function fP(e,t){var n={expressions:t};return Object.assign({},e,n)}function hP(e,t,n,r){void 0===n&&(n=.1),(Array.isArray(t)?t:[t]).forEach((function(t){var o=t instanceof cP?t:t.expressions instanceof cP?t.expressions:void 0;if(!o)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var a=o.asSortedArray().filter((function(e){return e.probability>n})),i=XM(t)?t.detection.box.bottomLeft:r||new PO(0,0),s=new cM(a.map((function(e){return e.expression+" ("+WO(e.probability)+")"})),i);s.draw(e)}))}var pP=function(){function e(e,t,n){void 0===n&&(n=new PO(0,0));var r=t.width,o=t.height;this._imgDims=new MO(r,o),this._shift=n,this._positions=e.map((function(e){return e.mul(new PO(r,o)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new PO(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new PO(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new PO(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof $M?e.box.floor():new YO(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),o=r.useDlibAlignment,a=r.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(a)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],o=function(e){return r.sub(e).magnitude()},a=(o(t)+o(n))/2,i=Math.floor(a/.45),s=zO(e),u=Math.floor(Math.max(0,s.x-.5*i)),l=Math.floor(Math.max(0,s.y-.43*i));return new QO(u,l,Math.min(i,this.imageWidth+u),Math.min(i,this.imageHeight+l))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),o=n.reduce((function(e,t){return t<e?t:e}),1/0),a=t.reduce((function(e,t){return e<t?t:e}),0),i=n.reduce((function(e,t){return e<t?t:e}),0);return new KO(r,o,a,i)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),mP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(zO)},t}(pP);function vP(e){return XM(e)&&e.landmarks instanceof pP&&e.unshiftedLandmarks instanceof pP&&e.alignedRect instanceof $M}function gP(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),a=e.detection.imageDims,i={landmarks:r,unshiftedLandmarks:t,alignedRect:new $M(e.detection.score,o.rescale(a.reverse()),a)};return Object.assign({},e,i)}var yP=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,o=void 0===r||r,a=e.lineWidth,i=e.lineColor,s=e.pointSize,u=e.pointColor;this.drawLines=n,this.drawPoints=o,this.lineWidth=a||1,this.pointSize=s||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"},bP=function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new yP(t)}return e.prototype.draw=function(e){var t=uM(e),n=this.options,r=n.drawLines,o=n.drawPoints,a=n.lineWidth,i=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&&this.faceLandmarks instanceof mP&&(t.strokeStyle=i,t.lineWidth=a,KM(t,this.faceLandmarks.getJawOutline()),KM(t,this.faceLandmarks.getLeftEyeBrow()),KM(t,this.faceLandmarks.getRightEyeBrow()),KM(t,this.faceLandmarks.getNose()),KM(t,this.faceLandmarks.getLeftEye(),!0),KM(t,this.faceLandmarks.getRightEye(),!0),KM(t,this.faceLandmarks.getMouth(),!0)),o){t.strokeStyle=u,t.fillStyle=u;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))}},e}();function xP(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){var n=t instanceof pP?t:vP(t)?t.landmarks:void 0;if(!n)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new bP(n).draw(e)}))}function wP(e,t){var n=[],r=wM(e),o=r.extractWeights,a=r.getRemainingWeights,i=function(e,t){var n=mM(e,t),r=yM(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,o){return{separable_conv0:r(e,t,o+"/separable_conv0"),separable_conv1:r(t,t,o+"/separable_conv1"),expansion_conv:n(e,t,1,o+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(o,n),s=i.extractConvParams,u=i.extractSeparableConvParams,l=i.extractReductionBlockParams,c=i.extractMainBlockParams,d={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:l(32,64,"entry_flow/reduction_block_0"),reduction_block_1:l(64,128,"entry_flow/reduction_block_1")},f={};HO(t,0,1).forEach((function(e){f["main_block_"+e]=c(128,"middle_flow/main_block_"+e)}));var h={reduction_block:l(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:d,middle_flow:f,exit_flow:h}}}function CP(e,t){var n=[],r=function(e,t){var n=xM(e,t),r=rP(n),o=bM(n);return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),separable_conv2:o(e+"/separable_conv2")}}}}(e,n),o=r.extractConvParams,a=r.extractSeparableConvParams,i=r.extractReductionBlockParams,s=r.extractMainBlockParams,u={conv_in:o("entry_flow/conv_in"),reduction_block_0:i("entry_flow/reduction_block_0"),reduction_block_1:i("entry_flow/reduction_block_1")},l={};HO(t,0,1).forEach((function(e){l["main_block_"+e]=s("middle_flow/main_block_"+e)}));var c={reduction_block:i("exit_flow/reduction_block"),separable_conv:a("exit_flow/separable_conv")};return pM(e,n),{params:{entry_flow:u,middle_flow:l,exit_flow:c},paramMappings:n}}function kP(e,t,n){return xg(_v(e,t.filters,n,"same"),t.bias)}function SP(e,t,n){void 0===n&&(n=!0);var r=n?$g(e):e;return r=ZM(r,t.separable_conv0,[1,1]),r=ZM($g(r),t.separable_conv1,[1,1]),r=zv(r,[3,3],[2,2],"same"),r=xg(r,kP(e,t.expansion_conv,[2,2]))}var EP,_P=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return mu(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return Lc((function(){var r=FM(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(sd(256)),o=$g(kP(r,n.entry_flow.conv_in,[2,2]));return o=SP(o,n.entry_flow.reduction_block_0,!1),o=SP(o,n.entry_flow.reduction_block_1),HO(t._numMainBlocks,0,1).forEach((function(e){o=function(e,t){var n=ZM($g(e),t.separable_conv0,[1,1]);return n=ZM($g(n),t.separable_conv1,[1,1]),n=ZM($g(n),t.separable_conv2,[1,1]),xg(n,e)}(o,n.middle_flow["main_block_"+e])})),o=SP(o,n.exit_flow.reduction_block),o=$g(ZM(o,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,OM(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return CP(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return wP(e,this._numMainBlocks)},t}(MM);!function(e){e.FEMALE="female",e.MALE="male"}(EP||(EP={}));var NP=function(e){function t(t){void 0===t&&(t=new _P(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return mu(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Lc((function(){var r=e instanceof AM?t.faceFeatureExtractor.forwardInput(e):e,o=Hv(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:iP(o,n.fc.age).as1D(),gender:iP(o,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return Lc((function(){var n=t.runNet(e),r=n.age,o=n.gender;return{age:r,gender:wf(o)}}))},t.prototype.forward=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,OM(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return gu(this,void 0,void 0,(function(){var t,n,r,o,a,i,s=this;return yu(this,(function(u){switch(u.label){case 0:return[4,OM(e)];case 1:return t=u.sent(),[4,this.forwardInput(t)];case 2:return n=u.sent(),r=af(n.age),o=af(n.gender),a=r.map((function(e,t){return{ageTensor:e,genderTensor:o[t]}})),[4,Promise.all(a.map((function(e){var t=e.ageTensor,n=e.genderTensor;return gu(s,void 0,void 0,(function(){var e,r,o,a,i;return yu(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],a=(o=r>.5)?EP.MALE:EP.FEMALE,i=o?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:a,genderProbability:i}]}}))}))})))];case 3:return i=u.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?i:i[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=wM(e),r=n.extractWeights,o=n.getRemainingWeights,a=vM(r,t),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:i,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=sP(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=xM(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return pM(e,t),{params:o,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(MM),TP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],zO([e[3],e[4]])]},t}(pP),RP=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+WO(this.distance)+")":"")},e}(),DP=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e}();function IP(e,t){return gu(this,void 0,void 0,(function(){var n,r,o,a,i,s;return yu(this,(function(u){switch(u.label){case 0:return n=iM.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,OM(e)];case 1:if((o=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(a=o.getInput(0))instanceof n?(i=a,[3,4]):[3,2];case 2:return[4,RM(a)];case 3:i=u.sent(),u.label=4;case 4:r=i,u.label=5;case 5:return s=uM(r),[2,t.map((function(e){return e instanceof $M?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=EM({width:r,height:o});return uM(a).putImageData(s.getImageData(t,n,r,o),0,0),a}))]}}))}))}function AP(e,t){return gu(this,void 0,void 0,(function(){return yu(this,(function(n){if(!FO(e)&&!LO(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(LO(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Lc((function(){var n=e.shape.slice(LO(e)?1:0),r=n[0],o=n[1],a=n[2],i=t.map((function(e){return e instanceof $M?e.forSize(o,r).box:e})).map((function(e){return e.clipAtImageBorders(o,r)})).map((function(t){var n=t.x,i=t.y,s=t.width,u=t.height;return Kv(e.as3D(r,o,a),[i,n,0],[u,s,a])}));return i}))]}))}))}var OP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,o=t/Math.max(r,n);return{width:n*o,height:r*o}})),o=r.length;return Lc((function(){var n=function(e,t){return nf([pd([68],e),pd([68],t)],1).as2D(1,136).as1D()},a=function(e,t){var n=r[e],o=n.width,a=n.height;return t(o,a)?Math.abs(o-a)/2:0},i=e.mul(pd([o,136],t)).sub(nf(Array.from(Array(o),(function(e,t){return n(function(e){return a(e,(function(e,t){return e<t}))}(t),function(e){return a(e,(function(e,t){return t<e}))}(t))})))).div(nf(Array.from(Array(o),(function(e,t){return n(r[t].width,r[t].height)}))));return i}))},t.prototype.forwardInput=function(e){var t=this;return Lc((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,OM(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return gu(this,void 0,void 0,(function(){var t,n,r,o=this;return yu(this,(function(a){switch(a.label){case 0:return[4,OM(e)];case 1:return t=a.sent(),n=Lc((function(){return af(o.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return gu(o,void 0,void 0,(function(){var r,o,a,i,s;return yu(this,(function(u){switch(u.label){case 0:return a=(o=Array).from,[4,e.data()];case 1:return r=a.apply(o,[u.sent()]),i=r.filter((function(e,t){return BO(t)})),s=r.filter((function(e,t){return!BO(t)})),[2,new mP(Array(68).fill(0).map((function(e,t){return new PO(i[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=a.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(uP),MP=function(e){function t(t){return void 0===t&&(t=new aP),e.call(this,"FaceLandmark68Net",t)||this}return mu(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(OP);var PP=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return mu(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Lc((function(){var n=eP(FM(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(sd(255)),t.dense0,!0);return n=eP(n,t.dense1),n=eP(n,t.dense2),n=Hv(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,OM(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=oP(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return pM(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=wM(e),r=n.extractWeights,o=n.getRemainingWeights,a=nP(r,t).extractDenseBlock3Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u}}}(e)},t}(MM),jP=function(e){function t(t){return void 0===t&&(t=new PP),e.call(this,"FaceLandmark68TinyNet",t)||this}return mu(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(OP);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}mu(t,e)}(MP);function FP(e,t,n,r,o){void 0===o&&(o="same");var a=t.conv,i=a.filters,s=a.bias,u=_v(e,i,n,o);return u=function(e,t){return xg(Og(e,t.weights),t.biases)}(u=xg(u,s),t.scale),r?$g(u):u}function LP(e,t){return FP(e,t,[1,1],!1)}function BP(e,t){return FP(e,t,[2,2],!0,"valid")}function WP(e,t){function n(n,r,o,a){var i=function(t,n,r){var o=e(t),a=o.length/(n*r*r);if(a%1!==0)throw new Error("depth has to be an integer: "+a+", weights.length: "+o.length+", numFilters: "+n+", filterSize: "+r);return Lc((function(){return Qg(dd(o,[n,a,r,r]),[2,3,1,0])}))}(n,r,o),s=ud(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:s}}function r(r,o,a,i){var s=n(r,o,a,i+"/conv"),u=function(n,r){var o=ud(e(n)),a=ud(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:o,biases:a}}(o,i+"/scale");return{conv:s,scale:u}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,o,a){return void 0===a&&(a=!1),{conv1:r((a?.5:1)*e,t,n,o+"/conv1"),conv2:r(e,t,n,o+"/conv2")}}}}function UP(e,t){var n=xM(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),o=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:o}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function zP(e){var t=[],n=UP(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,a=r("conv32_down"),i=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),c=o("conv64_1"),d=o("conv64_2"),f=o("conv64_3"),h=o("conv128_down"),p=o("conv128_1"),m=o("conv128_2"),v=o("conv256_down"),g=o("conv256_1"),y=o("conv256_2"),b=o("conv256_down_out"),x=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!jO(x,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+x);var w={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:d,conv64_3:f,conv128_down:h,conv128_1:p,conv128_2:m,conv256_down:v,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:x};return pM(e,t),{params:w,paramMappings:t}}function HP(e,t){var n=function(e,t){return FP(e,t,[1,1],!0)}(e,t.conv1);return n=LP(n,t.conv2),n=xg(n,e),n=$g(n)}function VP(e,t){var n=BP(e,t.conv1);n=LP(n,t.conv2);var r=Hv(e,2,2,"valid"),o=hd(r.shape),a=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var i=n.shape.slice();i[1]=1;var s=hd(i),u=(n=yd([n,s],1)).shape.slice();u[2]=1;var l=hd(u);n=yd([n,l],2)}return r=a?yd([r,o],3):r,n=xg(r,n),n=$g(n)}var qP=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return mu(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return Lc((function(){var n=BP(FM(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(sd(256)),t.conv32_down);n=HP(n=zv(n,3,2,"valid"),t.conv32_1),n=HP(n,t.conv32_2),n=HP(n,t.conv32_3),n=HP(n=VP(n,t.conv64_down),t.conv64_1),n=HP(n,t.conv64_2),n=HP(n,t.conv64_3),n=HP(n=VP(n,t.conv128_down),t.conv128_1),n=HP(n,t.conv128_2),n=HP(n=VP(n,t.conv256_down),t.conv256_1);var r=(n=VP(n=HP(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return Av(r,t.fc)}))},t.prototype.forward=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,OM(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return gu(this,void 0,void 0,(function(){var t,n,r,o=this;return yu(this,(function(a){switch(a.label){case 0:return[4,OM(e)];case 1:return t=a.sent(),n=Lc((function(){return af(o.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=a.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return zP(e)},t.prototype.extractParams=function(e){return function(e){var t=wM(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],a=WP(n,o),i=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),f=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),v=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),x=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),k=Lc((function(){return Qg(ld(n(32768),[128,256]),[1,0])}));if(o.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:d,conv64_down:f,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:v,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:x,conv256_2:w,conv256_down_out:C,fc:k},paramMappings:o}}(e)},t}(MM);var GP=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,o=t.maxNumScales,a=t.scoreThresholds,i=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=o||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=i,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function YP(e,t){function n(n,r,o,a,i){var s=dd(e(n*r*o*o),[o,o,n,r]),u=ud(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/"+(i?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(e,t,r,o){var a=n(e,t,r,o,!0);return{filters:a.filters,batch_norm_offset:a.bias}}function o(n,o,a){var i=function(n,r){var o=dd(e(9*n),[3,3,n,1]),a=ud(e(n)),i=ud(e(n)),s=ud(e(n)),u=ud(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:o,batch_norm_scale:a,batch_norm_offset:i,batch_norm_mean:s,batch_norm_variance:u}}(n,a+"/depthwise_conv");return{depthwise_conv:i,pointwise_conv:r(n,o,1,a+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:o(32,64,"mobilenetv1/conv_1"),conv_2:o(64,128,"mobilenetv1/conv_2"),conv_3:o(128,128,"mobilenetv1/conv_3"),conv_4:o(128,256,"mobilenetv1/conv_4"),conv_5:o(256,256,"mobilenetv1/conv_5"),conv_6:o(256,512,"mobilenetv1/conv_6"),conv_7:o(512,512,"mobilenetv1/conv_7"),conv_8:o(512,512,"mobilenetv1/conv_8"),conv_9:o(512,512,"mobilenetv1/conv_9"),conv_10:o(512,512,"mobilenetv1/conv_10"),conv_11:o(512,512,"mobilenetv1/conv_11"),conv_12:o(512,1024,"mobilenetv1/conv_12"),conv_13:o(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function KP(e){var t=[],n=function(e,t){var n=xM(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function o(e){var t="mobilenetv1/conv_"+e,o="MobilenetV1/Conv2d_"+e+"_depthwise",a=t+"/depthwise_conv",i=t+"/pointwise_conv";return{depthwise_conv:{filters:n(o+"/depthwise_weights",4,a+"/filters"),batch_norm_scale:n(o+"/BatchNorm/gamma",1,a+"/batch_norm_scale"),batch_norm_offset:n(o+"/BatchNorm/beta",1,a+"/batch_norm_offset"),batch_norm_mean:n(o+"/BatchNorm/moving_mean",1,a+"/batch_norm_mean"),batch_norm_variance:n(o+"/BatchNorm/moving_variance",1,a+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,i)}}function a(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function i(e){return{box_encoding_predictor:a("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:a("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:i(0),box_predictor_1:i(1),box_predictor_2:i(2),box_predictor_3:i(3),box_predictor_4:i(4),box_predictor_5:i(5)}}}}(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!FO(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var i={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:a}};return pM(e,t),{params:i,paramMappings:t}}function $P(e,t,n){return Lc((function(){var r=_v(e,t.filters,n,"same");return r=xg(r,t.batch_norm_offset),Pm(r,0,6)}))}function XP(e,t){return Lc((function(){var n=null,r=$P(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var o=t+1,a=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(o);r=function(e,t,n){return Lc((function(){var r=Rv(e,t.filters,n,"same");return r=yv(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Pm(r,0,6)}))}(r,e.depthwise_conv,a),r=$P(r,e.pointwise_conv,[1,1]),11===o&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function QP(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),a=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),f=(i-o)*(s-a),h=(c-u)*(d-l);if(f<=0||h<=0)return 0;var p=Math.max(o,u),m=Math.max(a,l),v=Math.min(i,c),g=Math.min(s,d),y=Math.max(v-p,0)*Math.max(g-m,0);return y/(f+h-y)}function JP(e,t){var n=function(e){var t=af(Qg(e,[1,0])),n=[Bg(t[2],t[0]),Bg(t[3],t[1])];return{sizes:n,centers:[xg(t[0],Sg(n[0],sd(2))),xg(t[1],Sg(n[1],sd(2)))]}}(e),r=n.sizes,o=n.centers,a=af(Qg(t,[1,0])),i=Sg(Og(Bm(Sg(a[2],sd(5))),r[0]),sd(2)),s=xg(Og(Sg(a[0],sd(10)),r[0]),o[0]),u=Sg(Og(Bm(Sg(a[3],sd(5))),r[1]),sd(2)),l=xg(Og(Sg(a[1],sd(10)),r[1]),o[1]);return Qg(nf([Bg(s,i),Bg(l,u),xg(s,i),xg(l,u)]),[1,0])}function ZP(e,t){return Lc((function(){var n=e.shape[0];return{boxPredictionEncoding:Zd(hM(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:Zd(hM(e,t.class_predictor),[n,-1,3])}}))}var ej=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),tj=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return mu(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return Lc((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=XP(Bg(Og(n,sd(.007843137718737125)),sd(1)),t.mobilenetv1),o=function(e,t,n){return Lc((function(){var r=$P(e,n.conv_0,[1,1]),o=$P(r,n.conv_1,[2,2]),a=$P(o,n.conv_2,[1,1]),i=$P(a,n.conv_3,[2,2]),s=$P(i,n.conv_4,[1,1]),u=$P(s,n.conv_5,[2,2]),l=$P(u,n.conv_6,[1,1]),c=$P(l,n.conv_7,[2,2]),d=ZP(t,n.box_predictor_0),f=ZP(e,n.box_predictor_1),h=ZP(o,n.box_predictor_2),p=ZP(i,n.box_predictor_3),m=ZP(u,n.box_predictor_4),v=ZP(c,n.box_predictor_5);return{boxPredictions:yd([d.boxPredictionEncoding,f.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding],1),classPredictions:yd([d.classPrediction,f.classPrediction,h.classPrediction,p.classPrediction,m.classPrediction,v.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return Lc((function(){var r=e.shape[0],o=JP(Zd(rf(n.extra_dim,[r,1,1]),[-1,4]),Zd(e,[-1,4]));o=Zd(o,[r,o.shape[0]/r,4]);var a=$m(qv(t,[0,0,1],[-1,-1,-1])),i=qv(a,[0,0,0],[-1,-1,1]);return i=Zd(i,[r,i.shape[1]]),{boxes:af(o),scores:af(i)}}))}(o.boxPredictions,o.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,OM(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),gu(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d,f,h,p,m,v,g,y,b,x,w;return yu(this,(function(C){switch(C.label){case 0:return n=new ej(t),r=n.maxResults,o=n.minConfidence,[4,OM(e)];case 1:for(a=C.sent(),i=this.forwardInput(a),s=i.boxes,u=i.scores,l=s[0],c=u[0],d=1;d<s.length;d++)s[d].dispose(),u[d].dispose();return p=(h=Array).from,[4,c.data()];case 2:return f=p.apply(h,[C.sent()]),m=function(e,t,n,r,o){var a=e.shape[0],i=Math.min(n,a),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>o})).sort((function(e,t){return t.score-e.score})),u=function(e){return e<=r?1:0},l=[];return s.forEach((function(t){if(!(l.length>=i)){for(var n=t.score,r=l.length-1;r>=0;--r){var a=QP(e,t.boxIndex,l[r]);if(0!==a&&(t.score*=u(a),t.score<=o))break}n===t.score&&l.push(t.boxIndex)}})),l}(l,f,r,.5,o),v=a.getReshapedInputDimensions(0),g=a.inputSize,y=g/v.width,b=g/v.height,x=l.arraySync(),w=m.map((function(e){var t=[Math.max(0,x[e][0]),Math.min(1,x[e][2])].map((function(e){return e*b})),n=t[0],r=t[1],o=[Math.max(0,x[e][1]),Math.min(1,x[e][3])].map((function(e){return e*y})),i=o[0],s=o[1];return new $M(f[e],new QO(i,n,s-i,r-n),{height:a.getInputHeight(0),width:a.getInputWidth(0)})})),l.dispose(),c.dispose(),[2,w]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return KP(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=wM(e),r=n.extractWeights,o=n.getRemainingWeights,a=YP(r,t),i=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=i(),l=s(),c={extra_dim:cd(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:c},paramMappings:t}}(e)},t}(MM);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}mu(t,e)}(tj);var nj=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return mu(t,e),t}(GM),rj=function(){function e(){}return e.prototype.then=function(e){return gu(this,void 0,void 0,(function(){var t;return yu(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return gu(this,void 0,void 0,(function(){return yu(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function oj(e,t){var n={descriptor:t};return Object.assign({},e,n)}function aj(e,t,n,r,o){return void 0===o&&(o=function(e){return e.alignedRect}),gu(this,void 0,void 0,(function(){var a,i,s,u,l;return yu(this,(function(c){switch(c.label){case 0:return a=e.map((function(e){return vP(e)?o(e):e.detection})),(s=r)?[3,5]:t instanceof El?[4,AP(t,a)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,IP(t,a)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return[4,n(i=s)];case 6:return l=c.sent(),i.forEach((function(e){return e instanceof El&&e.dispose()})),[2,l]}}))}))}function ij(e,t,n,r,o){return gu(this,void 0,void 0,(function(){var a=this;return yu(this,(function(i){return[2,aj([e],t,(function(e){return gu(a,void 0,void 0,(function(){return yu(this,(function(t){return[2,n(e[0])]}))}))}),r,o)]}))}))}function sj(e){var t=wM(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],a=function(e,t){var n=mM(e,t),r=vM(e,t);function o(n,r){var o=ud(e(n));return t.push({paramPath:r}),o}function a(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:o(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:o(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:o(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=a([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return vu({},e,{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=a([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=o(128,"rnet/prelu4_alpha"),i=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return vu({},e,{fc1:t,prelu4_alpha:n,fc2_1:i,fc2_2:s})},extractONetParams:function(){var e=a([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),i=o(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=o(256,"onet/prelu5_alpha"),l=r(256,2,"onet/fc2_1"),c=r(256,4,"onet/fc2_2"),d=r(256,10,"onet/fc2_3");return vu({},e,{conv4:t,prelu4_alpha:i,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:d})}}}(n,o),i=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,l=i(),c=s(),d=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:d},paramMappings:o}}function uj(e){var t=[],n=function(e,t){var n=xM(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function o(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function a(e){return n(e,1)}function i(e){return{conv1:r(e+"/conv1"),prelu1_alpha:a(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:a(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:a(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return vu({},e,{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=i("rnet"),t=o("rnet/fc1"),n=a("rnet/prelu4_alpha"),r=o("rnet/fc2_1"),s=o("rnet/fc2_2");return vu({},e,{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=i("onet"),t=r("onet/conv4"),n=a("onet/prelu4_alpha"),s=o("onet/fc1"),u=a("onet/prelu5_alpha"),l=o("onet/fc2_1"),c=o("onet/fc2_2"),d=o("onet/fc2_3");return vu({},e,{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:d})}}}(e,t),r=n.extractPNetParams,o=n.extractRNetParams,a=n.extractONetParams,i=r(),s=o(),u=a();return pM(e,t),{params:{pnet:i,rnet:s,onet:u},paramMappings:t}}function lj(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var cj=function(e){function t(t,n,r,o){return e.call(this,{left:t,top:n,right:r,bottom:o},!0)||this}return mu(t,e),t}(YO);function dj(e){return Lc((function(){return Og(Bg(e,sd(127.5)),sd(.0078125))}))}function fj(e,t){return Lc((function(){return xg($g(e),Og(t,qm($g(qm(e)))))}))}function hj(e,t,n){return void 0===n&&(n=!1),Lc((function(){var r=hM(e,t.conv1,"valid");return r=fj(r,t.prelu1_alpha),r=fj(r=hM(r=zv(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=fj(r=hM(r=n?r:zv(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function pj(e,t,n,r,o){o.stage1=[];var a=t.map((function(t){return Lc((function(){var n={scale:t},o=function(e,t){return Lc((function(){var n=lj(t,e.shape.slice(1)),r=n.height,o=n.width,a=dj(Hy.resizeBilinear(e,[r,o]));return Qg(a,[0,2,1,3])}))}(e,t),a=Date.now(),i=function(e,t){return Lc((function(){var n=hj(e,t,!0),r=hM(n,t.conv4_1,"valid"),o=Ud(ng(r,3),3);return{prob:wf(Bg(r,o),3),regions:hM(n,t.conv4_2,"valid")}}))}(o,r),s=i.prob,u=i.regions;return n.pnet=Date.now()-a,{scoresTensor:af(af(s,3)[1])[0],regionsTensor:af(u)[0],scale:t,statsForScale:n}}))})),i=a.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,a=e.scale,i=e.statsForScale,s=function(e,t,n,r){for(var o=[],a=e.arraySync(),i=0;i<e.shape[0];i++)for(var s=0;s<e.shape[1];s++)a[i][s]>=r&&o.push(new PO(s,i));return o.map((function(e){var r=new KO(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),o=a[e.y][e.x],i=t.arraySync();return{cell:r,score:o,region:new cj(i[e.y][e.x][0],i[e.y][e.x][1],i[e.y][e.x][2],i[e.y][e.x][3])}}))}(t,r,a,n);if(t.dispose(),r.dispose(),!s.length)return o.stage1.push(i),[];var u=Date.now(),l=jM(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return i.nms=Date.now()-u,i.numBoxes=l.length,o.stage1.push(i),l.map((function(e){return s[e]}))})),s=i.reduce((function(e,t){return e.concat(t)}),[]),u=[],l=[];if(s.length>0){var c=Date.now(),d=jM(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.7);o.stage1_nms=Date.now()-c,l=d.map((function(e){return s[e].score})),u=d.map((function(e){return s[e]})).map((function(e){var t=e.cell,n=e.region;return new KO(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:u,scores:l}}function mj(e,t,n){var r=n.width,o=n.height;return gu(this,void 0,void 0,(function(){var n,a,i,s=this;return yu(this,(function(u){switch(u.label){case 0:return n=uM(e),[4,Promise.all(t.map((function(t){return gu(s,void 0,void 0,(function(){var r,o,a,i,s,u,l,c;return yu(this,(function(d){return r=t.padAtBorders(e.height,e.width),o=r.y,a=r.ey,i=r.x,s=r.ex,u=i-1,l=o-1,c=n.getImageData(u,l,s-u,a-l),[2,iM.isNodejs()?_M(c):createImageBitmap(c)]}))}))})))];case 1:return a=u.sent(),i=[],a.forEach((function(e){var t=uM(EM({width:r,height:o}));t.drawImage(e,0,0,r,o);for(var n=t.getImageData(0,0,r,o).data,a=[],s=0;s<n.length;s+=4)a.push(n[s+2]),a.push(n[s+1]),a.push(n[s]);i.push(a)})),[2,i.map((function(e){return Lc((function(){return dj(Qg(dd(e,[1,r,o,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function vj(e,t,n,r,o){return gu(this,void 0,void 0,(function(){var a,i,s,u,l,c,d,f,h,p,m,v,g,y;return yu(this,(function(b){switch(b.label){case 0:return a=Date.now(),[4,mj(e,t,{width:24,height:24})];case 1:return i=b.sent(),o.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map((function(e){var t=function(e,t){return Lc((function(){var n=hj(e,t),r=fj(iP(Zd(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),o=iP(r,t.fc2_1),a=Ud(ng(o,1),1),i=wf(Bg(o,a),1),s=iP(r,t.fc2_2);return{scores:af(i,1)[1],regions:s}}))}(e,r);return e.dispose(),t})),o.stage2_rnet=Date.now()-a,u=s.length>1?yd(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[b.sent()]),u.dispose(),f=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),h=f.map((function(e){return t[e]})),p=f.map((function(e){return l[e]})),m=[],v=[],h.length>0&&(a=Date.now(),g=jM(h,p,.7),o.stage2_nms=Date.now()-a,y=g.map((function(e){var t=s[f[e]].regions.arraySync();return new cj(t[0][0],t[0][1],t[0][2],t[0][3])})),v=g.map((function(e){return p[e]})),m=g.map((function(e,t){return h[e].calibrate(y[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:m,scores:v}]}}))}))}function gj(e,t,n,r,o){return gu(this,void 0,void 0,(function(){var a,i,s,u,l,c,d,f,h,p,m,v,g,y,b;return yu(this,(function(x){switch(x.label){case 0:return a=Date.now(),[4,mj(e,t,{width:48,height:48})];case 1:return i=x.sent(),o.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map((function(e){var t=function(e,t){return Lc((function(){var n=hj(e,t);n=fj(n=hM(n=zv(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=fj(iP(Zd(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),o=iP(r,t.fc2_1),a=Ud(ng(o,1),1),i=wf(Bg(o,a),1),s=iP(r,t.fc2_2),u=iP(r,t.fc2_3);return{scores:af(i,1)[1],regions:s,points:u}}))}(e,r);return e.dispose(),t})),o.stage3_onet=Date.now()-a,u=s.length>1?yd(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[x.sent()]),u.dispose(),f=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),h=f.map((function(e){var t=s[e].regions.arraySync();return new cj(t[0][0],t[0][1],t[0][2],t[0][3])})),p=f.map((function(e,n){return t[e].calibrate(h[n])})),m=f.map((function(e){return l[e]})),v=[],g=[],y=[],p.length>0&&(a=Date.now(),b=jM(p,m,.7,!1),o.stage3_nms=Date.now()-a,v=b.map((function(e){return p[e]})),g=b.map((function(e){return m[e]})),y=b.map((function(e,t){return Array(5).fill(0).map((function(n,r){var o=s[e].points.arraySync();return new PO(o[0][r]*(v[t].width+1)+v[t].left,o[0][r+5]*(v[t].height+1)+v[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:v,scores:g,points:y}]}}))}))}var yj=function(e){function t(){return e.call(this,"Mtcnn")||this}return mu(t,e),t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),gu(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d,f,h,p,m,v,g,y,b,x,w,C;return yu(this,(function(k){switch(k.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},a=Date.now(),i=Lc((function(){return e=Ud(Hb.fromPixels(r)).toFloat(),Lc((function(){return nf(af(e,3).reverse(),3)}));var e})),s=function(e){return i.dispose(),o.total=Date.now()-a,e},u=i.shape.slice(1),l=u[0],c=u[1],d=new GP(t),f=d.minFaceSize,h=d.scaleFactor,p=d.maxNumScales,m=d.scoreThresholds,v=d.scaleSteps,g=(v||function(e,t,n){for(var r=n[0],o=n[1],a=12/e,i=[],s=Math.min(r,o)*a,u=0;s>=12;)i.push(a*Math.pow(t,u)),s*=t,u+=1;return i}(f,h,[l,c])).filter((function(e){var t=lj(e,[l,c]);return Math.min(t.width,t.height)>12})).slice(0,p),o.scales=g,o.pyramid=g.map((function(e){return lj(e,[l,c])})),y=Date.now(),[4,pj(i,g,m[0],n.pnet,o)];case 1:return b=k.sent(),o.total_stage1=Date.now()-y,b.boxes.length?(o.stage2_numInputBoxes=b.boxes.length,y=Date.now(),[4,vj(r,b.boxes,m[1],n.rnet,o)]):[2,s({results:[],stats:o})];case 2:return x=k.sent(),o.total_stage2=Date.now()-y,x.boxes.length?(o.stage3_numInputBoxes=x.boxes.length,y=Date.now(),[4,gj(r,x.boxes,m[2],n.onet,o)]):[2,s({results:[],stats:o})];case 3:return w=k.sent(),o.total_stage3=Date.now()-y,C=w.boxes.map((function(e,t){return gP(QM({},new $M(w.scores[t],new QO(e.left/c,e.top/l,e.width/c,e.height/l),{height:l,width:c})),new TP(w.points[t].map((function(t){return t.sub(new PO(e.left,e.top)).div(new PO(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:C,stats:o})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),gu(this,void 0,void 0,(function(){var n;return yu(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,OM(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),gu(this,void 0,void 0,(function(){var n;return yu(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,OM(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return uj(e)},t.prototype.extractParams=function(e){return sj(e)},t}(MM),bj=[new PO(1.603231,2.094468),new PO(6.041143,7.080126),new PO(2.882459,3.518061),new PO(4.266906,5.178857),new PO(9.041765,10.66308)],xj=[117.001,114.697,97.404],wj=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:bj,meanRgb:xj,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return mu(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return gu(this,void 0,void 0,(function(){return yu(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new $M(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(YM),Cj=[new PO(.738768,.874946),new PO(2.42204,2.65704),new PO(4.30971,7.04493),new PO(10.246,4.59428),new PO(12.6868,11.8741)],kj=[new PO(1.603231,2.094468),new PO(6.041143,7.080126),new PO(2.882459,3.518061),new PO(4.266906,5.178857),new PO(9.041765,10.66308)],Sj=[117.001,114.697,97.404],Ej=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:kj,meanRgb:Sj}:{anchors:Cj,withClassScores:!0});return e.call(this,n)||this}return mu(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return gu(this,void 0,void 0,(function(){return yu(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new $M(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(YM);var _j={ssdMobilenetv1:new tj,tinyFaceDetector:new wj,tinyYolov2:new Ej,mtcnn:new yj,faceLandmark68Net:new MP,faceLandmark68TinyNet:new jP,faceRecognitionNet:new qP,faceExpressionNet:new dP,ageGenderNet:new NP};function Nj(e,t){var n={age:t};return Object.assign({},e,n)}function Tj(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var Rj=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return mu(t,e),t}(rj),Dj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t,n=this;return yu(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,aj(e=r.sent(),this.input,(function(e){return gu(n,void 0,void 0,(function(){return yu(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return _j.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return fP(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new Pj(this,this.input)},t}(Rj),Ij=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t;return yu(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,ij(e,this.input,(function(e){return _j.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,fP(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new jj(this,this.input)},t}(Rj),Aj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.withAgeAndGender=function(){return new Fj(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Wj(this,this.input)},t}(Dj),Oj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.withAgeAndGender=function(){return new Lj(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Uj(this,this.input)},t}(Ij),Mj=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return mu(t,e),t}(rj),Pj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t,n=this;return yu(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,aj(e=r.sent(),this.input,(function(e){return gu(n,void 0,void 0,(function(){return yu(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return _j.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],o=r.age;return Nj(Tj(e,r.gender,r.genderProbability),o)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Dj(this,this.input)},t}(Mj),jj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t,n,r,o;return yu(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?[4,ij(e,this.input,(function(e){return _j.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=a.sent(),n=t.age,r=t.gender,o=t.genderProbability,[2,Nj(Tj(e,r,o),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new Ij(this,this.input)},t}(Mj),Fj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.withFaceExpressions=function(){return new Aj(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Wj(this,this.input)},t}(Pj),Lj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.withFaceExpressions=function(){return new Oj(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Uj(this,this.input)},t}(jj),Bj=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return mu(t,e),t}(rj),Wj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e;return yu(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,aj(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return _j.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return oj(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Aj(this,this.input)},t.prototype.withAgeAndGender=function(){return new Fj(this,this.input)},t}(Bj),Uj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t;return yu(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,ij(e,this.input,(function(e){return _j.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,oj(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new Oj(this,this.input)},t.prototype.withAgeAndGender=function(){return new Lj(this,this.input)},t}(Bj),zj=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.useTinyLandmarkNet=r,o}return mu(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?_j.faceLandmark68TinyNet:_j.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(rj),Hj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t,n,r,o,a=this;return yu(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),t=e.map((function(e){return e.detection})),this.input instanceof El?[4,AP(this.input,t)]:[3,3];case 2:return r=i.sent(),[3,5];case 3:return[4,IP(this.input,t)];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return a.landmarkNet.detectLandmarks(e)})))];case 6:return o=i.sent(),n.forEach((function(e){return e instanceof El&&e.dispose()})),[2,e.map((function(e,t){return gP(e,o[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Aj(this,this.input)},t.prototype.withAgeAndGender=function(){return new Fj(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Wj(this,this.input)},t}(zj),Vj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t,n,r,o;return yu(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?(t=e.detection,this.input instanceof El?[4,AP(this.input,[t])]:[3,3]):[2];case 2:return r=a.sent(),[3,5];case 3:return[4,IP(this.input,[t])];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return o=a.sent(),n.forEach((function(e){return e instanceof El&&e.dispose()})),[2,gP(e,o)]}}))}))},t.prototype.withFaceExpressions=function(){return new Oj(this,this.input)},t.prototype.withAgeAndGender=function(){return new Lj(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Uj(this,this.input)},t}(zj),qj=function(e){function t(t,n){void 0===n&&(n=new ej);var r=e.call(this)||this;return r.input=t,r.options=n,r}return mu(t,e),t}(rj),Gj=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t,n,r;return yu(this,(function(o){switch(o.label){case 0:return t=(e=this).input,(n=e.options)instanceof GP?[4,_j.mtcnn.forward(t,n)]:[3,2];case 1:return[2,o.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof nj?function(e){return _j.tinyFaceDetector.locateFaces(e,n)}:n instanceof ej?function(e){return _j.ssdMobilenetv1.locateFaces(e,n)}:n instanceof GM?function(e){return _j.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return gu(e,void 0,void 0,(function(){var e;return yu(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return QM({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new Hj(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Dj(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new Pj(this.runAndExtendWithFaceDetections(),this.input)},t}(qj);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}mu(t,e),t.prototype.run=function(){return gu(this,void 0,void 0,(function(){var e,t;return yu(this,(function(n){switch(n.label){case 0:return[4,new Gj(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return gu(e,void 0,void 0,(function(){var e;return yu(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?QM({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new Vj(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Ij(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new jj(this.runAndExtendWithFaceDetection(),this.input)}}(qj);!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,o=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof DP)return e;if(e instanceof Float32Array)return new DP(o(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new DP(o(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,o=n.label;return new RP(o,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new RP("unknown",t.distance)}}();vu({},r,o);var Yj=n(6593),Kj=n.n(Yj),$j=n(7029),Xj=n.n($j);const Qj=e=>{let{friendProfile:t,isActive:n,room:r,lastSeen:o,friendProfilePic:i}=e;const[s,u]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[m,v]=(0,a.useState)(!1),[g,y]=(0,a.useState)(i),[b,x]=(0,a.useState)(!0),[w,C]=(0,a.useState)(!1),[k,S]=(0,a.useState)(),[E,_]=(0,a.useState)(!1),[N,T]=(0,a.useState)(""),[R,D]=(0,a.useState)(!1),[I,A]=(0,a.useState)(),[O,M]=(0,a.useState)(!1),[P,j]=(0,a.useState)("auto"),F=(0,a.useRef)(null),L=qe(),B=(0,a.useRef)(),W=(0,a.useRef)(),U=(0,a.useRef)(),z=(0,a.useRef)(),H=(0,a.useRef)();let V=fn((e=>e.setting)),q=fn((e=>e.profile)),G=q._id,Y=la(),K=($e(),Ye()),$=(0,a.useCallback)((()=>{x(!b)})),X=()=>{null===H||void 0===H||H.current.pause()};(0,a.useEffect)((()=>(Ui.on("call-accepted",(e=>{if(_(!0),X(),U.current&&!U.current.destroyed)try{U.current.signal(e)}catch(QB){console.error("Error signaling accepted call:",QB)}})),Ui.on("videoCallEnd",(e=>{let t=new MouseEvent("click",{bubbles:!0,cancelable:!1});z.current&&z.current.dispatchEvent(t)})),p(!!t._id),null===H||void 0===H||H.current.setAttribute("src","https://programmerikram.com/wp-content/uploads/2025/05/calling-beep.mp3"),()=>{Ui.off("call-accepted"),Ui.off("videoCallEnd")})),[]),(0,a.useEffect)((()=>{k&&I&&!U.current&&(e=>{if(k){const t=new(Kj())({initiator:!0,trickle:!1,stream:k});t.on("signal",(t=>{Ui.emit("call-user",{userToCall:e,signalData:t,from:N,name:q.fullName||"",isVideoCall:!0})})),t.on("stream",(e=>{W.current.srcObject=e})),U.current=t}})(I)}),[k,I]),(0,a.useEffect)((()=>{1==O&&navigator.mediaDevices.enumerateDevices().then((e=>{const t=e.filter((e=>"videoinput"===e.kind)),n=t.find((e=>e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("environment")));return navigator.mediaDevices.getUserMedia({video:{deviceId:w&&(null===n||void 0===n?void 0:n.deviceId)||t[0].deviceId},audio:b}).then((e=>{S(e),null!==B&&void 0!==B&&B.current&&(B.current.srcObject=e)}))}))}),[O]);let Q=(0,a.useCallback)((e=>{M(!0);let t=e.currentTarget.dataset.id;A(t),null===H||void 0===H||H.current.play()})),J=(0,a.useCallback)((()=>{X(),Ui.emit("leaveVideoCall",d),k&&k.getTracks().forEach((e=>e.stop())),B.current&&(B.current.srcObject=null),W.current&&(W.current.srcObject=null),S(!1),_(!1),M(!1),null!==U&&void 0!==U&&U.current&&(U.current.destroy(),U.current=null)}));const Z=()=>{setTimeout((()=>{setInterval((async()=>{if(F.current){const n=await(e=F.current,t=new nj,void 0===t&&(t=new ej),new Gj(e,t)).withFaceExpressions();if(n.length>0){const e=n[0].expressions,t=Object.keys(e).reduce(((t,n)=>e[t]>e[n]?t:n));r&&l!==t&&c(t)}}var e,t}),100)}),3e3)};(0,a.useEffect)((()=>{T(q._id)}),[q]);let ee=(0,a.useCallback)((e=>{Ui.emit("bump",t,q)}));(0,a.useEffect)((()=>{r&&!0===V.isShareEmotion&&(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices().then((e=>{const t=e.filter((e=>"videoinput"===e.kind)),n=t.find((e=>e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("environment")));return navigator.mediaDevices.getUserMedia({video:{deviceId:w&&(null===n||void 0===n?void 0:n.deviceId)||t[0].deviceId},audio:b}).then((e=>{F.current.srcObject=e}))})),(async()=>{await _j.tinyFaceDetector.loadFromUri("/models"),await _j.faceExpressionNet.loadFromUri("/models"),Z()})())}),[r,V]),(0,a.useEffect)((()=>{(()=>{var e;const t=null===(e=F.current)||void 0===e?void 0:e.srcObject;t&&(t.getTracks().forEach((e=>e.stop())),F.current.srcObject=null)})()}),[L]),(0,a.useEffect)((()=>{f(t._id),Ui.emit("last_emotion",{friendId:t._id,profileId:G}),p(!!t._id),y(null===t||void 0===t?void 0:t.profilePic)}),[t]),(0,a.useEffect)((()=>{gs(g)?Tn(g,v):y("")}),[g]),(0,a.useEffect)((()=>{l&&d&&Ui.emit("emotion_change",{profileId:G,emotion:l,friendId:d})}),[l,d]),(0,a.useEffect)((()=>(Ui.on("emotion_change",(e=>{u(e)})),Ui.on("last_emotion",(e=>{u(e.lastEmotion&&" L: ".concat(e.lastEmotion))})),()=>{Ui.off("emotion_change")})),[s]);let te=(0,a.useCallback)((()=>{C(!w)})),ne=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=e=>{ne.current&&!ne.current.contains(e.target)&&D(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);let re=(0,a.useCallback)((e=>{D(!R)})),oe=(0,a.useCallback)((async e=>{200==(await aa.post("friend/block",{friendId:d})).status&&alert("User Blocked")})),ae=(0,a.useCallback)((async e=>{200==(await aa.post("friend/unblock",{friendId:d})).status&&alert("User unblocked")})),ie=(0,a.useCallback)((async e=>{K("/".concat(d))}));return(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsxs)("div",{className:"chat-header-user ".concat("skleton-card"),children:[(0,Ot.jsx)("div",{className:"chat-header-profilePic",children:h?(0,Ot.jsx)(Rn,{profilePic:"".concat(g),hasStory:!1,profile:t._id,active:!!n}):(0,Ot.jsx)("div",{className:"skeleton-header",children:(0,Ot.jsx)("div",{className:"skeleton-avatar"})})}),1==h?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"chat-header-user-info",children:[(0,Ot.jsxs)("h4",{className:"chat-header-username",children:[" ","".concat(1==t?(null===t||void 0===t?void 0:t.fullName)||"":t.user&&t.user.firstName+" "+t.user.surname)]}),s&&(0,Ot.jsx)("span",{className:"chat-header-active-status text-capitalized",children:s})]})}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"chat-header-user-info",children:(0,Ot.jsxs)("div",{className:"skeleton-lines",children:[(0,Ot.jsx)("div",{className:"skeleton-line short"}),(0,Ot.jsx)("div",{className:"skeleton-line medium"})]})})})]}),(0,Ot.jsxs)("div",{className:"chat-header-action",children:[(0,Ot.jsxs)("div",{className:"chat-header-action-btn-container",children:[(0,Ot.jsx)("div",{onClick:ee,className:"bump-button action-button",title:"bump",children:(0,Ot.jsx)("i",{className:"fas fa-record-vinyl"})}),(0,Ot.jsx)("div",{className:"call-button action-button",children:(0,Ot.jsx)("i",{className:"fas fa-phone-alt"})}),(0,Ot.jsx)("div",{onClick:Q,"data-id":d,className:"video-call-button action-button",children:(0,Ot.jsx)("i",{className:"fas fa-video"})}),(0,Ot.jsx)("div",{onClick:re.bind(void 0),className:"info-button action-button",children:(0,Ot.jsx)("i",{className:"fas fa-info-circle"})}),R&&(0,Ot.jsx)("div",{className:"chat-option-menu",ref:ne,children:(0,Ot.jsxs)("ul",{children:[(0,Ot.jsx)("li",{onClick:ie.bind(void 0),children:"View Profile"}),null!==q&&void 0!==q&&q.blockedUsers.includes(d)?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("li",{onClick:ae.bind(void 0),children:["Unblock ",t.user.firstName]})}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("li",{onClick:oe.bind(void 0),children:["Block ",t.user.firstName]})}),(0,Ot.jsxs)("li",{children:["Report ",t.user.firstName]})]})})]}),(0,Ot.jsx)(Nn,{title:"Video Call",style:{width:Y?"95%":"600px",top:"50%",borderRadius:"10px",height:P},isOpen:O||E,onRequestClose:e=>{},id:"videoCallModal",children:(0,Ot.jsxs)("div",{className:"".concat(E?"call-accepted":""),style:{padding:0},children:[(0,Ot.jsxs)("h2",{className:"text-center vc-modal-heading",children:["Video Call - ",t&&t.fullName]}),(0,Ot.jsx)("p",{className:"fs-3 text-center",children:!E&&(0,Ot.jsxs)(Ot.Fragment,{children:["Calling ",t&&t.fullName]})}),(0,Ot.jsxs)("div",{className:"video-call-container ".concat(Y?"mobile":""),children:[(0,Ot.jsx)("video",{playsInline:!0,ref:W,className:"friends-video",autoPlay:!0,style:{width:"100%",display:E?"block":"none"}}),(0,Ot.jsx)(Xj(),{playsInline:!0,muted:!0,ref:B,autoPlay:!0,className:"my-video",style:{width:"150px"}})]}),(0,Ot.jsxs)("div",{className:"call-buttons",children:[(0,Ot.jsx)("button",{onClick:J.bind(void 0),ref:z,className:"call-button-ends call-button bg-danger",children:(0,Ot.jsx)("i",{className:"fa fa-phone"})}),E&&(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsx)("button",{onClick:$.bind(void 0),className:"call-button-microphone call-button",children:b?(0,Ot.jsx)("i",{className:"fa fa-microphone"}):(0,Ot.jsx)("i",{class:"fa fa-microphone-slash"})}),(0,Ot.jsx)("button",{onClick:te.bind(void 0),className:"call-button-switch call-button",children:(0,Ot.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24",children:[(0,Ot.jsx)("path",{d:"M11 7H5a2 2 0 0 0-2 2v4"}),(0,Ot.jsx)("path",{d:"M13 17h6a2 2 0 0 0 2-2v-4"}),(0,Ot.jsx)("polyline",{points:"16 3 21 3 21 8"}),(0,Ot.jsx)("polyline",{points:"8 21 3 21 3 16"}),(0,Ot.jsx)("path",{d:"M21 3l-6.5 6.5"}),(0,Ot.jsx)("path",{d:"M3 21l6.5-6.5"})]})})]})]})]})})]}),!0===V.isShareEmotion&&(0,Ot.jsx)("video",{style:{display:"none"},ref:F,autoPlay:!0,muted:!0,width:"600",height:"400"}),(0,Ot.jsx)("audio",{ref:H,src:"",loop:!0})]})},Jj="ADD_MESSAGE",Zj="ADD_MESSAGES",eF="NEW_MESSAGE",tF="SEND_MESSAGE",nF=e=>({type:tF,payload:e}),rF=e=>{let{chatFooter:t,room:n,isReplying:r,friendId:o,setIsTyping:i,chatNewAttachment:s,messageActionButtonContainer:u,setIsReplying:l,userId:c,messageInput:d,replyData:f,setReplyData:h,isPreview:p,setIsPreview:m,msgListRef:v}=e;const g=wn(),[y,b]=(0,a.useState)(!0),[x,w]=(0,a.useState)(),[C,k]=(0,a.useState)(!1),S=(0,a.useRef)(null),E=fn((e=>e.setting)),_=e=>{if(null!=v.current){let e=setInterval((()=>{let e=document.querySelector("#chatMessageList .chat-message-container:last-child");null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500);v.current.addEventListener("scroll",(t=>{let n=t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight;console.log("scrl",t.target.scrollHeight,t.target.scrollTop,n),n<=5&&clearInterval(e)}))}},N=(0,a.useCallback)((e=>{if(e.preventDefault(),e.target.value="",!(_n()(e.target).hasClass("button-disabled")||!1)){if(n){if(r){let e={room:n,senderId:c,receiverId:o,message:x,attachment:C,parent:f.messageId};Ui.emit("sendMessage",e),i(!1),g(nF(e)),_()}else{let e={room:n,senderId:c,receiverId:o,message:x,attachment:C,parent:!1};Ui.emit("sendMessage",e),i(!1),g(nF(e)),_()}w(""),l(!1),m(!1),k(""),h({messageId:null,body:null})}m(!1)}}));const T=new KeyboardEvent("keydown",{key:"Enter",keyCode:13,code:"Enter",which:13,bubbles:!0});return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{ref:t,className:"chat-footer",children:[p&&(0,Ot.jsxs)("div",{className:"new-message-preview-container",children:[r&&(0,Ot.jsx)("div",{className:"reply-message-preview-form",children:(0,Ot.jsx)("p",{className:"text-small",children:f.body})}),C&&(0,Ot.jsx)("div",{className:"attachment-preview-container",children:(0,Ot.jsx)("img",{className:"attachment-preview",src:C,alt:"Message Attachment"})}),(0,Ot.jsx)("span",{onClick:e=>{m(!1),l(!1)},className:"preview-close-button bg-danger",children:(0,Ot.jsx)("i",{className:"fa fa-times"})})]}),(0,Ot.jsxs)("div",{className:"new-message-container",children:[(0,Ot.jsx)("div",{ref:s,className:"chat-new-attachment",children:(0,Ot.jsxs)("div",{className:"chat-atachment-button-container",children:[(0,Ot.jsx)("div",{className:"chat-attachment-button",children:(0,Ot.jsx)("i",{className:"fas fa-plus-circle"})}),(0,Ot.jsxs)("div",{className:"chat-attachment-button",onClick:(async e=>{let t=new MouseEvent("click",{bubbles:!0,cancelable:!1}),n=document.createElement("input");n.type="file",n.addEventListener("change",(async e=>{let t=e.target.files[0];if(t){let e=new FormData;e.append("image",t),k("https://res.cloudinary.com/dz88yjerw/image/upload/v1743092084/i5lcu63atrbkpcy6oqam.gif"),m(!0);let n=await aa.post("/upload",e,{headers:{"Content-Type":"multipart/form-data"}});if(200===n.status){let e=n.data.secure_url;e&&k(e)}}})),n&&n.dispatchEvent(t)}).bind(void 0),children:[(0,Ot.jsx)("i",{className:"fas fa-images"}),(0,Ot.jsx)("input",{type:"file",style:{display:"none"},ref:S,onChange:(async e=>{}).bind(void 0)})]}),(0,Ot.jsx)("div",{className:"chat-attachment-button",children:(0,Ot.jsx)("i",{className:"fas fa-microphone"})})]})}),(0,Ot.jsxs)("div",{className:"new-message-form",children:[(0,Ot.jsx)("div",{className:"new-message-input-container",children:(0,Ot.jsx)("input",{ref:d,style:{width:y+"px"},onChange:e=>{w(e.target.value),E.showIsTyping&&Ui.emit("update_type",{room:n,type:e.target.value})},value:x,onKeyDown:e=>{"Enter"===e.key&&(N(e),w(""))},placeholder:"Send Message....",id:"newMessageInput",className:"new-message-input",onFocus:e=>{Ui.emit("typing",{receiverId:c,room:n,isTyping:!0,type:x})},onBlur:()=>{Ui.emit("typing",{receiverId:c,room:n,isTyping:!1,type:x})}})}),(0,Ot.jsx)("div",{ref:u,className:"message-action-button-container",children:x.length>0||C?(0,Ot.jsx)("div",{onClick:N,className:"message-action-button send-message ".concat("https://res.cloudinary.com/dz88yjerw/image/upload/v1743092084/i5lcu63atrbkpcy6oqam.gif"==C&&"button-disabled"),children:(0,Ot.jsx)("i",{className:"fas fa-paper-plane"})}):(0,Ot.jsx)("div",{onClick:e=>{w("\ud83d\udc4d"),setTimeout((()=>{d.current.dispatchEvent(T)}),200)},className:"message-action-button send-like",children:(0,Ot.jsx)("i",{className:"fas fa-thumbs-up"})})})]})]})]})})},oF=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsxs)("div",{className:"chat-message-container message-receive skeleton-card border-0 p-1 my-2 w-75 sm-skleton px-3","data-toggle":"tooltip",children:[(0,Ot.jsx)("div",{className:"chat-message-profilePic",children:(0,Ot.jsx)("div",{className:"skeleton-avatar"})}),(0,Ot.jsx)("div",{className:"skeleton-lines",children:(0,Ot.jsx)("div",{className:"skeleton-line large mb-0"})})]},t),(0,Ot.jsxs)("div",{className:"chat-message-container message-sent skeleton-card border-0 p-1 my-2 w-75 sm-skleton px-3","data-toggle":"tooltip",children:[(0,Ot.jsx)("div",{className:"skeleton-lines",children:(0,Ot.jsx)("div",{className:"skeleton-line large mb-0 ml-auto"})}),(0,Ot.jsx)("div",{className:"chat-message-profilePic",children:(0,Ot.jsx)("div",{className:"skeleton-avatar"})})]},t)]})))},aF=e=>{var t,n,r,o,i;let{socket:s}=e,u=wn(),l=fn((e=>e.profile)),c=fn((e=>e.option.headerHeight)),f=fn((e=>e.option.bodyHeight)),h=(fn((e=>e.setting)),l._id),[p,m]=(0,a.useState)({}),[v,g]=(0,a.useState)(!0);const[y,b]=(0,a.useState)(!1);let x=la();const[w,C]=(0,a.useState)(""),[k,S]=(0,a.useState)(!1),[E,_]=(0,a.useState)(!1),[N,T]=(0,a.useState)(!1),[R,D]=(0,a.useState)([]),[I,A]=(0,a.useState)(!1),[O,M]=(0,a.useState)(!1),[P,j]=(0,a.useState)(""),[F,L]=(0,a.useState)(!0),[B,W]=(0,a.useState)(!1),[U,z]=(0,a.useState)(0),[H,V]=(0,a.useState)({messageId:null,body:null}),q=(0,a.useRef)(null),G=(0,a.useRef)(null),Y=(0,a.useRef)(null),K=(0,a.useRef)(null),$=(0,a.useRef)(null),X=(0,a.useRef)(null),Q=null===(t=Y.current)||void 0===t?void 0:t.offsetHeight,J=null===(n=K.current)||void 0===n?void 0:n.offsetHeight,Z=(null===(r=K.current)||void 0===r?void 0:r.offsetWidth)-(null===(o=$.current)||void 0===o?void 0:o.offsetWidth)-(null===(i=X.current)||void 0===i?void 0:i.offsetWidth);fn((e=>e.option.isLoading));const ee=e=>{if(null!=q.current){let e=setInterval((()=>{let e=document.querySelector("#chatMessageList .chat-message-container:last-child");null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500);q.current.addEventListener("scroll",(t=>{let n=t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight;console.log("scrl",t.target.scrollHeight,t.target.scrollTop,n),n<=5&&clearInterval(e)}))}};null!==G.current&&(G.current.style.width=Z+"px");const te=f-c;let ne=$e(),re=ne.profile;const[oe,ae]=(0,a.useState)(te-Q-J),[ie,se]=(0,a.useState)({height:"".concat(x?f-c-J-Q:oe,"px"),maxHeight:"".concat(x?oe+c:oe,"px"),overflowY:"scroll"});(0,a.useEffect)((()=>{ae(f-c-Q-J),se({height:"".concat(x?f-c-J-Q:oe,"px"),maxHeight:"".concat(x?oe+c:oe,"px"),overflowY:"scroll"})}),[E,B]),(0,a.useEffect)((()=>{const e=()=>{const e=q.current,t=e.scrollTop,n=e.scrollHeight-e.clientHeight;z(t/n*100)},t=q.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}}),[]),(0,a.useEffect)((()=>{F&&U<30&&(s.emit("loadMessages",{myId:h,friendId:re,skip:R.length}),M(!0),L(!1))}),[U]),(0,a.useEffect)((()=>(s.emit("is_active",{profileId:re,myId:h}),s.on("is_active",((e,t)=>{S(e);const n=du()(t).format("hh:mm A");b(n)})),s.on("messageReacted",(e=>{let t="#chatMessageList .chat-message-container .message-id-"+e;_n()(t).addClass("message-reacted")})),s.on("messageReactRemoved",(e=>{if(e){let t="#chatMessageList .chat-message-container .message-id-"+e;_n()(t).removeClass("message-reacted")}})),()=>{s.off("messageReacted"),s.off("messageReactRemoved"),s.off("is_active")})),[p,ne]),(0,a.useEffect)((()=>{W(!B)}),[oe]),(0,a.useEffect)((()=>{aa.get("/profile",{params:{profileId:re}}).then((e=>{m(e.data),u(ts(!1))})).catch((e=>console.log(e)))}),[ne,re]),(0,a.useEffect)((()=>{if(p&&g(!!p.blockedUsers&&p.blockedUsers.includes(l._id)),ee(),!re||!h)return;const e=[h,re].sort().join("_");return s.emit("startChat",{user1:h,user2:re}),C(e),s.on("roomJoined",(e=>{let{room:t}=e;console.log("Joined room: ".concat(t)),localStorage.setItem("roomId",t)})),s.on("loadMessages",(e=>{let{loadedMessages:t,hasNewMessage:n}=e;L(n),M(!1),D((e=>[...t,...e]))})),s.on("previousMessages",(e=>{D(e),L(!0)})),s.on("newMessage",(e=>{e.receiverId==h&&e.senderId==re&&(D((t=>[...t,e])),ee()),e.senderId==h&&e.receiverId==re&&(D((t=>[...t,e])),ee())})),s.on("deleteMessage",(e=>{_n()("#chatBox .chat-body .chat-message-list").has(".chat-message-container.message-id-".concat(e))&&_n()("#chatBox .chat-body .chat-message-list .chat-message-container.message-id-".concat(e)).hide()})),s.on("typing",(e=>{let{receiverId:t,isTyping:n,type:r}=e;t==re&&(1==n?(A(!0),j(r),ee()):A(!1))})),s.on("update_type",(e=>{let{type:t}=e;j(t)})),()=>{s.off("newMessage"),s.off("previousMessages"),s.off("deleteMessage"),s.off("update_type"),s.off("typing"),s.off("loadMessages")}}),[ne,p]),(0,a.useEffect)((()=>(R.length>0&&setTimeout((()=>{let e=R[R.length-1];e.senderId!==h&&s.emit("seenMessage",e)}),2e3),s.on("seenMessage",(e=>{_n()("#chatMessageList .message-sent.chat-message-container .chat-message-seen-status").css("visibility","hidden"),_n()("#chatMessageList .message-sent.chat-message-container.message-id-"+e._id+":last-child .chat-message-seen-status").css("visibility","visible")})),()=>{s.off("seenMessage")})),[ne,R]);let ue={chatFooter:K,room:w,friendId:re,setIsTyping:A,setIsReplying:_,isReplying:E,chatNewAttachment:$,messageActionButtonContainer:X,userId:h,messageInput:G,replyData:H,isPreview:N,setIsPreview:T,setReplyData:V};return(0,Ot.jsx)("div",{children:(0,Ot.jsxs)("div",{id:"chatBox",style:{minHeight:"".concat(te,"px")},children:[(0,Ot.jsx)("div",{ref:Y,className:"chat-header",children:(0,Ot.jsx)(Qj,{friendProfile:p,friendProfilePic:p.profilePic,isActive:k,lastSeen:y,room:w})}),(0,Ot.jsx)("div",{className:"chat-body",children:(0,Ot.jsxs)("div",{className:"chat-message-list",style:ie,id:"chatMessageList",ref:q,children:[R.length>0?R.map(((e,t)=>(0,Ot.jsx)(hu,{msg:e,friendProfile:p,messages:R,isActive:k,setIsReplying:_,setReplyData:V,isPreview:N,setIsPreview:T,msgListRef:q,isMsgLoading:O},t))):(0,Ot.jsx)(oF,{count:10}),I&&(0,Ot.jsxs)("div",{className:"chat-message-container message-receive message-typing",children:[(0,Ot.jsx)("div",{className:"chat-message-profilePic",children:(0,Ot.jsx)(Rn,{profilePic:"".concat(p.profilePic),profile:p._id,active:!0})}),(0,Ot.jsx)("div",{className:"chat-message",children:(0,Ot.jsx)("p",{className:"message-container mb-0",children:P||"..."})})]})]})}),v?(0,Ot.jsx)("div",{ref:K,className:"chat-footer",children:(0,Ot.jsxs)("p",{className:"text-center text-danger fs-4 mb-0",children:[p.fullName," Blocked You"]})}):(0,Ot.jsx)(rF,d({},ue))]})})},iF=e=>{let{profile:t}=$e();return(0,a.useEffect)((()=>{}),[]),(0,Ot.jsx)(a.Fragment,{children:t?(0,Ot.jsx)(aF,{socket:Ui,cameraVideoRef:e.cameraVideoRef,children:" "}):(0,Ot.jsx)("h2",{className:"text-center mt-3",children:"Select an user to start conversation"})})},sF=()=>(0,Ot.jsx)("div",{className:"text-center pt-2 right-sidebar-container",children:"Message Options"}),uF=e=>{var t=(e=>{const[t,n]=(0,a.useState)(window.matchMedia(e).matches);return(0,a.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)");return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{id:"message",children:(0,Ot.jsx)(Vt,{fluid:!0,children:(0,Ot.jsxs)(Yt,{style:{minHeight:"400px"},children:[!t&&(0,Ot.jsx)(Qt,{md:"3",children:(0,Ot.jsx)(Vi,{})}),(0,Ot.jsx)(Qt,{md:"6",children:(0,Ot.jsx)(iF,{cameraVideoRef:e.cameraVideoRef})}),!t&&(0,Ot.jsx)(Qt,{md:"3",children:(0,Ot.jsx)(sF,{})})]})})})})},lF=e=>{let[t,n]=(0,a.useState)(e.stories);(0,a.useEffect)((()=>{n(e.stories)}));let{storyId:r}=$e(),o=e=>{const t=du()(e);du()();return t.format("dddd, hh:mm A")};return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"story-list-container",children:t.map(((e,t)=>{var n;return(0,Ot.jsx)(_t,{to:"/story/"+e._id,className:"text-decoration-none story-link",children:(0,Ot.jsx)("div",{className:"story-list-item mb-2 ".concat(r==e._id?"active":""),children:(0,Ot.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[(0,Ot.jsx)("div",{className:"story-pp-container text-end",children:(0,Ot.jsx)(Rn,{profilePic:null===e||void 0===e||null===(n=e.author)||void 0===n?void 0:n.profilePic,hasStory:!0,profile:null===e||void 0===e?void 0:e.author._id})}),(0,Ot.jsxs)("div",{className:"story-info-container px-2",children:[(0,Ot.jsxs)("h2",{className:"author-name fs-5 mb-0",children:[e.author.user.firstName+" "+e.author.user.surname," "]}),(0,Ot.jsx)("span",{className:"story-time text-mute text-small",children:o(e.createdAt)})]})]})})},t)}))})})};const cF=e=>{let{children:t}=e,{storyId:n}=$e(),[r,o]=(0,a.useState)([]),i=(0,a.useRef)(),[s,u]=(0,a.useState)(window.matchMedia("(max-width: 768px)").matches);const l=Ye();return(0,a.useEffect)((()=>{window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{u(e.matches)})),aa.get("/story/").then((e=>{200===e.status&&o(e.data)}))}),[n]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)(Vt,{fluid:!0,className:"story-container py-3",children:(0,Ot.jsxs)(Yt,{children:[(0,Ot.jsx)(Qt,{md:"3",children:!s&&(0,Ot.jsx)(lF,{stories:r})}),(0,Ot.jsx)(Qt,{md:"6",children:(0,Ot.jsx)("div",{ref:i,className:"story-content-container",children:n?(0,Ot.jsxs)(Ot.Fragment,{children:[t,(0,Ot.jsx)("div",{className:"nf-story-arrow-left",onClick:function(e){var t;const o=r.findIndex((e=>(null===e||void 0===e?void 0:e._id)===n)),a=(null===(t=r[o-1])||void 0===t?void 0:t._id)||r[o]._id;l("/story/"+a),i.current.scrollBy({left:300,behavior:"smooth"})}.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-chevron-left"})}),(0,Ot.jsx)("div",{className:"nf-story-arrow-right",onClick:function(e){var t;const o=r.findIndex((e=>(null===e||void 0===e?void 0:e._id)===n)),a=(null===(t=r[o+1])||void 0===t?void 0:t._id)||r[o]._id;l("/story/"+a)}.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]}):(0,Ot.jsx)("p",{className:"text-center fs-4",children:"Select a story owner from left"})})}),(0,Ot.jsx)(Qt,{md:"3",children:(0,Ot.jsx)(ct,{})})]})})})},dF=e=>{let{storyId:t}=$e(),[n,r]=(0,a.useState)(!1),[o,i]=(0,a.useState)(""),[s,u]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),d=fn((e=>e.profile._id)),[f,h]=(0,a.useState)(!1),p=Ye();(0,a.useEffect)((()=>{u(""),aa.get("/story/single",{params:{storyId:t}}).then((e=>{200==e.status&&(r(e.data),h(e.data.author._id==d),i(e.data.bgColor))})).catch((e=>{console.log(e)}))}),[t]),(0,a.useEffect)((()=>{n&&n.reacts.map((e=>{e.profile===d&&u(e.type.toLowerCase())})),h((null===n||void 0===n?void 0:n.author)&&n.author._id==d)}),[n]);let m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"story";return 200===(await aa.post("/react/removeReact",{id:e,postType:t})).status&&(u(!1),!0)},v=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"story";return 200===(await aa.post("/react/addReact",{id:e,reactType:t,postType:n})).status&&(u(t),!0)};return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(cF,{children:null==n?(0,Ot.jsx)("p",{}):(0,Ot.jsxs)("div",{className:"single-story-container",children:[(0,Ot.jsxs)("div",{className:"single-story",style:{background:o},children:[(0,Ot.jsxs)("div",{className:"story-top",children:[(0,Ot.jsxs)("div",{className:"story-author-details",children:[(0,Ot.jsx)("div",{className:"author-pp-container",children:n.author&&(0,Ot.jsx)(Rn,{profilePic:n.author.profilePic,profile:n.author._id,hasStory:!1})}),(0,Ot.jsx)("div",{className:"author-name",children:(0,Ot.jsx)("h3",{children:n.author&&n.author.fullName})})]}),(0,Ot.jsxs)("div",{className:"story-options",children:[(0,Ot.jsx)("span",{className:"option-button reacts",children:(0,Ot.jsx)(_t,{to:"reacts",children:(0,Ot.jsx)("i",{class:"fa fa-heart"})})}),(0,Ot.jsx)("span",{className:"option-button comments",children:(0,Ot.jsx)(_t,{to:"comments",children:(0,Ot.jsx)("i",{class:"fa fa-comments"})})}),f&&(0,Ot.jsx)("span",{className:"option-button delete text-danger",onClick:(async e=>{(0,ms.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{_n()(e.currentTarget).parents(".single-story-container").remove(),200==(await aa.post("/story/delete",{storyId:t})).status&&p("/story")}},{label:"No",onClick:()=>{}}]})}).bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-trash"})})]})]}),(0,Ot.jsx)("div",{className:"single-story-image-container",style:{background:"url(".concat(n.image,")")}})]}),(0,Ot.jsxs)("div",{className:"single-story-meta-container",children:[(0,Ot.jsxs)("div",{className:"single-story-reacts-buttons",children:[(0,Ot.jsx)("div",{className:"single-story-react-button ".concat("like"==s?"reacted":""),onClick:(async e=>{let n=e.currentTarget;n.classList.contains("reacted")?m(t)&&n.classList.remove("reacted"):v(t,"like","story")&&n.classList.add("reacted")}).bind(void 0),children:(0,Ot.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",alt:"Like"})}),(0,Ot.jsx)("div",{className:"single-story-react-button ".concat("love"==s?"reacted":""),onClick:(async e=>{let n=e.currentTarget;n.classList.contains("reacted")?m(t)&&n.classList.remove("reacted"):v(t,"love","story")&&n.classList.add("reacted")}).bind(void 0),children:(0,Ot.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",alt:"Love"})}),(0,Ot.jsx)("div",{className:"single-story-react-button ".concat("haha"==s?"reacted":""),onClick:(async e=>{let n=e.currentTarget;n.classList.contains("reacted")?m(t)&&n.classList.remove("reacted"):v(t,"haha","story")&&n.classList.add("reacted")}).bind(void 0),children:(0,Ot.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg",alt:"Haha"})})]}),(0,Ot.jsx)("div",{className:"single-story-comment-container",children:(0,Ot.jsx)("input",{type:"text",className:"single-story-comment-input",onChange:(async e=>{let t=e.target.value;c(t)}).bind(void 0),placeholder:"Post a comment to this story",value:l,onKeyUp:(async e=>{if(13===e.keyCode){let e=await aa.post("/comment/story/addComment",{body:l,storyId:t});200==e.status&&console.log(e),c("")}}).bind(void 0)})})]}),(0,Ot.jsx)(ct,{})]})})})};const fF=()=>(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)(cF,{})}),hF="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",pF=e=>{let{reactor:t}=e,[n,r]=(0,a.useState)(!1),[o,i]=(0,a.useState)("");return(0,a.useEffect)((()=>{(async()=>{let e=await aa.get("profile",{params:{profileId:t.profile}});if(200==e.status)switch(r(e.data),t.type){case"like":default:i(hF);break;case"love":i("https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg");break;case"haha":i("https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg")}})()}),[]),(0,Ot.jsx)("div",{children:n&&(0,Ot.jsxs)("li",{className:"sp-reacts-item",children:[(0,Ot.jsx)("div",{className:"reactor-pp",children:(0,Ot.jsx)(Rn,{profilePic:n.profilePic,profile:n._id})}),(0,Ot.jsx)("div",{className:"react-details",children:(0,Ot.jsx)(_t,{to:"/".concat(n._id),children:(0,Ot.jsx)("span",{className:"reactor-name",children:n.fullName})})}),(0,Ot.jsx)("span",{className:"reactor-react",children:(0,Ot.jsx)("img",{src:o,alt:"love"})})]})})},mF=e=>{let{storyId:t}=$e(),[n,r]=(0,a.useState)(!1),[o,i]=(0,a.useState)(""),[s,u]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),d=fn((e=>e.profile._id)),[f,h]=(0,a.useState)(!1),p=Ye(),[m,v]=(0,a.useState)([]),g=(0,a.useRef)(),[y,b]=(0,a.useState)(window.matchMedia("(max-width: 768px)").matches);(0,a.useEffect)((()=>{u(""),aa.get("/story/single",{params:{storyId:t}}).then((e=>{200==e.status&&(r(e.data),h(e.data.author._id==d),i(e.data.bgColor))})).catch((e=>{console.log(e)}))}),[t]),(0,a.useEffect)((()=>{window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{b(e.matches)})),aa.get("/story/").then((e=>{200===e.status&&v(e.data)}))}),[t]),(0,a.useEffect)((()=>{n&&n.reacts.map((e=>{e.profile===d&&u(e.type.toLowerCase())})),h((null===n||void 0===n?void 0:n.author)&&n.author._id==d)}),[n]);return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(Vt,{fluid:!0,className:"story-container py-3",children:(0,Ot.jsxs)(Yt,{children:[(0,Ot.jsx)(Qt,{md:"3",children:!y&&(0,Ot.jsx)(lF,{stories:m})}),(0,Ot.jsx)(Qt,{md:"6",children:(0,Ot.jsx)("div",{ref:g,className:"story-content-container",children:t?(0,Ot.jsxs)(Ot.Fragment,{children:["(",null==n?(0,Ot.jsx)("p",{}):(0,Ot.jsxs)("div",{className:"single-story-container",children:[(0,Ot.jsxs)("div",{className:"single-story",style:{background:o},children:[(0,Ot.jsxs)("div",{className:"story-top",children:[(0,Ot.jsxs)("div",{className:"story-author-details",children:[(0,Ot.jsx)("div",{className:"author-pp-container",children:n.author&&(0,Ot.jsx)(Rn,{profilePic:n.author.profilePic,profile:n.author._id,hasStory:!1})}),(0,Ot.jsx)("div",{className:"author-name",children:(0,Ot.jsx)("h3",{children:n.author&&n.author.fullName})})]}),(0,Ot.jsxs)("div",{className:"story-options",children:[(0,Ot.jsx)("span",{className:"option-button reacts",children:(0,Ot.jsx)(_t,{to:"reacts",children:(0,Ot.jsx)("i",{class:"fa fa-heart"})})}),(0,Ot.jsx)("span",{className:"option-button comments",children:(0,Ot.jsx)(_t,{to:"comments",children:(0,Ot.jsx)("i",{class:"fa fa-comments"})})}),f&&(0,Ot.jsx)("span",{className:"option-button delete text-danger",onClick:(async e=>{(0,ms.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{_n()(e.currentTarget).parents(".single-story-container").remove(),200==(await aa.post("/story/delete",{storyId:t})).status&&p("/story")}},{label:"No",onClick:()=>{}}]})}).bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-trash"})})]})]}),(0,Ot.jsx)("div",{className:"single-story-image-container",style:{background:"url(".concat(n.image,")")}})]}),(0,Ot.jsx)("div",{className:"single-story-meta-container"}),(0,Ot.jsx)(ct,{})]}),")",(0,Ot.jsx)("div",{className:"nf-story-arrow-left",onClick:function(e){var n;const r=m.findIndex((e=>(null===e||void 0===e?void 0:e._id)===t)),o=(null===(n=m[r-1])||void 0===n?void 0:n._id)||m[r]._id;p("/story/"+o),g.current.scrollBy({left:300,behavior:"smooth"})}.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-chevron-left"})}),(0,Ot.jsx)("div",{className:"nf-story-arrow-right",onClick:function(e){var n;const r=m.findIndex((e=>(null===e||void 0===e?void 0:e._id)===t)),o=(null===(n=m[r+1])||void 0===n?void 0:n._id)||m[r]._id;p("/story/"+o)}.bind(void 0),children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]}):(0,Ot.jsx)("p",{className:"text-center fs-4",children:"Select a story owner from left"})})}),(0,Ot.jsx)(Qt,{md:"3",children:(0,Ot.jsx)("div",{className:"single-story-meta-container",children:(0,Ot.jsx)("ul",{className:"story-reacts-list",children:n.reacts&&n.reacts.map(((e,t)=>(0,Ot.jsx)(pF,{reactor:e},t)))})})})]})})})},vF=()=>(0,Ot.jsx)("div",{children:(0,Ot.jsx)("h1",{children:"Sc"})});const gF=e=>{var t;fn((e=>e.setting)),fn((e=>e.profile));let[n,r]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),[s,u]=(0,a.useState)([]),[l,c]=(0,a.useState)([]),[d,f]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),m=$e(),v=m.profile;return(0,a.useEffect)((()=>{null!==o&&void 0!==o&&o.presentAddress&&f(o.presentAddress),null!==o&&void 0!==o&&o.permanentAddress&&p(o.permanentAddress),null!==o&&void 0!==o&&o.schools&&c(o.schools),null!==o&&void 0!==o&&o.workPlaces&&u(o.workPlaces)}),[o]),(0,a.useEffect)((()=>{aa.get("/profile",{params:{profileId:v}}).then((e=>{i(e.data)})).catch((e=>console.log(e)))}),[e]),(0,a.useEffect)((()=>{aa.get("/profile",{params:{profileId:v}}).then((e=>{i(e.data)})).catch((e=>console.log(e)))}),[]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"profile-details-list",className:"details-list",children:[s.map(((e,t)=>(0,Ot.jsxs)("div",{className:"details-list-item",children:[(0,Ot.jsx)("i",{className:"fas fa-briefcase"}),(0,Ot.jsxs)("span",{children:[null===e||void 0===e?void 0:e.designation," at ",(0,Ot.jsx)("b",{children:null===e||void 0===e?void 0:e.name})]})]},t))),l.map(((e,t)=>(0,Ot.jsxs)("div",{className:"details-list-item",children:[(0,Ot.jsx)("i",{className:"fas fa-graduation-cap"}),(0,Ot.jsxs)("span",{children:["Studied at ",(0,Ot.jsxs)("b",{children:[null===e||void 0===e?void 0:e.name," (",null===e||void 0===e?void 0:e.degree,")"]})]})]}))),d?(0,Ot.jsxs)("div",{className:"details-list-item",children:[(0,Ot.jsx)("i",{className:"fas fa-home"}),(0,Ot.jsxs)("span",{children:["Lives in ",(0,Ot.jsx)("b",{children:d})]})]}):(0,Ot.jsx)(Ot.Fragment,{}),h?(0,Ot.jsxs)("div",{className:"details-list-item",children:[(0,Ot.jsx)("i",{className:"fas fa-globe"}),(0,Ot.jsxs)("span",{children:["From ",(0,Ot.jsx)("b",{children:h})]})]}):(0,Ot.jsx)(Ot.Fragment,{}),(0,Ot.jsxs)("div",{className:"details-list-item",children:[(0,Ot.jsx)("i",{className:"fas fa-clock"}),(0,Ot.jsxs)("span",{children:["Joined  ",(0,Ot.jsx)("b",{children:(0,Ot.jsx)(ha(),{format:"MMMM YYYY",children:null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.createdAt})})]})]})]})})};const yF=()=>(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("div",{id:"profile-about-content",children:(0,Ot.jsx)("div",{className:"tab-content",children:(0,Ot.jsx)(gF,{})})})});const bF=()=>{let{profile:e}=$e(),t=fn((e=>e.profile))||{},n=t._id===e,[r,o]=(0,a.useState)(!1);const[i,s]=(0,a.useState)([]),[u,l]=(0,a.useState)(t.bio);let c=Ye(),d=(0,a.useRef)(null);(0,a.useEffect)((()=>{aa.get("/post/myPosts",{params:{profile:e}}).then((e=>{200===e.status&&s(e.data)})),aa.get("/profile",{params:{profileId:e}}).then((e=>{o(e.data)})).catch((e=>console.log(e)))}),[e]),(0,a.useEffect)((()=>{aa.get("/profile",{params:{profileId:e}}).then((e=>{o(e.data),l(e.data.bio)})).catch((e=>console.log(e)))}),[]);let f=(0,a.useCallback)((e=>{c("/settings/")}));return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"profile-post-content",children:[(0,Ot.jsxs)("div",{className:"intro",children:[(0,Ot.jsx)("h4",{className:"section-title",children:"Intro"}),(0,Ot.jsxs)("div",{className:"profile-bio",children:[(0,Ot.jsx)("p",{className:"bio-text",children:u}),(0,Ot.jsx)("textarea",{onChange:e=>{l(e.target.value)},value:u,className:"bio-text-textarea"}),n&&(0,Ot.jsx)("div",{onClick:async e=>{try{let t=e.currentTarget;if(_n()(t).hasClass("edit-button"))_n()(t).siblings(".bio-text").hide(),_n()(t).siblings(".bio-text-textarea").show(),_n()(t).siblings(".bio-text-textarea").val(u),_n()(t).removeClass("edit-button"),_n()(t).addClass("save-button"),_n()(t).text("Save Bio");else{await aa.post("/profile/update/bio",{bio:u});_n()(t).text("Edit Bio"),_n()(t).siblings(".bio-text").show(),_n()(t).removeClass("save-button"),_n()(t).siblings(".bio-text-textarea").hide(),_n()(t).addClass("edit-button")}}catch(e){console.log(e)}},className:"edit-button",children:" Edit bio"})]}),(0,Ot.jsxs)("div",{className:"details",children:[(0,Ot.jsx)(gF,{}),n&&(0,Ot.jsx)("div",{onClick:f,className:"edit-button",children:" Edit Details"})]})]}),(0,Ot.jsxs)("div",{ref:d,className:"posts-container",children:[n&&(0,Ot.jsx)(ia,{setNewsFeed:s}),i.length>0?i.map(((e,n)=>(0,Ot.jsx)(ws,{myProfile:t,postContainer:d,data:e},n))):(0,Ot.jsx)(ks,{count:3})]})]})})},xF=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsx)("div",{className:"skeleton-card no-border",children:(0,Ot.jsx)("div",{className:"skeleton-main",style:{minHeight:"227px",height:"227px",marginBottom:"0px"},children:" "})},t)))},wF=e=>{let t=e.friend,n=fn((e=>e.profile)),[r,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)(t.profilePic||"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png"),u=$e(),[l,c]=(0,a.useState)(!1);(0,a.useEffect)((()=>{n.friends&&n.friends.filter((e=>{e._id===t._id&&c(!0)})),Tn(t.profilePic,o)}),[u]),(0,a.useEffect)((()=>{r&&s(t.profilePic)}),[r]);let d=t.fullName?t.fullName:t.user&&t.user.firstName+" "+t.user.surname;return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"friend-item",children:[(0,Ot.jsx)("div",{className:"friend-info",children:(0,Ot.jsxs)(_t,{to:"/"+t._id,children:[(0,Ot.jsx)("div",{className:"friend-profilePic",children:r?(0,Ot.jsx)("img",{src:i,alt:d}):(0,Ot.jsx)(xF,{})}),(0,Ot.jsxs)("div",{className:"friend-details",children:[(0,Ot.jsx)("h4",{className:"friend-name text-capitalize",children:d}),t.mutual&&(0,Ot.jsx)("span",{className:"friend-mutual",children:" 20 Mutual Friends"})]})]})}),(0,Ot.jsxs)("div",{className:"friend-options",onClick:e=>{let t=e.currentTarget;_n()(t).children(".friend-options-menu").toggle()},children:[(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Ot.jsx)("div",{className:"friend-options-menu",children:l?(0,Ot.jsxs)("div",{onClick:async e=>{try{200==(await aa.post("/friend/removeFriend",{profile:t._id})).status&&_n()(e.currentTarget).parents(".friend-item").fadeOut()}catch(n){console.log(n)}},className:"friend-options-menu-item",children:[(0,Ot.jsx)("div",{className:"menu-item-icon",children:(0,Ot.jsx)("i",{className:"fas fa-user-times"})}),(0,Ot.jsx)("div",{className:"menu-item-text",children:"Remove Friend"})]}):(0,Ot.jsxs)("div",{onClick:async e=>{try{let n=e.currentTarget;200==(await aa.post("/friend/sendRequest/",{profile:t._id})).status&&_n()(n).parents(".friend-item").hide()}catch(n){console.log(n)}},className:"friend-options-menu-item",children:[(0,Ot.jsx)("div",{className:"menu-item-icon",children:(0,Ot.jsx)("i",{className:"fas fa-user-plus"})}),(0,Ot.jsx)("div",{className:"menu-item-text",children:"Add Friend"})]})})]})]})})},CF=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsxs)("div",{className:"friend-item skeleton-card",children:[(0,Ot.jsx)("div",{className:"friend-info",children:(0,Ot.jsxs)(_t,{to:"/",children:[(0,Ot.jsx)("div",{className:"friend-profilePic",children:(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(tu,{})})}),(0,Ot.jsx)("div",{className:"friend-details",children:(0,Ot.jsxs)("div",{className:"skeleton-lines",children:[(0,Ot.jsx)("div",{className:"skeleton-line short"}),(0,Ot.jsx)("div",{className:"skeleton-line medium"})]})})]})}),(0,Ot.jsx)("div",{className:"friend-options",children:(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"})})]},t)))},kF=()=>{let e=fn((e=>e.profile)),[t,n]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0),[i,s]=(0,a.useState)(!1),u=$e();return(0,a.useEffect)((()=>{let t=u.profile===e._id;if(s(t),t)return n(e.friends);aa.get("/friend/getFriends",{params:{profile:u.profile}}).then((e=>{o(e.data.length>0),n(e.data)})).catch((e=>console.log(e)))}),[u,e]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"profile-friends-content",children:[(0,Ot.jsx)("h4",{className:"section-title",children:"Friends"}),t.length>0?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"friend-items-container",children:t.map(((t,n)=>i?t._id!==e._id?(0,Ot.jsx)(wF,{friend:t},n):void 0:(0,Ot.jsx)(wF,{friend:t},n)))})}):(0,Ot.jsx)(Ot.Fragment,{children:r&&(0,Ot.jsx)("div",{className:"friend-items-container",children:(0,Ot.jsx)(CF,{count:6})})})]})})},SF=e=>{let{imageData:t}=e,[n,r]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{Tn(t.photos,r)}),[]),(0,Ot.jsx)(Ot.Fragment,{children:n?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"image-item",children:(0,Ot.jsx)(_t,{to:"/post/".concat(t._id),children:(0,Ot.jsx)("div",{className:"profile-image-container",children:(0,Ot.jsx)("img",{src:t.photos,alt:t.caption||""})})})})}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(tu,{})})})};function EF(){return EF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EF.apply(this,arguments)}function _F(e,t){return _F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_F(e,t)}var NF=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).state={columns:[],childRefs:[],hasDistributed:!1},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,_F(t,n);var o=r.prototype;return o.componentDidUpdate=function(){this.state.hasDistributed||this.props.sequential||this.distributeChildren()},r.getDerivedStateFromProps=function(e,t){var n=e.children,o=e.columnsCount,a=o!==t.columns.length;return t&&n===t.children&&!a?null:EF({},r.getEqualCountColumns(n,o),{children:n,hasDistributed:!1})},o.shouldComponentUpdate=function(e){return e.children!==this.state.children||e.columnsCount!==this.props.columnsCount},o.distributeChildren=function(){var e=this,t=this.props,n=t.children,r=t.columnsCount,o=Array(r).fill(0);if(this.state.childRefs.every((function(e){return e.current.getBoundingClientRect().height}))){var i=Array.from({length:r},(function(){return[]})),s=0;a.Children.forEach(n,(function(t){if(t&&a.isValidElement(t)){var n=e.state.childRefs[s].current.getBoundingClientRect().height,r=o.indexOf(Math.min.apply(Math,o));o[r]+=n,i[r].push(t),s++}})),this.setState((function(e){return EF({},e,{columns:i,hasDistributed:!0})}))}},r.getEqualCountColumns=function(e,t){var n=Array.from({length:t},(function(){return[]})),r=0,o=[];return a.Children.forEach(e,(function(e){if(e&&a.isValidElement(e)){var i=a.createRef();o.push(i),n[r%t].push(a.createElement("div",{style:{display:"flex",justifyContent:"stretch"},key:r,ref:i},e)),r++}})),{columns:n,childRefs:o}},o.renderColumns=function(){var e=this.props,t=e.gutter,n=e.itemTag,r=e.itemStyle;return this.state.columns.map((function(e,o){return a.createElement(n,{key:o,style:EF({display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:t},r)},e.map((function(e){return e})))}))},o.render=function(){var e=this.props,t=e.gutter,n=e.className,r=e.style,o=e.containerTag;return a.createElement(o,{style:EF({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:t},r),className:n},this.renderColumns())},r}(a.Component);NF.propTypes={},NF.defaultProps={columnsCount:3,gutter:"0",className:null,style:{},containerTag:"div",itemTag:"div",itemStyle:{},sequential:!1};const TF=NF;var RF="undefined"!==typeof window?a.useLayoutEffect:a.useEffect,DF=function(){var e=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1];return RF((function(){n(!0)}),[]),t}(),t=(0,a.useState)("undefined"!==typeof window?window.innerWidth:0),n=t[0],r=t[1],o=(0,a.useCallback)((function(){e&&r(window.innerWidth)}),[e]);return RF((function(){if(e)return window.addEventListener("resize",o),o(),function(){return window.removeEventListener("resize",o)}}),[e,o]),n},IF=function(e){var t=e.columnsCountBreakPoints,n=void 0===t?{350:1,750:2,900:3}:t,r=e.gutterBreakPoints,o=void 0===r?{}:r,i=e.children,s=e.className,u=void 0===s?null:s,l=e.style,c=void 0===l?null:l,d=DF(),f=(0,a.useCallback)((function(e,t){var n=Object.keys(e).sort((function(e,t){return e-t})),r=n.length>0?e[n[0]]:t;return n.forEach((function(t){t<d&&(r=e[t])})),r}),[d]),h=(0,a.useMemo)((function(){return f(n,1)}),[f,n]),p=(0,a.useMemo)((function(){return f(o,"10px")}),[f,o]);return a.createElement("div",{className:u,style:c},a.Children.map(i,(function(e,t){return a.cloneElement(e,{key:t,columnsCount:h,gutter:p})})))};IF.propTypes={};const AF=IF,OF=TF,MF=()=>{let[e,t]=(0,a.useState)([]),{profile:n}=$e(),r=qe();return(0,a.useEffect)((()=>{aa.get("profile/getImages",{params:{profileId:n}}).then((e=>{t(e.data)}))}),[r]),(0,Ot.jsxs)("div",{id:"profile-images-container",children:[(0,Ot.jsx)("div",{className:"section-title",children:"Profile Images"}),(0,Ot.jsx)("div",{className:"image-items-container mt-3",children:(0,Ot.jsx)(AF,{children:(0,Ot.jsx)(OF,{columnsCount:2,gutter:"10px",children:e&&e.length>1?e.map(((e,t)=>(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(SF,{imageData:e},t)}))):(0,Ot.jsx)("p",{children:"No Images To Show"})})})})]})};const PF=()=>{let{profile:e}=$e(),t=fn((e=>e.profile))||{},[n,r]=(t._id===e||t.username,(0,a.useState)(!1));const[o,i]=(0,a.useState)([]),s=(0,a.useRef)();return(0,a.useEffect)((()=>{aa.get("/watch/myWatchs",{params:{profile:e}}).then((e=>{200===e.status&&i(e.data)})),aa.get("/profile",{params:{profileId:e}}).then((e=>{r(e.data)})).catch((e=>console.log(e)))}),[e]),(0,a.useEffect)((()=>{aa.get("/profile",{params:{profileId:e}}).then((e=>{r(e.data)})).catch((e=>console.log(e)))}),[]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"profile-post-content",children:[(0,Ot.jsxs)("div",{className:"intro",children:[(0,Ot.jsx)("h4",{className:"section-title",children:"Intro"}),(0,Ot.jsx)("div",{className:"details",children:(0,Ot.jsx)(gF,{})})]}),(0,Ot.jsx)("div",{className:"posts-container",ref:s,children:o.length>0?o.map(((e,n)=>(0,Ot.jsx)(au,{myProfile:t,watch:e},n))):(0,Ot.jsx)(ks,{count:3})})]})})},jF=JSON.parse('[{"id":1,"name":"Original phone ringtone","src":"https://programmerikram.com/wp-content/uploads/2025/05/original-phone-ringtone.mp3"},{"id":2,"name":"Phone ringtone bells","src":"https://programmerikram.com/wp-content/uploads/2025/05/phone-ringtone-bells.mp3"},{"id":3,"name":"Telephone Ringtone","src":"https://programmerikram.com/wp-content/uploads/2025/05/old-telephone.mp3"},{"id":4,"name":"Telephone Ringtone 2","src":"https://programmerikram.com/wp-content/uploads/2025/05/phone-ringtone-telephone.mp3"},{"id":5,"name":"Phone ringtone office","src":"https://programmerikram.com/wp-content/uploads/2025/05/phone-ringtone-office.mp3"}]'),FF=e=>{let{myId:t}=e,[n,r]=(0,a.useState)(!1);const o=fn((e=>e.setting)),[i,s]=(0,a.useState)(),[u,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[f,h]=(0,a.useState)(""),[p,m]=(0,a.useState)(),[v,g]=(0,a.useState)(),[y,b]=(0,a.useState)(!0),[x,w]=(0,a.useState)(!1),[C,k]=(0,a.useState)("auto"),S=(0,a.useRef)(),E=(0,a.useRef)(),_=(0,a.useRef)(),N=(0,a.useRef)(),T=(0,a.useRef)(),R=la();let D=()=>{null===T||void 0===T||T.current.pause()};(0,a.useEffect)((()=>{if(o.ringtone){var e;let t=jF.filter((e=>e.id==o.ringtone)),n=t.length>0?null===(e=t[0])||void 0===e?void 0:e.src:"no ring tone";null===T||void 0===T||T.current.setAttribute("src",n)}}),[o]),(0,a.useEffect)((()=>(Ui.on("receive-call",(e=>{r(!0),d(!0),h(e.from),m(e.signal),l(e.name),setTimeout((()=>{null===T||void 0===T||T.current.play()}),500)})),Ui.on("videoCallEnd",(e=>{D();let t=new MouseEvent("click",{bubbles:!0,cancelable:!1});N.current&&N.current.dispatchEvent(t)})),()=>{Ui.off("receive-call"),Ui.off("videoCallEnd")})),[]),(0,a.useEffect)((()=>{1==n&&navigator.mediaDevices.enumerateDevices().then((e=>{const t=e.filter((e=>"videoinput"===e.kind)),n=t.find((e=>e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("environment")));return navigator.mediaDevices.getUserMedia({video:{deviceId:x&&(null===n||void 0===n?void 0:n.deviceId)||t[0].deviceId},audio:y}).then((e=>{s(e),S.current&&(S.current.srcObject=e)}))}))}),[n]);(0,a.useEffect)((()=>{Ui.on("leaveVideoCall",(e=>{null!==_&&void 0!==_&&_.current&&(_.current.destroy(),_.current=null)}))}),[]);let I=(0,a.useCallback)((()=>{D(),Ui.emit("leaveVideoCall",f),i&&i.getTracks().forEach((e=>e.stop())),S.current&&(S.current.srcObject=null),E.current&&(E.current.srcObject=null),s(null),g(!1),r(!1),null!==_&&void 0!==_&&_.current&&(_.current.destroy(),_.current=null)})),A=(0,a.useCallback)((()=>{b(!y)})),O=(0,a.useCallback)((()=>{w(!x)}));return(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)(Nn,{title:"Video Call",style:{width:R?"95%":"600px",top:"50%",height:C},isOpen:n,onRequestClose:e=>{},id:"videoCallModal",children:(0,Ot.jsxs)("div",{className:"".concat(v?"call-accepted":""),style:{padding:0},children:[(0,Ot.jsxs)("h2",{className:"text-center vc-modal-heading",children:["Video Call - ",u]}),(0,Ot.jsx)("p",{className:"fs-4 text-center",children:c&&!v&&"".concat(u," Calling you")}),(0,Ot.jsxs)("div",{className:"video-call-container ".concat(R?"mobile":""),children:[v&&(0,Ot.jsx)("video",{playsInline:!0,ref:E,className:"receive-friends-video",autoPlay:!0,style:{width:"100%"}}),(0,Ot.jsx)("video",{playsInline:!0,muted:!0,ref:S,className:"receive-my-video",autoPlay:!0,style:{width:"150px"}})]}),(0,Ot.jsxs)("div",{className:"call-buttons",children:[(0,Ot.jsx)("button",{onClick:I,ref:N,className:"call-button-ends call-button bg-danger",children:(0,Ot.jsx)("i",{className:"fa fa-phone"})}),v&&(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsx)("button",{onClick:A.bind(void 0),className:"call-button-microphone call-button",children:y?(0,Ot.jsx)("i",{className:"fa fa-microphone"}):(0,Ot.jsx)("i",{class:"fa fa-microphone-slash"})}),(0,Ot.jsx)("button",{onClick:O.bind(void 0),className:"call-button-switch call-button",children:(0,Ot.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24",children:[(0,Ot.jsx)("path",{d:"M11 7H5a2 2 0 0 0-2 2v4"}),(0,Ot.jsx)("path",{d:"M13 17h6a2 2 0 0 0 2-2v-4"}),(0,Ot.jsx)("polyline",{points:"16 3 21 3 21 8"}),(0,Ot.jsx)("polyline",{points:"8 21 3 21 3 16"}),(0,Ot.jsx)("path",{d:"M21 3l-6.5 6.5"}),(0,Ot.jsx)("path",{d:"M3 21l6.5-6.5"})]})})]}),!v&&(0,Ot.jsx)("button",{onClick:(()=>{if(D(),!p)return void console.warn("No caller signal to answer");g(!0);const e=new(Kj())({initiator:!1,trickle:!1,stream:i});e.on("signal",(e=>{Ui.emit("answer-call",{signal:e,to:f})})),e.on("stream",(e=>{E.current.srcObject=e}));try{e.destroyed||e.signal(p)}catch(QB){console.error("Failed to apply caller signal:",QB)}null!==_&&void 0!==_&&_.current&&(_.current=e)}).bind(void 0),className:"call-button-receive call-button bg-success",children:(0,Ot.jsx)("i",{className:"fa fa-phone-volume"})})]})]})}),(0,Ot.jsx)("audio",{ref:T,loop:!0})]})},LF="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",BF=e=>{let{viewer:t,reacts:n}=e,[r,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)("");return(0,a.useEffect)((()=>{(async()=>{let e=await aa.get("profile",{params:{profileId:t}});if(200==e.status){o(e.data);let r=n.filter((e=>e.profile==t));if(0==r.length)return;switch(r[0].type){case"like":default:s(LF);break;case"love":s("https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg");break;case"haha":s("https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg")}}})()}),[]),(0,Ot.jsx)("div",{children:r&&(0,Ot.jsxs)("li",{className:"sp-reacts-item",children:[(0,Ot.jsx)("div",{className:"reactor-pp",children:(0,Ot.jsx)(Rn,{profilePic:r.profilePic,profile:r._id})}),(0,Ot.jsx)("div",{className:"react-details",children:(0,Ot.jsx)(_t,{to:"/".concat(r._id),children:(0,Ot.jsx)("span",{className:"reactor-name",children:r.fullName})})}),(0,Ot.jsx)("span",{className:"reactor-react",children:i?(0,Ot.jsx)("img",{src:i}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("img",{style:{visibility:"hidden"},src:""})})})]})})},WF="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",UF="https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",zF="https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg",HF=()=>{let{postId:e}=$e(),[t,n]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)(!1),[u,l]=(0,a.useState)(!1),c=la(),f=Ye();const h=qe().pathname.includes("edit");(0,a.useEffect)((()=>{(async()=>{let t=await aa.get("post/single",{params:{postId:e}});200==t.status&&n(t.data)})()}),[e]);let p=fn((e=>e.profile)),m=p._id,v=t&&(null===t||void 0===t?void 0:t.author._id),[g,y]=(0,a.useState)(t&&t.reacts.length),[b,x]=(0,a.useState)(t&&t.shares.length),[w,C]=(0,a.useState)(t&&t.comments.length),[k,S]=(0,a.useState)(!1),[E,_]=(0,a.useState)([]);(0,a.useEffect)((()=>{y(t&&t.reacts.length),x(t&&t.shares.length),C(t&&t.comments.length)}),[t]);var N=m===v;let[T,R]=(0,a.useState)(t&&(null===t||void 0===t?void 0:t.author.profilePic)||"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png"),D=t&&t.photos;(0,a.useEffect)((()=>{Tn(D,l)}),[D]),(0,a.useEffect)((()=>{let e=[];t&&t.reacts.map((t=>{if(t.profile){switch(t.type){case"like":e.includes("like")||e.push("like");break;case"love":e.includes("love")||e.push("love");break;case"haha":e.includes("haha")||e.push("haha")}t.profile===m&&S(t.type)}})),_(e)}),[]);let I=t&&(t.type||"post"),A=async e=>{let n=e.currentTarget;N?(0,ms.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{let e=await aa.post("/post/delete",{postId:t._id,authorId:t.author._id});200===e.status?(_n()(n).parents(".nf-post").css({"min-height":"0px",padding:"10px"}),_n()(n).parents(".nf-post").html('<p class="fs-6 mb-0 text-center text-danger">'+e.data.message+"</p>")):alert("Failed to delete post")}},{label:"No",onClick:()=>{}}]}):_n()(n).parents(".nf-post").hide()},O=async function(){y((e=>e-1));let e=await aa.post("/react/removeReact",{id:t._id,postType:"post"});return 200===e.status&&(y(e.data.reacts.length),S(""),!0)},M=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";y((e=>e+1));let r=await aa.post("/react/addReact",{id:t._id,postType:n,reactType:e});return 200===r.status&&(y(r.data.reacts.length),_([...E,e]),S(e),!0)},P=async e=>{let t=e.currentTarget;_n()(t).parent().hasClass("reacted")?(O("post"),_n()(t).parent().removeClass("reacted")):(M("like","post",t),_n()(t).parent().addClass("reacted"))},j=async e=>{let t=e.currentTarget;_n()(t).parents(".post-react-container").css("visibility","hidden"),_n()(t).hasClass("reacted")?(O("post"),_n()(t).removeClass("reacted")):(M("like","post",t),_n()(t).addClass("reacted"),_n()(e.currentTarget).siblings().removeClass("reacted")),setTimeout((()=>{_n()(t).parents(".post-react-container").css("visibility","visible")}),500)},F=e=>{let t=e.currentTarget;_n()(t).parents(".post-react-container").css("visibility","hidden"),_n()(e.currentTarget).hasClass("reacted")?(O("post"),_n()(e.currentTarget).removeClass("reacted")):(M("love","post"),_n()(e.currentTarget).siblings().removeClass("reacted"),_n()(e.currentTarget).addClass("reacted")),setTimeout((()=>{_n()(t).parents(".post-react-container").css("visibility","visible")}),500)},L=e=>{let t=e.currentTarget;_n()(t).parents(".post-react-container").css("visibility","hidden"),_n()(e.currentTarget).hasClass("reacted")?(O(),_n()(e.currentTarget).removeClass("reacted")):(M("haha","post",t),_n()(e.currentTarget).siblings().removeClass("reacted"),_n()(e.currentTarget).addClass("reacted")),setTimeout((()=>{_n()(t).parents(".post-react-container").css("visibility","visible")}),500)},B=e=>{let t=e.currentTarget;_n()(t).children(".post-react-container").css("visibility","visible")},W=e=>{let t=e.currentTarget;_n()(t).parents(".footer").find(".field-comment-text").focus()},U=e=>{o(!0)},H=()=>{o(!1)},V=e=>{let t=e.currentTarget.value;s(t)},q=async e=>{e.preventDefault();let n=await aa.post("post/share",{postId:t._id,caption:i});x((e=>e+1)),200==n.status?o(!1):x(t&&t.shares.length)},G=()=>{f("edit")},Y=()=>{f("/post/".concat(e))},K=fn((e=>e.profile.profilePic)),$=fn((e=>e.profile._id)),X="".concat(t&&(null===t||void 0===t?void 0:t.author.profilePic)),[Q,J]=(0,a.useState)(window.matchMedia("(max-width: 768px)").matches);(0,a.useEffect)((()=>{window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{J(e.matches)}))}),[]);let[Z,ee]=(0,a.useState)("");(0,a.useEffect)((()=>{t.caption&&ee(t.caption)}),[t.caption]);let te=(0,a.useCallback)((async e=>(e.preventDefault(),ee(e.target.value),n((t=>d(d({},t),{},{caption:e.target.value})))))),ne=(0,a.useCallback)((async n=>{200==(await aa.post("/post/update",{postId:e,caption:t.caption})).status&&z("Caption Updated")})),re=()=>"share"===t.type?(0,Ot.jsxs)("div",{className:"share-nf-post nf-post",children:[(0,Ot.jsxs)("div",{className:"header",children:[(0,Ot.jsx)("div",{className:"reason",children:(0,Ot.jsxs)("span",{className:"fs-5",children:[(0,Ot.jsx)("b",{children:(0,Ot.jsx)(_t,{to:"/".concat(t.author._id),children:t.author.fullName})})," Shared ",(0,Ot.jsxs)("b",{children:[(0,Ot.jsxs)(_t,{to:"/".concat(t.parentPost.author._id),children:[t.parentPost.author.fullName,"'s"]})," "]}),(0,Ot.jsx)("span",{className:"text-capitalize",children:t.parentPost.type})]})}),(0,Ot.jsxs)("div",{className:"author-info",children:[(0,Ot.jsxs)("div",{className:"left",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:t.author.profilePic,profile:t.author._id,active:!1})}),(0,Ot.jsxs)("div",{className:"post-nd-container",children:[(0,Ot.jsx)(_t,{to:"/"+t.author._id,children:(0,Ot.jsx)("h4",{className:"author-name",children:t.author.fullName})}),(0,Ot.jsx)("span",{className:"post-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:t.createdAt})})]})]}),(0,Ot.jsxs)("div",{className:"right",children:[N&&(0,Ot.jsx)("button",{className:"post-three-dot",children:(0,Ot.jsx)("i",{className:"far fa-ellipsis-h"})}),(0,Ot.jsxs)("button",{onClick:A.bind(void 0),className:"post-close",children:[" ",(0,Ot.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Ot.jsxs)("div",{className:"nf-post ".concat(I," m-3 border body overflow-hidden"),children:[(0,Ot.jsxs)("div",{className:"header",children:["profilePic"===I&&(0,Ot.jsxs)("div",{className:"reason",children:[(0,Ot.jsx)("span",{className:"d-none",children:(0,Ot.jsx)("b",{children:"Shared a photos"})}),(0,Ot.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Ot.jsxs)("div",{className:"author-info",children:[(0,Ot.jsxs)("div",{className:"left",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:t.parentPost.author.profilePic,profile:t.parentPost.author._id})}),(0,Ot.jsxs)("div",{className:"post-nd-container",children:[(0,Ot.jsx)(_t,{to:"/"+t.author._id,children:(0,Ot.jsx)("h4",{className:"author-name",children:t.parentPost.author.fullName})}),(0,Ot.jsx)("span",{className:"post-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:t.parentPost.createdAt})})]})]}),(0,Ot.jsx)("div",{className:"right"})]})]}),(0,Ot.jsx)("p",{className:"caption",children:t.caption}),(0,Ot.jsxs)("div",{className:"body",children:[(0,Ot.jsx)("p",{className:"caption",children:t.parentPost.caption}),u?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"attachment",children:(0,Ot.jsx)(_t,{to:"/post/".concat(t._id),children:(0,Ot.jsx)("img",{src:D,alt:"post"})})})}):(0,Ot.jsx)(Ot.Fragment,{children:gs(D)&&(0,Ot.jsx)(vs,{})})]})]}),(0,Ot.jsxs)("div",{className:"footer",children:[(0,Ot.jsxs)("div",{className:"react-count",children:[(0,Ot.jsxs)("div",{className:"reacts",children:[E.includes("like")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:WF,alt:"like"}),"  "]}):(0,Ot.jsx)("span",{}),E.includes("love")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:UF,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),E.includes("haha")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:zF,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),(0,Ot.jsxs)("span",{className:"text",children:[t.reacts&&g," ",g>1?"Reacts":"React"]})]}),(0,Ot.jsxs)("div",{className:"comment-share",children:[(0,Ot.jsxs)("div",{className:"comment",children:[(0,Ot.jsx)("div",{className:"text",children:t.comments&&w}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Ot.jsxs)("div",{className:"shares",children:[(0,Ot.jsx)("div",{className:"text",children:t.shares&&b}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Ot.jsx)("div",{className:"like-comment-share",children:(0,Ot.jsxs)("div",{className:"buttons-container",children:[(0,Ot.jsxs)("div",{className:"react-buttons button ".concat(k?"reacted":""),children:[(0,Ot.jsxs)("div",{onClick:P,onMouseOver:B,className:"react-like ".concat(1==k?"reacted":""),children:[(0,Ot.jsxs)("span",{className:"react-icon",datatype:k||"",children:["haha"==k?(0,Ot.jsx)("img",{src:zF,alt:"haha"}):(0,Ot.jsx)("span",{}),"love"==k?(0,Ot.jsx)("img",{src:UF,alt:"love"}):(0,Ot.jsx)("span",{}),0==k||"like"==k?(0,Ot.jsx)("img",{src:WF,alt:"like"}):(0,Ot.jsx)("span",{})]}),(0,Ot.jsx)("span",{className:"text text-capitalize",children:k||"like"})]}),(0,Ot.jsxs)("div",{className:"post-react-container",children:[(0,Ot.jsx)("div",{className:"react react-like ".concat("like"==k?"reacted":""),onClick:j,id:"postReactLike",title:"Like",children:(0,Ot.jsx)("img",{src:WF,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-love ".concat("love"==k?"reacted":""),onClick:F,id:"postReactLove",title:"Love",children:(0,Ot.jsx)("img",{src:UF,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-haha ".concat("haha"==k?"reacted":""),onClick:L,id:"postReactHaha",title:"Haha",children:(0,Ot.jsx)("img",{src:zF,alt:"haha"})})]})]}),(0,Ot.jsxs)("div",{onClick:W,className:"comment button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})}),(0,Ot.jsx)("span",{className:"text",children:"Comment"})]}),(0,Ot.jsxs)("div",{onClick:U,className:"share button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-share"})}),(0,Ot.jsx)("span",{className:"text",children:"Share"})]}),(0,Ot.jsxs)(Nn,{title:"View Cover Photo",style:{width:c?"95%":"600px",top:"50%"},isOpen:r,onRequestClose:H,id:"cp-view-modal",children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{}),(0,Ot.jsx)("div",{onClick:H,className:"modal-close-btn text-danger",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsx)("div",{className:"modal-body",children:(0,Ot.jsxs)("div",{className:"share-post-container",children:[(0,Ot.jsxs)("div",{className:"share-post-header",children:[(0,Ot.jsxs)("div",{className:"row",children:[(0,Ot.jsx)("div",{className:"col-1",children:(0,Ot.jsx)(Rn,{profilePic:p.profilePic})}),(0,Ot.jsx)("div",{className:"col-3",children:(0,Ot.jsx)("h3",{children:p.fullName})})]}),(0,Ot.jsx)("div",{className:"row",children:(0,Ot.jsxs)("div",{className:"col",children:["Your Sharing ",t.author.fullName||"Someone","'s Post"]})})]}),(0,Ot.jsxs)("div",{className:"share-post-body my-3",children:[(0,Ot.jsx)("textarea",{className:"form-control",rows:"3",onChange:V.bind(void 0),placeholder:"What's On Your Mind?"}),(0,Ot.jsx)("div",{className:"share-post-button text-end mt-2",children:(0,Ot.jsx)("button",{className:"btn btn-primary",onClick:q,children:"Share Now"})})]}),(0,Ot.jsx)("div",{className:"share-post-footer"})]})})]})]})})]})]}):(0,Ot.jsxs)("div",{className:"nf-post ".concat(I),children:[(0,Ot.jsxs)("div",{className:"header",children:["profilePic"===I&&(0,Ot.jsxs)("div",{className:"reason",children:[(0,Ot.jsxs)("span",{className:"d-none",children:[(0,Ot.jsx)("b",{children:"A bitch"})," commented."]}),(0,Ot.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Ot.jsxs)("div",{className:"author-info",children:[(0,Ot.jsxs)("div",{className:"left",children:[(0,Ot.jsx)("div",{className:"author-pp",children:(0,Ot.jsx)(Rn,{profilePic:X,profile:t.author._id,active:!0})}),(0,Ot.jsxs)("div",{className:"post-nd-container",children:[(0,Ot.jsxs)("h4",{className:"author-name",children:[(0,Ot.jsx)(_t,{to:"/"+t.author._id,children:t.author.fullName}),t.fellings&&(0,Ot.jsxs)("span",{className:"post-feelings",children:[" ",(0,Ot.jsx)("small",{className:"text-lowercase text-secondary",children:"is felling"})," ",t.fellings||""]}),t.location&&(0,Ot.jsxs)("span",{className:"post-location",children:[" ",(0,Ot.jsx)("small",{className:"text-lowercase text-secondary",children:" at"})," ",t.location||""]})]}),(0,Ot.jsx)("span",{className:"post-time",children:(0,Ot.jsx)(ha(),{fromNow:!0,children:t.createdAt})})]})]}),(0,Ot.jsxs)("div",{className:"right",children:[N&&!h&&(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("button",{onClick:G,className:"post-three-dot",children:(0,Ot.jsx)("i",{className:"far fs-6 fa-pen"})})}),h&&(0,Ot.jsx)("button",{onClick:Y,className:"post-three-dot",children:(0,Ot.jsx)("i",{className:"fas fa-arrow-left"})}),(0,Ot.jsxs)("button",{onClick:A.bind(void 0),className:"post-close",children:[" ",(0,Ot.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Ot.jsxs)("div",{className:"body",children:[N&&h?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("input",{onChange:te.bind(void 0),className:"caption-editor form-control mb-2",placeholder:"Enter Your Caption",value:Z}),(0,Ot.jsx)("div",{className:"input-group-prepend",children:(0,Ot.jsx)("button",{onClick:ne,className:"btn btn-primary",children:"Update"})})]})}):(0,Ot.jsx)("p",{className:"caption",children:t.caption}),u?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"attachment",children:(0,Ot.jsx)(_t,{to:"/post/".concat(t._id),children:(0,Ot.jsx)("img",{src:D,alt:"post"})})})}):(0,Ot.jsx)(Ot.Fragment,{children:gs(D)&&(0,Ot.jsx)(vs,{})})]}),(0,Ot.jsxs)("div",{className:"footer",children:[(0,Ot.jsxs)("div",{className:"react-count",children:[(0,Ot.jsxs)("div",{className:"reacts",children:[E.includes("like")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:WF,alt:"like"}),"  "]}):(0,Ot.jsx)("span",{}),E.includes("love")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:UF,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),E.includes("haha")?(0,Ot.jsxs)("div",{className:"react",children:[" ",(0,Ot.jsx)("img",{src:zF,alt:"love"})," "]}):(0,Ot.jsx)("span",{}),(0,Ot.jsxs)("span",{className:"text",children:[t.reacts&&g," ",g>1?"Reacts":"React"]})]}),(0,Ot.jsxs)("div",{className:"comment-share",children:[(0,Ot.jsxs)("div",{className:"comment",children:[(0,Ot.jsx)("div",{className:"text",children:t.comments&&w}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Ot.jsxs)("div",{className:"shares",children:[(0,Ot.jsx)("div",{className:"text",children:t.shares&&b}),(0,Ot.jsx)("div",{className:"icon",children:(0,Ot.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Ot.jsx)("div",{className:"like-comment-share",children:(0,Ot.jsxs)("div",{className:"buttons-container",children:[(0,Ot.jsxs)("div",{className:"react-buttons button ".concat(k?"reacted":""),children:[(0,Ot.jsxs)("div",{onClick:P,onMouseOver:B,className:"react-like ".concat(1==k?"reacted":""),children:[(0,Ot.jsxs)("span",{className:"react-icon",datatype:k||"",children:["haha"==k?(0,Ot.jsx)("img",{src:zF,alt:"haha"}):(0,Ot.jsx)("span",{}),"love"==k?(0,Ot.jsx)("img",{src:UF,alt:"love"}):(0,Ot.jsx)("span",{}),0==k||"like"==k?(0,Ot.jsx)("img",{src:WF,alt:"like"}):(0,Ot.jsx)("span",{})]}),(0,Ot.jsx)("span",{className:"text text-capitalize",children:k||"like"})]}),(0,Ot.jsxs)("div",{className:"post-react-container",children:[(0,Ot.jsx)("div",{className:"react react-like ".concat("like"==k?"reacted":""),onClick:j,id:"postReactLike",title:"Like",children:(0,Ot.jsx)("img",{src:WF,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-love ".concat("love"==k?"reacted":""),onClick:F,id:"postReactLove",title:"Love",children:(0,Ot.jsx)("img",{src:UF,alt:"love"})}),(0,Ot.jsx)("div",{className:"react react-haha ".concat("haha"==k?"reacted":""),onClick:L,id:"postReactHaha",title:"Haha",children:(0,Ot.jsx)("img",{src:zF,alt:"haha"})})]})]}),(0,Ot.jsxs)("div",{onClick:W,className:"comment button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-comment-alt"})}),(0,Ot.jsx)("span",{className:"text",children:"Comment"})]}),(0,Ot.jsxs)("div",{onClick:U,className:"share button",children:[(0,Ot.jsx)("span",{className:"icon",children:(0,Ot.jsx)("i",{className:"far fa-share"})}),(0,Ot.jsx)("span",{className:"text",children:"Share"}),(0,Ot.jsxs)(Nn,{title:"Share Post",style:{width:c?"95%":"600px",top:"50%"},isOpen:r,onRequestClose:H,id:"cp-view-modal",children:[(0,Ot.jsxs)("div",{className:"modal-header",children:[(0,Ot.jsx)("div",{}),(0,Ot.jsx)("div",{onClick:H,className:"modal-close-btn text-danger",children:(0,Ot.jsx)("i",{className:"far fa-times"})})]}),(0,Ot.jsx)("div",{className:"modal-body",children:(0,Ot.jsxs)("div",{className:"share-post-container",children:[(0,Ot.jsxs)("div",{className:"share-post-header",children:[(0,Ot.jsxs)("div",{className:"row",children:[(0,Ot.jsx)("div",{className:"col-1",children:(0,Ot.jsx)(Rn,{profilePic:p.profilePic})}),(0,Ot.jsx)("div",{className:"col-3",children:(0,Ot.jsx)("h3",{children:p.fullName})})]}),(0,Ot.jsx)("div",{className:"row",children:(0,Ot.jsxs)("div",{className:"col",children:["Your Sharing ",t.author.fullName||"Someone","'s Post"]})})]}),(0,Ot.jsxs)("div",{className:"share-post-body my-3",children:[(0,Ot.jsx)("textarea",{className:"form-control",onChange:e=>s(e.target.value),value:i}),(0,Ot.jsx)("div",{className:"share-post-button text-end mt-2",children:(0,Ot.jsx)("button",{className:"btn btn-primary",onClick:q,children:"Share Now"})})]}),(0,Ot.jsx)("div",{className:"share-post-footer"})]})})]})]})]})})]})]});return(0,Ot.jsx)("div",{children:(0,Ot.jsx)(Vt,{className:"single-post-container",children:(0,Ot.jsxs)(Yt,{children:[(0,Ot.jsx)(Qt,{md:"6",className:"br",children:(0,Ot.jsx)("div",{id:"post-container",children:(0,Ot.jsx)("div",{children:t&&(0,Ot.jsx)(re,{})})})}),(0,Ot.jsx)(Qt,{md:"3",className:"br",children:(0,Ot.jsxs)("div",{className:"sp-reacts-container",children:[(0,Ot.jsxs)("h4",{className:"section-title",children:["Views ",t.viewers&&"(".concat(t.viewers.length,")")]}),(0,Ot.jsx)("ul",{className:"sp-reacts",children:t.viewers&&t.viewers.map(((e,n)=>(0,Ot.jsx)(BF,{reacts:t.reacts,viewer:e._id},n)))})]})}),(0,Ot.jsx)(Qt,{md:"3",children:(0,Ot.jsxs)("div",{className:"sp-comments-container",children:[(0,Ot.jsxs)("h4",{className:"section-title",children:["Comments ",(null===t||void 0===t?void 0:t.comments)&&"(".concat(null===t||void 0===t?void 0:t.comments.length,")")]}),(null===t||void 0===t?void 0:t.comments)&&(0,Ot.jsx)(ps,{post:t,commentState:C,allComments:t.comments||[],myProfile:p,authProfile:$,isEditMode:h,authProfilePicture:K})]})})]})})})},VF=()=>(0,Ot.jsx)("div",{children:"post comments"}),qF=()=>(0,Ot.jsx)("div",{children:"post reacts"});var GF=function(){return GF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},GF.apply(this,arguments)},YF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},KF=function(e){var t=0;if(0===e.length)return!1;for(;t<e.length;){var n=e.charAt(t);if(n==n.toLowerCase());else if(n==n.toUpperCase())return!0;t++}return!1},$F=function(e){var t=0;if(0===e.length)return!1;for(;t<e.length;){var n=e.charAt(t);if(n==n.toUpperCase());else if(n==n.toLowerCase())return!0;t++}return!1},XF=function(e){var t=e.valid,n=e.iconSize,r=e.validColor,o=e.invalidColor,i=e.validTextColor,s=e.invalidTextColor,u=e.iconComponents,l=e.hideIcon,c=e.rtl,d=e.children,f=e.itemClassName;return a.createElement("li",{className:"".concat(f," ").concat(t?"valid":"invalid"),style:{listStyleType:"none",display:"flex",alignItems:"center",margin:"2px 0"}},l?null:u?t?u.ValidIcon:u.InvalidIcon:a.createElement("svg",{className:"checklist-icon",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 512 512",style:{marginRight:c?0:5,marginLeft:c?5:0}},a.createElement("path",{fill:t?r:o,d:t?"M432 64l-240 240-112-112-80 80 192 192 320-320z":"M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"})),a.createElement("span",{style:{paddingTop:2,opacity:t?1:s?void 0:.5,flex:1,color:t?i:s}},d))};const QF=function(e){var t=e.className,n=e.style,r=e.rules,o=e.value,i=e.valueAgain,s=e.minLength,u=e.maxLength,l=e.rtl,c=e.onChange,d=e.specialCharsRegex,f=void 0===d?/[~`\xbf\xa1!#$%\^&*\u20ac\xa3@+\xf7=\-\[\]\\';,/{}\(\)|\\":<>\?\.\_]/g:d,h=e.messages,p=void 0===h?{}:h,m=YF(e,["className","style","rules","value","valueAgain","minLength","maxLength","rtl","onChange","specialCharsRegex","messages"]),v={minLength:{valid:o.length>=(s||100),message:p.minLength||"Password has at least ".concat(s," characters.")},specialChar:{valid:f.test(o),message:p.specialChar||"Password has special characters."},number:{valid:/\d/g.test(o),message:p.number||"Password has a number."},match:{valid:o.length>0&&o===i,message:p.match||"Passwords match."},capital:{valid:KF(o),message:p.capital||"Password has a capital letter."},lowercase:{valid:$F(o),message:p.lowercase||"Password has a lowercase letter."},capitalAndLowercase:{valid:KF(o)&&$F(o),message:p.capitalAndLowercase||"Password contains at least one uppercase and lowercase characters."},letter:{valid:/[a-zA-Z]/g.test(o),message:p.letter||"Password has a letter."},maxLength:{valid:o.length<=(u||16),message:p.maxLength||"Password has no more than ".concat(u," characters.")},notEmpty:{valid:Boolean(o.length>0&&i&&i.length>0),message:p.notEmpty||"Password fields are not empty."},noSpaces:{valid:Boolean(o.length>0&&!/\s/.test(o)),message:p.noSpaces||"Password contains no spaces."}},g=(0,a.useMemo)((function(){return r.filter((function(e){return Boolean(v[e])}))}),[r]),y=g.every((function(e){return v[e].valid})),b=(0,a.useMemo)((function(){return g.filter((function(e){return!v[e].valid}))}),[o,i,g]);return(0,a.useEffect)((function(){"function"===typeof c&&c(y,b)}),[y,b]),l&&(t=t?t+" rtl":"rtl"),a.createElement("ul",{className:t,style:GF({margin:0,padding:0},n)},g.map((function(e){var t=v[e],n=t.message,r=t.valid;return a.createElement(XF,GF({key:e,valid:r,iconSize:18,validColor:"#4BCA81",invalidColor:"#FF0033",rtl:l},m),n)})))};var JF=n(1899),ZF=n.n(JF);const eL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function tL(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const nL={date:tL({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:tL({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:tL({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},rL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function oL(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[o]||e.formattingValues[t]}else{const t=e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const aL={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:oL({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:oL({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:oL({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:oL({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:oL({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function iL(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;const i=a[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,(e=>e.test(i))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,(e=>e.test(i)));let l;l=e.valueCallback?e.valueCallback(u):u,l=n.valueCallback?n.valueCallback(l):l;return{value:l,rest:t.slice(i.length)}}}const sL={ordinalNumber:(uL={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(uL.matchPattern);if(!n)return null;const r=n[0],o=e.match(uL.parsePattern);if(!o)return null;let a=uL.valueCallback?uL.valueCallback(o[0]):o[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(r.length)}}),era:iL({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:iL({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:iL({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:iL({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:iL({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var uL;const lL={code:"en-US",formatDistance:(e,t,n)=>{let r;const o=eL[e];return r="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:nL,formatRelative:(e,t,n,r)=>rL[e],localize:aL,match:sL,options:{weekStartsOn:0,firstWeekContainsDate:1}};let cL={};function dL(){return cL}Math.pow(10,8);const fL=6048e5,hL=Symbol.for("constructDateFrom");function pL(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&hL in e?e[hL](t):e instanceof Date?new e.constructor(t):new Date(t)}function mL(e,t){return pL(t||e,e)}function vL(e){const t=mL(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function gL(e,t){const n=mL(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function yL(e,t,n){const[r,o]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=pL.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(o)}(null===n||void 0===n?void 0:n.in,e,t),a=gL(r),i=gL(o),s=+a-vL(a),u=+i-vL(i);return Math.round((s-u)/864e5)}function bL(e,t){const n=mL(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function xL(e,t){const n=mL(e,null===t||void 0===t?void 0:t.in);return yL(n,bL(n))+1}function wL(e,t){var n,r,o,a,i,s;const u=dL(),l=null!==(n=null!==(r=null!==(o=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==r?r:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,c=mL(e,null===t||void 0===t?void 0:t.in),d=c.getDay(),f=(d<l?7:0)+d-l;return c.setDate(c.getDate()-f),c.setHours(0,0,0,0),c}function CL(e,t){return wL(e,d(d({},t),{},{weekStartsOn:1}))}function kL(e,t){const n=mL(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),o=pL(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const a=CL(o),i=pL(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const s=CL(i);return n.getTime()>=a.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function SL(e,t){const n=kL(e,t),r=pL((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),CL(r)}function EL(e,t){const n=mL(e,null===t||void 0===t?void 0:t.in),r=+CL(n)-+SL(n);return Math.round(r/fL)+1}function _L(e,t){var n,r,o,a,i,s;const u=mL(e,null===t||void 0===t?void 0:t.in),l=u.getFullYear(),c=dL(),d=null!==(n=null!==(r=null!==(o=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==o?o:c.firstWeekContainsDate)&&void 0!==r?r:null===(s=c.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,f=pL((null===t||void 0===t?void 0:t.in)||e,0);f.setFullYear(l+1,0,d),f.setHours(0,0,0,0);const h=wL(f,t),p=pL((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(l,0,d),p.setHours(0,0,0,0);const m=wL(p,t);return+u>=+h?l+1:+u>=+m?l:l-1}function NL(e,t){var n,r,o,a,i,s;const u=dL(),l=null!==(n=null!==(r=null!==(o=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==o?o:u.firstWeekContainsDate)&&void 0!==r?r:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,c=_L(e,t),d=pL((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(c,0,l),d.setHours(0,0,0,0);return wL(d,t)}function TL(e,t){const n=mL(e,null===t||void 0===t?void 0:t.in),r=+wL(n,t)-+NL(n,t);return Math.round(r/fL)+1}function RL(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const DL={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return RL("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):RL(n+1,2)},d:(e,t)=>RL(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>RL(e.getHours()%12||12,t.length),H:(e,t)=>RL(e.getHours(),t.length),m:(e,t)=>RL(e.getMinutes(),t.length),s:(e,t)=>RL(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return RL(Math.trunc(r*Math.pow(10,n-3)),t.length)}},IL="midnight",AL="noon",OL="morning",ML="afternoon",PL="evening",jL="night",FL={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return DL.y(e,t)},Y:function(e,t,n,r){const o=_L(e,r),a=o>0?o:1-o;if("YY"===t){return RL(a%100,2)}return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):RL(a,t.length)},R:function(e,t){return RL(kL(e),t.length)},u:function(e,t){return RL(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return RL(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return RL(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return DL.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return RL(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=TL(e,r);return"wo"===t?n.ordinalNumber(o,{unit:"week"}):RL(o,t.length)},I:function(e,t,n){const r=EL(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):RL(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):DL.d(e,t)},D:function(e,t,n){const r=xL(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):RL(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return RL(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return RL(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=0===r?7:r;switch(t){case"i":return String(o);case"ii":return RL(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(o=12===r?AL:0===r?IL:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(o=r>=17?PL:r>=12?ML:r>=4?OL:jL,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return DL.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):DL.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):RL(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):RL(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):DL.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):DL.s(e,t)},S:function(e,t){return DL.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return BL(r);case"XXXX":case"XX":return WL(r);default:return WL(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return BL(r);case"xxxx":case"xx":return WL(r);default:return WL(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+LL(r,":");default:return"GMT"+WL(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+LL(r,":");default:return"GMT"+WL(r,":")}},t:function(e,t,n){return RL(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return RL(+e,t.length)}};function LL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),a=r%60;return 0===a?n+String(o):n+String(o)+t+RL(a,2)}function BL(e,t){if(e%60===0){return(e>0?"-":"+")+RL(Math.abs(e)/60,2)}return WL(e,t)}function WL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+RL(Math.trunc(r/60),2)+t+RL(r%60,2)}const UL=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},zL=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},HL={p:zL,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return UL(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",UL(r,t)).replace("{{time}}",zL(o,t))}},VL=/^D+$/,qL=/^Y+$/,GL=["D","DD","YY","YYYY"];function YL(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function KL(e){return!(!YL(e)&&"number"!==typeof e||isNaN(+mL(e)))}const $L=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,XL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,QL=/^'([^]*?)'?$/,JL=/''/g,ZL=/[a-zA-Z]/;function eB(e,t,n){var r,o,a,i,s,u,l,c,d,f,h,p,m,v;const g=dL(),y=null!==(r=null!==(o=null===n||void 0===n?void 0:n.locale)&&void 0!==o?o:g.locale)&&void 0!==r?r:lL,b=null!==(a=null!==(i=null!==(s=null!==(u=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==u?u:null===n||void 0===n||null===(l=n.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==s?s:g.firstWeekContainsDate)&&void 0!==i?i:null===(c=g.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:1,x=null!==(d=null!==(f=null!==(h=null!==(p=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==p?p:null===n||void 0===n||null===(m=n.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==h?h:g.weekStartsOn)&&void 0!==f?f:null===(v=g.locale)||void 0===v||null===(v=v.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==d?d:0,w=mL(e,null===n||void 0===n?void 0:n.in);if(!KL(w))throw new RangeError("Invalid time value");let C=t.match(XL).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,HL[t])(e,y.formatLong)}return e})).join("").match($L).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:tB(e)};if(FL[t])return{isToken:!0,value:e};if(t.match(ZL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));y.localize.preprocessor&&(C=y.localize.preprocessor(w,C));const k={firstWeekContainsDate:b,weekStartsOn:x,locale:y};return C.map((r=>{if(!r.isToken)return r.value;const o=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return qL.test(e)}(o))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return VL.test(e)}(o))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),GL.includes(e))throw new RangeError(r)}(o,t,String(e));return(0,FL[o[0]])(w,o,y.localize,k)})).join("")}function tB(e){const t=e.match(QL);return t?t[1].replace(JL,"'"):e}const nB=()=>{let{token:e}=fn((e=>e.auth)),t=(0,a.useRef)(null),n=(0,a.useRef)(null);const[r,o]=(0,a.useState)(null);(0,a.useEffect)((()=>{e&&i("/")}),[e]);let i=Ye(),s=wn(),[u,l]=(0,a.useState)({password:"",confirmPassword:"",firstName:"",email:"",gender:"",surname:""}),c=e=>{let t=e.currentTarget.name,n=e.currentTarget.value;"email"==t&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?e.target.classList.remove("is-invalid"):e.target.classList.add("is-invalid")),"confirmPassword"==t&&(u.password===n?e.target.classList.remove("is-invalid"):e.target.classList.add("is-invalid")),console.log(d(d({},u),{},{[t]:n})),l((e=>d(d({},e),{},{[t]:n})))},[f,h]=(0,a.useState)({}),p=(0,a.useCallback)((async e=>{try{aa.post("/auth/signup",u).then((e=>{if(201===e.status){_n()("#signup-form input").val(""),_n()(".signup-container").fadeOut("fast");let t=JSON.stringify(e.data);localStorage.setItem("user",t),s(va(e.data.accessToken)),window.location.reload()}else h(e.data)}))}catch(e){console.log(e)}})),m=(0,a.useCallback)((e=>{i("/ikramul-islam")}));return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{className:"signup-container",children:[(0,Ot.jsxs)("div",{id:"signup-form",children:[(0,Ot.jsx)("h1",{className:"text-center login-heading primary-color mb-3 fw-bold",children:"ICS - Signup"}),(0,Ot.jsxs)("div",{className:"forms-container",children:[(0,Ot.jsxs)("div",{className:"full-name",children:[(0,Ot.jsx)("input",{onChange:c,name:"firstName",className:"first-name field",type:"text",placeholder:"First Name"}),(0,Ot.jsx)("input",{name:"surname",onChange:c,className:"surname field",type:"text",placeholder:"Surame"})]}),(0,Ot.jsxs)("div",{className:"form-group",children:[(0,Ot.jsx)("input",{onChange:c,name:"email",className:"email field",type:"text",placeholder:"Email address or phone number"}),(0,Ot.jsx)("div",{class:"invalid-feedback pb-2 fw-bold",children:"Please provide a valid email."})]}),(0,Ot.jsx)("input",{onChange:c,ref:t,name:"password",type:"password",className:"password field",placeholder:"Password"}),(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("input",{onChange:c,ref:n,name:"confirmPassword",type:"password",className:"confirm-password field",placeholder:"Confirm Password"}),(0,Ot.jsx)("div",{class:"invalid-feedback pb-2 fw-bold",children:"Please Match Password With Confirm Password."})]}),u.password.length>0&&(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)(QF,{rules:["minLength","specialChar","number","capital"],minLength:6,value:u.password,onChange:e=>{t.current.value.length>0&&(e?t.current.classList.remove("is-invalid"):t.current.classList.add("is-invalid"))},className:"my-3"})}),(0,Ot.jsx)(ZF(),{selected:new Date,onChange:e=>{let t=eB(e,"dd/MM/yyyy");console.log(d(d({},u),{},{DOB:t})),l(d(d({},u),{},{DOB:t}))},dateFormat:"dd/MM/yyyy",placeholderText:"Select a date",name:"DOB",className:"field w-100"}),(0,Ot.jsxs)("div",{className:"gender-container",children:[(0,Ot.jsx)("div",{className:"field-title",children:"Gender"}),(0,Ot.jsxs)("div",{className:"radio-container",children:[(0,Ot.jsx)("label",{htmlFor:"genderMale",children:"Male"}),(0,Ot.jsx)("input",{onFocus:c,type:"radio",id:"genderMale",name:"gender",value:"male"}),(0,Ot.jsx)("label",{htmlFor:"genderFemale",children:"Female"}),(0,Ot.jsx)("input",{onFocus:c,type:"radio",name:"gender",id:"genderFemale",value:"female"}),(0,Ot.jsx)("label",{htmlFor:"genderCustom",children:"Custom"}),(0,Ot.jsx)("input",{onFocus:c,type:"radio",name:"gender",id:"genderCustom",value:"custom"})]})]}),(0,Ot.jsx)("p",{style:{color:"red"},children:f.message}),(0,Ot.jsx)("input",{onClick:p,type:"submit",className:"submit-button field",value:"Sign UP"})]}),(0,Ot.jsxs)("div",{onClick:e=>i("/login"),className:"login-button",children:[(0,Ot.jsx)("i",{className:"fa fa-arrow-alt-circle-left"})," Login"]})]}),(0,Ot.jsx)("div",{className:"text-center",children:(0,Ot.jsxs)("div",{onClick:m.bind(void 0),className:"btn btn-primary mt-2 text-center",children:["View Ikram's Portfolio ",(0,Ot.jsx)("i",{className:"fa fa-arrow-alt-circle-right"})]})})]})})};const rB=e=>{let t=wn(),n=Ye(),{token:r}=fn((e=>e.auth));(0,a.useEffect)((()=>{r&&n("/")}),[r]);let[o,i]=(0,a.useState)({}),s=e=>{let t=e.target.name,n=e.target.value;i((e=>d(d({},e),{},{[t]:n})))},[u,l]=(0,a.useState)({}),c=(0,a.useCallback)((async e=>{try{let e=await aa.post("auth/login",o);if(202===e.status){let r=JSON.stringify(e.data);t(va(e.data.accessToken)),localStorage.setItem("user",r),n("/"),window.location.reload()}else l({message:e.data.message})}catch(u){console.log(u)}})),f=(0,a.useCallback)((e=>{n("/ikramul-islam")}));return(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"login",children:[(0,Ot.jsxs)("div",{className:"login-container",children:[(0,Ot.jsx)("div",{className:"logo-container text-center",children:(0,Ot.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/05/ics_logo_out_transparent.png",alt:"Connect Logo"})}),(0,Ot.jsxs)("div",{id:"login-form",children:[(0,Ot.jsx)("h1",{className:"text-center login-heading primary-color mb-3 fw-bold",children:"Connect - Login"}),(0,Ot.jsxs)("div",{className:"forms-container",children:[(0,Ot.jsx)("input",{onChange:s,className:"email",name:"email",type:"text",placeholder:"Email address or phone number"}),(0,Ot.jsx)("input",{onChange:s,type:"password",name:"password",className:"password",placeholder:"Password"}),(0,Ot.jsx)("p",{id:"loginErrorMsg",style:{color:"red"},children:u.message}),(0,Ot.jsx)("input",{type:"submit",onClick:c,className:"submit-button",value:"Login"}),(0,Ot.jsx)("span",{className:"forgot-password",children:"Forgotten password?"})]}),(0,Ot.jsxs)("div",{onClick:e=>n("/signup"),className:"create-account-button",children:["Create new account ",(0,Ot.jsx)("i",{className:"fa fa-arrow-alt-circle-right"})]})]})]}),(0,Ot.jsx)("div",{className:"text-center",children:(0,Ot.jsxs)("div",{onClick:f.bind(void 0),className:"btn btn-primary mt-2 text-center",children:["View Ikram's Portfolio ",(0,Ot.jsx)("i",{className:"fa fa-arrow-alt-circle-right"})]})})]})})};const oB=e=>{let[t,n]=(0,a.useState)(!1),[r,o]=(0,a.useState)((null===e||void 0===e?void 0:e.profilePic)||"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png"),i=fn((e=>e.profile)),s=e.type,u=e.fullName,l=e.id?e.id:"",c=!!e.profileReqs&&e.profileReqs,d=c&&c.includes(i._id);(0,a.useEffect)((()=>{e.profilePic&&Tn(r,n)}),[e]),(0,a.useEffect)((()=>{t&&o(e.profilePic)}),[t]);let f=async e=>{200===(await aa.post("/friend/reqAccept",{profile:l})).status&&(_n()(e.target).text("Request Accepted"),_n()(e.target).parents(".friend-grid-item").hide())},h=async e=>{try{let t=e.currentTarget;await aa.post("/friend/reqDelete",{profile:l});_n()(t).parents(".friend-grid-item ").hide()}catch(t){console.log(t)}},p=async e=>{try{let t=e.target;aa.post("/friend/sendRequest",{profile:l});_n()(t).text("Request Sent"),_n()(t).parents(".friend-grid-item").fadeOut()}catch(t){console.log(t)}},m=async e=>{let t=e.currentTarget;try{aa.post("/friend/removeRequest",{profile:l});_n()(t).siblings(".add-friend").text("Add Friend"),!d&&_n()(t).parents(".friend-grid-item").fadeOut()}catch(n){console.log(n)}};return"req"===s?(0,Ot.jsx)(a.Fragment,{children:1==t?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"friend-grid-item request",children:[(0,Ot.jsx)(_t,{to:"/".concat(l,"/"),children:(0,Ot.jsx)("div",{className:"profile-picture",alt:"profile pic",style:{backgroundImage:"url(".concat(r,")")}})}),(0,Ot.jsxs)("div",{className:"grid-body",children:[(0,Ot.jsx)(_t,{to:"/".concat(l,"/"),children:(0,Ot.jsx)("h5",{className:"profile-name",children:u})}),(0,Ot.jsx)("div",{onClick:f,className:"primary-button button",children:"Confirm"}),(0,Ot.jsx)("div",{onClick:h,className:"button",children:"Delete"})]})]})}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"friend-grid-item request",children:[(0,Ot.jsx)(_t,{to:"/".concat(l,"/"),children:(0,Ot.jsx)(xF,{})}),(0,Ot.jsxs)("div",{className:"grid-body",children:[(0,Ot.jsx)(_t,{to:"/".concat(l,"/"),children:(0,Ot.jsx)("h5",{className:"profile-name",children:u})}),(0,Ot.jsx)("div",{onClick:f,className:"primary-button button",children:"Confirm"}),(0,Ot.jsx)("div",{onClick:h,className:"button",children:"Delete"})]})]})})}):(0,Ot.jsx)(a.Fragment,{children:t?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"friend-grid-item suggest",children:[(0,Ot.jsx)(_t,{to:"/".concat(l,"/"),children:(0,Ot.jsx)("div",{className:"profile-picture",alt:"profile pic",style:{backgroundImage:"url(".concat(r,")")}})}),(0,Ot.jsxs)("div",{className:"grid-body",children:[(0,Ot.jsx)(_t,{to:"/".concat(l,"/"),children:(0,Ot.jsx)("h5",{className:"profile-name",children:u})}),(0,Ot.jsx)("div",{onClick:p,className:"primary-button add-friend button",children:d?"Request Sent":"Add Frind"}),(0,Ot.jsx)("div",{onClick:m,className:"button remove-friend",children:"Remove"})]})]})}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"friend-grid-item suggest",children:[(0,Ot.jsx)(_t,{to:"/".concat(l,"/"),children:(0,Ot.jsx)(xF,{})}),(0,Ot.jsxs)("div",{className:"grid-body",children:[(0,Ot.jsx)(_t,{to:"/".concat(l,"/"),children:(0,Ot.jsx)("h5",{className:"profile-name",children:u})}),(0,Ot.jsx)("div",{onClick:p,className:"primary-button add-friend button",children:d?"Request Sent":"Add Frind"}),(0,Ot.jsx)("div",{onClick:m,className:"button remove-friend",children:"Remove"})]})]})})})},aB=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Ot.jsx)("div",{className:"friend-grid-item",style:{minHeight:"unset"},children:(0,Ot.jsxs)("div",{className:"skeleton-card",style:{marginBottom:"0px"},children:[(0,Ot.jsx)("div",{className:"skeleton-main",style:{marginBottom:"0",height:"270px"}}),(0,Ot.jsxs)("div",{className:"skeleton-footer",style:{flexDirection:"column",marginTop:"10px"},children:[(0,Ot.jsx)("div",{style:{display:"block"},className:"skeleton-line small w-100 py-2 d-block button mb-1"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("div",{className:"skeleton-line small w-100 py-2 d-block button mb-1"})]})]},t)})))};const iB=()=>{let[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{aa.get("/friend/getRequest/").then((e=>{t(e.data),r(e.data.length>0)})).catch((e=>{console.log(e)}))}),[]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"friends-container",children:[(0,Ot.jsxs)("div",{className:"heading",children:[(0,Ot.jsx)("h4",{className:"heading-title",children:"Friend Requests"}),(0,Ot.jsx)(_t,{to:"/friends/requests",className:"view-more-btn",children:"See All"})]}),e.length>0?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"friend-grid-container",children:[e.map(((e,t)=>(0,Ot.jsx)(oB,{id:e._id,profilePic:e.profilePic,fullName:e.user.firstName+" "+e.user.surname,type:"req"},t))),0===e.length&&(0,Ot.jsx)("h4",{className:"data-not-found text-center",children:"You don't have any Friend Request to show"})]})}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"friend-grid-container",children:n?(0,Ot.jsx)(aB,{count:4}):(0,Ot.jsx)("h4",{className:"data-not-found text-center",children:"You don't have any Friend Request to show"})})})]})})};const sB=()=>{let e=fn((e=>e.profile)),[t,n]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{aa.get("/friend/getSuggetions/",{params:{profile:e._id}}).then((e=>{200===e.status&&(o(0!=e.data.length),n(e.data))})).catch((e=>{console.log(e)}))}),[e._id]),(0,a.useEffect)((()=>{}),[]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsxs)("div",{id:"friends-container",className:"mb-5",children:[(0,Ot.jsx)("div",{className:"heading",children:(0,Ot.jsx)("h4",{className:"heading-title",children:"People You May Know"})}),t.length>0?(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsxs)("div",{className:"friend-grid-container",children:[t.map(((t,n)=>e.friendReqs&&e.friendReqs.includes(t._id)?(0,Ot.jsx)(oB,{profileReqs:t.friendReqs,type:"req",id:t._id,profilePic:t.profilePic,fullName:t.user.firstName+" "+t.user.surname},n):(0,Ot.jsx)(oB,{profileReqs:t.friendReqs,type:"sug",id:t._id,profilePic:t.profilePic,fullName:t.user.firstName+" "+t.user.surname},n))),0===t.length&&(0,Ot.jsx)("h4",{className:"data-not-found text-center",children:"You don't have any Friends to Suggest"})]})}):(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"friend-grid-container",children:r?(0,Ot.jsx)(aB,{count:4}):(0,Ot.jsx)("h4",{className:"data-not-found text-center",children:"You don't have any Friends to Suggest"})})})]})})};const uB=()=>(0,Ot.jsxs)(a.Fragment,{children:[(0,Ot.jsx)(iB,{}),(0,Ot.jsx)(sB,{})]}),lB="GET_PROFILE_REQ",cB="GET_PROFILE_SUCCESS",dB="GET_PROFILE_FAILED",fB=e=>{let t=e.profilePic,n=e.coverPic,r=d(d({},e),{},{coverPic:n,profilePic:t});return{type:cB,payload:r}},hB=()=>{(0,a.useEffect)((()=>{}),[]);let e=(0,a.useCallback)((async e=>{_n()(e.currentTarget).addClass("active"),_n()(e.currentTarget).siblings().removeClass("active")}));return(0,Ot.jsx)("div",{className:"setting-page",children:(0,Ot.jsxs)("div",{className:"container py-3",children:[(0,Ot.jsx)("div",{className:"row bb",children:(0,Ot.jsx)("div",{className:"col",children:(0,Ot.jsx)("h1",{className:"primary-color mb-3 py-0",children:" Settings Page"})})}),(0,Ot.jsxs)("div",{className:"row py-3",children:[(0,Ot.jsx)("div",{className:"col-md-3 br",children:(0,Ot.jsx)("div",{className:"setting-groups-container",children:(0,Ot.jsxs)("ul",{className:"setting-groups",children:[(0,Ot.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item active",children:(0,Ot.jsxs)(_t,{to:"/settings",children:[(0,Ot.jsx)("span",{children:"Profile"}),(0,Ot.jsx)("span",{children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Ot.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Ot.jsxs)(_t,{to:"privacy",children:[(0,Ot.jsx)("span",{children:"Privacy"}),(0,Ot.jsx)("span",{children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Ot.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Ot.jsxs)(_t,{to:"notification",children:[(0,Ot.jsx)("span",{children:"Notification"}),(0,Ot.jsx)("span",{children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Ot.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Ot.jsxs)(_t,{to:"account",children:[(0,Ot.jsx)("span",{children:"Account"}),(0,Ot.jsx)("span",{children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Ot.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Ot.jsxs)(_t,{to:"preference",children:[(0,Ot.jsx)("span",{children:"Preference"}),(0,Ot.jsx)("span",{children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Ot.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Ot.jsxs)(_t,{to:"message",children:[(0,Ot.jsx)("span",{children:"Messaging"}),(0,Ot.jsx)("span",{children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Ot.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Ot.jsxs)(_t,{to:"sound",children:[(0,Ot.jsx)("span",{children:"Sounds"}),(0,Ot.jsx)("span",{children:(0,Ot.jsx)("i",{className:"fa fa-chevron-right"})})]})})]})})}),(0,Ot.jsx)("div",{className:"col-md-6",children:(0,Ot.jsx)(ct,{})})]})]})})},pB=()=>(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)("h1",{className:"text-center py-4",children:" Ikramul Islam"})}),mB="LOAD_SETTINGS",vB=e=>({type:mB,payload:e}),gB=()=>{let e=fn((e=>e.profile)),t=(fn((e=>e.setting)),wn()),[n,r]=(0,a.useState)({firstName:"",surname:"",nickname:"",username:"",workPlaces:[{}],schools:[{}],displayName:""});(0,a.useEffect)((()=>{null!==e&&void 0!==e&&e.user&&r({firstName:e.user.firstName||"",surname:e.user.surname||"",nickname:e.nickname||"",username:e.username||"",displayName:e.displayName||""})}),[e]);let o=(0,a.useCallback)((async e=>{r(d(d({},n),{},{[e.target.name]:e.target.value}))})),i=(0,a.useCallback)((async r=>{r.preventDefault();let o=await aa.post("/profile/update",n);200===o.status&&(t(fB(o.data)),z((0,Ot.jsx)(_t,{className:"text-decoration-none text-secondary",to:"",children:(0,Ot.jsx)("div",{style:{color:"blue",fontWeight:"bold"},children:(0,Ot.jsxs)("div",{className:"row d-flex align-items-center",children:[(0,Ot.jsx)("div",{className:"col-3",children:(0,Ot.jsx)("img",{className:"rounded-circle w-100",src:e.profilePic,alt:"Connect"})}),(0,Ot.jsxs)("div",{className:"col-9",children:[e.fullName&&(0,Ot.jsx)("h3",{className:"text-success fs-4 mb-0",children:e.fullName}),(0,Ot.jsx)("p",{className:"text-small text-secondary fs-6 text-muted mb-0",children:"Your Profile Updated Successfully"})]})]})})})))}));const[s,u]=(0,a.useState)([{}]),[l,c]=(0,a.useState)([{}]);(0,a.useEffect)((()=>{u((null===e||void 0===e?void 0:e.workPlaces)||[{}]),c((null===e||void 0===e?void 0:e.schools)||[{}])}),[e]);return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"profile-setting",children:(0,Ot.jsxs)("div",{className:"setting-field-container",children:[(0,Ot.jsx)("h3",{className:"text-center",children:"Profile Settings"}),(0,Ot.jsxs)("form",{children:[(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"firstName",children:"First Name"}),(0,Ot.jsx)("input",{type:"text",onChange:o.bind(void 0),className:"form-control",id:"firstName",value:n.firstName,name:"firstName",placeholder:"Enter Frist Name"})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"surname",children:"Surname"}),(0,Ot.jsx)("input",{type:"text",onChange:o.bind(void 0),className:"form-control",value:n.surname,id:"surname",name:"surname",placeholder:"Enter Last Name"})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"username",children:"Userame"}),(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("div",{className:"input-group-prepend",children:(0,Ot.jsx)("span",{className:"input-group-text",children:"@"})}),(0,Ot.jsx)("input",{type:"text",className:"form-control",value:n.username,name:"username",onChange:o.bind(void 0),id:"username","aria-describedby":"emailHelp",placeholder:"Enter Username"})]})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"nickname",children:"Nickname"}),(0,Ot.jsx)("input",{type:"text",onChange:o.bind(void 0),value:n.nickname,className:"form-control",id:"nickname",name:"nickname",placeholder:"Enter Nickname"})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"displayName",children:"Display Name"}),(0,Ot.jsx)("input",{type:"text",onChange:o.bind(void 0),value:n.displayName,className:"form-control",id:"displayName",name:"displayName",placeholder:"Enter Display Name"})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"presentAddress",children:"Present Address"}),(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("div",{className:"input-group-prepend",children:(0,Ot.jsx)("span",{className:"input-group-text py-3",children:(0,Ot.jsx)("i",{className:"fas fa-home"})})}),(0,Ot.jsx)("input",{type:"text",value:e.presentAddress,onChange:o.bind(void 0),className:"form-control",id:"presentAddress",name:"presentAddress",placeholder:"Enter Present Address"})]})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"permanentAddress",children:"Permanent Address"}),(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("div",{className:"input-group-prepend",children:(0,Ot.jsxs)("span",{className:"input-group-text py-3",children:[" ",(0,Ot.jsx)("i",{className:"fa fa-globe"})]})}),(0,Ot.jsx)("input",{value:e.permanentAddress,type:"text",onChange:o.bind(void 0),className:"form-control",id:"permanentAddress",name:"permanentAddress",placeholder:"Enter Permanent Address"})]})]}),(0,Ot.jsx)("hr",{}),(0,Ot.jsxs)("div",{className:"multiple-input-container schools-container my-3 p-3",children:[(0,Ot.jsx)("h4",{className:"text-center",children:"Your Schools"}),l.map(((e,t)=>(0,Ot.jsxs)("div",{className:"row border border-secondary border-round my-2",children:[(0,Ot.jsx)("div",{className:"col",children:(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{className:"form-label",children:"Degree"}),(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("div",{className:"input-group-prepend",children:(0,Ot.jsx)("span",{className:"input-group-text py-3",children:(0,Ot.jsx)("i",{className:"fas fa-graduation-cap"})})}),(0,Ot.jsx)("input",{type:"text",value:e.degree,onChange:e=>((e,t)=>{let o=[...l],a=t.currentTarget.dataset.index;o[a]={degree:t.target.value,name:l[a].name},c(o);let i=d(d({},n),{},{schools:o.filter(((e,t)=>""!==e.name||""!==e.degree))});r(i)})(0,e),placeholder:"Your Degree",className:"form-control",name:"degree","data-index":t})]})]},t)}),(0,Ot.jsx)("div",{className:"col",children:(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{className:"form-label",children:"SChool Name"}),(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("div",{className:"input-group-prepend",children:(0,Ot.jsx)("span",{className:"input-group-text py-3",children:(0,Ot.jsx)("i",{className:"fas fa-graduation-cap"})})}),(0,Ot.jsx)("input",{type:"text",value:e.name,onChange:e=>((e,t)=>{let o=[...l],a=t.currentTarget.dataset.index;o[a]={degree:l[a].degree,name:t.target.value},c(o);let i=d(d({},n),{},{schools:o.filter(((e,t)=>""!==e.name||""!==e.degree))});r(i)})(0,e),placeholder:"School Name",className:"form-control",name:"name","data-index":t})]})]},t)})]}))),(0,Ot.jsx)("button",{className:"btn btn-secondary",onClick:(e=>{e.preventDefault(),c([...l,{name:"",degree:""}])}).bind(void 0),children:"".concat(l.length>0?"Add Another School":"Add School")})]}),(0,Ot.jsx)("hr",{}),(0,Ot.jsxs)("div",{className:"multiple-input-container workplaces-container my-3 p-3",children:[(0,Ot.jsx)("h4",{className:"text-center",children:"Your Workplaces"}),s.map(((e,t)=>(0,Ot.jsxs)("div",{className:"row border border-secondary border-round my-2",children:[(0,Ot.jsx)("div",{className:"col",children:(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{className:"form-label",children:"Designation"}),(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("div",{className:"input-group-prepend",children:(0,Ot.jsx)("span",{className:"input-group-text py-3",children:(0,Ot.jsx)("i",{className:"fas fa-briefcase"})})}),(0,Ot.jsx)("input",{type:"text",value:e.designation,onChange:e=>((e,t)=>{const o=[...s];let a=t.currentTarget.dataset.index;o[a]={designation:t.target.value,name:s[a].name},u(o);let i=d(d({},n),{},{workPlaces:o.filter(((e,t)=>""!==e.name||""!==e.designation))});r(i)})(0,e),placeholder:"Your Designation",className:"form-control",name:"designation","data-index":t})]})]},t)}),(0,Ot.jsx)("div",{className:"col",children:(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{className:"form-label",children:"Company Name"}),(0,Ot.jsxs)("div",{className:"input-group",children:[(0,Ot.jsx)("div",{className:"input-group-prepend",children:(0,Ot.jsx)("span",{className:"input-group-text py-3",children:(0,Ot.jsx)("i",{className:"fas fa-briefcase"})})}),(0,Ot.jsx)("input",{type:"text",value:e.name,onChange:e=>((e,t)=>{const o=[...s];let a=t.currentTarget.dataset.index;o[a]={name:t.target.value,designation:s[a].designation},u(o);let i=d(d({},n),{},{workPlaces:o.filter(((e,t)=>""!==e.name||""!==e.designation))});r(i)})(0,e),placeholder:"Workplace Name",className:"form-control",name:"name","data-index":t})]})]},t)})]}))),(0,Ot.jsx)("button",{className:"btn btn-secondary",onClick:(e=>{e.preventDefault(),u([...s,{name:"",designation:""}])}).bind(void 0),children:"".concat(s.length>0?"Add Another Workplace":"Add Workplace")})]}),(0,Ot.jsx)("button",{type:"submit",onClick:i.bind(void 0),className:"btn btn-primary",children:"Save Settings"})]})]})})})},yB=()=>{let[e,t]=(0,a.useState)({}),n=(0,a.useCallback)((async n=>{let r=n.target.id,o=n.target.value;t(d(d({},e),{},{[r]:o}))})),r=(0,a.useCallback)((async t=>{if(t.preventDefault(),e.newPassword!==e.confirmPassword)return alert("Your New password and Confirm Password is not same");let n=await aa.post("auth/changePass",e);if(400==n.status)return alert("Your Current password is invalid");if(200==n.status){let e=JSON.stringify(n.data);localStorage.setItem("user",e),window.location.reload()}})),o=(0,a.useCallback)((async e=>{e.preventDefault();let t=JSON.parse(localStorage.getItem("user")),n=await aa.post("auth/delete",{userData:t});200==n.status&&(localStorage.removeItem("user"),alert(n.data.message),window.location.reload())}));return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"profile-setting",children:(0,Ot.jsxs)("div",{className:"setting-field-container",children:[(0,Ot.jsx)("h3",{className:"text-center",children:"Account Settings"}),(0,Ot.jsxs)("form",{children:[(0,Ot.jsx)("h3",{className:"fs-4",children:"Change Password"}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"currentPassword",children:"Current Password"}),(0,Ot.jsx)("input",{onChange:n.bind(void 0),type:"password",className:"form-control",id:"currentPassword",placeholder:"Current Password"})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"newPassword",children:"New Password"}),(0,Ot.jsx)("input",{onChange:n.bind(void 0),type:"password",className:"form-control",id:"newPassword",placeholder:"New Password"})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"confirmPassword",children:"Confirm Password"}),(0,Ot.jsx)("input",{onChange:n.bind(void 0),type:"password",className:"form-control",id:"confirmPassword",placeholder:"Confirm Password"})]}),(0,Ot.jsx)("button",{type:"submit",onClick:r.bind(void 0),className:"btn btn-primary",children:"Save Settings"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("button",{onClick:o.bind(void 0),className:"btn btn-danger mt-3",children:"Delete My Account"})]})]})})})},bB=()=>(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"profile-setting",children:(0,Ot.jsxs)("div",{className:"setting-field-container",children:[(0,Ot.jsx)("h3",{className:"text-center",children:"Privacy Settings"}),(0,Ot.jsxs)("form",{children:[(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"username",children:"Who Can See you Posts?"}),(0,Ot.jsxs)("select",{className:"form-control",children:[(0,Ot.jsx)("option",{value:"om",children:"Only Me"}),(0,Ot.jsx)("option",{value:"fof",children:"Friend of Friends"}),(0,Ot.jsx)("option",{value:"public",children:"Public"})]})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"username",children:"Who Can Sent you Friend Request?"}),(0,Ot.jsxs)("select",{className:"form-control",children:[(0,Ot.jsx)("option",{value:"om",children:"Only Me"}),(0,Ot.jsx)("option",{value:"fof",children:"Friend of Friends"}),(0,Ot.jsx)("option",{value:"public",children:"Public"})]})]}),(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"username",children:"Who Can Post on your Timeline?"}),(0,Ot.jsxs)("select",{className:"form-control",children:[(0,Ot.jsx)("option",{value:"om",children:"Only Me"}),(0,Ot.jsx)("option",{value:"fof",children:"Friend of Friends"}),(0,Ot.jsx)("option",{value:"public",children:"Public"})]})]}),(0,Ot.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})}),xB=()=>(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"message-setting",children:(0,Ot.jsxs)("div",{className:"setting-field-container",children:[(0,Ot.jsx)("h3",{className:"text-center",children:"Notification Settings"}),(0,Ot.jsxs)("form",{children:[(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"friendRewReceived"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"friendRewReceived",children:"Friends Request Received"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"friendRewReceived",className:"form-text text-muted",children:"We Will sent you notification for each new Friends Request Received"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"friendRewAccepted"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"friendRewAccepted",children:"Friends Request Accpeted"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"ifriendRewAcceptedHelp",className:"form-text text-muted",children:"We Will sent you notification for each new Friends Request Accpeted"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newMessageReceived"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"newMessageReceived",children:"New Message Received"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"isNotificationHelp",className:"form-text text-muted",children:"We Will sent you notification for each Message Received"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendPost"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"newFriendPost",children:"New Frieds's Post"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"isNotificationHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Post"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendStory"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"newFriendStory",children:"New Frieds's Story"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"isNotificationHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Story"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendWatch"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"newFriendWatch",children:"New Frieds's Watch"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"newFriendWatchHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Watch"})]}),(0,Ot.jsx)("hr",{}),(0,Ot.jsx)("h4",{className:"text-center",children:"Email Notifications"}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"friendRewReceivedEmail"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"friendRewReceivedEmail",children:"Friends Request Received"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"friendRewReceivedEmail",className:"form-text text-muted",children:"We Will sent you notification for each new Friends Request Received"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"friendRewAcceptedEmail"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"friendRewAcceptedEmail",children:"Friends Request Accpeted"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"ifriendRewAcceptedEmailHelp",className:"form-text text-muted",children:"We Will sent you notification for each new Friends Request Accpeted"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newMessageReceivedEmail"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"newMessageReceivedEmail",children:"New Message Received"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"isNotificationEmailHelp",className:"form-text text-muted",children:"We Will sent you notification for each Message Received"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendPostEmail"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"newFriendPostEmail",children:"New Frieds's Post"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"newFriendPostEmailHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Post"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendStoryEmail"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"newFriendStoryEmail",children:"New Frieds's Story"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"isNotificationHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Story"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendWatchEmail"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"newFriendWatchEmail",children:"New Frieds's Watch"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"newFriendWatchHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Watch"})]}),(0,Ot.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})}),wB=()=>{let e=wn(),t=fn((e=>e.setting)),n=(0,a.useCallback)((async t=>{let n=t.currentTarget.checked,r=await aa.post("setting/update",{isShareEmotion:n});200==r.status&&e(vB(r.data))})),r=(0,a.useCallback)((async t=>{let n=t.currentTarget.checked,r=await aa.post("setting/update",{showIsTyping:n});200==r.status&&e(vB(r.data))}));return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"message-setting",children:(0,Ot.jsxs)("div",{className:"setting-field-container",children:[(0,Ot.jsx)("h3",{className:"text-center",children:"Message Settings"}),(0,Ot.jsxs)("form",{children:[(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{checked:!0===t.showIsTyping,type:"checkbox",onChange:r.bind(void 0),className:"form-check-input",id:"showTyping"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"showTyping",children:"Show Typing"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"showTypingChangeText",className:"form-text text-muted",children:"It will show your typing message to your friends inbox before sending"})]}),(0,Ot.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Ot.jsx)("input",{checked:!0===t.isShareEmotion,type:"checkbox",onChange:n.bind(void 0),className:"form-check-input",id:"shareEmotionCheck"}),(0,Ot.jsx)("label",{className:"form-check-label",for:"shareEmotionCheck",children:"Share Face Mode"}),(0,Ot.jsx)("br",{}),(0,Ot.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll access your camera to recognize your mode by scanning your face"})]}),(0,Ot.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})})},CB=()=>{let e=fn((e=>e.setting)),t=wn(),[n,r]=(0,a.useState)({themeMode:e.themeMode||"dark"}),o=(0,a.useCallback)((async e=>{let t=e.target.name,n=e.target.value;r((e=>d(d({},e),{},{[t]:n})))})),i=(0,a.useCallback)((async e=>{e.preventDefault();let r=await aa.post("setting/update",d({},n));200==r.status&&t(vB(r.data))}));return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"profile-setting",children:(0,Ot.jsxs)("div",{className:"setting-field-container",children:[(0,Ot.jsx)("h3",{className:"text-center",children:"Preference Settings"}),(0,Ot.jsxs)("form",{children:[(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"themeMode",children:"Theme Mode"}),(0,Ot.jsxs)("select",{value:n.themeMode||"dark",onChange:o.bind(void 0),className:"form-control",name:"themeMode",id:"themeMode",children:[(0,Ot.jsx)("option",{value:"default",children:"Default"}),(0,Ot.jsx)("option",{value:"dark",children:"Dark"}),(0,Ot.jsx)("option",{value:"light",children:"Light"})]})]}),(0,Ot.jsx)("button",{onClick:i.bind(void 0),type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})})},kB=()=>{let e=fn((e=>e.setting)),t=wn(),[n,r]=(0,a.useState)({ringtone:e.ringtone});(0,a.useEffect)((()=>{e.ringtone>0&&r({ringtone:e.ringtone||1})}),[e]);let o=(0,a.useCallback)((async e=>{let t=e.target.name,n=e.target.value;r((e=>d(d({},e),{},{[t]:n})))})),i=(0,a.useCallback)((async e=>{e.preventDefault();let r=await aa.post("setting/update",d({},n));200==r.status&&t(vB(r.data))}));return(0,Ot.jsx)(Ot.Fragment,{children:(0,Ot.jsx)("div",{className:"profile-setting",children:(0,Ot.jsxs)("div",{className:"setting-field-container",children:[(0,Ot.jsx)("h3",{className:"text-center",children:"Sound Settings"}),(0,Ot.jsxs)("form",{children:[(0,Ot.jsxs)("div",{className:"form-group mb-2",children:[(0,Ot.jsx)("label",{for:"ringTone",children:"Calling Ringtones"}),(0,Ot.jsx)("select",{value:n.ringtone,onChange:o.bind(void 0),className:"form-control",name:"ringtone",id:"ringTone",children:jF.map(((e,t)=>(0,Ot.jsx)("option",{value:"".concat(e.id),children:e.name},t)))})]}),(0,Ot.jsx)("button",{onClick:i.bind(void 0),type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})})};function SB(e,t){new Notification("New Message!",{body:e.message,icon:"https://programmerikram.com/wp-content/uploads/2025/03/ics_logo.png"}).onclick=()=>{window.open("".concat("https://programmerikram.com/ics/","/message/").concat(t))}}const EB=()=>{const e=wn();let{token:t}=fn((e=>e.auth));const n=fn((e=>e.option.isLoading)),r=(fn((e=>e.setting)),$e()),o=(0,a.useRef)(null),[i,s]=(0,a.useState)(!document.hidden),u=JSON.parse(localStorage.getItem("user")||"{}"),l=u.profile;(0,a.useEffect)((()=>{t&&aa.get("setting",{params:{profileId:l}}).then((t=>{200==t.status&&e(vB(t.data))}))}),[t]);const c=(e,t,n,r)=>{null===o||void 0===o||o.current.play(),z((0,Ot.jsx)(_t,{className:"text-decoration-none text-secondary",to:"".concat(r),children:(0,Ot.jsx)("div",{style:{color:"blue",fontWeight:"bold"},children:(0,Ot.jsxs)("div",{className:"row d-flex align-items-center",children:[(0,Ot.jsx)("div",{className:"col-3",children:(0,Ot.jsx)("img",{className:"rounded-circle w-100",src:n,alt:"connect"})}),(0,Ot.jsxs)("div",{className:"col-9",children:[t&&(0,Ot.jsx)("h3",{className:"text-success mb-0",children:t}),(0,Ot.jsx)("p",{className:"text-small text-secondary text-muted mb-0",children:e})]})]})})}))};return(0,a.useEffect)((()=>(Ui.emit("fetchNotifications",l),Ui.on("oldNotifications",(t=>{e($i(t.reverse(),!0))})),Ui.on("newNotification",(t=>{e({type:qi,payload:t}),c(t.text,!1,t.icon,t.link)})),Ui.emit("fetchMessages",l),Ui.on("oldMessages",(t=>{e(function(e){return{type:Zj,payload:e,reset:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}(t.reverse(),!0))})),Ui.on("newMessage",(t=>{e((e=>({type:Jj,payload:e}))(t)),c(t.text,!1,t.icon,t.link)})),Ui.on("bumpUser",((e,t)=>{c("".concat(t.fullName," Bumped you"),e.fullName,t.profilePic,"/message/"+t._id)})),()=>{Ui.off("oldNotifications"),Ui.off("newNotification"),Ui.off("oldMessages"),Ui.off("newMessage"),Ui.off("bumpUser")})),[Ui]),(0,a.useEffect)((()=>{const e=()=>{s(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[]),(0,a.useEffect)((()=>(Ui.on("notification",((t,n,r)=>{1==i?(c(t.message,n,r,"/message/"+t.senderId),e((e=>({type:eF,payload:e}))(t))):Notification&&"granted"===Notification.permission?SB(t):"denied"!==Notification.permission&&Notification.requestPermission().then((e=>{"granted"===e&&SB(t)}))})),Ui.on("speak_message",(e=>{(e=>{if(!e)return;const t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.rate=1,t.pitch=1,window.speechSynthesis.speak(t)})(e)})),()=>{Ui.off("notification"),Ui.off("speak_message")})),[Ui,i]),(0,a.useEffect)((()=>{var n;e((n=window.innerHeight,{type:Zi,payload:n})),e(ts(!1)),t&&(aa.post("/profile",{profile:l}).then((t=>{e({type:lB}),200===t.status&&e(fB(t.data))})).catch((t=>{e({type:dB,payload:t})})),window.location.pathname,setTimeout((()=>{Ui.emit("update_last_login",u.user_id)}),5e3))}),[r,t]),(0,Ot.jsxs)(a.Fragment,{children:[(0,Ot.jsx)("audio",{ref:o,src:"https://programmerikram.com/wp-content/uploads/2025/05/connect-message-sound.wav"}),(0,Ot.jsxs)(kt,{children:[n&&(0,Ot.jsx)("div",{id:"site-loader",children:(0,Ot.jsx)("div",{className:"loader-logo-container",children:(0,Ot.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/05/ics_logo_out_transparent.png",alt:"connect"})})}),(0,Ot.jsx)(ns,{}),(0,Ot.jsx)("div",{id:"main-container",className:n?"loading":"",children:(0,Ot.jsx)(ht,{children:(0,Ot.jsxs)(dt,{path:"/",children:[(0,Ot.jsx)(dt,{path:"login",element:(0,Ot.jsx)(rB,{})}),(0,Ot.jsx)(dt,{path:"signup",element:(0,Ot.jsx)(nB,{})}),(0,Ot.jsx)(dt,{index:!0,element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(_s,{})})}),(0,Ot.jsx)(dt,{path:"/ikramul-islam/",element:(0,Ot.jsx)(pB,{})}),(0,Ot.jsxs)(dt,{path:"/:profile/",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)($s,{})}),children:[(0,Ot.jsx)(dt,{index:!0,element:(0,Ot.jsx)(bF,{})}),(0,Ot.jsx)(dt,{path:"about",element:(0,Ot.jsx)(yF,{})}),(0,Ot.jsx)(dt,{path:"friends",element:(0,Ot.jsx)(kF,{})}),(0,Ot.jsx)(dt,{path:"images",element:(0,Ot.jsx)(MF,{})}),(0,Ot.jsx)(dt,{path:"videos",element:(0,Ot.jsx)(PF,{})})]}),(0,Ot.jsx)(dt,{path:"/story/",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(fF,{})}),children:" "}),(0,Ot.jsxs)(dt,{path:"/story/:storyId",children:[(0,Ot.jsx)(dt,{index:!0,element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(dF,{})})}),(0,Ot.jsx)(dt,{path:"comments/",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(vF,{})})}),(0,Ot.jsx)(dt,{path:"reacts/",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(mF,{})})})]}),(0,Ot.jsxs)(dt,{path:"/post/",children:[(0,Ot.jsx)(dt,{path:":postId",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(HF,{})})}),(0,Ot.jsx)(dt,{path:":postId/edit",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(HF,{})})}),(0,Ot.jsx)(dt,{path:":postId/comments",element:(0,Ot.jsx)(VF,{})}),(0,Ot.jsx)(dt,{path:":postId/reacts",element:(0,Ot.jsx)(qF,{})})]}),(0,Ot.jsxs)(dt,{path:"/friends/",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(Xs,{})}),children:[(0,Ot.jsx)(dt,{index:!0,element:(0,Ot.jsx)(uB,{})}),(0,Ot.jsx)(dt,{path:"requests",element:(0,Ot.jsx)(iB,{})}),(0,Ot.jsx)(dt,{path:"suggestions",element:(0,Ot.jsx)(sB,{})})]}),(0,Ot.jsx)(dt,{path:"/watch",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(iu,{})}),children:" "}),(0,Ot.jsx)(dt,{path:"/message",element:(0,Ot.jsx)(uF,{}),children:(0,Ot.jsx)(dt,{path:":profile/",element:(0,Ot.jsx)($s,{})})}),(0,Ot.jsx)(dt,{path:"/marketplace",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(su,{})}),children:" "}),(0,Ot.jsx)(dt,{path:"/groups",element:(0,Ot.jsx)(uu,{}),children:" "}),(0,Ot.jsx)(dt,{path:"/yt-download",element:(0,Ot.jsx)(lu,{}),children:" "}),(0,Ot.jsx)(dt,{path:"/settings",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(hB,{})})}),(0,Ot.jsxs)(dt,{path:"/settings/",element:(0,Ot.jsx)(ls,{children:(0,Ot.jsx)(hB,{})}),children:[(0,Ot.jsx)(dt,{index:!0,element:(0,Ot.jsx)(gB,{})}),(0,Ot.jsx)(dt,{path:"account",element:(0,Ot.jsx)(yB,{})}),(0,Ot.jsx)(dt,{path:"privacy",element:(0,Ot.jsx)(bB,{})}),(0,Ot.jsx)(dt,{path:"notification",element:(0,Ot.jsx)(xB,{})}),(0,Ot.jsx)(dt,{path:"message",element:(0,Ot.jsx)(wB,{})}),(0,Ot.jsx)(dt,{path:"preference",element:(0,Ot.jsx)(CB,{})}),(0,Ot.jsx)(dt,{path:"sound",element:(0,Ot.jsx)(kB,{})})]})]})})}),(0,Ot.jsx)(FF,{myId:l}),(0,Ot.jsx)(Z,{})]})]})};var _B=n(2285),NB=n.n(_B);window.process=NB();const TB=function(){let e=wn();const t=localStorage.getItem("user")||"{}",n=JSON.parse(t),{isExpired:r}=us(n.accessToken);return e(va(n.accessToken)),(0,a.useEffect)((()=>{r&&e(va(void 0))}),[r]),(0,Ot.jsx)(a.Fragment,{children:(0,Ot.jsx)(EB,{})})},RB=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:a,getTTFB:i}=t;n(e),r(e),o(e),a(e),i(e)}))};function DB(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var IB="function"===typeof Symbol&&Symbol.observable||"@@observable",AB=function(){return Math.random().toString(36).substring(7).split("").join(".")},OB={INIT:"@@redux/INIT"+AB(),REPLACE:"@@redux/REPLACE"+AB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+AB()}};function MB(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function PB(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(DB(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(DB(1));return n(PB)(e,t)}if("function"!==typeof e)throw new Error(DB(2));var o=e,a=t,i=[],s=i,u=!1;function l(){s===i&&(s=i.slice())}function c(){if(u)throw new Error(DB(3));return a}function d(e){if("function"!==typeof e)throw new Error(DB(4));if(u)throw new Error(DB(5));var t=!0;return l(),s.push(e),function(){if(t){if(u)throw new Error(DB(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),i=null}}}function f(e){if(!MB(e))throw new Error(DB(7));if("undefined"===typeof e.type)throw new Error(DB(8));if(u)throw new Error(DB(9));try{u=!0,a=o(a,e)}finally{u=!1}for(var t=i=s,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:OB.INIT}),(r={dispatch:f,subscribe:d,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(DB(10));o=e,f({type:OB.REPLACE})}})[IB]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(DB(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[IB]=function(){return this},e},r}function jB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function FB(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"===typeof o?o(n,r,e):t(o)}}}}var LB=FB();LB.withExtraArgument=FB;const BB=LB,WB={isLoggedIn:{},profile:{},error:null},UB={user:{},token:null};let zB=[];let HB={headerHeight:null,bodyHeight:null,isLoading:!0};let VB=[];const qB=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jj:let n=t.payload;return e.filter((e=>e._id===t.payload._id)).length>0?e:[...e,n];case Zj:let r=t.payload;return t.reset||!1?[...r]:[...e,...r];case eF:let o=t.payload,a=o.senderId,i=e.filter((e=>e.person._id!==a)),s=e.filter((e=>e.person._id===a));return s.messages=[o],[...s,...i];case tF:let u=t.payload,l=u.receiverId,c=e.filter((e=>e.person._id!==l)),d=e.filter((e=>e.person._id===l));return d.messages=[u],[...d,...c];default:return e}};let GB={isShareEmotion:!1,notification:!0,showTyping:!0};const YB=[],KB=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];0,"function"===typeof e[o]&&(n[o]=e[o])}var a,i=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:OB.INIT}))throw new Error(DB(12));if("undefined"===typeof n(void 0,{type:OB.PROBE_UNKNOWN_ACTION()}))throw new Error(DB(13))}))}(n)}catch(wu){a=wu}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,o={},s=0;s<i.length;s++){var u=i[s],l=n[u],c=e[u],d=l(c,t);if("undefined"===typeof d){t&&t.type;throw new Error(DB(14))}o[u]=d,r=r||d!==c}return(r=r||i.length!==Object.keys(e).length)?o:e}}({profile:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case lB:return d(d({},e),{},{isLoading:!0});case cB:return d(d({},e),{},{isLoading:!1},t.payload);case dB:return d(d({},e),{},{isLoading:!1,error:t.payload});default:return e}},auth:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pa:return d(d({},e),{},{token:t.payload});case ma:return{token:void 0};case"GET_USER":return d(d({},e),{},{user:t.payload.token});default:return e}},option:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:HB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ji:return d(d({},e),{},{headerHeight:t.payload});case es:return d(d({},e),{},{isLoading:t.payload});case Zi:return d(d({},e),{},{bodyHeight:t.payload});default:return e}},notification:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NOTIFICATIONS":return[...e];case qi:let n=t.payload;return e.filter((e=>e._id===t.payload._id)).length>0?e:[n,...e];case Gi:let r=t.payload;return t.reset||!1?[...r]:[...e,...r];case Yi:let o=t.payload,a=e.filter((e=>e._id!==o)),i=e.filter((e=>e._id===o));return i.length>0&&(i[0].isSeen=!0),[...a,i[0]];case Ki:let s=[];return e.map(((e,t)=>{s.push(d(d({},e),{},{isSeen:!0}))})),s;case"DELETE_NOTIFICATIONS":return[];default:return e}},message:qB,setting:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE_SHARE":return{isShareEmotion:t.payload};case"SET_NOTIFICATION":case"UPDATE_OPTION":break;case mB:return t.payload;default:return e}},post:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YB,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Es:return[...e,...t.payload];case"ADD_POST":return[...e,t.payload];case"REMOVE_POST":let n=t.payload.postId;return e.filter((e=>!e._id==n));default:return e}}}),$B=PB(KB,jB(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(DB(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(o)}));return r=jB.apply(void 0,a)(n.dispatch),d(d({},n),{},{dispatch:r})}}}(BB)));$B.subscribe((()=>{console.log($B.getState())}));const XB=$B;s.createRoot(document.getElementById("root")).render((0,Ot.jsx)(a.StrictMode,{children:(0,Ot.jsxs)(gn,{store:XB,children:[(0,Ot.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"}),(0,Ot.jsx)(TB,{})]})})),RB()})()})();
//# sourceMappingURL=main.c015ef81.js.map